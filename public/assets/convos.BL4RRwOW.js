var Bf=Object.defineProperty;var Jl=n=>{throw TypeError(n)};var qf=(n,e,t)=>e in n?Bf(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var un=(n,e,t)=>qf(n,typeof e!="symbol"?e+"":e,t),Ts=(n,e,t)=>e.has(n)||Jl("Cannot "+t);var he=(n,e,t)=>(Ts(n,e,"read from private field"),t?t.call(n):e.get(n)),yt=(n,e,t)=>e.has(n)?Jl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),it=(n,e,t,r)=>(Ts(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Kt=(n,e,t)=>(Ts(n,e,"access private method"),t);const Ba={add(n){document.body.classList.remove("no-"+n),document.body.classList.add("has-"+n)},has(n){return document.body.classList.contains("has-"+n)},remove(n){document.body.classList.add("no-"+n),document.body.classList.remove("has-"+n)}};Wu("mousemove","mouse");Wu("touchstart","touch");Ba.add("js");function Wu(n,e){const t=()=>{n!=="mousemove"&&Ba.add(e),n==="mousemove"&&!Ba.has("touch")&&Ba.add(e),document.removeEventListener(n,t)};document.addEventListener(n,t)}const Sr=2,xl=4,ls=8,Nn=16,zn=32,ka=64,cs=128,vn=512,$r=1024,qr=2048,Rn=4096,Yr=8192,Xn=16384,To=32768,$a=65536,Xl=1<<17,Gu=1<<18,Qa=1<<19,Ku=1<<20,ho=32768,Qi=1<<21,El=1<<22,Qn=1<<23,_a=Symbol("$state"),Vu=Symbol("legacy props"),jf=Symbol(""),La=new class extends Error{constructor(){super(...arguments);un(this,"name","StaleReactionError");un(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}},us=3,Aa=8,Yu=!1;var ds=Array.isArray,zf=Array.prototype.indexOf,Sl=Array.from,kl=Object.defineProperty,ma=Object.getOwnPropertyDescriptor,Zu=Object.getOwnPropertyDescriptors,Hf=Object.prototype,Wf=Array.prototype,Al=Object.getPrototypeOf,Ql=Object.isExtensible;function Gf(n){return typeof n=="function"}const Lr=()=>{};function ec(n){return typeof(n==null?void 0:n.then)=="function"}function Kf(n){return n()}function Xo(n){for(var e=0;e<n.length;e++)n[e]()}function Ju(){var n,e,t=new Promise((r,o)=>{n=r,e=o});return{promise:t,resolve:n,reject:e}}function Xu(n){return n===this.v}function Ol(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function Qu(n){return!Ol(n,this.v)}function fs(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Vf(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Yf(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Zf(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Jf(n){throw new Error("https://svelte.dev/e/effect_orphan")}function Xf(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Qf(){throw new Error("https://svelte.dev/e/hydration_failed")}function ep(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function tp(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function rp(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function np(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ap(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}let eo=!1,op=!1;function sp(){eo=!0}const ed=1,td=2,rd=4,ip=8,lp=16,cp=1,up=2,dp=4,fp=8,pp=16,vp=4,hp=1,gp=2,nd="[",No="[!",Cl="]",xa={},yr=Symbol(),_p="http://www.w3.org/1999/xhtml";let Dt=null;function Va(n){Dt=n}function pr(n){return ad().get(n)}function Ns(n,e){return ad().set(n,e),e}function Ct(n,e=!1,t){Dt={p:Dt,i:!1,c:null,e:null,s:n,x:null,l:eo&&!e?{s:null,u:null,$:[]}:null}}function Tt(n){var e=Dt,t=e.e;if(t!==null){e.e=null;for(var r of t)Rd(r)}return n!==void 0&&(e.x=n),e.i=!0,Dt=e.p,n??{}}function to(){return!eo||Dt!==null&&Dt.l===null}function ad(n){return Dt===null&&fs(),Dt.c??(Dt.c=new Map(mp(Dt)||void 0))}function mp(n){let e=n.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}let ua=[];function od(){var n=ua;ua=[],Xo(n)}function Hn(n){if(ua.length===0&&!qa){var e=ua;queueMicrotask(()=>{e===ua&&od()})}ua.push(n)}function bp(){for(;ua.length>0;)od()}function Ro(n){console.warn("https://svelte.dev/e/hydration_mismatch")}function yp(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let ft=!1;function on(n){ft=n}let $t;function xr(n){if(n===null)throw Ro(),xa;return $t=n}function na(){return xr(hn($t))}function c(n){if(ft){if(hn($t)!==null)throw Ro(),xa;$t=n}}function sn(n=1){if(ft){for(var e=n,t=$t;e--;)t=hn(t);$t=t}}function go(n=!0){for(var e=0,t=$t;;){if(t.nodeType===Aa){var r=t.data;if(r===Cl){if(e===0)return t;e-=1}else(r===nd||r===No)&&(e+=1)}var o=hn(t);n&&t.remove(),t=o}}function sd(n){if(!n||n.nodeType!==Aa)throw Ro(),xa;return n.data}function Da(n){if(typeof n!="object"||n===null||_a in n)return n;const e=Al(n);if(e!==Hf&&e!==Wf)return n;var t=new Map,r=ds(n),o=Gn(0),s=ya,i=d=>{if(ya===s)return d();var h=kt,p=ya;Dr(null),sc(s);var b=d();return Dr(h),sc(p),b};return r&&t.set("length",Gn(n.length)),new Proxy(n,{defineProperty(d,h,p){(!("value"in p)||p.configurable===!1||p.enumerable===!1||p.writable===!1)&&tp();var b=t.get(h);return b===void 0?b=i(()=>{var S=Gn(p.value);return t.set(h,S),S}):ee(b,p.value,!0),!0},deleteProperty(d,h){var p=t.get(h);if(p===void 0){if(h in d){const b=i(()=>Gn(yr));t.set(h,b),vo(o)}}else ee(p,yr),vo(o);return!0},get(d,h,p){var g;if(h===_a)return n;var b=t.get(h),S=h in d;if(b===void 0&&(!S||(g=ma(d,h))!=null&&g.writable)&&(b=i(()=>{var v=Da(S?d[h]:yr),f=Gn(v);return f}),t.set(h,b)),b!==void 0){var y=a(b);return y===yr?void 0:y}return Reflect.get(d,h,p)},getOwnPropertyDescriptor(d,h){var p=Reflect.getOwnPropertyDescriptor(d,h);if(p&&"value"in p){var b=t.get(h);b&&(p.value=a(b))}else if(p===void 0){var S=t.get(h),y=S==null?void 0:S.v;if(S!==void 0&&y!==yr)return{enumerable:!0,configurable:!0,value:y,writable:!0}}return p},has(d,h){var y;if(h===_a)return!0;var p=t.get(h),b=p!==void 0&&p.v!==yr||Reflect.has(d,h);if(p!==void 0||Ot!==null&&(!b||(y=ma(d,h))!=null&&y.writable)){p===void 0&&(p=i(()=>{var g=b?Da(d[h]):yr,v=Gn(g);return v}),t.set(h,p));var S=a(p);if(S===yr)return!1}return b},set(d,h,p,b){var P;var S=t.get(h),y=h in d;if(r&&h==="length")for(var g=p;g<S.v;g+=1){var v=t.get(g+"");v!==void 0?ee(v,yr):g in d&&(v=i(()=>Gn(yr)),t.set(g+"",v))}if(S===void 0)(!y||(P=ma(d,h))!=null&&P.writable)&&(S=i(()=>Gn(void 0)),ee(S,Da(p)),t.set(h,S));else{y=S.v!==yr;var f=i(()=>Da(p));ee(S,f)}var m=Reflect.getOwnPropertyDescriptor(d,h);if(m!=null&&m.set&&m.set.call(b,p),!y){if(r&&typeof h=="string"){var E=t.get("length"),w=Number(h);Number.isInteger(w)&&w>=E.v&&ee(E,w+1)}vo(o)}return!0},ownKeys(d){a(o);var h=Reflect.ownKeys(d).filter(S=>{var y=t.get(S);return y===void 0||y.v!==yr});for(var[p,b]of t)b.v!==yr&&!(p in d)&&h.push(p);return h},setPrototypeOf(){rp()}})}var _o,id,ld,cd;function el(){if(_o===void 0){_o=window,id=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,t=Text.prototype;ld=ma(e,"firstChild").get,cd=ma(e,"nextSibling").get,Ql(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Ql(t)&&(t.__t=void 0)}}function jr(n=""){return document.createTextNode(n)}function ln(n){return ld.call(n)}function hn(n){return cd.call(n)}function u(n,e){if(!ft)return ln(n);var t=ln($t);if(t===null)t=$t.appendChild(jr());else if(e&&t.nodeType!==us){var r=jr();return t==null||t.before(r),xr(r),r}return xr(t),t}function Ee(n,e=!1){if(!ft){var t=ln(n);return t instanceof Comment&&t.data===""?hn(t):t}if(e&&($t==null?void 0:$t.nodeType)!==us){var r=jr();return $t==null||$t.before(r),xr(r),r}return $t}function _(n,e=1,t=!1){let r=ft?$t:n;for(var o;e--;)o=r,r=hn(r);if(!ft)return r;if(t&&(r==null?void 0:r.nodeType)!==us){var s=jr();return r===null?o==null||o.after(s):r.before(s),xr(s),s}return xr(r),r}function Tl(n){n.textContent=""}function ud(){return!1}function dd(n){var e=Ot;if(e===null)return kt.f|=Qn,n;if(e.f&To)Ya(n,e);else{if(!(e.f&cs))throw n;e.b.error(n)}}function Ya(n,e){for(;e!==null;){if(e.f&cs)try{e.b.error(n);return}catch(t){n=t}e=e.parent}throw n}const jo=new Set;let zt=null,Go=null,lr=null,xn=[],ps=null,tl=!1,qa=!1;var za,Ha,fa,pa,So,Wa,Ga,dr,rl,la,nl,fd,pd;const ns=class ns{constructor(){yt(this,dr);un(this,"committed",!1);un(this,"current",new Map);un(this,"previous",new Map);yt(this,za,new Set);yt(this,Ha,new Set);yt(this,fa,0);yt(this,pa,0);yt(this,So,null);yt(this,Wa,[]);yt(this,Ga,[]);un(this,"skipped_effects",new Set);un(this,"is_fork",!1)}is_deferred(){return this.is_fork||he(this,pa)>0}process(e){var r;xn=[],Go=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of e)Kt(this,dr,rl).call(this,o,t);this.is_fork||Kt(this,dr,fd).call(this),this.is_deferred()?(Kt(this,dr,la).call(this,t.effects),Kt(this,dr,la).call(this,t.render_effects),Kt(this,dr,la).call(this,t.block_effects)):(Go=this,zt=null,tc(t.render_effects),tc(t.effects),Go=null,(r=he(this,So))==null||r.resolve()),lr=null}capture(e,t){this.previous.has(e)||this.previous.set(e,t),e.f&Qn||(this.current.set(e,e.v),lr==null||lr.set(e,e.v))}activate(){zt=this,this.apply()}deactivate(){zt===this&&(zt=null,lr=null)}flush(){if(this.activate(),xn.length>0){if(vd(),zt!==null&&zt!==this)return}else he(this,fa)===0&&this.process([]);this.deactivate()}discard(){for(const e of he(this,Ha))e(this);he(this,Ha).clear()}increment(e){it(this,fa,he(this,fa)+1),e&&it(this,pa,he(this,pa)+1)}decrement(e){it(this,fa,he(this,fa)-1),e&&it(this,pa,he(this,pa)-1),this.revive()}revive(){for(const e of he(this,Wa))Er(e,qr),Ea(e);for(const e of he(this,Ga))Er(e,Rn),Ea(e);it(this,Wa,[]),it(this,Ga,[]),this.flush()}oncommit(e){he(this,za).add(e)}ondiscard(e){he(this,Ha).add(e)}settled(){return(he(this,So)??it(this,So,Ju())).promise}static ensure(){if(zt===null){const e=zt=new ns;jo.add(zt),qa||ns.enqueue(()=>{zt===e&&e.flush()})}return zt}static enqueue(e){Hn(e)}apply(){}};za=new WeakMap,Ha=new WeakMap,fa=new WeakMap,pa=new WeakMap,So=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,dr=new WeakSet,rl=function(e,t){var b;e.f^=$r;for(var r=e.first;r!==null;){var o=r.f,s=(o&(zn|ka))!==0,i=s&&(o&$r)!==0,d=i||(o&Yr)!==0||this.skipped_effects.has(r);if(r.f&cs&&((b=r.b)!=null&&b.is_pending())&&(t={parent:t,effect:r,effects:[],render_effects:[],block_effects:[]}),!d&&r.fn!==null){s?r.f^=$r:o&xl?t.effects.push(r):ro(r)&&(r.f&Nn&&t.block_effects.push(r),Za(r));var h=r.first;if(h!==null){r=h;continue}}var p=r.parent;for(r=r.next;r===null&&p!==null;)p===t.effect&&(Kt(this,dr,la).call(this,t.effects),Kt(this,dr,la).call(this,t.render_effects),Kt(this,dr,la).call(this,t.block_effects),t=t.parent),r=p.next,p=p.parent}},la=function(e){for(const t of e)(t.f&qr?he(this,Wa):he(this,Ga)).push(t),Kt(this,dr,nl).call(this,t.deps),Er(t,$r)},nl=function(e){if(e!==null)for(const t of e)!(t.f&Sr)||!(t.f&ho)||(t.f^=ho,Kt(this,dr,nl).call(this,t.deps))},fd=function(){if(he(this,pa)===0){for(const e of he(this,za))e();he(this,za).clear()}he(this,fa)===0&&Kt(this,dr,pd).call(this)},pd=function(){var o;if(jo.size>1){this.previous.clear();var e=lr,t=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of jo){if(s===this){t=!1;continue}const i=[];for(const[h,p]of this.current){if(s.current.has(h))if(t&&p!==s.current.get(h))s.current.set(h,p);else continue;i.push(h)}if(i.length===0)continue;const d=[...s.current.keys()].filter(h=>!this.current.has(h));if(d.length>0){const h=new Set,p=new Map;for(const b of i)hd(b,d,h,p);if(xn.length>0){zt=s,s.apply();for(const b of xn)Kt(o=s,dr,rl).call(o,b,r);xn=[],s.deactivate()}}}zt=null,lr=e}this.committed=!0,jo.delete(this)};let Sn=ns;function Ze(n){var e=qa;qa=!0;try{for(var t;;){if(bp(),xn.length===0&&(zt==null||zt.flush(),xn.length===0))return ps=null,t;vd()}}finally{qa=e}}function vd(){var n=ba;tl=!0;try{var e=0;for(ac(!0);xn.length>0;){var t=Sn.ensure();if(e++>1e3){var r,o;wp()}t.process(xn),ea.clear()}}finally{tl=!1,ac(n),ps=null}}function wp(){try{Xf()}catch(n){Ya(n,ps)}}let fn=null;function tc(n){var e=n.length;if(e!==0){for(var t=0;t<e;){var r=n[t++];if(!(r.f&(Xn|Yr))&&ro(r)&&(fn=new Set,Za(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Ld(r):r.fn=null),(fn==null?void 0:fn.size)>0)){ea.clear();for(const o of fn){if(o.f&(Xn|Yr))continue;const s=[o];let i=o.parent;for(;i!==null;)fn.has(i)&&(fn.delete(i),s.push(i)),i=i.parent;for(let d=s.length-1;d>=0;d--){const h=s[d];h.f&(Xn|Yr)||Za(h)}}fn.clear()}}fn=null}}function hd(n,e,t,r){if(!t.has(n)&&(t.add(n),n.reactions!==null))for(const o of n.reactions){const s=o.f;s&Sr?hd(o,e,t,r):s&(El|Nn)&&!(s&qr)&&gd(o,e,r)&&(Er(o,qr),Ea(o))}}function gd(n,e,t){const r=t.get(n);if(r!==void 0)return r;if(n.deps!==null)for(const o of n.deps){if(e.includes(o))return!0;if(o.f&Sr&&gd(o,e,t))return t.set(o,!0),!0}return t.set(n,!1),!1}function Ea(n){for(var e=ps=n;e.parent!==null;){e=e.parent;var t=e.f;if(tl&&e===Ot&&t&Nn&&!(t&Gu))return;if(t&(ka|zn)){if(!(t&$r))return;e.f^=$r}}xn.push(e)}function $p(n){let e=0,t=jn(0),r;return()=>{hs()&&(a(t),no(()=>(e===0&&(r=l(()=>n(()=>vo(t)))),e+=1,()=>{Hn(()=>{e-=1,e===0&&(r==null||r(),r=void 0,vo(t))})})))}}var xp=$a|Qa|cs;function Ep(n,e,t){new Sp(n,e,t)}var tn,Kr,ko,bn,va,yn,rn,Mr,wn,Fn,Vn,ha,Yn,ga,Zn,as,cr,_d,md,al,Ko,Vo,ol;class Sp{constructor(e,t,r){yt(this,cr);un(this,"parent");yt(this,tn,!1);yt(this,Kr);yt(this,ko,ft?$t:null);yt(this,bn);yt(this,va);yt(this,yn);yt(this,rn,null);yt(this,Mr,null);yt(this,wn,null);yt(this,Fn,null);yt(this,Vn,null);yt(this,ha,0);yt(this,Yn,0);yt(this,ga,!1);yt(this,Zn,null);yt(this,as,$p(()=>(it(this,Zn,jn(he(this,ha))),()=>{it(this,Zn,null)})));it(this,Kr,e),it(this,bn,t),it(this,va,r),this.parent=Ot.b,it(this,tn,!!he(this,bn).pending),it(this,yn,_s(()=>{if(Ot.b=this,ft){const s=he(this,ko);na(),s.nodeType===Aa&&s.data===No?Kt(this,cr,md).call(this):Kt(this,cr,_d).call(this)}else{var o=Kt(this,cr,al).call(this);try{it(this,rn,an(()=>r(o)))}catch(s){this.error(s)}he(this,Yn)>0?Kt(this,cr,Vo).call(this):it(this,tn,!1)}return()=>{var s;(s=he(this,Vn))==null||s.remove()}},xp)),ft&&it(this,Kr,$t)}is_pending(){return he(this,tn)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!he(this,bn).pending}update_pending_count(e){Kt(this,cr,ol).call(this,e),it(this,ha,he(this,ha)+e),he(this,Zn)&&An(he(this,Zn),he(this,ha))}get_effect_pending(){return he(this,as).call(this),a(he(this,Zn))}error(e){var t=he(this,bn).onerror;let r=he(this,bn).failed;if(he(this,ga)||!t&&!r)throw e;he(this,rn)&&(Fr(he(this,rn)),it(this,rn,null)),he(this,Mr)&&(Fr(he(this,Mr)),it(this,Mr,null)),he(this,wn)&&(Fr(he(this,wn)),it(this,wn,null)),ft&&(xr(he(this,ko)),sn(),xr(go()));var o=!1,s=!1;const i=()=>{if(o){yp();return}o=!0,s&&ap(),Sn.ensure(),it(this,ha,0),he(this,wn)!==null&&ja(he(this,wn),()=>{it(this,wn,null)}),it(this,tn,this.has_pending_snippet()),it(this,rn,Kt(this,cr,Ko).call(this,()=>(it(this,ga,!1),an(()=>he(this,va).call(this,he(this,Kr)))))),he(this,Yn)>0?Kt(this,cr,Vo).call(this):it(this,tn,!1)};var d=kt;try{Dr(null),s=!0,t==null||t(e,i),s=!1}catch(h){Ya(h,he(this,yn)&&he(this,yn).parent)}finally{Dr(d)}r&&Hn(()=>{it(this,wn,Kt(this,cr,Ko).call(this,()=>{Sn.ensure(),it(this,ga,!0);try{return an(()=>{r(he(this,Kr),()=>e,()=>i)})}catch(h){return Ya(h,he(this,yn).parent),null}finally{it(this,ga,!1)}}))})}}tn=new WeakMap,Kr=new WeakMap,ko=new WeakMap,bn=new WeakMap,va=new WeakMap,yn=new WeakMap,rn=new WeakMap,Mr=new WeakMap,wn=new WeakMap,Fn=new WeakMap,Vn=new WeakMap,ha=new WeakMap,Yn=new WeakMap,ga=new WeakMap,Zn=new WeakMap,as=new WeakMap,cr=new WeakSet,_d=function(){try{it(this,rn,an(()=>he(this,va).call(this,he(this,Kr))))}catch(e){this.error(e)}it(this,tn,!1)},md=function(){const e=he(this,bn).pending;e&&(it(this,Mr,an(()=>e(he(this,Kr)))),Sn.enqueue(()=>{var t=Kt(this,cr,al).call(this);it(this,rn,Kt(this,cr,Ko).call(this,()=>(Sn.ensure(),an(()=>he(this,va).call(this,t))))),he(this,Yn)>0?Kt(this,cr,Vo).call(this):(ja(he(this,Mr),()=>{it(this,Mr,null)}),it(this,tn,!1))}))},al=function(){var e=he(this,Kr);return he(this,tn)&&(it(this,Vn,jr()),he(this,Kr).before(he(this,Vn)),e=he(this,Vn)),e},Ko=function(e){var t=Ot,r=kt,o=Dt;Cn(he(this,yn)),Dr(he(this,yn)),Va(he(this,yn).ctx);try{return e()}catch(s){return dd(s),null}finally{Cn(t),Dr(r),Va(o)}},Vo=function(){const e=he(this,bn).pending;he(this,rn)!==null&&(it(this,Fn,document.createDocumentFragment()),he(this,Fn).append(he(this,Vn)),Fd(he(this,rn),he(this,Fn))),he(this,Mr)===null&&it(this,Mr,an(()=>e(he(this,Kr))))},ol=function(e){var t;if(!this.has_pending_snippet()){this.parent&&Kt(t=this.parent,cr,ol).call(t,e);return}it(this,Yn,he(this,Yn)+e),he(this,Yn)===0&&(it(this,tn,!1),he(this,Mr)&&ja(he(this,Mr),()=>{it(this,Mr,null)}),he(this,Fn)&&(he(this,Kr).before(he(this,Fn)),it(this,Fn,null)))};function kp(n,e,t,r){const o=to()?vs:Ke;if(t.length===0&&n.length===0){r(e.map(o));return}var s=zt,i=Ot,d=bd();function h(){Promise.all(t.map(p=>Ap(p))).then(p=>{d();try{r([...e.map(o),...p])}catch(b){i.f&Xn||Ya(b,i)}s==null||s.deactivate(),mo()}).catch(p=>{Ya(p,i)})}n.length>0?Promise.all(n).then(()=>{d();try{return h()}finally{s==null||s.deactivate(),mo()}}):h()}function bd(){var n=Ot,e=kt,t=Dt,r=zt;return function(s=!0){Cn(n),Dr(e),Va(t),s&&(r==null||r.activate())}}function mo(){Cn(null),Dr(null),Va(null)}function vs(n){var e=Sr|qr,t=kt!==null&&kt.f&Sr?kt:null;return Ot!==null&&(Ot.f|=Qa),{ctx:Dt,deps:null,effects:null,equals:Xu,f:e,fn:n,reactions:null,rv:0,v:yr,wv:0,parent:t??Ot,ac:null}}function Ap(n,e){let t=Ot;t===null&&Vf();var r=t.b,o=void 0,s=jn(yr),i=!kt,d=new Map;return jp(()=>{var y;var h=Ju();o=h.promise;try{Promise.resolve(n()).then(h.resolve,h.reject).then(()=>{p===zt&&p.committed&&p.deactivate(),mo()})}catch(g){h.reject(g),mo()}var p=zt;if(i){var b=!r.is_pending();r.update_pending_count(1),p.increment(b),(y=d.get(p))==null||y.reject(La),d.delete(p),d.set(p,h)}const S=(g,v=void 0)=>{if(p.activate(),v)v!==La&&(s.f|=Qn,An(s,v));else{s.f&Qn&&(s.f^=Qn),An(s,g);for(const[f,m]of d){if(d.delete(f),f===p)break;m.reject(La)}}i&&(r.update_pending_count(-1),p.decrement(b))};h.promise.then(S,g=>S(null,g||"unknown"))}),Po(()=>{for(const h of d.values())h.reject(La)}),new Promise(h=>{function p(b){function S(){b===o?h(s):p(o)}b.then(S,S)}p(o)})}function Ke(n){const e=vs(n);return e.equals=Qu,e}function yd(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)Fr(e[t])}}function Op(n){for(var e=n.parent;e!==null;){if(!(e.f&Sr))return e;e=e.parent}return null}function Nl(n){var e,t=Ot;Cn(Op(n));try{n.f&=~ho,yd(n),e=Od(n)}finally{Cn(t)}return e}function wd(n){var e=Nl(n);if(n.equals(e)||(n.v=e,n.wv=kd()),!Ca)if(lr!==null)hs()&&lr.set(n,n.v);else{var t=n.f&vn?$r:Rn;Er(n,t)}}let sl=new Set;const ea=new Map;let $d=!1;function jn(n,e){var t={f:0,v:n,reactions:null,equals:Xu,rv:0,wv:0};return t}function Gn(n,e){const t=jn(n);return Mp(t),t}function Oe(n,e=!1,t=!0){var o;const r=jn(n);return e||(r.equals=Qu),eo&&t&&Dt!==null&&Dt.l!==null&&((o=Dt.l).s??(o.s=[])).push(r),r}function ze(n,e){return ee(n,l(()=>a(n))),e}function ee(n,e,t=!1){kt!==null&&(!kn||kt.f&Xl)&&to()&&kt.f&(Sr|Nn|El|Xl)&&!(Ir!=null&&Ir.includes(n))&&np();let r=t?Da(e):e;return An(n,r)}function An(n,e){if(!n.equals(e)){var t=n.v;Ca?ea.set(n,e):ea.set(n,t),n.v=e;var r=Sn.ensure();r.capture(n,t),n.f&Sr&&(n.f&qr&&Nl(n),Er(n,n.f&vn?$r:Rn)),n.wv=kd(),xd(n,qr),to()&&Ot!==null&&Ot.f&$r&&!(Ot.f&(zn|ka))&&(en===null?Lp([n]):en.push(n)),!r.is_fork&&sl.size>0&&!$d&&Cp()}return e}function Cp(){$d=!1;const n=Array.from(sl);for(const e of n)e.f&$r&&Er(e,Rn),ro(e)&&Za(e);sl.clear()}function rc(n,e=1){var t=a(n),r=e===1?t++:t--;return ee(n,t),r}function vo(n){ee(n,n.v+1)}function xd(n,e){var t=n.reactions;if(t!==null)for(var r=to(),o=t.length,s=0;s<o;s++){var i=t[s],d=i.f;if(!(!r&&i===Ot)){var h=(d&qr)===0;if(h&&Er(i,e),d&Sr){var p=i;lr==null||lr.delete(p),d&ho||(d&vn&&(i.f|=ho),xd(p,Rn))}else h&&(d&Nn&&fn!==null&&fn.add(i),Ea(i))}}}let Kn=null;function Tp(n){var e=Kn;try{if(Kn=new Set,l(n),e!==null)for(var t of Kn)e.add(t);return Kn}finally{Kn=e}}function Np(n){for(var e of Tp(n))An(e,e.v)}function Rp(n){ft&&ln(n)!==null&&Tl(n)}let nc=!1;function Ed(){nc||(nc=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Pp(n,e,t,r=!0){r&&t();for(var o of e)n.addEventListener(o,t);Po(()=>{for(var s of e)n.removeEventListener(s,t)})}function Oa(n){var e=kt,t=Ot;Dr(null),Cn(null);try{return n()}finally{Dr(e),Cn(t)}}function Ip(n,e,t,r=t){n.addEventListener(e,()=>Oa(t));const o=n.__on_r;o?n.__on_r=()=>{o(),r(!0)}:n.__on_r=()=>r(!0),Ed()}let ba=!1;function ac(n){ba=n}let Ca=!1;function oc(n){Ca=n}let kt=null,kn=!1;function Dr(n){kt=n}let Ot=null;function Cn(n){Ot=n}let Ir=null;function Mp(n){kt!==null&&(Ir===null?Ir=[n]:Ir.push(n))}let Pr=null,Gr=0,en=null;function Lp(n){en=n}let Sd=1,bo=0,ya=bo;function sc(n){ya=n}function kd(){return++Sd}function ro(n){var e=n.f;if(e&qr)return!0;if(e&Sr&&(n.f&=-32769),e&Rn){var t=n.deps;if(t!==null)for(var r=t.length,o=0;o<r;o++){var s=t[o];if(ro(s)&&wd(s),s.wv>n.wv)return!0}e&vn&&lr===null&&Er(n,$r)}return!1}function Ad(n,e,t=!0){var r=n.reactions;if(r!==null&&!(Ir!=null&&Ir.includes(n)))for(var o=0;o<r.length;o++){var s=r[o];s.f&Sr?Ad(s,e,!1):e===s&&(t?Er(s,qr):s.f&$r&&Er(s,Rn),Ea(s))}}function Od(n){var v;var e=Pr,t=Gr,r=en,o=kt,s=Ir,i=Dt,d=kn,h=ya,p=n.f;Pr=null,Gr=0,en=null,kt=p&(zn|ka)?null:n,Ir=null,Va(n.ctx),kn=!1,ya=++bo,n.ac!==null&&(Oa(()=>{n.ac.abort(La)}),n.ac=null);try{n.f|=Qi;var b=n.fn,S=b(),y=n.deps;if(Pr!==null){var g;if(Qo(n,Gr),y!==null&&Gr>0)for(y.length=Gr+Pr.length,g=0;g<Pr.length;g++)y[Gr+g]=Pr[g];else n.deps=y=Pr;if(ba&&hs()&&n.f&vn)for(g=Gr;g<y.length;g++)((v=y[g]).reactions??(v.reactions=[])).push(n)}else y!==null&&Gr<y.length&&(Qo(n,Gr),y.length=Gr);if(to()&&en!==null&&!kn&&y!==null&&!(n.f&(Sr|Rn|qr)))for(g=0;g<en.length;g++)Ad(en[g],n);return o!==null&&o!==n&&(bo++,en!==null&&(r===null?r=en:r.push(...en))),n.f&Qn&&(n.f^=Qn),S}catch(f){return dd(f)}finally{n.f^=Qi,Pr=e,Gr=t,en=r,kt=o,Ir=s,Va(i),kn=d,ya=h}}function Dp(n,e){let t=e.reactions;if(t!==null){var r=zf.call(t,n);if(r!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[r]=t[o],t.pop())}}t===null&&e.f&Sr&&(Pr===null||!Pr.includes(e))&&(Er(e,Rn),e.f&vn&&(e.f^=vn,e.f&=-32769),yd(e),Qo(e,0))}function Qo(n,e){var t=n.deps;if(t!==null)for(var r=e;r<t.length;r++)Dp(n,t[r])}function Za(n){var e=n.f;if(!(e&Xn)){Er(n,$r);var t=Ot,r=ba;Ot=n,ba=!0;try{e&Nn?zp(n):Id(n),Pd(n);var o=Od(n);n.teardown=typeof o=="function"?o:null,n.wv=Sd;var s;Yu&&op&&n.f&qr&&n.deps}finally{ba=r,Ot=t}}}async function yo(){await Promise.resolve(),Ze()}function a(n){var e=n.f,t=(e&Sr)!==0;if(Kn==null||Kn.add(n),kt!==null&&!kn){var r=Ot!==null&&(Ot.f&Xn)!==0;if(!r&&!(Ir!=null&&Ir.includes(n))){var o=kt.deps;if(kt.f&Qi)n.rv<bo&&(n.rv=bo,Pr===null&&o!==null&&o[Gr]===n?Gr++:Pr===null?Pr=[n]:Pr.includes(n)||Pr.push(n));else{(kt.deps??(kt.deps=[])).push(n);var s=n.reactions;s===null?n.reactions=[kt]:s.includes(kt)||s.push(kt)}}}if(Ca){if(ea.has(n))return ea.get(n);if(t){var i=n,d=i.v;return(!(i.f&$r)&&i.reactions!==null||Td(i))&&(d=Nl(i)),ea.set(i,d),d}}else if(t){if(i=n,lr!=null&&lr.has(i))return lr.get(i);ro(i)&&wd(i),ba&&hs()&&!(i.f&vn)&&Cd(i)}else if(lr!=null&&lr.has(n))return lr.get(n);if(n.f&Qn)throw n.v;return n.v}function Cd(n){if(n.deps!==null){n.f^=vn;for(const e of n.deps)(e.reactions??(e.reactions=[])).push(n),e.f&Sr&&!(e.f&vn)&&Cd(e)}}function Td(n){if(n.v===yr)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(ea.has(e)||e.f&Sr&&Td(e))return!0;return!1}function l(n){var e=kn;try{return kn=!0,n()}finally{kn=e}}const Up=-7169;function Er(n,e){n.f=n.f&Up|e}function Ue(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(_a in n)il(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&_a in t&&il(t)}}}function il(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let r in n)try{il(n[r],e)}catch{}const t=Al(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=Zu(t);for(let o in r){const s=r[o].get;if(s)try{s.call(n)}catch{}}}}}function Nd(n){Ot===null&&(kt===null&&Jf(),Zf()),Ca&&Yf()}function Fp(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function Pn(n,e,t){var r=Ot;r!==null&&r.f&Yr&&(n|=Yr);var o={ctx:Dt,deps:null,nodes_start:null,nodes_end:null,f:n|qr|vn,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{Za(o),o.f|=To}catch(d){throw Fr(o),d}else e!==null&&Ea(o);var s=o;if(t&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&!(s.f&Qa)&&(s=s.first,n&Nn&&n&$a&&s!==null&&(s.f|=$a)),s!==null&&(s.parent=r,r!==null&&Fp(s,r),kt!==null&&kt.f&Sr&&!(n&ka))){var i=kt;(i.effects??(i.effects=[])).push(s)}return o}function hs(){return kt!==null&&!kn}function Po(n){const e=Pn(ls,null,!1);return Er(e,$r),e.teardown=n,e}function ll(n){Nd();var e=Ot.f,t=!kt&&(e&zn)!==0&&(e&To)===0;if(t){var r=Dt;(r.e??(r.e=[])).push(n)}else return Rd(n)}function Rd(n){return Pn(xl|Ku,n,!1)}function Bp(n){return Nd(),Pn(ls|Ku,n,!0)}function qp(n){Sn.ensure();const e=Pn(ka|Qa,n,!0);return(t={})=>new Promise(r=>{t.outro?ja(e,()=>{Fr(e),r(void 0)}):(Fr(e),r(void 0))})}function gs(n){return Pn(xl,n,!1)}function He(n,e){var t=Dt,r={effect:null,ran:!1,deps:n};t.l.$.push(r),r.effect=no(()=>{n(),!r.ran&&(r.ran=!0,l(e))})}function Wt(){var n=Dt;no(()=>{for(var e of n.l.$){e.deps();var t=e.effect;t.f&$r&&Er(t,Rn),ro(t)&&Za(t),e.ran=!1}})}function jp(n){return Pn(El|Qa,n,!0)}function no(n,e=0){return Pn(ls|e,n,!0)}function C(n,e=[],t=[],r=[]){kp(r,e,t,o=>{Pn(ls,()=>n(...o.map(a)),!0)})}function _s(n,e=0){var t=Pn(Nn|e,n,!0);return t}function an(n){return Pn(zn|Qa,n,!0)}function Pd(n){var e=n.teardown;if(e!==null){const t=Ca,r=kt;oc(!0),Dr(null);try{e.call(null)}finally{oc(t),Dr(r)}}}function Id(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){const o=t.ac;o!==null&&Oa(()=>{o.abort(La)});var r=t.next;t.f&ka?t.parent=null:Fr(t,e),t=r}}function zp(n){for(var e=n.first;e!==null;){var t=e.next;e.f&zn||Fr(e),e=t}}function Fr(n,e=!0){var t=!1;(e||n.f&Gu)&&n.nodes_start!==null&&n.nodes_end!==null&&(Md(n.nodes_start,n.nodes_end),t=!0),Id(n,e&&!t),Qo(n,0),Er(n,Xn);var r=n.transitions;if(r!==null)for(const s of r)s.stop();Pd(n);var o=n.parent;o!==null&&o.first!==null&&Ld(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=n.ac=null}function Md(n,e){for(;n!==null;){var t=n===e?null:hn(n);n.remove(),n=t}}function Ld(n){var e=n.parent,t=n.prev,r=n.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),e!==null&&(e.first===n&&(e.first=r),e.last===n&&(e.last=t))}function ja(n,e,t=!0){var r=[];Rl(n,r,!0),Dd(r,()=>{t&&Fr(n),e&&e()})}function Dd(n,e){var t=n.length;if(t>0){var r=()=>--t||e();for(var o of n)o.out(r)}else e()}function Rl(n,e,t){if(!(n.f&Yr)){if(n.f^=Yr,n.transitions!==null)for(const i of n.transitions)(i.is_global||t)&&e.push(i);for(var r=n.first;r!==null;){var o=r.next,s=(r.f&$a)!==0||(r.f&zn)!==0&&(n.f&Nn)!==0;Rl(r,e,s?t:!1),r=o}}}function Pl(n){Ud(n,!0)}function Ud(n,e){if(n.f&Yr){n.f^=Yr,n.f&$r||(Er(n,qr),Ea(n));for(var t=n.first;t!==null;){var r=t.next,o=(t.f&$a)!==0||(t.f&zn)!==0;Ud(t,o?e:!1),t=r}if(n.transitions!==null)for(const s of n.transitions)(s.is_global||e)&&s.in()}}function Fd(n,e){for(var t=n.nodes_start,r=n.nodes_end;t!==null;){var o=t===r?null:hn(t);e.append(t),t=o}}const Hp=new Set,ic=new Set;function Wp(n,e,t,r={}){function o(s){if(r.capture||fo.call(e,s),!s.cancelBubble)return Oa(()=>t==null?void 0:t.call(this,s))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Hn(()=>{e.addEventListener(n,o,r)}):e.addEventListener(n,o,r),o}function rt(n,e,t,r,o){var s={capture:r,passive:o},i=Wp(n,e,t,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Po(()=>{e.removeEventListener(n,i,s)})}let lc=null;function fo(n){var m;var e=this,t=e.ownerDocument,r=n.type,o=((m=n.composedPath)==null?void 0:m.call(n))||[],s=o[0]||n.target;lc=n;var i=0,d=lc===n&&n.__root;if(d){var h=o.indexOf(d);if(h!==-1&&(e===document||e===window)){n.__root=e;return}var p=o.indexOf(e);if(p===-1)return;h<=p&&(i=h)}if(s=o[i]||n.target,s!==e){kl(n,"currentTarget",{configurable:!0,get(){return s||t}});var b=kt,S=Ot;Dr(null),Cn(null);try{for(var y,g=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var f=s["__"+r];f!=null&&(!s.disabled||n.target===s)&&f.call(s,n)}catch(E){y?g.push(E):y=E}if(n.cancelBubble||v===e||v===null)break;s=v}if(y){for(let E of g)queueMicrotask(()=>{throw E});throw y}}finally{n.__root=e,delete n.currentTarget,Dr(b),Cn(S)}}}function Bd(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function On(n,e){var t=Ot;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function A(n,e){var t=(e&hp)!==0,r=(e&gp)!==0,o,s=!n.startsWith("<!>");return()=>{if(ft)return On($t,null),$t;o===void 0&&(o=Bd(s?n:"<!>"+n),t||(o=ln(o)));var i=r||id?document.importNode(o,!0):o.cloneNode(!0);if(t){var d=ln(i),h=i.lastChild;On(d,h)}else On(i,i);return i}}function fr(n=""){if(!ft){var e=jr(n+"");return On(e,e),e}var t=$t;return t.nodeType!==us&&(t.before(t=jr()),xr(t)),On(t,t),t}function vt(){if(ft)return On($t,null),$t;var n=document.createDocumentFragment(),e=document.createComment(""),t=jr();return n.append(e,t),On(e,t),n}function x(n,e){if(ft){var t=Ot;(!(t.f&To)||t.nodes_end===null)&&(t.nodes_end=$t),na();return}n!==null&&n.before(e)}const Gp=["touchstart","touchmove"];function Kp(n){return Gp.includes(n)}let cl=!0;function $(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}function qd(n,e){return jd(n,e)}function Vp(n,e){el(),e.intro=e.intro??!1;const t=e.target,r=ft,o=$t;try{for(var s=ln(t);s&&(s.nodeType!==Aa||s.data!==nd);)s=hn(s);if(!s)throw xa;on(!0),xr(s);const i=jd(n,{...e,anchor:s});return on(!1),i}catch(i){if(i instanceof Error&&i.message.split(`
`).some(d=>d.startsWith("https://svelte.dev/e/")))throw i;return i!==xa&&console.warn("Failed to hydrate: ",i),e.recover===!1&&Qf(),el(),Tl(t),on(!1),qd(n,e)}finally{on(r),xr(o)}}const Ra=new Map;function jd(n,{target:e,anchor:t,props:r={},events:o,context:s,intro:i=!0}){el();var d=new Set,h=S=>{for(var y=0;y<S.length;y++){var g=S[y];if(!d.has(g)){d.add(g);var v=Kp(g);e.addEventListener(g,fo,{passive:v});var f=Ra.get(g);f===void 0?(document.addEventListener(g,fo,{passive:v}),Ra.set(g,1)):Ra.set(g,f+1)}}};h(Sl(Hp)),ic.add(h);var p=void 0,b=qp(()=>{var S=t??e.appendChild(jr());return Ep(S,{pending:()=>{}},y=>{if(s){Ct({});var g=Dt;g.c=s}if(o&&(r.$$events=o),ft&&On(y,null),cl=i,p=n(y,r)||{},cl=!0,ft&&(Ot.nodes_end=$t,$t===null||$t.nodeType!==Aa||$t.data!==Cl))throw Ro(),xa;s&&Tt()}),()=>{var v;for(var y of d){e.removeEventListener(y,fo);var g=Ra.get(y);--g===0?(document.removeEventListener(y,fo),Ra.delete(y)):Ra.set(y,g)}ic.delete(h),S!==t&&((v=S.parentNode)==null||v.removeChild(S))}});return ul.set(p,b),p}let ul=new WeakMap;function Yp(n,e){const t=ul.get(n);return t?(ul.delete(n),t(e)):Promise.resolve()}function Qt(n){return function(...e){var t=e[0];return t.preventDefault(),n==null?void 0:n.apply(this,e)}}function Nt(n){return new Zp(n)}var Bn,nn;class Zp{constructor(e){yt(this,Bn);yt(this,nn);var s;var t=new Map,r=(i,d)=>{var h=Oe(d,!1,!1);return t.set(i,h),h};const o=new Proxy({...e.props||{},$$events:{}},{get(i,d){return a(t.get(d)??r(d,Reflect.get(i,d)))},has(i,d){return d===Vu?!0:(a(t.get(d)??r(d,Reflect.get(i,d))),Reflect.has(i,d))},set(i,d,h){return ee(t.get(d)??r(d,h),h),Reflect.set(i,d,h)}});it(this,nn,(e.hydrate?Vp:qd)(e.component,{target:e.target,anchor:e.anchor,props:o,context:e.context,intro:e.intro??!1,recover:e.recover})),(!((s=e==null?void 0:e.props)!=null&&s.$$host)||e.sync===!1)&&Ze(),it(this,Bn,o.$$events);for(const i of Object.keys(he(this,nn)))i==="$set"||i==="$destroy"||i==="$on"||kl(this,i,{get(){return he(this,nn)[i]},set(d){he(this,nn)[i]=d},enumerable:!0});he(this,nn).$set=i=>{Object.assign(o,i)},he(this,nn).$destroy=()=>{Yp(he(this,nn))}}$set(e){he(this,nn).$set(e)}$on(e,t){he(this,Bn)[e]=he(this,Bn)[e]||[];const r=(...o)=>t.call(this,...o);return he(this,Bn)[e].push(r),()=>{he(this,Bn)[e]=he(this,Bn)[e].filter(o=>o!==r)}}$destroy(){he(this,nn).$destroy()}}Bn=new WeakMap,nn=new WeakMap;const Jp="5";var Hu;typeof window<"u"&&((Hu=window.__svelte??(window.__svelte={})).v??(Hu.v=new Set)).add(Jp);sp();var pn,$n,Vr,Ao,Oo,os;class zd{constructor(e,t=!0){un(this,"anchor");yt(this,pn,new Map);yt(this,$n,new Map);yt(this,Vr,new Map);yt(this,Ao,!0);yt(this,Oo,()=>{var e=zt;if(he(this,pn).has(e)){var t=he(this,pn).get(e),r=he(this,$n).get(t);if(r)Pl(r);else{var o=he(this,Vr).get(t);o&&(he(this,$n).set(t,o.effect),he(this,Vr).delete(t),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of he(this,pn)){if(he(this,pn).delete(s),s===e)break;const d=he(this,Vr).get(i);d&&(Fr(d.effect),he(this,Vr).delete(i))}for(const[s,i]of he(this,$n)){if(s===t)continue;const d=()=>{if(Array.from(he(this,pn).values()).includes(s)){var p=document.createDocumentFragment();Fd(i,p),p.append(jr()),he(this,Vr).set(s,{effect:i,fragment:p})}else Fr(i);he(this,$n).delete(s)};he(this,Ao)||!r?ja(i,d,!1):d()}}});yt(this,os,e=>{he(this,pn).delete(e);const t=Array.from(he(this,pn).values());for(const[r,o]of he(this,Vr))t.includes(r)||(Fr(o.effect),he(this,Vr).delete(r))});this.anchor=e,it(this,Ao,t)}ensure(e,t){var r=zt,o=ud();if(t&&!he(this,$n).has(e)&&!he(this,Vr).has(e))if(o){var s=document.createDocumentFragment(),i=jr();s.append(i),he(this,Vr).set(e,{effect:an(()=>t(i)),fragment:s})}else he(this,$n).set(e,an(()=>t(this.anchor)));if(he(this,pn).set(r,e),o){for(const[d,h]of he(this,$n))d===e?r.skipped_effects.delete(h):r.skipped_effects.add(h);for(const[d,h]of he(this,Vr))d===e?r.skipped_effects.delete(h.effect):r.skipped_effects.add(h.effect);r.oncommit(he(this,Oo)),r.ondiscard(he(this,os))}else ft&&(this.anchor=$t),he(this,Oo).call(this)}}pn=new WeakMap,$n=new WeakMap,Vr=new WeakMap,Ao=new WeakMap,Oo=new WeakMap,os=new WeakMap;function In(n){Dt===null&&fs(),eo&&Dt.l!==null?ev(Dt).m.push(n):ll(()=>{const e=l(n);if(typeof e=="function")return e})}function Il(n){Dt===null&&fs(),In(()=>()=>l(n))}function Xp(n,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:r})}function Qp(){const n=Dt;return n===null&&fs(),(e,t,r)=>{var s;const o=(s=n.s.$$events)==null?void 0:s[e];if(o){const i=ds(o)?o.slice():[o],d=Xp(e,t,r);for(const h of i)h.call(n.x,d);return!d.defaultPrevented}return!0}}function ev(n){var e=n.l;return e.u??(e.u={a:[],b:[],m:[]})}const cc=0,Rs=1;function Hd(n,e,t,r,o){ft&&na();var s=to(),i=yr,d=s?jn(i):Oe(i,!1,!1),h=s?jn(i):Oe(i,!1,!1),p=new zd(n);_s(()=>{var b=e(),S=!1;let y=ft&&ec(b)===(n.data===No);if(y&&(xr(go()),on(!1)),ec(b)){var g=bd(),v=!1;const f=m=>{if(!S){v=!0,g(!1),Sn.ensure(),ft&&on(!1);try{m()}finally{mo(),qa||Ze()}}};b.then(m=>{f(()=>{An(d,m),p.ensure(Rs,r&&(E=>r(E,d)))})},m=>{f(()=>{if(An(h,m),p.ensure(Rs,o&&(E=>o(E,h))),!o)throw h.v})}),ft?p.ensure(cc,t):Hn(()=>{v||f(()=>{p.ensure(cc,t)})})}else An(d,b),p.ensure(Rs,r&&(f=>r(f,d)));return y&&on(!0),()=>{S=!0}})}function ke(n,e,t=!1){ft&&na();var r=new zd(n),o=t?$a:0;function s(i,d){if(ft){const p=sd(n)===No;if(i===p){var h=go();xr(h),r.anchor=h,on(!1),r.ensure(i,d),on(!0);return}}r.ensure(i,d)}_s(()=>{var i=!1;e((d,h=!0)=>{i=!0,s(h,d)}),i||s(!1,null)},o)}function kr(n,e){return e}function tv(n,e,t){for(var r=[],o=e.length,s=0;s<o;s++)Rl(e[s].e,r,!0);Dd(r,()=>{var i=r.length===0&&t!==null;if(i){var d=t,h=d.parentNode;Tl(h),h.append(d),n.items.clear(),mn(n,e[0].prev,e[o-1].next)}for(var p=0;p<o;p++){var b=e[p];i||(n.items.delete(b.k),mn(n,b.prev,b.next)),Fr(b.e,!i)}n.first===e[0]&&(n.first=e[0].prev)})}function Ar(n,e,t,r,o,s=null){var i=n,d={items:new Map,first:null},h=(e&rd)!==0,p=(e&ed)!==0,b=(e&td)!==0;if(h){var S=n;i=ft?xr(ln(S)):S.appendChild(jr())}ft&&na();var y=null,g=Ke(()=>{var w=t();return ds(w)?w:w==null?[]:Sl(w)}),v,f=!0;function m(){rv(E,v,d,i,e,r),y!==null&&(v.length===0?(y.fragment?(i.before(y.fragment),y.fragment=null):Pl(y.effect),E.first=y.effect):ja(y.effect,()=>{y=null}))}var E=_s(()=>{v=a(g);var w=v.length;let P=!1;if(ft){var I=sd(i)===No;I!==(w===0)&&(i=go(),xr(i),on(!1),P=!0)}for(var O=new Set,B=zt,ne=null,Z=ud(),ae=0;ae<w;ae+=1){ft&&$t.nodeType===Aa&&$t.data===Cl&&(i=$t,P=!0,on(!1));var G=v[ae],ie=r(G,ae),te=f?null:d.items.get(ie);te?(p&&An(te.v,G),b?An(te.i,ae):te.i=ae,B.skipped_effects.delete(te.e)):(te=nv(f?i:null,ne,G,ie,ae,o,e,t),f&&(te.o=!0,ne===null?d.first=te:ne.next=te,ne=te),d.items.set(ie,te)),O.add(ie)}if(w===0&&s&&!y)if(f)y={fragment:null,effect:an(()=>s(i))};else{var me=document.createDocumentFragment(),H=jr();me.append(H),y={fragment:me,effect:an(()=>s(H))}}ft&&w>0&&xr(go());for(const[z,le]of d.items)O.has(z)||B.skipped_effects.add(le.e);f||(Z?(B.oncommit(m),B.ondiscard(()=>{})):m()),P&&on(!0),a(g)});f=!1,ft&&(i=$t)}function rv(n,e,t,r,o,s){var ie,te,me,H;var i=(o&ip)!==0,d=e.length,h=t.items,p=t.first,b,S=null,y,g=[],v=[],f,m,E,w;if(i)for(w=0;w<d;w+=1)f=e[w],m=s(f,w),E=h.get(m),(ie=E.a)==null||ie.measure(),(y??(y=new Set)).add(E);for(w=0;w<d;w+=1){if(f=e[w],m=s(f,w),E=h.get(m),t.first??(t.first=E),!E.o){E.o=!0;var P=S?S.next:p;mn(t,S,E),mn(t,E,P),Ps(E,P,r),S=E,g=[],v=[],p=S.next;continue}if(E.e.f&Yr&&(Pl(E.e),i&&((te=E.a)==null||te.unfix(),(y??(y=new Set)).delete(E))),E!==p){if(b!==void 0&&b.has(E)){if(g.length<v.length){var I=v[0],O;S=I.prev;var B=g[0],ne=g[g.length-1];for(O=0;O<g.length;O+=1)Ps(g[O],I,r);for(O=0;O<v.length;O+=1)b.delete(v[O]);mn(t,B.prev,ne.next),mn(t,S,B),mn(t,ne,I),p=I,S=ne,w-=1,g=[],v=[]}else b.delete(E),Ps(E,p,r),mn(t,E.prev,E.next),mn(t,E,S===null?t.first:S.next),mn(t,S,E),S=E;continue}for(g=[],v=[];p!==null&&p.k!==m;)p.e.f&Yr||(b??(b=new Set)).add(p),v.push(p),p=p.next;if(p===null)continue;E=p}g.push(E),S=E,p=E.next}if(p!==null||b!==void 0){for(var Z=b===void 0?[]:Sl(b);p!==null;)p.e.f&Yr||Z.push(p),p=p.next;var ae=Z.length;if(ae>0){var G=o&rd&&d===0?r:null;if(i){for(w=0;w<ae;w+=1)(me=Z[w].a)==null||me.measure();for(w=0;w<ae;w+=1)(H=Z[w].a)==null||H.fix()}tv(t,Z,G)}}i&&Hn(()=>{var z;if(y!==void 0)for(E of y)(z=E.a)==null||z.apply()}),n.first=t.first&&t.first.e,n.last=S&&S.e,S&&(S.e.next=null)}function nv(n,e,t,r,o,s,i,d){var h=(i&ed)!==0,p=(i&lp)===0,b=h?p?Oe(t,!1,!1):jn(t):t,S=i&td?jn(o):o,y={i:S,v:b,k:r,a:null,e:null,o:!1,prev:e,next:null};try{if(n===null){var g=document.createDocumentFragment();g.append(n=jr())}return y.e=an(()=>s(n,b,S,d)),y.e.prev=e&&e.e,e!==null&&(e.next=y,e.e.next=y.e),y}finally{}}function Ps(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,o=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==null&&s!==r;){var i=hn(s);o.before(s),s=i}}function mn(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Bt(n,e,t=!1,r=!1,o=!1){var s=n,i="";C(()=>{var d=Ot;if(i===(i=e()??"")){ft&&na();return}if(d.nodes_start!==null&&(Md(d.nodes_start,d.nodes_end),d.nodes_start=d.nodes_end=null),i!==""){if(ft){$t.data;for(var h=na(),p=h;h!==null&&(h.nodeType!==Aa||h.data!=="");)p=h,h=hn(h);if(h===null)throw Ro(),xa;On($t,p),s=xr(h);return}var b=i+"";t?b=`<svg>${b}</svg>`:r&&(b=`<math>${b}</math>`);var S=Bd(b);if((t||r)&&(S=ln(S)),On(ln(S),S.lastChild),t||r)for(;ln(S);)s.before(ln(S));else s.before(S)}})}function Tn(n,e,t,r,o){var d;ft&&na();var s=(d=e.$$slots)==null?void 0:d[t],i=!1;s===!0&&(s=e[t==="default"?"children":t],i=!0),s===void 0?o!==null&&o(n):s(n,i?()=>r:r)}function Ml(n,e,t){gs(()=>{var r=l(()=>e(n,t==null?void 0:t())||{});if(t&&(r!=null&&r.update)){var o=!1,s={};no(()=>{var i=t();Ue(i),o&&Ol(s,i)&&(s=i,r.update(i))}),o=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}const uc=[...` 	
\r\fÂ \v\uFEFF`];function av(n,e,t){var r=n==null?"":""+n;if(e&&(r=r?r+" "+e:e),t){for(var o in t)if(t[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var d=i+s;(i===0||uc.includes(r[i-1]))&&(d===r.length||uc.includes(r[d]))?r=(i===0?"":r.substring(0,i))+r.substring(d+1):i=d}}return r===""?null:r}function ov(n,e){return n==null?null:String(n)}function Zt(n,e,t,r,o,s){var i=n.__className;if(ft||i!==t||i===void 0){var d=av(t,r,s);(!ft||d!==n.getAttribute("class"))&&(d==null?n.removeAttribute("class"):n.className=d),n.__className=t}else if(s&&o!==s)for(var h in s){var p=!!s[h];(o==null||p!==!!o[h])&&n.classList.toggle(h,p)}return s}function aa(n,e,t,r){var o=n.__style;if(ft||o!==e){var s=ov(e);(!ft||s!==n.getAttribute("style"))&&(s==null?n.removeAttribute("style"):n.style.cssText=s),n.__style=e}return r}const sv=Symbol("is custom element"),iv=Symbol("is html");function ta(n){if(ft){var e=!1,t=()=>{if(!e){if(e=!0,n.hasAttribute("value")){var r=n.value;Ge(n,"value",null),n.value=r}if(n.hasAttribute("checked")){var o=n.checked;Ge(n,"checked",null),n.checked=o}}};n.__on_r=t,Hn(t),Ed()}}function lv(n,e){var t=Ll(n);t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function cv(n,e){var t=Ll(n);t.checked!==(t.checked=e??void 0)&&(n.checked=e)}function Ge(n,e,t,r){var o=Ll(n);ft&&(o[e]=n.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&n.nodeName==="LINK")||o[e]!==(o[e]=t)&&(e==="loading"&&(n[jf]=t),t==null?n.removeAttribute(e):typeof t!="string"&&uv(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Ll(n){return n.__attributes??(n.__attributes={[sv]:n.nodeName.includes("-"),[iv]:n.namespaceURI===_p})}var dc=new Map;function uv(n){var e=n.getAttribute("is")||n.nodeName,t=dc.get(e);if(t)return t;dc.set(e,t=[]);for(var r,o=n,s=Element.prototype;s!==o;){r=Zu(o);for(var i in r)r[i].set&&t.push(i);o=Al(o)}return t}const dv=()=>performance.now(),qn={tick:n=>requestAnimationFrame(n),now:()=>dv(),tasks:new Set};function Wd(){const n=qn.now();qn.tasks.forEach(e=>{e.c(n)||(qn.tasks.delete(e),e.f())}),qn.tasks.size!==0&&qn.tick(Wd)}function fv(n){let e;return qn.tasks.size===0&&qn.tick(Wd),{promise:new Promise(t=>{qn.tasks.add(e={c:n,f:t})}),abort(){qn.tasks.delete(e)}}}function zo(n,e){Oa(()=>{n.dispatchEvent(new CustomEvent(e))})}function pv(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function fc(n){const e={},t=n.split(";");for(const r of t){const[o,s]=r.split(":");if(!o||s===void 0)break;const i=pv(o.trim());e[i]=s.trim()}return e}const vv=n=>n;function Tr(n,e,t,r){var o=(n&vp)!==0,s="both",i,d=e.inert,h=e.style.overflow,p,b;function S(){return Oa(()=>i??(i=t()(e,(r==null?void 0:r())??{},{direction:s})))}var y={is_global:o,in(){e.inert=d,zo(e,"introstart"),p=dl(e,S(),b,1,()=>{zo(e,"introend"),p==null||p.abort(),p=i=void 0,e.style.overflow=h})},out(m){e.inert=!0,zo(e,"outrostart"),b=dl(e,S(),p,0,()=>{zo(e,"outroend"),m==null||m()})},stop:()=>{p==null||p.abort(),b==null||b.abort()}},g=Ot;if((g.transitions??(g.transitions=[])).push(y),cl){var v=o;if(!v){for(var f=g.parent;f&&f.f&$a;)for(;(f=f.parent)&&!(f.f&Nn););v=!f||(f.f&To)!==0}v&&gs(()=>{l(()=>y.in())})}}function dl(n,e,t,r,o){var s=r===1;if(Gf(e)){var i,d=!1;return Hn(()=>{if(!d){var m=e({direction:s?"in":"out"});i=dl(n,m,t,r,o)}}),{abort:()=>{d=!0,i==null||i.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return o(),{abort:Lr,deactivate:Lr,reset:Lr,t:()=>r};const{delay:h=0,css:p,tick:b,easing:S=vv}=e;var y=[];if(s&&t===void 0&&(b&&b(0,1),p)){var g=fc(p(0,1));y.push(g,g)}var v=()=>1-r,f=n.animate(y,{duration:h,fill:"forwards"});return f.onfinish=()=>{f.cancel();var m=(t==null?void 0:t.t())??1-r;t==null||t.abort();var E=r-m,w=e.duration*Math.abs(E),P=[];if(w>0){var I=!1;if(p)for(var O=Math.ceil(w/16.666666666666668),B=0;B<=O;B+=1){var ne=m+E*S(B/O),Z=fc(p(ne,1-ne));P.push(Z),I||(I=Z.overflow==="hidden")}I&&(n.style.overflow="hidden"),v=()=>{var ae=f.currentTime;return m+E*S(ae/w)},b&&fv(()=>{if(f.playState!=="running")return!1;var ae=v();return b(ae,1-ae),!0})}f=n.animate(P,{duration:w,fill:"forwards"}),f.onfinish=()=>{v=()=>r,b==null||b(r,1-r),o()}},{abort:()=>{f&&(f.cancel(),f.effect=null,f.onfinish=Lr)},deactivate:()=>{o=Lr},reset:()=>{r===0&&(b==null||b(1,0))},t:()=>v()}}function wa(n,e,t=e){var r=new WeakSet;Ip(n,"input",async o=>{var s=o?n.defaultValue:n.value;if(s=Is(n)?Ms(s):s,t(s),zt!==null&&r.add(zt),await yo(),s!==(s=e())){var i=n.selectionStart,d=n.selectionEnd,h=n.value.length;if(n.value=s??"",d!==null){var p=n.value.length;i===d&&d===h&&p>h?(n.selectionStart=p,n.selectionEnd=p):(n.selectionStart=i,n.selectionEnd=Math.min(d,p))}}}),(ft&&n.defaultValue!==n.value||l(e)==null&&n.value)&&(t(Is(n)?Ms(n.value):n.value),zt!==null&&r.add(zt)),no(()=>{var o=e();if(n===document.activeElement){var s=Go??zt;if(r.has(s))return}Is(n)&&o===Ms(n.value)||n.type==="date"&&!o&&!n.value||o!==n.value&&(n.value=o??"")})}function Is(n){var e=n.type;return e==="number"||e==="range"}function Ms(n){return n===""?null:+n}function Zr(n,e,t){var r=ma(n,e);r&&r.set&&(n[e]=t,Po(()=>{n[e]=null}))}var Jn,Ka,Co,ss,Gd;const is=class is{constructor(e){yt(this,ss);yt(this,Jn,new WeakMap);yt(this,Ka);yt(this,Co);it(this,Co,e)}observe(e,t){var r=he(this,Jn).get(e)||new Set;return r.add(t),he(this,Jn).set(e,r),Kt(this,ss,Gd).call(this).observe(e,he(this,Co)),()=>{var o=he(this,Jn).get(e);o.delete(t),o.size===0&&(he(this,Jn).delete(e),he(this,Ka).unobserve(e))}}};Jn=new WeakMap,Ka=new WeakMap,Co=new WeakMap,ss=new WeakSet,Gd=function(){return he(this,Ka)??it(this,Ka,new ResizeObserver(e=>{for(var t of e){is.entries.set(t.target,t);for(var r of he(this,Jn).get(t.target)||[])r(t)}}))},un(is,"entries",new WeakMap);let fl=is;var hv=new fl({box:"border-box"});function gv(n,e,t){var r=hv.observe(n,()=>t(n[e]));gs(()=>(l(()=>t(n[e])),r))}function pc(n,e){return n===e||(n==null?void 0:n[_a])===e}function ms(n={},e,t,r){return gs(()=>{var o,s;return no(()=>{o=s,s=[],l(()=>{n!==t(...s)&&(e(n,...s),o&&pc(t(...o),n)&&e(null,...o))})}),()=>{Hn(()=>{s&&pc(t(...s),n)&&e(null,...s)})}}),n}function _v(n,e){Pp(window,["resize"],()=>Oa(()=>e(window[n])))}function Rt(n=!1){const e=Dt,t=e.l.u;if(!t)return;let r=()=>Ue(e.s);if(n){let o=0,s={};const i=vs(()=>{let d=!1;const h=e.s;for(const p in h)h[p]!==s[p]&&(s[p]=h[p],d=!0);return d&&o++,o});r=()=>a(i)}t.b.length&&Bp(()=>{vc(e,r),Xo(t.b)}),ll(()=>{const o=l(()=>t.m.map(Kf));return()=>{for(const s of o)typeof s=="function"&&s()}}),t.a.length&&ll(()=>{vc(e,r),Xo(t.a)})}function vc(n,e){if(n.l.s)for(const t of n.l.s)a(t);e()}function ao(n,e){var s;var t=(s=n.$$events)==null?void 0:s[e.type],r=ds(t)?t.slice():t==null?[]:[t];for(var o of r)o.call(this,e)}function Pt(n,e,t){var r;n.$$events||(n.$$events={}),(r=n.$$events)[e]||(r[e]=[]),n.$$events[e].push(t)}function It(n){for(var e in n)e in this&&(this[e]=n[e])}function Dl(n,e,t){if(n==null)return e(void 0),t&&t(void 0),Lr;const r=l(()=>n.subscribe(e,t));return r.unsubscribe?()=>r.unsubscribe():r}const Pa=[];function mv(n,e){return{subscribe:Kd(n,e).subscribe}}function Kd(n,e=Lr){let t=null;const r=new Set;function o(d){if(Ol(n,d)&&(n=d,t)){const h=!Pa.length;for(const p of r)p[1](),Pa.push(p,n);if(h){for(let p=0;p<Pa.length;p+=2)Pa[p][0](Pa[p+1]);Pa.length=0}}}function s(d){o(d(n))}function i(d,h=Lr){const p=[d,h];return r.add(p),r.size===1&&(t=e(o,s)||Lr),d(n),()=>{r.delete(p),r.size===0&&t&&(t(),t=null)}}return{set:o,update:s,subscribe:i}}function Vd(n,e,t){const r=!Array.isArray(n),o=r?[n]:n;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return mv(t,(i,d)=>{let h=!1;const p=[];let b=0,S=Lr;const y=()=>{if(b)return;S();const v=e(r?p[0]:p,i,d);s?i(v):S=typeof v=="function"?v:Lr},g=o.map((v,f)=>Dl(v,m=>{p[f]=m,b&=~(1<<f),h&&y()},()=>{b|=1<<f}));return h=!0,y(),function(){Xo(g),S(),h=!1}})}function Yd(n){let e;return Dl(n,t=>e=t)(),e}let Ho=!1,pl=Symbol();function Pe(n,e,t){const r=t[e]??(t[e]={store:null,source:Oe(void 0),unsubscribe:Lr});if(r.store!==n&&!(pl in t))if(r.unsubscribe(),r.store=n??null,n==null)r.source.v=void 0,r.unsubscribe=Lr;else{var o=!0;r.unsubscribe=Dl(n,s=>{o?r.source.v=s:ee(r.source,s)}),o=!1}return n&&pl in t?Yd(n):a(r.source)}function En(n,e,t){let r=t[e];return r&&r.store!==n&&(r.unsubscribe(),r.unsubscribe=Lr),n}function Zd(n,e){return n.set(e),e}function Gt(){const n={};function e(){Po(()=>{for(var t in n)n[t].unsubscribe();kl(n,pl,{enumerable:!1,value:!0})})}return[n,e]}function bv(n){var e=Ho;try{return Ho=!1,[n(),Ho]}finally{Ho=e}}function Xe(n,e,t,r){var P;var o=!eo||(t&up)!==0,s=(t&fp)!==0,i=(t&pp)!==0,d=r,h=!0,p=()=>(h&&(h=!1,d=i?l(r):r),d),b;if(s){var S=_a in n||Vu in n;b=((P=ma(n,e))==null?void 0:P.set)??(S&&e in n?I=>n[e]=I:void 0)}var y,g=!1;s?[y,g]=bv(()=>n[e]):y=n[e],y===void 0&&r!==void 0&&(y=p(),b&&(o&&ep(),b(y)));var v;if(o?v=()=>{var I=n[e];return I===void 0?p():(h=!0,I)}:v=()=>{var I=n[e];return I!==void 0&&(d=void 0),I===void 0?d:I},o&&!(t&dp))return v;if(b){var f=n.$$legacy;return function(I,O){return arguments.length>0?((!o||!O||f||g)&&b(O?v():I),I):v()}}var m=!1,E=(t&cp?vs:Ke)(()=>(m=!1,v()));s&&a(E);var w=Ot;return function(I,O){if(arguments.length>0){const B=O?a(E):o&&s?Da(I):I;return ee(E,B),m=!0,d!==void 0&&(d=B),I}return Ca&&m||w.f&Xn?E.v:a(E)}}const Ul=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"],Yo=Ul.length;function yv(n=""){let e=0;for(let t=0;t<n.length;t++)e=n.charCodeAt(t)+((e<<5)-e),e=e&e;return e=Math.abs(e),e%Yo}function wv(n){return Number.isInteger(n)?(n%Yo+Yo)%Yo:void 0}function $v(n,e){const t=wv(e),r=typeof t=="number"?t:yv(n);return Ul[r]}function xv(){return Ul.map((n,e)=>({className:n,id:e}))}const Ev={brand:"fab",regular:"far",solid:"fas"},Ls={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"};var Sv=A("<i></i>");function Ie(n,e){if(new.target)return Nt({component:Ie,...n});Ct(e,!1);let t=Xe(e,"class",12,""),r=Xe(e,"animation",12,""),o=Xe(e,"color",12,""),s=Xe(e,"family",12,""),i=Xe(e,"name",12),d=Xe(e,"avatarId",12);function h(y,g,v,f){const m=[],E=y.match(/^pick:(.+)$/);if(E){if(E[1]==="Convos")return"fas fa-info-circle";if(Ls[E[1]])return"fas fa-contributor for-"+E[1].toLowerCase();m.push($v(E[1],f))}else m.push(Ev[g]||"fas"),m.push("fa-"+y);return v&&m.push(v.split(" ").map(w=>"fa-"+w)),t()&&m.push(t().split(" ")),m.join(" ")}function p(y,g){const v=[];let f="color:";const m=y.match(/^pick:(.+)$/);return m&&Ls[m[1]]&&(f="background-color:",v.push('background-image:url("'+Ls[m[1]]+'")')),g&&v.push(f+g),v.join(";")}var b={get class(){return t()},set class(y){t(y),Ze()},get animation(){return r()},set animation(y){r(y),Ze()},get color(){return o()},set color(y){o(y),Ze()},get family(){return s()},set family(y){s(y),Ze()},get name(){return i()},set name(y){i(y),Ze()},get avatarId(){return d()},set avatarId(y){d(y),Ze()},$set:It,$on:(y,g)=>Pt(e,y,g)};Rt();var S=Sv();return C((y,g)=>{Zt(S,1,y),aa(S,g),Ge(S,"hidden",!i())},[()=>(Ue(i()),Ue(s()),Ue(r()),Ue(d()),l(()=>h(i(),s(),r(),d()))),()=>(Ue(i()),Ue(o()),l(()=>p(i(),o())))]),x(n,S),Tt(b)}function bs(n,e){const t=Kd(n);t.get=()=>Yd(t);for(let r in e)Object.hasOwn(e,r)&&(t[r]=e[r].bind(t));return t}const Ur=bs("",{toggle(n){n.preventDefault();const e=n.target.closest("a"),t=e&&e.href.replace(/.*#/,"");this.set(this.get()===t?"":t)}}),oa=bs({hasLeftColumn:!1,hasRightColumn:!1,isSingleColumn:!0,sidebarTransition:{},width:0},{setWidth(n){const e=n>=800,t=n>=1200,r=!(e||t),o={duration:250,x:r?n:0};this.set({hasLeftColumn:e,hasRightColumn:t,isSingleColumn:r,sidebarTransition:o,width:n})}});var kv=A('<a href="#nav"><!><!> <small class="badge is-important"> </small></a>'),Av=A('<header class="chat-header"><!> <!></header>');function Jr(n,e){if(new.target)return Nt({component:Jr,...n});Ct(e,!1);const t=()=>Pe(oa,"$viewport",s),r=()=>Pe(Ur,"$activeMenu",s),o=()=>Pe(d,"$notifications",s),[s,i]=Gt(),d=pr("user").notifications;var h={$set:It,$on:(v,f)=>Pt(e,v,f)};Rt();var p=Av(),b=u(p);Tn(b,e,"default",{},null);var S=_(b,2);{var y=v=>{var f=kv();let m;var E=u(f);Ie(E,{name:"bars"});var w=_(E);Ie(w,{name:"times"});var P=_(w,2),I=u(P,!0);c(P),c(f),C(()=>{m=Zt(f,1,"btn-hallow can-toggle",null,m,{"is-active":r()==="nav"}),Ge(P,"hidden",!o().notifications),$(I,o().notifications)}),rt("click",f,function(...O){var B;(B=Ur.toggle)==null||B.apply(this,O)}),x(v,f)};ke(S,v=>{t().hasLeftColumn||v(y)})}c(p),x(n,p);var g=Tt(h);return i(),g}/*! js-cookie v3.0.5 | MIT */function Wo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)n[r]=t[r]}return n}var Ov={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function vl(n,e){function t(o,s,i){if(!(typeof document>"u")){i=Wo({},e,i),typeof i.expires=="number"&&(i.expires=new Date(Date.now()+i.expires*864e5)),i.expires&&(i.expires=i.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var h in i)i[h]&&(d+="; "+h,i[h]!==!0&&(d+="="+i[h].split(";")[0]));return document.cookie=o+"="+n.write(s,o)+d}}function r(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var s=document.cookie?document.cookie.split("; "):[],i={},d=0;d<s.length;d++){var h=s[d].split("="),p=h.slice(1).join("=");try{var b=decodeURIComponent(h[0]);if(i[b]=n.read(p,b),o===b)break}catch{}}return o?i[o]:i}}return Object.create({set:t,get:r,remove:function(o,s){t(o,"",Wo({},s,{expires:-1}))},withAttributes:function(o){return vl(this.converter,Wo({},this.attributes,o))},withConverter:function(o){return vl(Wo({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var hc=vl(Ov,{path:"/"}),gc={};const Cv=typeof process>"u"||typeof gc!="object"?"info":gc.LOG_LEVEL||"quiet",Ds=["trace","debug","info","warn","error","quiet"],hl={},Ia={},_c=()=>{};hl.root=new Jd({name:"root"});function Tv(n){return Ia.root===void 0&&(Object.entries(JSON.parse(localStorage.getItem("logger:nameToLevel")||"{}")).forEach(([e,t])=>{Ia[e]=t||"debug"}),((location.href.match(/_debug=([a-z,:]+)/)||[]).pop()||"").split(",").forEach(e=>{const[t,r]=e.split(":");Ia[t]=r||"debug"}),localStorage.setItem("logger:nameToLevel",JSON.stringify(Ia))),Ia[n]||Ia.root||Cv}function Jd({name:n}){this.name=n,this.isLevel=e=>{const t=Ds.indexOf(e)||e||e.length;return this.numLevel>=t},this.setLevel=e=>{let t=Ds.indexOf(e);return t===-1&&(t=2),this.numLevel=t,Ds.forEach((r,o)=>{const s=r==="trace"||r==="debug"?"log":r,i=!console||o<t?_c:console[s]||console.log||_c;this[r]=i.bind(this,"["+this.name+"]")}),this},this.setLevel(Tv(n))}function oo(n="root"){return hl[n]||(hl[n]=new Jd({name:n}))}const Nv=oo("util"),Rv=.618033988749,gl=1e3,_l=gl*1e3,mc=_l*1e3;function ml(n,e){if(e&&!e.match(/^[+-]\w/)&&(e="+"+e),!e)return{};const t={};let r=!0;for(const o of e)o==="+"?r=!0:o==="-"?r=!1:t[n[o]||o]=r;return t}function bl(n,e){for(;n;){if(e.tagName?n===e:n.matches&&n.matches(e))return n;n=n.parentNode}return null}function Xd(n){const t=Qd("textarea",{style:{opacity:0,position:"absolute"},value:n.textContent||n.value});document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(r){t.value="",Nv.error("copyToClipboard() failed:",r)}return document.body.removeChild(t),t.value}function Qd(n,e){const t=document.createElement(n);for(let r in e)Object.hasOwn(e,r)&&(t[r]=e[r]);return t}function Pv(n,e,t){let r=n&&n.querySelector("."+e.split(" ").join("."));return r||(r=document.createElement("div"),r.className=e,n&&n.appendChild(r),t&&t(r),r)}function Fl(n,e="message"){const t=n.errors||n;return t&&t[0]?t[0][e]||"Unknown error.":""}function Iv(n,e=document){const t=[...n.childNodes],r=[];let o=0;for(;o<t.length;)t[o].nodeType===Node.ELEMENT_NODE?(r.push([o,t[o]]),o++):t.splice(o,1);if(!t.length)return[];const s=e.scrollTop;for(;r.length>1;){const p=Math.floor(r.length/2);r[p][1].offsetTop<=s?r.splice(0,p):r.splice(p)}r.length||r.push([0,t[0]]);const i=e.offsetHeight,d=r[0][0];let h=d;for(;h<t.length&&!(t[h].offsetTop>s+i);)h++;return t.slice(d,h).filter(p=>!p.getAttribute("aria-hidden"))}function Mv(n=0,e=.5,t=.95){var r=Math.floor(n*6),o=n*6-r,s=t*(1-e),i=t*(1-o*e),d=t*(1-(1-o)*e),h=255,p=255,b=255;switch(r){case 0:h=t,p=d,b=s;break;case 1:h=i,p=t,b=s;break;case 2:h=s,p=t,b=d;break;case 3:h=s,p=i,b=t;break;case 4:h=d,p=s,b=t;break;case 5:h=t,p=s,b=i;break}return[Math.floor(h*255),Math.floor(p*255),Math.floor(b*255)]}function Ua(n,e){const t=n<gl?[n,""]:n<_l?[n/gl,"k"]:n<mc?[n/_l,"M"]:[n/mc,"G"],r=String(Math.round(t[0]*10)/10);return(r.match(/\./)?r:r+".0")+t[1]+(e||"")}const at={array:n=>Array.isArray(n),defined:n=>!at.undefined(n),false:n=>!at.true(n),function:n=>typeof n=="function",number:n=>typeof n=="number",object:n=>typeof n=="object"&&n!==null,string:n=>typeof n=="string",stringable:n=>typeof n=="number"||typeof n=="string",true:n=>at.string(n)?!!n.length&&n!=="0":!!n,undefined:n=>n===null||typeof n>"u"};function Lv(n){const e=document,t=n.replace(/\W/g,"_");if(e.getElementById(t))return;const r=e.createElement("script");return[r.id,r.src]=[t,n],e.getElementsByTagName("head")[0].appendChild(r),new Promise((o,s)=>{r.addEventListener("error",s),r.addEventListener("load",o)})}function zr(n,e="Â "){return n.replace(/\s/g,e)}function Cr(n,e,t){const r=e===":children"?n.children:n.querySelectorAll(e);if(!t)return[].slice.call(r,0);if(Array.isArray(t))return[].forEach.call(r,s=>s.addEventListener(t[0],t[1]));const o=[];for(let s=0;s<r.length;s++)o.push(t(r[s],s));return o}function Dv(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function dt(n,e){const t=r=>document.querySelector('meta[name="convos:'+r+'"]')||document.querySelector('meta[name="'+r+'"]');if(arguments.length===1){n==="organization_name"&&(n="contactorganization"),n==="organization_url"&&(n="contactnetworkaddress");const r=t(n);if(!r)throw'Cannot get settings for "'+n+'".';const o={no:!1,yes:!0};return n==="contact"?atob(r.content||""):Object.hasOwn(o,r.content)?o[r.content]:r.content}n==="organization_name"&&(n="contactorganization"),n==="organization_url"&&(n="contactnetworkaddress"),n==="contact"&&(e=btoa(e)),typeof e=="boolean"&&(e=e?"yes":"no"),t(n).content=e}function Uv(n,e){n&&n.preventDefault&&n.preventDefault();const t=Pv(document.body,"fullscreen",r=>{r.addEventListener("click",o=>o.target===r&&r.hide()),r.hide=()=>t.classList.add("hidden")});return Dv(t),e?(t.classList.remove("hidden"),t.appendChild(e.cloneNode(!0)),t):t.hide()}function Bl(n){return(at.string(n)?n:"").split(/[.,\s]+/).map(e=>e.trim()).filter(e=>e.length)}function es(n,e=100){if(n.length===0)return"#000";let t=0;for(let r=0;r<n.length;r++)t=n.charCodeAt(r)+((t<<5)-t),t=t&t;return t=Math.abs(t%e/e),"#"+Mv((t+Rv)%1,.4,.7).map(r=>r.toString(16)).join("")}function ql(n,e){return at.array(e)?e.find(t=>ql(n,t))||!1:n&&n.tagName&&n.tagName.toLowerCase()===e||!1}function Fv(n,e=!0){return new Promise((t,r)=>{setTimeout(()=>{typeof e=="function"?t(e()):typeof e=="string"?r(e):t(e)},n)})}function ys(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}const Us=oo("reactive");class Xr{constructor(){this.cookieName="convos_js",this._on={},this._props={}}emit(e,...t){const r=this._on[e];for(let o=0;o<(r||[]).length;o++)r[o][0](...t);return this}on(e,t){const r=t?null:new Promise(d=>{t=d}),o=this._on[e]||(this._on[e]=[]),s=[t];o.push(s);const i=()=>{const d=o.indexOf(s);d!==-1&&o.splice(d,1)};return r?r.finally(i):i}prop(e,t,r,o={}){const s={...o,defaultValue:r,name:t,type:e,value:r};switch(this._props[t]=s,s.updateable=["cookie","persist","rw"].indexOf(e)!==-1,e){case"cookie":return this._cookieProp(s);case"persist":return this._localStorageProp(s);case"ro":return this._readOnlyProp(s);case"rw":return this._updateableProp(s)}throw"["+this.constructor.name+'] Unknown prop type "'+e+'" for prop "'+t+'".'}subscribe(e){return e(this),this.on("update",e)}update(e){return Object.keys(e).forEach(t=>{const r=this._props[t];if(!r)return Us.trace("["+this.constructor.name+'] Unknown prop "'+t+'".');Object.hasOwn(r,"prev")||(r.prev=r.type==="ro"?void 0:r.value),r.updateable&&(r.value=e[t])}),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}_cookie(e,t){const r=e.key||e.name,o=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!o[this.cookieName])try{const d=hc.get(this.cookieName);o[this.cookieName]=JSON.parse(d?atob(d):"{}")}catch(d){Us.error({[r]:d})}const s=o[this.cookieName]||{};if(arguments.length===1)return s[r];t===e.defaultValue?delete s[r]:s[r]=t;const i=location.href.indexOf("https:")===0;hc.set(this.cookieName,btoa(JSON.stringify(s)),{expires:365,SameSite:"Lax",secure:i})}_cookieProp(e){const t=this._cookie(e);at.defined(t)&&(e.value=t),at.undefined(t)&&this._cookie(e,e.value),this._updateableProp(e)}_delayedUpdate(){const e={};return Object.keys(this._props).forEach(t=>{const r=this._props[t];if(!Object.hasOwn(r,"prev"))return;const o=r.prev;delete r.prev,r.value!==o&&(r.type==="cookie"&&this._cookie(r,r.value),r.type==="persist"&&this._localStorage(r,r.value),e[t]=r.type!=="ro")}),delete this._updatedTid,Object.keys(e).length&&this.emit("update",this,e),e}_localStorage(e,t){const r="convos:"+(e.key||e.name);if(arguments.length===2)return t===e.defaultValue?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(t));try{return Object.hasOwn(localStorage,r)?JSON.parse(localStorage.getItem(r)):void 0}catch(o){Us.error({[r]:localStorage.getItem(r)},o);return}}_localStorageProp(e){const t=this._localStorage(e);at.defined(t)&&(e.value=t),at.undefined(t)&&this._localStorage(e,e.value),this._updateableProp(e)}_readOnlyProp(e){if(e.value===void 0)throw"["+this.constructor.name+'] Read-only attribute "'+e.name+'" cannot be undefined';const t=at.function(e.value)?e.value:()=>e.value;Object.defineProperty(this,e.name,{get:t})}_updateableProp(e){const t=e.name;Object.defineProperty(this,t,{get(){return e.value},set(r){e.value===r||this.update({[t]:r})}})}}class Bv extends Xr{constructor(){super(),this.prop("persist","history",[],{key:"command_history"}),this.prop("rw","conversation",null),this.prop("rw","index",-1)}add(e){if(!e.length)return this;const t=this.history.slice(0,19);return t.unshift(e),this.update({history:t,index:-1})}attach(e){this.inputEl=e}render(e,t){t=this.index+t,t<-1&&(t=-1),t>=this.history.length&&(t=this.history.length-1);const r=this.inputEl.value;return this.inputEl.selectionStart!==r.length||r.length&&r!==this.history[this.index]?!1:(e.preventDefault(),this.update({index:t}),this.inputEl.value=t===-1?"":this.history[t],!0)}update(e){return e.conversation&&e.conversation!==this.conversation&&this.update({index:-1}),super.update(e)}}var po=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function so(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function qv(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),t}var Fs,bc;function jv(){if(bc)return Fs;bc=1;var n=typeof po=="object"&&po&&po.Object===Object&&po;return Fs=n,Fs}var Bs,yc;function ef(){if(yc)return Bs;yc=1;var n=jv(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return Bs=t,Bs}var qs,wc;function tf(){if(wc)return qs;wc=1;var n=ef(),e=function(){return n.Date.now()};return qs=e,qs}var zv=tf();const Zo=so(zv);var js,$c;function jl(){if($c)return js;$c=1;var n=ef(),e=n.Symbol;return js=e,js}var zs,xc;function Hv(){if(xc)return zs;xc=1;function n(e,t){for(var r=-1,o=e==null?0:e.length,s=Array(o);++r<o;)s[r]=t(e[r],r,e);return s}return zs=n,zs}var Hs,Ec;function Wv(){if(Ec)return Hs;Ec=1;var n=Array.isArray;return Hs=n,Hs}var Ws,Sc;function Gv(){if(Sc)return Ws;Sc=1;var n=jl(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,o=n?n.toStringTag:void 0;function s(i){var d=t.call(i,o),h=i[o];try{i[o]=void 0;var p=!0}catch{}var b=r.call(i);return p&&(d?i[o]=h:delete i[o]),b}return Ws=s,Ws}var Gs,kc;function Kv(){if(kc)return Gs;kc=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return Gs=t,Gs}var Ks,Ac;function Vv(){if(Ac)return Ks;Ac=1;var n=jl(),e=Gv(),t=Kv(),r="[object Null]",o="[object Undefined]",s=n?n.toStringTag:void 0;function i(d){return d==null?d===void 0?o:r:s&&s in Object(d)?e(d):t(d)}return Ks=i,Ks}var Vs,Oc;function Yv(){if(Oc)return Vs;Oc=1;function n(e){return e!=null&&typeof e=="object"}return Vs=n,Vs}var Ys,Cc;function rf(){if(Cc)return Ys;Cc=1;var n=Vv(),e=Yv(),t="[object Symbol]";function r(o){return typeof o=="symbol"||e(o)&&n(o)==t}return Ys=r,Ys}var Zs,Tc;function Zv(){if(Tc)return Zs;Tc=1;var n=jl(),e=Hv(),t=Wv(),r=rf(),o=n?n.prototype:void 0,s=o?o.toString:void 0;function i(d){if(typeof d=="string")return d;if(t(d))return e(d,i)+"";if(r(d))return s?s.call(d):"";var h=d+"";return h=="0"&&1/d==-1/0?"-0":h}return Zs=i,Zs}var Js,Nc;function Io(){if(Nc)return Js;Nc=1;var n=Zv();function e(t){return t==null?"":n(t)}return Js=e,Js}var Xs,Rc;function Jv(){if(Rc)return Xs;Rc=1;var n=Io(),e=/[\\^$.*+?()[\]{}|]/g,t=RegExp(e.source);function r(o){return o=n(o),o&&t.test(o)?o.replace(e,"\\$&"):o}return Xs=r,Xs}var Xv=Jv();const io=so(Xv),Qv=oo("api");class ws extends Xr{constructor(e){super(),this.prop("ro","api",e.api),this.prop("ro","defaultParams",e.defaultParams||{}),this.prop("ro","id",e.id),this.prop("rw","err",null),this.prop("rw","req",{body:null,headers:{}}),this.prop("rw","res",{body:{},headers:[]}),this.prop("rw","status","pending")}error(e){if(e)return this.update({err:Array.isArray(e)?e:[{message:e}],status:"error"});if(!this.err||!this.err.length)return"";const t=this.err[0],r=t.path&&t.path.match(/\w$/)&&t.path.split("/").pop();return r?r+": "+t.message:t.message}perform(e){let t;return this._promise||(this._promise=this.api.spec(this.id).then(r=>{if(!r)throw'Unknown operationId "'+this.id+'".';const o=this._paramsToRequest(r,e||this.defaultParams);return t=new XMLHttpRequest,this.update({req:o,status:"loading"}),this._send(t,o)}).then(()=>{const r={};r.body=t.response?JSON.parse(t.response):{},r.headers=(t.getAllResponseHeaders()||"").trim().split(/[\r\n]+/).filter(s=>s.length).map(s=>s.split(/:\s*/,2)),r.status=String(t.status||"201");let o=null;return String(r.status).match(/^[23]/)||(o=r.body&&r.body.errors?r.body.errors:[{message:t.statusText||"Unknown error."}]),this.update({err:o,res:r,status:o?"error":"success"})}).catch(r=>(r.type&&(r=r.type),Qv.error(this.req.url+" FAILED "+r),this.update({res:{body:{errors:[{message:String(r)}]},headers:[],status:"599"},status:"error"}),this.error(Array.isArray(r)?r:'Failed fetching operationId "'+this.id+'": '+r))).finally(()=>{delete this._promise}))}is(e){return this.status===e}reset(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}_extractValue(e,t){return t.schema?Object.keys(t.schema.properties).reduce((r,o)=>(r[o]=e[o],r),{}):e[t.name]}_hasProperty(e,t){return t.in==="body"?!0:t.in==="formData"?e.formData.has(t.name):Object.hasOwn(e,t.name)}_paramsToRequest(e,t){const r=new URL(e.url),o={headers:this.req.headers,method:e.method.toLowerCase(),url:r},s=[];if((e.parameters||[]).forEach(i=>{if(!this._hasProperty(t,i)&&i.required)s.push({message:"Missing property.",path:"/"+i.name});else{if(!this._hasProperty(t,i)&&!i.required)return;if(i.in==="path"){const d=new RegExp("(%7B|\\{)"+io(i.name)+"(%7D|\\})","i");r.pathname=r.pathname.replace(d,encodeURIComponent(this._extractValue(t,i)))}else if(i.in==="query")r.searchParams.set(i.name,this._extractValue(t,i));else if(i.in==="formData")delete o.headers["Content-Type"],o.body=t.formData;else if(i.in==="body")o.body=this._extractValue(t,i);else if(i.in==="header")o.header[i.name]=this._extractValue(t,i.name);else throw"[Api] Parameter in:"+i.in+" is not supported."}}),s.length)throw s;return o}_send(e,t){return e.timeout=15e3,e.open(t.method.toUpperCase(),t.url),Object.keys(t.headers).forEach(r=>e.setRequestHeader(r,t.headers[r])),t.method==="post"?(e.upload.addEventListener("progress",r=>this.emit("progress",r)),e.send(at.object(t.body)&&!at.function(t.body.has)?JSON.stringify(t.body):t.body)):e.send(),new Promise(r=>{e.addEventListener("abort",r),e.addEventListener("error",r),e.addEventListener("load",r)})}}class eh{constructor(){this.protocol=location.protocol||"http",this._url="/api"}op(e,t){const r=new ws({api:this,id:e,defaultParams:t});return r.req.headers={"Content-Type":"application/json"},r}async spec(e){if(this._ops&&e)return this._ops[e];if(this._spec)return this._spec;const r=await(await fetch(this._url)).json();if(this._ops={},this._spec=r,Object.keys(r.paths).forEach(o=>{Object.keys(r.paths[o]).forEach(s=>{const i=r.paths[o][s],d=i.operationId;d&&(i.method=s.toUpperCase(),i.url=this.protocol+"//"+r.host+r.basePath+o+".json",i.parameters=(i.parameters||[]).map(h=>this._resolveRef(h)),this._ops[d]=i)})}),this._ops&&e)return this._ops[e];if(this._spec)return this._spec}url(e){return this._url=e,this}_resolveRef(e){let t=e;if(e.$ref){const r=e.$ref.replace(/^#\//,"").split("/");for(t=this._spec;r.length;)t=t[r.shift()]}return at.object(t)&&Object.keys(t).forEach(r=>{t[r]=this._resolveRef(t[r])}),t}}const qt=new eh;var Qs,Pc;function th(){return Pc||(Pc=1,Qs=Error),Qs}var ei,Ic;function rh(){return Ic||(Ic=1,ei=EvalError),ei}var ti,Mc;function nh(){return Mc||(Mc=1,ti=RangeError),ti}var ri,Lc;function ah(){return Lc||(Lc=1,ri=ReferenceError),ri}var ni,Dc;function nf(){return Dc||(Dc=1,ni=SyntaxError),ni}var ai,Uc;function Mo(){return Uc||(Uc=1,ai=TypeError),ai}var oi,Fc;function oh(){return Fc||(Fc=1,oi=URIError),oi}var si,Bc;function sh(){return Bc||(Bc=1,si=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var o=42;e[t]=o;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(e,t);if(i.value!==o||i.enumerable!==!0)return!1}return!0}),si}var ii,qc;function ih(){if(qc)return ii;qc=1;var n=typeof Symbol<"u"&&Symbol,e=sh();return ii=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},ii}var li,jc;function lh(){if(jc)return li;jc=1;var n={__proto__:null,foo:{}},e=Object;return li=function(){return{__proto__:n}.foo===n.foo&&!(n instanceof e)},li}var ci,zc;function ch(){if(zc)return ci;zc=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",o=function(h,p){for(var b=[],S=0;S<h.length;S+=1)b[S]=h[S];for(var y=0;y<p.length;y+=1)b[y+h.length]=p[y];return b},s=function(h,p){for(var b=[],S=p,y=0;S<h.length;S+=1,y+=1)b[y]=h[S];return b},i=function(d,h){for(var p="",b=0;b<d.length;b+=1)p+=d[b],b+1<d.length&&(p+=h);return p};return ci=function(h){var p=this;if(typeof p!="function"||e.apply(p)!==r)throw new TypeError(n+p);for(var b=s(arguments,1),S,y=function(){if(this instanceof S){var E=p.apply(this,o(b,arguments));return Object(E)===E?E:this}return p.apply(h,o(b,arguments))},g=t(0,p.length-b.length),v=[],f=0;f<g;f++)v[f]="$"+f;if(S=Function("binder","return function ("+i(v,",")+"){ return binder.apply(this,arguments); }")(y),p.prototype){var m=function(){};m.prototype=p.prototype,S.prototype=new m,m.prototype=null}return S},ci}var ui,Hc;function zl(){if(Hc)return ui;Hc=1;var n=ch();return ui=Function.prototype.bind||n,ui}var di,Wc;function uh(){if(Wc)return di;Wc=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=zl();return di=t.call(n,e),di}var fi,Gc;function lo(){if(Gc)return fi;Gc=1;var n,e=th(),t=rh(),r=nh(),o=ah(),s=nf(),i=Mo(),d=oh(),h=Function,p=function(ce){try{return h('"use strict"; return ('+ce+").constructor;")()}catch{}},b=Object.getOwnPropertyDescriptor;if(b)try{b({},"")}catch{b=null}var S=function(){throw new i},y=b?function(){try{return arguments.callee,S}catch{try{return b(arguments,"callee").get}catch{return S}}}():S,g=ih()(),v=lh()(),f=Object.getPrototypeOf||(v?function(ce){return ce.__proto__}:null),m={},E=typeof Uint8Array>"u"||!f?n:f(Uint8Array),w={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":g&&f?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":m,"%AsyncGenerator%":m,"%AsyncGeneratorFunction%":m,"%AsyncIteratorPrototype%":m,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":m,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&f?f(f([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!g||!f?n:f(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":r,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!g||!f?n:f(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&f?f(""[Symbol.iterator]()):n,"%Symbol%":g?Symbol:n,"%SyntaxError%":s,"%ThrowTypeError%":y,"%TypedArray%":E,"%TypeError%":i,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":d,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet};if(f)try{null.error}catch(ce){var P=f(f(ce));w["%Error.prototype%"]=P}var I=function ce(K){var oe;if(K==="%AsyncFunction%")oe=p("async function () {}");else if(K==="%GeneratorFunction%")oe=p("function* () {}");else if(K==="%AsyncGeneratorFunction%")oe=p("async function* () {}");else if(K==="%AsyncGenerator%"){var be=ce("%AsyncGeneratorFunction%");be&&(oe=be.prototype)}else if(K==="%AsyncIteratorPrototype%"){var Ne=ce("%AsyncGenerator%");Ne&&f&&(oe=f(Ne.prototype))}return w[K]=oe,oe},O={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},B=zl(),ne=uh(),Z=B.call(Function.call,Array.prototype.concat),ae=B.call(Function.apply,Array.prototype.splice),G=B.call(Function.call,String.prototype.replace),ie=B.call(Function.call,String.prototype.slice),te=B.call(Function.call,RegExp.prototype.exec),me=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,H=/\\(\\)?/g,z=function(K){var oe=ie(K,0,1),be=ie(K,-1);if(oe==="%"&&be!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(be==="%"&&oe!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var Ne=[];return G(K,me,function(pe,Se,_e,ge){Ne[Ne.length]=_e?G(ge,H,"$1"):Se||pe}),Ne},le=function(K,oe){var be=K,Ne;if(ne(O,be)&&(Ne=O[be],be="%"+Ne[0]+"%"),ne(w,be)){var pe=w[be];if(pe===m&&(pe=I(be)),typeof pe>"u"&&!oe)throw new i("intrinsic "+K+" exists, but is not available. Please file an issue!");return{alias:Ne,name:be,value:pe}}throw new s("intrinsic "+K+" does not exist!")};return fi=function(K,oe){if(typeof K!="string"||K.length===0)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof oe!="boolean")throw new i('"allowMissing" argument must be a boolean');if(te(/^%?[^%]*%?$/,K)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var be=z(K),Ne=be.length>0?be[0]:"",pe=le("%"+Ne+"%",oe),Se=pe.name,_e=pe.value,ge=!1,Ce=pe.alias;Ce&&(Ne=Ce[0],ae(be,Z([0,1],Ce)));for(var fe=1,we=!0;fe<be.length;fe+=1){var q=be[fe],M=ie(q,0,1),R=ie(q,-1);if((M==='"'||M==="'"||M==="`"||R==='"'||R==="'"||R==="`")&&M!==R)throw new s("property names with quotes must have matching quotes");if((q==="constructor"||!we)&&(ge=!0),Ne+="."+q,Se="%"+Ne+"%",ne(w,Se))_e=w[Se];else if(_e!=null){if(!(q in _e)){if(!oe)throw new i("base intrinsic for "+K+" exists, but the property is not available.");return}if(b&&fe+1>=be.length){var j=b(_e,q);we=!!j,we&&"get"in j&&!("originalValue"in j.get)?_e=j.get:_e=_e[q]}else we=ne(_e,q),_e=_e[q];we&&!ge&&(w[Se]=_e)}}return _e},fi}var pi={exports:{}},vi,Kc;function Hl(){if(Kc)return vi;Kc=1;var n=lo(),e=n("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return vi=e,vi}var hi,Vc;function af(){if(Vc)return hi;Vc=1;var n=lo(),e=n("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return hi=e,hi}var gi,Yc;function dh(){if(Yc)return gi;Yc=1;var n=Hl(),e=nf(),t=Mo(),r=af();return gi=function(s,i,d){if(!s||typeof s!="object"&&typeof s!="function")throw new t("`obj` must be an object or a function`");if(typeof i!="string"&&typeof i!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var h=arguments.length>3?arguments[3]:null,p=arguments.length>4?arguments[4]:null,b=arguments.length>5?arguments[5]:null,S=arguments.length>6?arguments[6]:!1,y=!!r&&r(s,i);if(n)n(s,i,{configurable:b===null&&y?y.configurable:!b,enumerable:h===null&&y?y.enumerable:!h,value:d,writable:p===null&&y?y.writable:!p});else if(S||!h&&!p&&!b)s[i]=d;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},gi}var _i,Zc;function fh(){if(Zc)return _i;Zc=1;var n=Hl(),e=function(){return!!n};return e.hasArrayLengthDefineBug=function(){if(!n)return null;try{return n([],"length",{value:1}).length!==1}catch{return!0}},_i=e,_i}var mi,Jc;function ph(){if(Jc)return mi;Jc=1;var n=lo(),e=dh(),t=fh()(),r=af(),o=Mo(),s=n("%Math.floor%");return mi=function(d,h){if(typeof d!="function")throw new o("`fn` is not a function");if(typeof h!="number"||h<0||h>4294967295||s(h)!==h)throw new o("`length` must be a positive 32-bit integer");var p=arguments.length>2&&!!arguments[2],b=!0,S=!0;if("length"in d&&r){var y=r(d,"length");y&&!y.configurable&&(b=!1),y&&!y.writable&&(S=!1)}return(b||S||!p)&&(t?e(d,"length",h,!0,!0):e(d,"length",h)),d},mi}var Xc;function vh(){return Xc||(Xc=1,function(n){var e=zl(),t=lo(),r=ph(),o=Mo(),s=t("%Function.prototype.apply%"),i=t("%Function.prototype.call%"),d=t("%Reflect.apply%",!0)||e.call(i,s),h=Hl(),p=t("%Math.max%");n.exports=function(y){if(typeof y!="function")throw new o("a function is required");var g=d(e,i,arguments);return r(g,1+p(0,y.length-(arguments.length-1)),!0)};var b=function(){return d(e,s,arguments)};h?h(n.exports,"apply",{value:b}):n.exports.apply=b}(pi)),pi.exports}var bi,Qc;function hh(){if(Qc)return bi;Qc=1;var n=lo(),e=vh(),t=e(n("String.prototype.indexOf"));return bi=function(o,s){var i=n(o,!!s);return typeof i=="function"&&t(o,".prototype.")>-1?e(i):i},bi}const gh={},_h=Object.freeze(Object.defineProperty({__proto__:null,default:gh},Symbol.toStringTag,{value:"Module"})),mh=qv(_h);var yi,eu;function bh(){if(eu)return yi;eu=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,o=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,i=o&&s&&typeof s.get=="function"?s.get:null,d=o&&Set.prototype.forEach,h=typeof WeakMap=="function"&&WeakMap.prototype,p=h?WeakMap.prototype.has:null,b=typeof WeakSet=="function"&&WeakSet.prototype,S=b?WeakSet.prototype.has:null,y=typeof WeakRef=="function"&&WeakRef.prototype,g=y?WeakRef.prototype.deref:null,v=Boolean.prototype.valueOf,f=Object.prototype.toString,m=Function.prototype.toString,E=String.prototype.match,w=String.prototype.slice,P=String.prototype.replace,I=String.prototype.toUpperCase,O=String.prototype.toLowerCase,B=RegExp.prototype.test,ne=Array.prototype.concat,Z=Array.prototype.join,ae=Array.prototype.slice,G=Math.floor,ie=typeof BigInt=="function"?BigInt.prototype.valueOf:null,te=Object.getOwnPropertySymbols,me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,H=typeof Symbol=="function"&&typeof Symbol.iterator=="object",z=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===H||!0)?Symbol.toStringTag:null,le=Object.prototype.propertyIsEnumerable,ce=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(k){return k.__proto__}:null);function K(k,L){if(k===1/0||k===-1/0||k!==k||k&&k>-1e3&&k<1e3||B.call(/e/,L))return L;var Ae=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof k=="number"){var Le=k<0?-G(-k):G(k);if(Le!==k){var je=String(Le),Be=w.call(L,je.length+1);return P.call(je,Ae,"$&_")+"."+P.call(P.call(Be,/([0-9]{3})/g,"$&_"),/_$/,"")}}return P.call(L,Ae,"$&_")}var oe=mh,be=oe.custom,Ne=R(be)?be:null;yi=function k(L,Ae,Le,je){var Be=Ae||{};if(U(Be,"quoteStyle")&&Be.quoteStyle!=="single"&&Be.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(U(Be,"maxStringLength")&&(typeof Be.maxStringLength=="number"?Be.maxStringLength<0&&Be.maxStringLength!==1/0:Be.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var et=U(Be,"customInspect")?Be.customInspect:!0;if(typeof et!="boolean"&&et!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(U(Be,"indent")&&Be.indent!==null&&Be.indent!=="	"&&!(parseInt(Be.indent,10)===Be.indent&&Be.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(U(Be,"numericSeparator")&&typeof Be.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ht=Be.numericSeparator;if(typeof L>"u")return"undefined";if(L===null)return"null";if(typeof L=="boolean")return L?"true":"false";if(typeof L=="string")return ue(L,Be);if(typeof L=="number"){if(L===0)return 1/0/L>0?"0":"-0";var lt=String(L);return ht?K(L,lt):lt}if(typeof L=="bigint"){var mt=String(L)+"n";return ht?K(L,mt):mt}var xt=typeof Be.depth>"u"?5:Be.depth;if(typeof Le>"u"&&(Le=0),Le>=xt&&xt>0&&typeof L=="object")return _e(L)?"[Array]":"[Object]";var T=Ye(Be,Le);if(typeof je>"u")je=[];else if(F(je,L)>=0)return"[Circular]";function re(Ut,sr,ur){if(sr&&(je=ae.call(je),je.push(sr)),ur){var _r={depth:Be.depth};return U(Be,"quoteStyle")&&(_r.quoteStyle=Be.quoteStyle),k(Ut,_r,Le+1,je)}return k(Ut,Be,Le+1,je)}if(typeof L=="function"&&!Ce(L)){var Re=W(L),Ve=Te(L,re);return"[Function"+(Re?": "+Re:" (anonymous)")+"]"+(Ve.length>0?" { "+Z.call(Ve,", ")+" }":"")}if(R(L)){var ot=H?P.call(String(L),/^(Symbol\(.*\))_[^)]*$/,"$1"):me.call(L);return typeof L=="object"&&!H?ye(ot):ot}if($e(L)){for(var st="<"+O.call(String(L.nodeName)),Fe=L.attributes||[],Me=0;Me<Fe.length;Me++)st+=" "+Fe[Me].name+"="+pe(Se(Fe[Me].value),"double",Be);return st+=">",L.childNodes&&L.childNodes.length&&(st+="..."),st+="</"+O.call(String(L.nodeName))+">",st}if(_e(L)){if(L.length===0)return"[]";var Je=Te(L,re);return T&&!de(Je)?"["+qe(Je,T)+"]":"[ "+Z.call(Je,", ")+" ]"}if(fe(L)){var St=Te(L,re);return!("cause"in Error.prototype)&&"cause"in L&&!le.call(L,"cause")?"{ ["+String(L)+"] "+Z.call(ne.call("[cause]: "+re(L.cause),St),", ")+" }":St.length===0?"["+String(L)+"]":"{ ["+String(L)+"] "+Z.call(St,", ")+" }"}if(typeof L=="object"&&et){if(Ne&&typeof L[Ne]=="function"&&oe)return oe(L,{depth:xt-Le});if(et!=="symbol"&&typeof L.inspect=="function")return L.inspect()}if(Q(L)){var ct=[];return r&&r.call(L,function(Ut,sr){ct.push(re(sr,L,!0)+" => "+re(Ut,L))}),xe("Map",t.call(L),ct,T)}if(J(L)){var or=[];return d&&d.call(L,function(Ut){or.push(re(Ut,L))}),xe("Set",i.call(L),or,T)}if(D(L))return ve("WeakMap");if(se(L))return ve("WeakSet");if(X(L))return ve("WeakRef");if(q(L))return ye(re(Number(L)));if(j(L))return ye(re(ie.call(L)));if(M(L))return ye(v.call(L));if(we(L))return ye(re(String(L)));if(typeof window<"u"&&L===window)return"{ [object Window] }";if(L===po)return"{ [object globalThis] }";if(!ge(L)&&!Ce(L)){var er=Te(L,re),Et=ce?ce(L)===Object.prototype:L instanceof Object||L.constructor===Object,bt=L instanceof Object?"":"null prototype",pt=!Et&&z&&Object(L)===L&&z in L?w.call(N(L),8,-1):bt?"Object":"",Mt=Et||typeof L.constructor!="function"?"":L.constructor.name?L.constructor.name+" ":"",Vt=Mt+(pt||bt?"["+Z.call(ne.call([],pt||[],bt||[]),": ")+"] ":"");return er.length===0?Vt+"{}":T?Vt+"{"+qe(er,T)+"}":Vt+"{ "+Z.call(er,", ")+" }"}return String(L)};function pe(k,L,Ae){var Le=(Ae.quoteStyle||L)==="double"?'"':"'";return Le+k+Le}function Se(k){return P.call(String(k),/"/g,"&quot;")}function _e(k){return N(k)==="[object Array]"&&(!z||!(typeof k=="object"&&z in k))}function ge(k){return N(k)==="[object Date]"&&(!z||!(typeof k=="object"&&z in k))}function Ce(k){return N(k)==="[object RegExp]"&&(!z||!(typeof k=="object"&&z in k))}function fe(k){return N(k)==="[object Error]"&&(!z||!(typeof k=="object"&&z in k))}function we(k){return N(k)==="[object String]"&&(!z||!(typeof k=="object"&&z in k))}function q(k){return N(k)==="[object Number]"&&(!z||!(typeof k=="object"&&z in k))}function M(k){return N(k)==="[object Boolean]"&&(!z||!(typeof k=="object"&&z in k))}function R(k){if(H)return k&&typeof k=="object"&&k instanceof Symbol;if(typeof k=="symbol")return!0;if(!k||typeof k!="object"||!me)return!1;try{return me.call(k),!0}catch{}return!1}function j(k){if(!k||typeof k!="object"||!ie)return!1;try{return ie.call(k),!0}catch{}return!1}var Y=Object.prototype.hasOwnProperty||function(k){return k in this};function U(k,L){return Y.call(k,L)}function N(k){return f.call(k)}function W(k){if(k.name)return k.name;var L=E.call(m.call(k),/^function\s*([\w$]+)/);return L?L[1]:null}function F(k,L){if(k.indexOf)return k.indexOf(L);for(var Ae=0,Le=k.length;Ae<Le;Ae++)if(k[Ae]===L)return Ae;return-1}function Q(k){if(!t||!k||typeof k!="object")return!1;try{t.call(k);try{i.call(k)}catch{return!0}return k instanceof Map}catch{}return!1}function D(k){if(!p||!k||typeof k!="object")return!1;try{p.call(k,p);try{S.call(k,S)}catch{return!0}return k instanceof WeakMap}catch{}return!1}function X(k){if(!g||!k||typeof k!="object")return!1;try{return g.call(k),!0}catch{}return!1}function J(k){if(!i||!k||typeof k!="object")return!1;try{i.call(k);try{t.call(k)}catch{return!0}return k instanceof Set}catch{}return!1}function se(k){if(!S||!k||typeof k!="object")return!1;try{S.call(k,S);try{p.call(k,p)}catch{return!0}return k instanceof WeakSet}catch{}return!1}function $e(k){return!k||typeof k!="object"?!1:typeof HTMLElement<"u"&&k instanceof HTMLElement?!0:typeof k.nodeName=="string"&&typeof k.getAttribute=="function"}function ue(k,L){if(k.length>L.maxStringLength){var Ae=k.length-L.maxStringLength,Le="... "+Ae+" more character"+(Ae>1?"s":"");return ue(w.call(k,0,L.maxStringLength),L)+Le}var je=P.call(P.call(k,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,V);return pe(je,"single",L)}function V(k){var L=k.charCodeAt(0),Ae={8:"b",9:"t",10:"n",12:"f",13:"r"}[L];return Ae?"\\"+Ae:"\\x"+(L<16?"0":"")+I.call(L.toString(16))}function ye(k){return"Object("+k+")"}function ve(k){return k+" { ? }"}function xe(k,L,Ae,Le){var je=Le?qe(Ae,Le):Z.call(Ae,", ");return k+" ("+L+") {"+je+"}"}function de(k){for(var L=0;L<k.length;L++)if(F(k[L],`
`)>=0)return!1;return!0}function Ye(k,L){var Ae;if(k.indent==="	")Ae="	";else if(typeof k.indent=="number"&&k.indent>0)Ae=Z.call(Array(k.indent+1)," ");else return null;return{base:Ae,prev:Z.call(Array(L+1),Ae)}}function qe(k,L){if(k.length===0)return"";var Ae=`
`+L.prev+L.base;return Ae+Z.call(k,","+Ae)+`
`+L.prev}function Te(k,L){var Ae=_e(k),Le=[];if(Ae){Le.length=k.length;for(var je=0;je<k.length;je++)Le[je]=U(k,je)?L(k[je],k):""}var Be=typeof te=="function"?te(k):[],et;if(H){et={};for(var ht=0;ht<Be.length;ht++)et["$"+Be[ht]]=Be[ht]}for(var lt in k)U(k,lt)&&(Ae&&String(Number(lt))===lt&&lt<k.length||H&&et["$"+lt]instanceof Symbol||(B.call(/[^\w$]/,lt)?Le.push(L(lt,k)+": "+L(k[lt],k)):Le.push(lt+": "+L(k[lt],k))));if(typeof te=="function")for(var mt=0;mt<Be.length;mt++)le.call(k,Be[mt])&&Le.push("["+L(Be[mt])+"]: "+L(k[Be[mt]],k));return Le}return yi}var wi,tu;function yh(){if(tu)return wi;tu=1;var n=lo(),e=hh(),t=bh(),r=Mo(),o=n("%WeakMap%",!0),s=n("%Map%",!0),i=e("WeakMap.prototype.get",!0),d=e("WeakMap.prototype.set",!0),h=e("WeakMap.prototype.has",!0),p=e("Map.prototype.get",!0),b=e("Map.prototype.set",!0),S=e("Map.prototype.has",!0),y=function(m,E){for(var w=m,P;(P=w.next)!==null;w=P)if(P.key===E)return w.next=P.next,P.next=m.next,m.next=P,P},g=function(m,E){var w=y(m,E);return w&&w.value},v=function(m,E,w){var P=y(m,E);P?P.value=w:m.next={key:E,next:m.next,value:w}},f=function(m,E){return!!y(m,E)};return wi=function(){var E,w,P,I={assert:function(O){if(!I.has(O))throw new r("Side channel does not contain "+t(O))},get:function(O){if(o&&O&&(typeof O=="object"||typeof O=="function")){if(E)return i(E,O)}else if(s){if(w)return p(w,O)}else if(P)return g(P,O)},has:function(O){if(o&&O&&(typeof O=="object"||typeof O=="function")){if(E)return h(E,O)}else if(s){if(w)return S(w,O)}else if(P)return f(P,O);return!1},set:function(O,B){o&&O&&(typeof O=="object"||typeof O=="function")?(E||(E=new o),d(E,O,B)):s?(w||(w=new s),b(w,O,B)):(P||(P={key:{},next:null}),v(P,O,B))}};return I},wi}var $i,ru;function Wl(){if(ru)return $i;ru=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return $i={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},$i}var xi,nu;function of(){if(nu)return xi;nu=1;var n=Wl(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var f=[],m=0;m<256;++m)f.push("%"+((m<16?"0":"")+m.toString(16)).toUpperCase());return f}(),o=function(m){for(;m.length>1;){var E=m.pop(),w=E.obj[E.prop];if(t(w)){for(var P=[],I=0;I<w.length;++I)typeof w[I]<"u"&&P.push(w[I]);E.obj[E.prop]=P}}},s=function(m,E){for(var w=E&&E.plainObjects?Object.create(null):{},P=0;P<m.length;++P)typeof m[P]<"u"&&(w[P]=m[P]);return w},i=function f(m,E,w){if(!E)return m;if(typeof E!="object"){if(t(m))m.push(E);else if(m&&typeof m=="object")(w&&(w.plainObjects||w.allowPrototypes)||!e.call(Object.prototype,E))&&(m[E]=!0);else return[m,E];return m}if(!m||typeof m!="object")return[m].concat(E);var P=m;return t(m)&&!t(E)&&(P=s(m,w)),t(m)&&t(E)?(E.forEach(function(I,O){if(e.call(m,O)){var B=m[O];B&&typeof B=="object"&&I&&typeof I=="object"?m[O]=f(B,I,w):m.push(I)}else m[O]=I}),m):Object.keys(E).reduce(function(I,O){var B=E[O];return e.call(I,O)?I[O]=f(I[O],B,w):I[O]=B,I},P)},d=function(m,E){return Object.keys(E).reduce(function(w,P){return w[P]=E[P],w},m)},h=function(f,m,E){var w=f.replace(/\+/g," ");if(E==="iso-8859-1")return w.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(w)}catch{return w}},p=function(m,E,w,P,I){if(m.length===0)return m;var O=m;if(typeof m=="symbol"?O=Symbol.prototype.toString.call(m):typeof m!="string"&&(O=String(m)),w==="iso-8859-1")return escape(O).replace(/%u[0-9a-f]{4}/gi,function(ae){return"%26%23"+parseInt(ae.slice(2),16)+"%3B"});for(var B="",ne=0;ne<O.length;++ne){var Z=O.charCodeAt(ne);if(Z===45||Z===46||Z===95||Z===126||Z>=48&&Z<=57||Z>=65&&Z<=90||Z>=97&&Z<=122||I===n.RFC1738&&(Z===40||Z===41)){B+=O.charAt(ne);continue}if(Z<128){B=B+r[Z];continue}if(Z<2048){B=B+(r[192|Z>>6]+r[128|Z&63]);continue}if(Z<55296||Z>=57344){B=B+(r[224|Z>>12]+r[128|Z>>6&63]+r[128|Z&63]);continue}ne+=1,Z=65536+((Z&1023)<<10|O.charCodeAt(ne)&1023),B+=r[240|Z>>18]+r[128|Z>>12&63]+r[128|Z>>6&63]+r[128|Z&63]}return B},b=function(m){for(var E=[{obj:{o:m},prop:"o"}],w=[],P=0;P<E.length;++P)for(var I=E[P],O=I.obj[I.prop],B=Object.keys(O),ne=0;ne<B.length;++ne){var Z=B[ne],ae=O[Z];typeof ae=="object"&&ae!==null&&w.indexOf(ae)===-1&&(E.push({obj:O,prop:Z}),w.push(ae))}return o(E),m},S=function(m){return Object.prototype.toString.call(m)==="[object RegExp]"},y=function(m){return!m||typeof m!="object"?!1:!!(m.constructor&&m.constructor.isBuffer&&m.constructor.isBuffer(m))},g=function(m,E){return[].concat(m,E)},v=function(m,E){if(t(m)){for(var w=[],P=0;P<m.length;P+=1)w.push(E(m[P]));return w}return E(m)};return xi={arrayToObject:s,assign:d,combine:g,compact:b,decode:h,encode:p,isBuffer:y,isRegExp:S,maybeMap:v,merge:i},xi}var Ei,au;function wh(){if(au)return Ei;au=1;var n=yh(),e=of(),t=Wl(),r=Object.prototype.hasOwnProperty,o={brackets:function(m){return m+"[]"},comma:"comma",indices:function(m,E){return m+"["+E+"]"},repeat:function(m){return m}},s=Array.isArray,i=Array.prototype.push,d=function(f,m){i.apply(f,s(m)?m:[m])},h=Date.prototype.toISOString,p=t.default,b={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:p,formatter:t.formatters[p],indices:!1,serializeDate:function(m){return h.call(m)},skipNulls:!1,strictNullHandling:!1},S=function(m){return typeof m=="string"||typeof m=="number"||typeof m=="boolean"||typeof m=="symbol"||typeof m=="bigint"},y={},g=function f(m,E,w,P,I,O,B,ne,Z,ae,G,ie,te,me,H,z,le,ce){for(var K=m,oe=ce,be=0,Ne=!1;(oe=oe.get(y))!==void 0&&!Ne;){var pe=oe.get(m);if(be+=1,typeof pe<"u"){if(pe===be)throw new RangeError("Cyclic object value");Ne=!0}typeof oe.get(y)>"u"&&(be=0)}if(typeof ae=="function"?K=ae(E,K):K instanceof Date?K=te(K):w==="comma"&&s(K)&&(K=e.maybeMap(K,function(N){return N instanceof Date?te(N):N})),K===null){if(O)return Z&&!z?Z(E,b.encoder,le,"key",me):E;K=""}if(S(K)||e.isBuffer(K)){if(Z){var Se=z?E:Z(E,b.encoder,le,"key",me);return[H(Se)+"="+H(Z(K,b.encoder,le,"value",me))]}return[H(E)+"="+H(String(K))]}var _e=[];if(typeof K>"u")return _e;var ge;if(w==="comma"&&s(K))z&&Z&&(K=e.maybeMap(K,Z)),ge=[{value:K.length>0?K.join(",")||null:void 0}];else if(s(ae))ge=ae;else{var Ce=Object.keys(K);ge=G?Ce.sort(G):Ce}var fe=ne?E.replace(/\./g,"%2E"):E,we=P&&s(K)&&K.length===1?fe+"[]":fe;if(I&&s(K)&&K.length===0)return we+"[]";for(var q=0;q<ge.length;++q){var M=ge[q],R=typeof M=="object"&&typeof M.value<"u"?M.value:K[M];if(!(B&&R===null)){var j=ie&&ne?M.replace(/\./g,"%2E"):M,Y=s(K)?typeof w=="function"?w(we,j):we:we+(ie?"."+j:"["+j+"]");ce.set(m,be);var U=n();U.set(y,ce),d(_e,f(R,Y,w,P,I,O,B,ne,w==="comma"&&z&&s(K)?null:Z,ae,G,ie,te,me,H,z,le,U))}}return _e},v=function(m){if(!m)return b;if(typeof m.allowEmptyArrays<"u"&&typeof m.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof m.encodeDotInKeys<"u"&&typeof m.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(m.encoder!==null&&typeof m.encoder<"u"&&typeof m.encoder!="function")throw new TypeError("Encoder has to be a function.");var E=m.charset||b.charset;if(typeof m.charset<"u"&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var w=t.default;if(typeof m.format<"u"){if(!r.call(t.formatters,m.format))throw new TypeError("Unknown format option provided.");w=m.format}var P=t.formatters[w],I=b.filter;(typeof m.filter=="function"||s(m.filter))&&(I=m.filter);var O;if(m.arrayFormat in o?O=m.arrayFormat:"indices"in m?O=m.indices?"indices":"repeat":O=b.arrayFormat,"commaRoundTrip"in m&&typeof m.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var B=typeof m.allowDots>"u"?m.encodeDotInKeys===!0?!0:b.allowDots:!!m.allowDots;return{addQueryPrefix:typeof m.addQueryPrefix=="boolean"?m.addQueryPrefix:b.addQueryPrefix,allowDots:B,allowEmptyArrays:typeof m.allowEmptyArrays=="boolean"?!!m.allowEmptyArrays:b.allowEmptyArrays,arrayFormat:O,charset:E,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:b.charsetSentinel,commaRoundTrip:m.commaRoundTrip,delimiter:typeof m.delimiter>"u"?b.delimiter:m.delimiter,encode:typeof m.encode=="boolean"?m.encode:b.encode,encodeDotInKeys:typeof m.encodeDotInKeys=="boolean"?m.encodeDotInKeys:b.encodeDotInKeys,encoder:typeof m.encoder=="function"?m.encoder:b.encoder,encodeValuesOnly:typeof m.encodeValuesOnly=="boolean"?m.encodeValuesOnly:b.encodeValuesOnly,filter:I,format:w,formatter:P,serializeDate:typeof m.serializeDate=="function"?m.serializeDate:b.serializeDate,skipNulls:typeof m.skipNulls=="boolean"?m.skipNulls:b.skipNulls,sort:typeof m.sort=="function"?m.sort:null,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:b.strictNullHandling}};return Ei=function(f,m){var E=f,w=v(m),P,I;typeof w.filter=="function"?(I=w.filter,E=I("",E)):s(w.filter)&&(I=w.filter,P=I);var O=[];if(typeof E!="object"||E===null)return"";var B=o[w.arrayFormat],ne=B==="comma"&&w.commaRoundTrip;P||(P=Object.keys(E)),w.sort&&P.sort(w.sort);for(var Z=n(),ae=0;ae<P.length;++ae){var G=P[ae];w.skipNulls&&E[G]===null||d(O,g(E[G],G,B,ne,w.allowEmptyArrays,w.strictNullHandling,w.skipNulls,w.encodeDotInKeys,w.encode?w.encoder:null,w.filter,w.sort,w.allowDots,w.serializeDate,w.format,w.formatter,w.encodeValuesOnly,w.charset,Z))}var ie=O.join(w.delimiter),te=w.addQueryPrefix===!0?"?":"";return w.charsetSentinel&&(w.charset==="iso-8859-1"?te+="utf8=%26%2310003%3B&":te+="utf8=%E2%9C%93&"),ie.length>0?te+ie:""},Ei}var Si,ou;function $h(){if(ou)return Si;ou=1;var n=of(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(y){return y.replace(/&#(\d+);/g,function(g,v){return String.fromCharCode(parseInt(v,10))})},s=function(y,g){return y&&typeof y=="string"&&g.comma&&y.indexOf(",")>-1?y.split(","):y},i="utf8=%26%2310003%3B",d="utf8=%E2%9C%93",h=function(g,v){var f={__proto__:null},m=v.ignoreQueryPrefix?g.replace(/^\?/,""):g,E=v.parameterLimit===1/0?void 0:v.parameterLimit,w=m.split(v.delimiter,E),P=-1,I,O=v.charset;if(v.charsetSentinel)for(I=0;I<w.length;++I)w[I].indexOf("utf8=")===0&&(w[I]===d?O="utf-8":w[I]===i&&(O="iso-8859-1"),P=I,I=w.length);for(I=0;I<w.length;++I)if(I!==P){var B=w[I],ne=B.indexOf("]="),Z=ne===-1?B.indexOf("="):ne+1,ae,G;Z===-1?(ae=v.decoder(B,r.decoder,O,"key"),G=v.strictNullHandling?null:""):(ae=v.decoder(B.slice(0,Z),r.decoder,O,"key"),G=n.maybeMap(s(B.slice(Z+1),v),function(te){return v.decoder(te,r.decoder,O,"value")})),G&&v.interpretNumericEntities&&O==="iso-8859-1"&&(G=o(G)),B.indexOf("[]=")>-1&&(G=t(G)?[G]:G);var ie=e.call(f,ae);ie&&v.duplicates==="combine"?f[ae]=n.combine(f[ae],G):(!ie||v.duplicates==="last")&&(f[ae]=G)}return f},p=function(y,g,v,f){for(var m=f?g:s(g,v),E=y.length-1;E>=0;--E){var w,P=y[E];if(P==="[]"&&v.parseArrays)w=v.allowEmptyArrays&&m===""?[]:[].concat(m);else{w=v.plainObjects?Object.create(null):{};var I=P.charAt(0)==="["&&P.charAt(P.length-1)==="]"?P.slice(1,-1):P,O=v.decodeDotInKeys?I.replace(/%2E/g,"."):I,B=parseInt(O,10);!v.parseArrays&&O===""?w={0:m}:!isNaN(B)&&P!==O&&String(B)===O&&B>=0&&v.parseArrays&&B<=v.arrayLimit?(w=[],w[B]=m):O!=="__proto__"&&(w[O]=m)}m=w}return m},b=function(g,v,f,m){if(g){var E=f.allowDots?g.replace(/\.([^.[]+)/g,"[$1]"):g,w=/(\[[^[\]]*])/,P=/(\[[^[\]]*])/g,I=f.depth>0&&w.exec(E),O=I?E.slice(0,I.index):E,B=[];if(O){if(!f.plainObjects&&e.call(Object.prototype,O)&&!f.allowPrototypes)return;B.push(O)}for(var ne=0;f.depth>0&&(I=P.exec(E))!==null&&ne<f.depth;){if(ne+=1,!f.plainObjects&&e.call(Object.prototype,I[1].slice(1,-1))&&!f.allowPrototypes)return;B.push(I[1])}return I&&B.push("["+E.slice(I.index)+"]"),p(B,v,f,m)}},S=function(g){if(!g)return r;if(typeof g.allowEmptyArrays<"u"&&typeof g.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof g.decodeDotInKeys<"u"&&typeof g.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(g.decoder!==null&&typeof g.decoder<"u"&&typeof g.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof g.charset<"u"&&g.charset!=="utf-8"&&g.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var v=typeof g.charset>"u"?r.charset:g.charset,f=typeof g.duplicates>"u"?r.duplicates:g.duplicates;if(f!=="combine"&&f!=="first"&&f!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var m=typeof g.allowDots>"u"?g.decodeDotInKeys===!0?!0:r.allowDots:!!g.allowDots;return{allowDots:m,allowEmptyArrays:typeof g.allowEmptyArrays=="boolean"?!!g.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof g.allowPrototypes=="boolean"?g.allowPrototypes:r.allowPrototypes,allowSparse:typeof g.allowSparse=="boolean"?g.allowSparse:r.allowSparse,arrayLimit:typeof g.arrayLimit=="number"?g.arrayLimit:r.arrayLimit,charset:v,charsetSentinel:typeof g.charsetSentinel=="boolean"?g.charsetSentinel:r.charsetSentinel,comma:typeof g.comma=="boolean"?g.comma:r.comma,decodeDotInKeys:typeof g.decodeDotInKeys=="boolean"?g.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof g.decoder=="function"?g.decoder:r.decoder,delimiter:typeof g.delimiter=="string"||n.isRegExp(g.delimiter)?g.delimiter:r.delimiter,depth:typeof g.depth=="number"||g.depth===!1?+g.depth:r.depth,duplicates:f,ignoreQueryPrefix:g.ignoreQueryPrefix===!0,interpretNumericEntities:typeof g.interpretNumericEntities=="boolean"?g.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof g.parameterLimit=="number"?g.parameterLimit:r.parameterLimit,parseArrays:g.parseArrays!==!1,plainObjects:typeof g.plainObjects=="boolean"?g.plainObjects:r.plainObjects,strictNullHandling:typeof g.strictNullHandling=="boolean"?g.strictNullHandling:r.strictNullHandling}};return Si=function(y,g){var v=S(g);if(y===""||y===null||typeof y>"u")return v.plainObjects?Object.create(null):{};for(var f=typeof y=="string"?h(y,v):y,m=v.plainObjects?Object.create(null):{},E=Object.keys(f),w=0;w<E.length;++w){var P=E[w],I=b(P,f[P],v,typeof y=="string");m=n.merge(m,I,v)}return v.allowSparse===!0?m:n.compact(m)},Si}var ki,su;function xh(){if(su)return ki;su=1;var n=wh(),e=$h(),t=Wl();return ki={formats:t,parse:e,stringify:n},ki}var Eh=xh();const Sh=so(Eh),kh=oo("route");class Ah extends Xr{constructor(){super(),this.prop("ro","basePath",()=>this._basePath),this.prop("ro","hash",()=>(this._location.hash||"").replace(/^#/,"")),this.prop("ro","path",()=>this._path),this.prop("ro","pathParts",()=>this._pathParts),this.prop("ro","query",()=>this._query),this.prop("rw","baseUrl",""),this.prop("rw","enabled",!1),this.prop("persist","history",[]),this._onClick=this._onClick.bind(this),this._onLocationChange=this._onLocationChange.bind(this),window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onLocationChange),this._history=window.history,this._location=window.location,this._basePath="",this._path="/",this._pathParts=[],this._query={}}conversationPath(e){const t=["","chat"];return e.connection_id&&t.push(e.connection_id),e.conversation_id&&t.push(e.conversation_id),t.map(r=>encodeURIComponent(r)).join("/")}go(e,t={}){e.indexOf(this.baseUrl)===0&&(e=e.substring(this.baseUrl.length));const r=this.baseUrl+e;if(r===this._location.href)return this;this._addToHistory(this._location.href),this._addToHistory(r),this._history[t.replace?"replaceState":"pushState"]({},document.title,r),this.update({path:!0})._onLocationChange({})}param(e,t=""){const r=this.query;return Object.hasOwn(r,e)?r[e]:t}removeFromHistory(e){e.indexOf(this.baseUrl)===0&&(e=e.substring(this.baseUrl.length));const t=this.history.filter(r=>r!==e);this.update({history:t})}subscribe(e){return e(this),this.on("update",e)}update(e){return e.baseUrl&&(e.baseUrl=e.baseUrl.replace(/\/+$/,""),this._basePath=new URL(e.baseUrl).pathname.replace(/\/+$/,"")),super.update(e),e.baseUrl&&this._onLocationChange(),this}urlFor(e,t={}){const r=e.match(/^\w+:/)||e.match(/^#/)?e:this.basePath+e,o=Object.keys(t).sort().filter(s=>at.defined(t[s])).map(s=>s+"="+encodeURIComponent(t[s])).join("&");return r+(o?"?"+o:"")}wsUrlFor(e){return(e.match(/^\w+:/)?e:this.baseUrl+e).replace(/^http/,"ws")}_addToHistory(e){e=e.indexOf(this.baseUrl)===0?e.substring(this.baseUrl.length):e;const t=this.history.filter(r=>r!==e);for(t.push(e);t.length>10;)t.shift();this.update({history:t})}_onClick(e){if(this.emit("click",e),!this.enabled||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)return;const t=e.target&&e.target.closest("a");if(!t||!t.href)return;if(t.target==="_self"&&(t.href.indexOf("/")===0?this.baseUrl+t.href:t.href)===location.href)return location.reload();if(t.hasAttribute("download")||t.hasAttribute("target"))return;let r=t.getAttribute("href")||"";r.indexOf("#")===0&&(r=this.path+r),r.indexOf("./")===0&&(r="/"+this._pathParts.slice(0,-1).join("/")+r.replace(/^\./,"")),r.indexOf(this.baseUrl)===0&&(r=r.substr(this.baseUrl.length)),r.indexOf(this.basePath)===0&&(r=r.substr(this.basePath.length)),r.indexOf("/")===0&&(this.go(r,{},t.hasAttribute("replace")),e.preventDefault())}_onLocationChange(){if(!this.enabled)return;const e=this._location.href,r=e.substring(this.baseUrl.length).split("#")[0].split("?");this._addToHistory(e),this._query=r.length===2?Sh.parse(r.pop()):{},this._path=r[0],this._pathParts=r[0].length<=1?[]:r[0].replace(/^\//,"").split("/").map(decodeURIComponent),kh.info('path="'+this._path+'" '+JSON.stringify(this._pathParts)+", query="+JSON.stringify(this._query)),this.update({path:!0})}}const Qe=new Ah;class Oh{constructor(){this.aliases=this._buildAliases(),this.re=this._buildRe(),this.byShortName={},this.grouped={},this.status="pending"}async load(){if(["loading","success"].indexOf(this.status)!==-1)return this;this.status="loading";const e=await fetch(Qe.urlFor("/emojis/0bf11a9aff0d6da7b46f1490f86a71eb.json"));return this._load((await e.json()).emojis),this.status="success",this}markup(e){return e.replace(this.re,(t,r,o)=>{const s=this.aliases[o]||o,i=this.byShortName[s];return r+(i&&i.emoji||o)})}search(e){e=e.toLowerCase();const t=this.grouped[e]||this.grouped[e.substring(0,2)]||{};return Object.keys(t).sort((r,o)=>t[r]-t[o]).map(r=>this.byShortName[r]).filter(r=>(r.shortname+r.name).toLowerCase().indexOf(e)!==-1)}_buildAliases(){return{"&lt;3":":heart:","(Y)":":thumbsup:",":(":":disappointed:",":)":":slight_smile:",":-*":":kissing:",":/":":confused:",":D":":smiley:",":O":":open_mouth:",":P":":stuck_out_tongue:",";)":":wink:",";D":":grin:"}}_buildRe(){const e=Object.keys(this.aliases).sort().map(io).join("|");return new RegExp("(^|\\s)(:\\w+:|"+e+")(?=&|\\s|\\,|\\.|$)","gi")}_load(e){this.grouped={};for(const t of e)t.emoji&&t.shortname&&(t.name||(t.name=t.shortname),delete t.category,delete t.order,delete t.unicode,this.byShortName[t.shortname]=t,this._toGrouped(t))}_toGrouped(e){const t=this.grouped;([e.shortname,e.name].join("-").replace(/\W+/," ").match(/\W(\w{2})/g)||[]).forEach((o,s)=>{o=o.substring(1).toLowerCase(),t[o]||(t[o]={}),t[o][e.shortname]=s,o=o[0],t[o]||(t[o]={}),t[o][e.shortname]=s})}}const Ch={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"},uo=(n,e=/[&<>'"]/g)=>n.replace(e,t=>Ch[t]),iu=n=>n.replace(/\s$/,"&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;"),Rr=n=>[n.map(e=>`<${e}>`).join(""),n.reverse().map(e=>`</${e}>`).join("")];class Th extends Xr{constructor(){super(),this.prop("cookie","lang",""),this.prop("ro","dictionaries",{}),this.prop("ro","emojis",new Oh),this.prop("ro","languages",()=>this._languages),this.prop("ro","languageOptions",()=>this._languageOptions),this._languages=[],this._languageOptions=[],this._rules=this._makeRules()}l(e,...t){const r=this.dictionaries[this.lang]||{};return String(r[e]||e).replace(/%(\d)(\D|$)/g,(s,i,d)=>typeof t[i-1]>"u"?s:t[i-1]+d)}async load(e){if(e||(e=this.lang||document.documentElement.getAttribute("lang")),this.dictionaries[e])return this.update({lang:e});const t=await qt.op("getDictionary",{lang:e}).perform();return this.dictionaries[e]=t.res.body.dictionary,this._languages=t.res.body.available_languages||{},this._languageOptions=Object.keys(this._languages).sort().map(r=>[r,this._languages[r].language_team.replace(/\s*<.*/,"")]),this.update({lang:e})}lmd(e,...t){return this.md(this.l(e,...t))}md(e){return e.length?this.emojis.markup(iu(this._tagToHTML(this._makeTag(e)))):"&nbsp;"}raw(e){return e.length?iu(uo(e)):"&nbsp;"}_makeRules(){const e=[];return e.push({tag:Rr(["code"]),re:/`(?=[^`\s])/,rules:[],handler:"_mdTag"}),e.push({tag:Rr(["em","strong"]),re:/\*\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:Rr(["strong"]),re:/\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:Rr(["em"]),re:/\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:Rr(["span"]),re:/\x03\d{1,2}(?:,\d{1,2})?/,rules:e,handler:"_mdIrcColorFormatting"}),e.push({tag:Rr(["span"]),re:/[\x02\x1d\x1e\x1f\x11]/,rules:e,handler:"_mdIrcTextFormatting"}),e.push({tag:Rr(["a"]),re:/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/,rules:[],handler:"_mdLink"}),e.push({tag:Rr(["a"]),re:/\b(https?|mailto):\S+/,rules:[],handler:"_mdURL"}),e.push({tag:Rr(["a"]),re:/(\s|^)#[a-zA-Z][\w.-]+(?=\W|$)/,rules:[],handler:"_mdChannelname"}),e}_makeTag(e,t=this._rules,r=0){if(r===0&&e.indexOf("> ")===0)return[Rr(["blockquote"]),{},[this._makeTag(e.replace(/^>\s/,""),t,r+1)]];const o=[];for(const s of t){const i=e.match(s.re);if(!i)continue;const d={attrs:{},after:e.substring(i.index+i[0].length),before:e.substring(0,i.index),captured:i[0],index:i.index,match:i,tag:s.tag};if(this[s.handler](d),typeof d.content!="string"){e=d.before+d.captured+d.after;continue}d.before.length&&o.push(this._makeTag(d.before,t,r+1)),o.push([d.tag,d.attrs,[this._makeTag(d.content,s.rules,r+1)]]),d.after.length&&o.push(this._makeTag(d.after,t,r+1));break}return[null,{},o.length?o:[uo(e)]]}_mdChannelname(e){e.captured=e.captured.replace(/^\s/,t=>(e.before+=t,"")),e.content=e.captured,e.attrs.href="./"+encodeURIComponent(e.captured)}_mdIrcColorFormatting(e){const t=e.after.indexOf("");if(t===-1)return;e.content=e.after.substring(0,t),e.after=e.after.substring(t+1);const r=[];e.captured.replace(/\x030?(\d{1,2}),?(\d{1,2})?/,(o,s,i)=>{i&&r.push("bg-"+i),s&&r.push("text-"+s)}),r.length&&(e.attrs.class=r.join(" "))}_mdIrcTextFormatting(e){const t=e.after.indexOf(e.captured);t!==-1&&(e.content=e.after.substring(0,t),e.after=e.after.substring(t+e.captured.length),e.tag=e.captured===""?Rr(["strong"]):e.captured===""?Rr(["em"]):e.captured===""?Rr(["u"]):e.captured===""?Rr(["code"]):Rr(["span"]))}_mdLink(e){e.content=e.match[1],e.attrs.href=uo(e.match[2]),e.match[2].match(/^\w+:/)&&(e.attrs.target="_blank")}_mdTag(e){if(e.before.match(/\\$/)){e.before=e.before.replace(/\\$/,"");return}const t=e.after.indexOf(e.captured);t!==-1&&(e.content=e.after.substring(0,t),e.after=e.after.substring(t+e.captured.length))}_mdURL(e){e.captured=e.captured.replace(/[,.:;!"')]$/,t=>(e.after=t[0]+e.after,"")),e.content=e.captured.replace(/^(https|mailto):(\/\/)?/,""),e.attrs.href=uo(e.captured),e.attrs.target="_blank"}_tagToHTML(e){if(typeof e=="string")return e;const t=typeof e[2]=="string"?uo(e[2]):e[2].map(s=>this._tagToHTML(s)).join("");if(!e[0])return t;const r=Object.keys(e[1]).sort().map(s=>`${s}="${e[1][s]}"`).join(" ");return(r?e[0][0].replace(/>/," "+r+">"):e[0][0])+t+e[0][1]}}const Lt=new Th,tr=Vd(Lt,n=>(...e)=>n.l(...e)),cn=Vd(Lt,n=>(...e)=>n.lmd(...e)),ca=[],sf={};function Nh({query:n}){const e=[];for(let t=0;t<ca.length;t++){if(ca[t].cmd.indexOf(n)!==0)continue;const r=ca[t].alias||ca[t].cmd;e.push({val:r,text:Lt.md(ca[t].example)})}return e}function Rh(n){const e=n.split(/\s/),t=sf[e[0].toLowerCase()];return at.function(t)?t(e.slice(1)):t?[t].concat(e.slice(1)).filter(r=>at.defined(r)&&r.length).join(" "):n}const Jt=(n,e,t)=>ca.push({cmd:n,description:t,example:e});Jt("/me","/me <msg>","Send message as an action.");Jt("/say","/say <msg>",'Used when you want to send a message starting with "/".');Jt("/whois","/whois <nick>","Show information about a user.");Jt("/query","/query <nick>","Open up a new chat window with nick.");Jt("/msg","/msg <nick> <msg>","Send a direct message to nick.");Jt("/shrug","/shrug <msg>","Add a shrug to end of message. Message is optional.");Jt("/join","/join <#channel>","Join channel and open up a chat window.");Jt("/close","/close [nick|#channel]","Close conversation.");Jt("/nick","/nick <nick>","Change your wanted nick.");Jt("/away","/away <message>","Add or remove an away message");Jt("/kick","/kick <nick>","Kick a user from the current channel.");Jt("/mode","/mode [+|-][b|o|v] <user>","Change mode of yourself or a user");Jt("/topic","/topic or /topic <new topic>","Show current topic, or set a new one.");Jt("/names","/names","Show participants in the channel.");Jt("/invite","/invite <nick> [#channel]","Invite a user to a channel.");Jt("/reconnect","/reconnect","Restart the current connection.");Jt("/clear","/clear history <#channel> or /clear history <nick>","Delete all history for the given conversation.");Jt("/oper","/oper <nick> <password>","Gain operator status on a network.");Jt("/cs","/cs <msg>","Send a message to chanserv.");Jt("/ns","/ns <msg>","Send a message to nickserv.");Jt("/ms","/ms <msg>","Send a message to memoserv.");Jt("/hs","/hs <msg>","Send a message to hostserv.");Jt("/bs","/bs <msg>","Send a message to botserv.");Jt("/os","/os <msg>","Send a message to operserv.");Jt("/quote","/quote <irc-command>","Allow you to send any raw IRC message.");const Mn=(n,e)=>sf[n]=e;Mn("/close","/part");Mn("/shrug",n=>"/say "+n.concat("Â¯\\_(ã)_/Â¯").join(" "));Mn("/cs","/quote chanserv");Mn("/ns","/quote nickserv");Mn("/ms","/quote memoserv");Mn("/hs","/quote hotserv");Mn("/bs","/quote botserv");Mn("/os","/quote operserv");Mn("/j","/join");Mn("/raw","/quote");function Sa(n,e){return Sa[n]?Sa[n](e):[]}function Ph(n,e){n&&Object.hasOwn(n,"val")&&(n=n.val);const t=e.append?e.value.length:e.cursorPos;let[r,o]=[e.value.substring(0,t),e.value.substring(t)];return at.undefined(n)?{before:r,middle:"",after:o}:(e.append&&(r=r.replace(/[ ]$/,""),r.length&&(n=" "+n)),e.padBefore&&(r=r.replace(/[ ]$/,""),r.length&&(n=" "+n)),e.padAfter&&(o=o.replace(/^[ ]/,""),n=n+" "),e.replace&&(r=r.replace(/\S*\s?$/,"")),{before:r,middle:n,after:o})}function Ih(n,e,{conversation:t,user:r}){let o="",s="";const i=n.substring(0,e).replace(/(\S)(\S*)$/,(p,b,S)=>(o=b,s=S,"")),d=o===":"&&s.length?"emojis":o==="/"&&!i.length?"commands":o==="@"&&s.length?"nicks":o==="#"||o==="&"?"conversations":"none",h=Sa(d,{conversation:t,query:o+s,user:r});return h.length&&h.unshift({autocompleteCategory:d,val:o+s}),h}Sa.commands=({query:n})=>Nh({query:n});Sa.conversations=({conversation:n,query:e,user:t})=>{const r=t.findConversation({connection_id:n.connection_id}),o=r?r.conversations.toArray():t.conversations(),s=[];for(let i=0;i<o.length&&!(o[i].name.toLowerCase().indexOf(e)!==-1&&(s.push({text:o[i].name,val:o[i].conversation_id}),s.length>=20));i++);return s};Sa.emojis=({query:n})=>{const e=Lt.emojis,t=[];for(let r of e.search(n.substring(1)))if(t.push({val:r.emoji,text:e.markup(r.emoji)}),t.length>=30)break;return t};Sa.nicks=({conversation:n,query:e})=>{const t=new RegExp("^"+io(e.slice(1)),"i"),r=[];for(let o of n.participants.toArray()){if(r.length>=20)break;o.nick.match(t)&&r.push({val:o.nick})}return r};const Mh=n=>n;function lf(n){const e=n-1;return e*e*e+1}function lu(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}function Ja(n,{delay:e=0,duration:t=400,easing:r=Mh}={}){const o=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:s=>`opacity: ${s*o}`}}function wo(n,{delay:e=0,duration:t=400,easing:r=lf,x:o=0,y:s=0,opacity:i=0}={}){const d=getComputedStyle(n),h=+d.opacity,p=d.transform==="none"?"":d.transform,b=h*(1-i),[S,y]=lu(o),[g,v]=lu(s);return{delay:e,duration:t,easing:r,css:(f,m)=>`
			transform: ${p} translate(${(1-f)*S}${y}, ${(1-f)*g}${v});
			opacity: ${h-b*m}`}}function $o(n,{delay:e=0,duration:t=400,easing:r=lf,axis:o="y"}={}){const s=getComputedStyle(n),i=+s.opacity,d=o==="y"?"height":"width",h=parseFloat(s[d]),p=o==="y"?["top","bottom"]:["left","right"],b=p.map(E=>`${E[0].toUpperCase()}${E.slice(1)}`),S=parseFloat(s[`padding${b[0]}`]),y=parseFloat(s[`padding${b[1]}`]),g=parseFloat(s[`margin${b[0]}`]),v=parseFloat(s[`margin${b[1]}`]),f=parseFloat(s[`border${b[0]}Width`]),m=parseFloat(s[`border${b[1]}Width`]);return{delay:e,duration:t,easing:r,css:E=>`overflow: hidden;opacity: ${Math.min(E*20,1)*i};${d}: ${E*h}px;padding-${p[0]}: ${E*S}px;padding-${p[1]}: ${E*y}px;margin-${p[0]}: ${E*g}px;margin-${p[1]}: ${E*v}px;border-${p[0]}-width: ${E*f}px;border-${p[1]}-width: ${E*m}px;min-${d}: 0`}}function cu(n){const e=n.is("private")?n.participants.nicks().sort().join("-and-"):n.title;return encodeURIComponent(e).toLowerCase()}const ts=bs(null,{conversationToInternalUrl(n){const e=this.get();if(!e)return null;const t=Qe.urlFor("/video/"+e.hostname+"/"+cu(n));return new URL(t,location.href).href},conversationToExternalUrl(n){const e=this.get();return e?new URL("/"+cu(n),e).href:null},fromString(n){this.set(n?new URL(n):null)}}),Lh=bs(null,{close(){const n=this.get();return n?[!0,n.close(),this.set(null)][0]:!1},open(n,e={}){this.window||(this.window=window),n=n.toString(),e.nick&&(n+="?nick="+encodeURIComponent(e.nick));const t=this.window.open(n,"convos_video");["beforeunload","close"].forEach(r=>t.addEventListener(r,()=>this.set(null))),this.set(t)}});var Dh=A('<a href="#actions"><!><!></a>'),Uh=A("<a><!> </a>"),Fh=A('<div class="chat-input_menu for-actions"><!> <label for="upload_files"><!> </label></div>'),Bh=A('<a tabindex="-1"><!></a>'),qh=A("<div></div>"),jh=A('<form class="chat-input"><input type="file" id="upload_files" name="upload_files" class="non-interactive"/> <textarea class="non-interactive"></textarea> <textarea class="is-primary-input"></textarea> <!> <button type="buttton" class="btn-hallow has-tooltip chat-input__send"><!> <span class="tooltip is-above is-left"> </span></button> <!></form>');function Gl(n,e){if(new.target)return Nt({component:Gl,...n});Ct(e,!1);const t=()=>Pe(tr,"$l",o),r=()=>Pe(v(),"$conversation",o),[o,s]=Gt(),i=Oe(),d=Oe(),h=Oe(),p=Oe(),b=Oe(),S=Oe(),y=a(Se);let g=Xe(e,"uploadProgress",12,0),v=Xe(e,"conversation",12),f=Oe(""),m=Oe(0),E=Oe([]),w=Oe("none"),P={y:-10,duration:200},I,O=Oe(),B=Oe(0);const ne=pr("user"),Z=new Bv;function ae(D){const X=D.target.closest("a"),J=!X||a(f)?"":X.href.replace(/.*#/,"");setTimeout(()=>{ee(f,J)},1)}function G(D,X){const{before:J,middle:se,after:$e}=Ph(D,{...X,cursorPos:I.selectionStart,value:I.value});be(J+se+$e),I.selectionStart=I.selectionEnd=(J+se).length}function ie(){I&&I.focus()}function te(D,X){a(E).length&&(D.preventDefault(),ee(m,a(m)+X),a(m)<0&&ee(m,a(E).length-1),a(m)>=a(E).length&&ee(m,0),G(a(E)[a(m)],{replace:!0}))}function me(D){!D.conversation_id&&v().conversation_id&&(D.conversation_id=v().conversation_id)}function H(D){ee(m,0),ee(B,D.selectionStart),v().update({userInput:D.value}),D.value.length||Z.update({index:-1})}function z(D){I=D,I.addEventListener("focus",()=>ee(B,I.value.length+1)),I.addEventListener("change",()=>H(I)),I.addEventListener("input",ce),I.addEventListener("keyup",X=>{(X.key.length===1||["ArrowLeft","ArrowRight","Backspace"].indexOf(X.key)!==-1)&&H(I)}),I.addEventListener("keydown",X=>{if(!(X.key==="ArrowDown"&&Z.render(X,-1))&&!(X.key==="ArrowUp"&&Z.render(X,1))){if(X.key==="ArrowDown")return te(X,X.shiftKey?4:1);if(X.key==="ArrowUp")return te(X,X.shiftKey?-4:-1);if(X.key==="Enter")return oe(X);if(X.key==="Tab")return te(X,X.shiftKey?-1:1)}}),Z.attach(I),be(at.undefined(v().userInput)?"":v().userInput)}function le(D){D.preventDefault(),Lh.open(a(S),{nick:v().participants.me().nick});const X=v().messages.toArray().slice(-20).find(J=>J.message.indexOf(a(S))!==-1);X&&X.ts.toEpoch()>Zo()-600||v().send({method:"send",message:ts.conversationToExternalUrl(v())})}function ce(){a(O).maxHeight||ze(O,a(O).maxHeight=a(O).parentNode.offsetHeight),ze(O,a(O).value=I.value),ze(O,a(O).style.width=I.offsetWidth+"px"),I.style.height=(a(O).maxHeight>a(O).scrollHeight?a(O).scrollHeight:a(O).maxHeight)+"px"}function K(D){ee(m,parseInt(D.target.closest("a").href.replace(/.*index:/,""),10)),G(a(E)[a(m)],{padAfter:!0,replace:!0}),setTimeout(()=>{H(I),I.focus()},1)}function oe(D){if(a(E)[a(m)])D.preventDefault(),G(a(E)[a(m)],{replace:!0}),ee(B,I.selectionStart+1);else if(!D.altKey&&!D.ctrlKey&&!D.metaKey&&!D.shiftKey){D.preventDefault();const J={method:"send"};J.message=Rh(I.value),J.message.length&&v().send(J,me),Z.add(J.message),v().is("search")||be(""),setTimeout(ce,10)}}function be(D){I&&(I.value=D),v().update({userInput:D})}function Ne(D){I&&(ee(E,D>I.value.length?[]:Ih(I.value,D,{conversation:v(),user:ne})),ee(w,a(E).length&&a(E)[0].autocompleteCategory||"none"))}function pe(D){a(pe).lock!==D.path&&(ze(pe,a(pe).lock=D.path),be(at.undefined(D.userInput)?"":D.userInput))}function Se(D){const X=D.target&&D.target.files||D.dataTransfer&&D.dataTransfer.files;if(!X||!X.length)return;if(X.length>1)return v().addMessages({message:"Cannot upload more than one file.",type:"error"});const J=new FormData;J.append("file",X[0]),ze(Se,a(Se).file=X[0]);const se=qt.op("uploadFile");se.on("progress",$e=>{g()<100&&g(parseInt(100*($e.total?$e.loaded/$e.total:.02),10)),g()>=100&&g(0)}),g(1),se.perform({formData:J}).then($e=>{const ue=$e.res.body;if(g(0),ue.files&&ue.files.length)return G(ue.files[0].url,{append:!0});ue.errors&&v().addMessages({message:"Could not upload file: %1",vars:[t()(Fl(ue.errors))],type:"error"})})}He(()=>Ue(v()),()=>{v()&&ee(f,"")}),He(()=>Ue(v()),()=>{ee(i,ne.findConversation({connection_id:v().connection_id}))}),He(()=>a(i),()=>{ee(d,a(i)&&a(i).nick)}),He(()=>(Ue(v()),t(),a(i),a(d)),()=>{ee(h,v().is("search")?t()("What are you looking for?"):a(i)&&a(i).is("unreachable")?t()("Connecting..."):t()("What is on your mind %1?",a(d)))}),He(()=>Ue(v()),()=>{ee(p,v().is("search")?"search":"paper-plane")}),He(()=>(Ue(v()),t()),()=>{ee(b,v().is("search")?t()("Search"):t()("Send"))}),He(()=>Ue(v()),()=>{ee(S,ts.conversationToInternalUrl(v()))}),He(()=>r(),()=>{Z.update({conversation:r()})}),He(()=>a(B),()=>{Ne(a(B))}),He(()=>(a(pe),Ue(v())),()=>{a(pe)(v())}),Wt();var _e={uploader:y,fillIn:G,focus:ie,get uploadProgress(){return g()},set uploadProgress(D){g(D),Ze()},get conversation(){return v()},set conversation(D){v(D),Ze()},$set:It,$on:(D,X)=>Pt(e,D,X)};Rt();var ge=jh();rt("click",_o,()=>{ee(f,"")});var Ce=u(ge),fe=_(Ce,2);ms(fe,D=>ee(O,D),()=>a(O));var we=_(fe,2);Ml(we,D=>z==null?void 0:z(D));var q=_(we,2);{var M=D=>{var X=Dh();let J;var se=u(X);Ie(se,{name:"plus-circle"});var $e=_(se);Ie($e,{name:"times"}),c(X),C(()=>J=Zt(X,1,"btn-hallow can-toggle",null,J,{"is-active":a(f)==="actions"})),rt("click",X,Qt(ae)),x(D,X)};ke(q,D=>{Ue(v()),l(()=>v().is("conversation"))&&D(M)})}var R=_(q,2),j=u(R);Ie(j,{get name(){return a(p)}});var Y=_(j,2),U=u(Y,!0);c(Y),c(R);var N=_(R,2);{var W=D=>{var X=Fh(),J=u(X);{var se=ye=>{var ve=Uh(),xe=u(ve);Ie(xe,{name:"video"});var de=_(xe);c(ve),C(Ye=>{Ge(ve,"href",a(S)),$(de,` ${Ye??""}`)},[()=>(t(),l(()=>t()("Start a video conference")))]),rt("click",ve,le),x(ye,ve)};ke(J,ye=>{a(S)&&ye(se)})}var $e=_(J,2),ue=u($e);Ie(ue,{name:"cloud-upload-alt"});var V=_(ue);c($e),c(X),C(ye=>$(V,` ${ye??""}`),[()=>(t(),l(()=>t()("Attach a file")))]),Tr(3,X,()=>wo,()=>P),x(D,X)},F=D=>{var X=vt(),J=Ee(X);{var se=$e=>{var ue=qh();Ar(ue,5,()=>a(E),kr,(V,ye,ve)=>{var xe=Bh();Ge(xe,"href",`#index:${ve}`);let de;var Ye=u(xe);Bt(Ye,()=>(a(ye),l(()=>a(ye).text||a(ye).val))),c(xe),C(()=>de=Zt(xe,1,"",null,de,{"has-focus":ve===a(m)})),rt("click",xe,Qt(K)),x(V,xe)}),c(ue),C(()=>Zt(ue,1,`chat-input_menu for-${a(w)??""}`)),Tr(3,ue,()=>wo,()=>P),x($e,ue)};ke(J,$e=>{a(E),l(()=>a(E).length)&&$e(se)},!0)}x(D,X)};ke(N,D=>{a(f),Ue(v()),l(()=>a(f)==="actions"&&v().is("conversation"))?D(W):D(F,!1)})}c(ge),C(D=>{Ge(fe,"placeholder",a(h)),Ge(we,"placeholder",a(h)),$(U,D)},[()=>(Ue(zr),t(),a(b),l(()=>zr(t()(a(b)))))]),rt("change",Ce,function(...D){var X;(X=a(Se))==null||X.apply(this,D)}),rt("click",R,oe),rt("submit",ge,Qt(function(D){ao.call(this,e,D)})),x(n,ge),Zr(e,"uploader",y),Zr(e,"fillIn",G),Zr(e,"focus",ie);var Q=Tt(_e);return s(),Q}var zh=A("<p><!> <!></p>"),Hh=A("<p><!> <!></p> <p><!> <!></p>",1);function cf(n,e){if(new.target)return Nt({component:cf,...n});Ct(e,!1);const t=()=>Pe(p(),"$conversation",i),r=()=>Pe(cn,"$lmd",i),o=()=>Pe(a(h),"$participants",i),s=()=>Pe(tr,"$l",i),[i,d]=Gt(),h=Oe();let p=Xe(e,"conversation",12);He(()=>Ue(p()),()=>{En(ee(h,p().participants),"$participants",i)}),Wt();var b={get conversation(){return p()},set conversation(m){p(m),Ze()},$set:It,$on:(m,E)=>Pt(e,m,E)};Rt();var S=vt(),y=Ee(S);{var g=m=>{var E=zh(),w=u(E);Ie(w,{name:"info-circle"});var P=_(w,2);Bt(P,()=>(r(),t(),l(()=>r()('This is a private conversation with "%1".',t().name)))),c(E),x(m,E)},v=m=>{var E=vt(),w=Ee(E);{var P=I=>{var O=Hh(),B=Ee(O),ne=u(B);Ie(ne,{name:"info-circle"});var Z=_(ne,2);Bt(Z,()=>(r(),t(),l(()=>r()(t().topic?"Topic for %1 is: %2":"No topic is set for %1.",t().name,t().topic)))),c(B);var ae=_(B,2),G=u(ae);Ie(G,{name:"info-circle"});var ie=_(G,2);{var te=H=>{var z=fr();C(le=>$(z,le),[()=>(s(),l(()=>s()("You are the only participant in this conversation.")))]),x(H,z)},me=H=>{var z=vt(),le=Ee(z);Bt(le,()=>(r(),o(),l(()=>r()("There are %1 participants in this conversation.",o().length)))),x(H,z)};ke(ie,H=>{o(),l(()=>o().length===1)?H(te):H(me,!1)})}c(ae),x(I,O)};ke(w,I=>{t(),l(()=>!t().frozen)&&I(P)},!0)}x(m,E)};ke(y,m=>{t(),l(()=>t().is("private"))?m(g):m(v,!1)})}x(n,S);var f=Tt(b);return d(),f}const Wh={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},uu={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},Gh=n=>!!String(n||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/);class wr extends Date{constructor(e){typeof e=="string"&&!e.match(/Z$/)&&(e+="Z"),super(e||new Date)}format(e){return e.replace(/%(\w)/g,(t,r)=>uu[r]?this[uu[r]]():r)}getHumanDate(e={}){let t=this.format("%b %e");const r=new wr;return(!(this.getYear()===r.getYear())||e.year)&&(t+=", "+this.getFullYear()),t}setDate(e,t){return[t?super.setUTCDate(e):super.setDate(e),this][1]}setFullYear(e,t){return[t?super.setUTCFullYear(e):super.setFullYear(e),this][1]}setHours(e,t){return[t?super.setUTCHours(e):super.setHours(e),this][1]}setMilliseconds(e,t){return[t?super.setUTCMilliseconds(e):super.setMilliseconds(e),this][1]}setMinutes(e,t){return[t?super.setUTCMinutes(e):super.setMinutes(e),this][1]}setMonth(e,t){return[t?super.setUTCMonth(e):super.setMonth(e),this][1]}setSeconds(e,t){return[t?super.setUTCSeconds(e):super.setSeconds(e),this][1]}setTime(e){return[super.setTime(e),this][1]}setYear(e){return[this.setYear(e),this][1]}toEpoch(){return this.getTime()/1e3}_getMonthAbbr(){return Wh[this.getMonth()]||""}_getPaddedHours(){return String(this.getHours()).padStart(2,"0")}_getPaddedMinutes(){return String(this.getMinutes()).padStart(2,"0")}_getPaddedSeconds(){return String(this.getSeconds()).padStart(2,"0")}}var Kh=A("<button><!> <!></button>");function ar(n,e){if(new.target)return Nt({component:ar,...n});Ct(e,!1);const t=()=>Pe(v(),"$op",r),[r,o]=Gt(),s=Oe(),i=500;let d=Oe(""),h=Xe(e,"class",12,""),p=Oe([]),b=Oe(!1),S=Oe(0),y=Xe(e,"disabled",12,!1),g=Xe(e,"icon",12,""),v=Xe(e,"op",28,()=>new ws({api:!1,id:""})),f=Xe(e,"type",12,""),m=Oe(g());function E(ne){ne&&ee(S,new wr().toEpoch()),ee(d,ne?"spin":""),ee(m,ne?"spinner":g()),ee(b,ne)}He(()=>t(),()=>{t().is("loading")&&E(!0)}),He(()=>(t(),a(S)),()=>{t().is("loading")||setTimeout(()=>E(!1),i-(new wr().toEpoch()-a(S)))}),He(()=>(Ue(g()),Ue(h())),()=>{ee(p,["btn","for-"+(g()||"default")].concat(h()))}),He(()=>(Ue(y()),a(b)),()=>{ee(s,y()||a(b))}),Wt();var w={get class(){return h()},set class(ne){h(ne),Ze()},get disabled(){return y()},set disabled(ne){y(ne),Ze()},get icon(){return g()},set icon(ne){g(ne),Ze()},get op(){return v()},set op(ne){v(ne),Ze()},get type(){return f()},set type(ne){f(ne),Ze()},$set:It,$on:(ne,Z)=>Pt(e,ne,Z)};Rt();var P=Kh(),I=u(P);Ie(I,{get animation(){return a(d)},get name(){return a(m)}});var O=_(I,2);Tn(O,e,"default",{},null),c(P),C(ne=>{Zt(P,1,ne),P.disabled=a(s),Ge(P,"type",f())},[()=>(a(p),l(()=>a(p).join(" ")))]),rt("click",P,function(ne){ao.call(this,e,ne)}),x(n,P);var B=Tt(w);return o(),B}var Vh=A('<label><input type="checkbox"/> <!> <!></label>');function Ht(n,e){if(new.target)return Nt({component:Ht,...n});Ct(e,!1);const t=Oe(),r=Oe();let o=Xe(e,"badge",12,!1),s=Xe(e,"disabled",12,!1),i=Xe(e,"hidden",12,!1),d=Xe(e,"icon",12,"square"),h=Xe(e,"name",12,""),p=Xe(e,"id",28,()=>h()?"form_"+h():ys()),b=Xe(e,"value",12),S=Oe(!1);He(()=>Ue(d()),()=>{ee(t,d()==="caret"?["caret-square-down","caret-square-up"]:["square","check-square"])}),He(()=>(a(t),Ue(b())),()=>{ee(r,a(t)[b()?1:0])}),Wt();var y={get badge(){return o()},set badge(w){o(w),Ze()},get disabled(){return s()},set disabled(w){s(w),Ze()},get hidden(){return i()},set hidden(w){i(w),Ze()},get icon(){return d()},set icon(w){d(w),Ze()},get name(){return h()},set name(w){h(w),Ze()},get id(){return p()},set id(w){p(w),Ze()},get value(){return b()},set value(w){b(w),Ze()},$set:It,$on:(w,P)=>Pt(e,w,P)};Rt();var g=Vh();let v;var f=u(g);ta(f);var m=_(f,2);Ie(m,{family:"regular",get name(){return a(r)}});var E=_(m,2);return Tn(E,e,"label",{},null),c(g),C(()=>{v=Zt(g,1,"checkbox svelte-nmc67d",null,v,{"has-badge":o(),"has-focus":a(S),"is-disabled":s()}),Ge(g,"hidden",i()),Ge(f,"id",p()),Ge(f,"name",h()),cv(f,!!b()),f.disabled=s()}),rt("blur",f,()=>{ee(S,!1)}),rt("change",f,w=>{b(w.target.checked)}),rt("focus",f,()=>{ee(S,!0)}),x(n,g),Tt(y)}class ra{constructor(e="http://localhost"){this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:()=>this._url.href.replace(/^http:/,this.protocol),set:t=>{this._url.href=t.replace(/^\w+:/,"http:"),this.protocol=t.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach(t=>{Object.defineProperty(this,t,{get:()=>this._url[t],set:r=>{this._url[t]=r}})}),this.href=e}fromFields(e){at.string(e.protocol)&&(this.protocol=e.protocol.replace(/:?$/,":")),at.string(e.host)&&(this.host=e.host),at.string(e.password)&&(this.password=encodeURIComponent(e.password)),at.string(e.username)&&(this.username=encodeURIComponent(e.username)),at.string(e.conversation_id)&&(this.pathname=encodeURIComponent(e.conversation_id));const t=this.searchParams;return at.string(e.local_address)&&t.append("local_address",e.local_address||""),at.string(e.nick)&&t.append("nick",e.nick.trim()),at.string(e.realname)&&e.realname.length&&t.append("realname",e.realname.trim()),at.string(e.sasl)&&t.append("sasl",e.sasl||"none"),t.append("tls",at.true(e.tls)?"1":"0"),t.append("tls_verify",at.true(e.tls)&&at.true(e.tls_verify)?"1":"0"),this}toFields(e={}){e.protocol=this.protocol.replace(/:$/,""),e.host=this.host,e.password=at.string(this.password)?decodeURIComponent(this.password):"",e.username=at.string(this.username)?decodeURIComponent(this.username):"",e.conversation_id=decodeURIComponent(this.pathname.split("/").filter(r=>r.length)[0]||"");const t=this.searchParams;return e.local_address=t.get("local_address")||e.local_address||"",e.nick=t.get("nick")||e.nick||"",e.realname=t.get("realname")||e.realname||"",e.sasl=t.get("sasl")||e.sasl||"none",e.realname=t.get("realname")||e.realname||"",e.tls=at.true(t.get("tls")),e.tls_verify=at.true(t.get("tls_verify")),e}toString(){return this.href.replace(/^http:/,this.protocol)}}var Yh=A('<div class="error"> </div>'),Zh=A('<div class="success"> </div>');function Br(n,e){if(new.target)return Nt({component:Br,...n});Ct(e,!1);const t=()=>Pe(i(),"$op",o),r=()=>Pe(tr,"$l",o),[o,s]=Gt();let i=Xe(e,"op",28,()=>new ws({})),d=Xe(e,"success",12,"Saved."),h=Oe(!1),p;Il(()=>p&&clearTimeout(p));function b(E){if(!E.is("success"))return ee(h,!1);a(h)||(ee(h,!0),p=setTimeout(()=>ee(h,!1),2e3))}He(()=>t(),()=>{b(t())}),Wt();var S={get op(){return i()},set op(E){i(E),Ze()},get success(){return d()},set success(E){d(E),Ze()},$set:It,$on:(E,w)=>Pt(e,E,w)};Rt();var y=vt(),g=Ee(y);{var v=E=>{var w=Yh(),P=u(w,!0);c(w),C(I=>$(P,I),[()=>(r(),t(),l(()=>r()(t().error())))]),Tr(3,w,()=>Ja),x(E,w)},f=E=>{var w=vt(),P=Ee(w);{var I=O=>{var B=Zh(),ne=u(B,!0);c(B),C(Z=>$(ne,Z),[()=>(r(),Ue(d()),l(()=>r()(d())))]),Tr(3,B,()=>Ja),x(O,B)};ke(P,O=>{t(),a(h),l(()=>t().is("success")&&a(h))&&O(I)},!0)}x(E,w)};ke(g,E=>{t(),l(()=>t().is("error"))?E(v):E(f,!1)})}x(n,y);var m=Tt(S);return s(),m}var Jh=A('<a tabindex="-1"> </a>'),Xh=A('<div><label><!></label> <input type="hidden"/> <input type="text" autocomplete="off"/> <div class="select-field__options"></div></div>');function da(n,e){if(new.target)return Nt({component:da,...n});Ct(e,!1);let t=Oe(0),r=Oe(),o=Oe(!1),s=Oe(""),i=Oe([]),d=Xe(e,"hidden",12,!1),h=Xe(e,"name",12,""),p=Xe(e,"id",28,()=>h()?"form_"+h():ys()),b=Xe(e,"options",12),S=Xe(e,"placeholder",12,""),y=Xe(e,"readonly",12,!1),g=Xe(e,"value",12);const v=["ArrowDown","ArrowUp","Enter"];function f(){setTimeout(()=>document.activeElement.closest(".select-field__option")||ee(o,!1),100),I(g())}function m(H,z){let le=new RegExp("(?:^|\\s|-)"+io(z),"i"),ce=H.filter(K=>String(K[0])===z);ce.length||(ce=H.filter(K=>K[0].match(le)));for(let K=0;K<H.length;K++){const oe=H[K];oe.length>1&&ce.indexOf(oe)===-1&&oe[1].match(le)&&ce.push(oe)}ee(t,0),ee(i,ce)}function E(H){if(v.indexOf(H.key)!==-1&&H.preventDefault(),H.key==="Tab"){a(o)&&P(H);return}if(!a(o))return O(H);H.key==="ArrowDown"&&rc(t),H.key==="ArrowUp"&&rc(t,-1),H.key==="Enter"&&P(H),a(t)>=b().length&&ee(t,0),a(t)<0&&ee(t,b().length-1)}function w(H){(H.key.length===1||H.key==="Backspace")&&ee(s,a(r).value)}function P(H){let z;if(H.type==="keydown")z=a(i).length&&a(i)[a(t)]||b().filter(le=>le[0]===g())[0];else{const le=bl(H.target,".select-field__option").href.replace(/^.*?#\d+:/,"");z=a(i).filter(ce=>String(ce[0])===le)[0]||[]}(!z||!z.length)&&(z=[""]),g(z[0]),ee(o,!1)}function I(H){const z=a(i).filter(le=>String(le[0])===H)[0]||[];ze(r,a(r).value=z.length>1?z[1]:z.length?z[0]:H)}function O(H){if(y())return;const z=H&&H.target&&bl(H.target,".select-field__option");return a(o)||(ee(t,a(i).map(le=>le[0]).indexOf(g())),a(r).setSelectionRange(0,9999)),z?P(H):ee(o,!a(o))}He(()=>a(o),()=>{a(o)===!1&&ee(s,"")}),He(()=>(Ue(b()),a(s)),()=>{m(b(),a(s))}),He(()=>(a(r),Ue(g())),()=>{a(r)&&I(g())}),He(()=>(a(r),Ue(b()),Ue(g())),()=>{if(a(r)&&!a(r).value&&a(r)!==document.activeElement){const H=b().find(z=>z[0]===g());H&&ze(r,a(r).value=H[1]||H[0])}}),Wt();var B={get hidden(){return d()},set hidden(H){d(H),Ze()},get name(){return h()},set name(H){h(H),Ze()},get id(){return p()},set id(H){p(H),Ze()},get options(){return b()},set options(H){b(H),Ze()},get placeholder(){return S()},set placeholder(H){S(H),Ze()},get readonly(){return y()},set readonly(H){y(H),Ze()},get value(){return g()},set value(H){g(H),Ze()},$set:It,$on:(H,z)=>Pt(e,H,z)};Rt();var ne=Xh();let Z;var ae=u(ne),G=u(ae);Tn(G,e,"label",{},H=>{var z=fr("Label");x(H,z)}),c(ae);var ie=_(ae,2);ta(ie);var te=_(ie,2);ms(te,H=>ee(r,H),()=>a(r));var me=_(te,2);return Ar(me,5,()=>a(i),kr,(H,z,le)=>{var ce=Jh();let K;var oe=u(ce,!0);c(ce),C(()=>{Ge(ce,"href",`#${le}:${a(z),l(()=>a(z)[0])??""}`),K=Zt(ce,1,"select-field__option",null,K,{"is-active":le===a(t)}),$(oe,(a(z),l(()=>a(z).length>1?a(z)[1]:a(z)[0])))}),rt("click",ce,Qt(O)),rt("focus",ce,()=>{ee(t,le)}),rt("mouseover",ce,()=>{ee(t,le)}),x(H,ce)}),c(me),c(ne),C(()=>{Z=Zt(ne,1,"select-field text-field",null,Z,{"is-open":a(o),"is-readonly":y()}),Ge(ne,"hidden",d()),Ge(ae,"for",p()),Ge(ie,"name",h()),Ge(te,"id",p()),Ge(te,"placeholder",S()),te.readOnly=y()}),wa(ie,g),rt("keydown",ie,E),rt("blur",te,f),rt("keydown",te,E),rt("keyup",te,w),rt("click",te,Qt(O)),x(n,ne),Tt(B)}var Qh=A('<div class="text-area"><label><!></label> <textarea></textarea></div>');function Kl(n,e){if(new.target)return Nt({component:Kl,...n});Ct(e,!1);let t=Xe(e,"hidden",12,!1),r=Xe(e,"name",12,""),o=Xe(e,"id",28,()=>r()?"form_"+r():ys()),s=Xe(e,"placeholder",12,""),i=Xe(e,"readonly",12,!1),d=Xe(e,"value",12);var h={get hidden(){return t()},set hidden(g){t(g),Ze()},get name(){return r()},set name(g){r(g),Ze()},get id(){return o()},set id(g){o(g),Ze()},get placeholder(){return s()},set placeholder(g){s(g),Ze()},get readonly(){return i()},set readonly(g){i(g),Ze()},get value(){return d()},set value(g){d(g),Ze()},$set:It,$on:(g,v)=>Pt(e,g,v)};Rt();var p=Qh(),b=u(p),S=u(b);Tn(S,e,"label",{},g=>{var v=fr("Label");x(g,v)}),c(b);var y=_(b,2);return Rp(y),c(p),C(()=>{Ge(p,"hidden",t()),Ge(b,"for",o()),Ge(y,"id",o()),Ge(y,"name",r()),Ge(y,"placeholder",s()),y.readOnly=i()}),wa(y,d),x(n,p),Tt(h)}var eg=A('<a href="#toggle" class="text-field__toggle"><!></a>'),tg=A("<div><label><!></label> <input/> <!></div> <!>",1);function At(n,e){if(new.target)return Nt({component:At,...n});Ct(e,!1);let t=Oe(!1),r=Xe(e,"autocomplete",12,null),o=Xe(e,"hidden",12,!1),s=Xe(e,"name",12,""),i=Xe(e,"id",28,()=>s()?"form_"+s():ys()),d=Xe(e,"placeholder",12,""),h=Xe(e,"readonly",12,!1),p=Xe(e,"type",12,"text"),b=Xe(e,"value",12);function S(B){b(p().match(/^(number|range)$/)?parseInt(B.target.value,10):B.target.value)}var y={get autocomplete(){return r()},set autocomplete(B){r(B),Ze()},get hidden(){return o()},set hidden(B){o(B),Ze()},get name(){return s()},set name(B){s(B),Ze()},get id(){return i()},set id(B){i(B),Ze()},get placeholder(){return d()},set placeholder(B){d(B),Ze()},get readonly(){return h()},set readonly(B){h(B),Ze()},get type(){return p()},set type(B){p(B),Ze()},get value(){return b()},set value(B){b(B),Ze()},$set:It,$on:(B,ne)=>Pt(e,B,ne)};Rt();var g=tg(),v=Ee(g);let f;var m=u(v),E=u(m);Tn(E,e,"label",{},B=>{var ne=fr("Label");x(B,ne)}),c(m);var w=_(m,2);ta(w);var P=_(w,2);{var I=B=>{var ne=eg(),Z=u(ne);{let ae=Ke(()=>a(t)?"eye-slash":"eye");Ie(Z,{get name(){return a(ae)}})}c(ne),rt("click",ne,Qt(()=>{ee(t,!a(t))})),x(B,ne)};ke(P,B=>{p()==="password"&&!h()&&B(I)})}c(v);var O=_(v,2);return Tn(O,e,"help",{},null),C(()=>{f=Zt(v,1,"text-field",null,f,{"has-password":p()==="password"}),Ge(v,"hidden",o()),Ge(m,"for",i()),Ge(w,"type",a(t)?"text":p()),Ge(w,"id",i()),Ge(w,"name",s()),Ge(w,"autocomplete",r()),Ge(w,"placeholder",d()),w.readOnly=h(),lv(w,b())}),rt("input",w,S),rt("keyup",w,function(B){ao.call(this,e,B)}),x(n,g),Tt(y)}var rg=A('<span slot="label"> </span>'),ng=A('<p class="help" slot="help"> </p>'),ag=A('<span slot="label"> </span>'),og=A('<span slot="label"> </span>'),sg=A('<span slot="label"> </span>'),ig=A('<span slot="label"> </span>'),lg=A('<span slot="label"> </span>'),cg=A('<span slot="label"> </span>'),ug=A('<span slot="label"> </span>'),dg=A('<span slot="label"> </span>'),fg=A('<span slot="label"> </span>'),pg=A('<p class="help" slot="help"> </p>'),vg=A('<div class="form-group"><!> <!></div>'),hg=A('<span slot="label"> </span>'),gg=A('<span slot="label"> </span>'),_g=A('<p class="help" slot="help"> </p>'),mg=A('<span slot="label"> </span>'),bg=A('<p class="help" slot="help"> </p>'),yg=A('<span slot="label"> </span>'),wg=A('<p class="help" slot="help"> </p>'),$g=A('<span slot="label"> </span>'),xg=A('<div class="form-group"><!> <!> <!></div>'),Eg=A("<!> <!>",1),Sg=A("<span> </span>"),kg=A("<span> </span>"),Ag=A('<span slot="label"> </span>'),Og=A("<span> </span>"),Cg=A('<h3> </h3> <p> <!></p> <!> <div class="form-actions"><!></div> <!>',1),Tg=A('<form method="post"><!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="form-actions"><!></div> <!> <!> <!></form>');function Vl(n,e){if(new.target)return Nt({component:Vl,...n});Ct(e,!1);const t=()=>Pe(tr,"$l",o),r=()=>Pe(cn,"$lmd",o),[o,s]=Gt();let i=Xe(e,"connection",28,()=>({})),d=Xe(e,"is_page",12,!1);const h=pr("user"),p=[["none","None"],["plain","Plain"],["external","External"]],b=qt.op("createConnection"),S=qt.op("removeConnection"),y=qt.op("updateConnection");let g=Oe(""),v=Oe({}),f=Oe(!1),m=Oe(!1);function E(q){const M=q.url?q.url.toFields():{};at.array(q.on_connect_commands)&&(M.on_connect_commands=q.on_connect_commands.join(`
`)),M.nick||(M.nick=h.email.replace(/@.*/,"").replace(/\W/g,"_")),M.want_to_be_connected=q.wanted_state!=="disconnected",ee(v,{...a(v),...M,fingerprint:q.certificate.fingerprint||""})}function w(){const q=new ra(Qe.query.uri||h.default_connection||"irc://localhost").toFields();h.connections.size&&!Qe.query.uri&&(q.host=""),q.nick||(q.nick=h.email.replace(/@.*/,"").replace(/\W/g,"_")),ee(v,{...a(v),...q,want_to_be_connected:!0})}async function P(){await S.perform(i()),h.removeConversation(i()),Qe.go("/settings/connections")}async function I(){if(ze(v,a(v).on_connect_commands=(a(v).on_connect_commands||"").split(/\n\r?/).filter(q=>q.length)),ze(v,a(v).url=new ra("irc://localhost").fromFields(a(v)).toString()),i().connection_id)ze(v,a(v).connection_id=i().connection_id),ze(v,a(v).wanted_state=a(v).want_to_be_connected?"connected":"disconnected"),await y.perform(a(v)),i(h.ensureConversation(y.res.body)),E(i());else{await b.perform(a(v));const q=b.res.body;q.connection_id&&Qe.go(h.ensureConversation(q).path)}d()&&Qe.go("/settings/connections")}He(()=>Ue(i()),()=>{i().connection_id?E(i()):w()}),Wt();var O={get connection(){return i()},set connection(q){i(q),Ze()},get is_page(){return d()},set is_page(q){d(q),Ze()},$set:It,$on:(q,M)=>Pt(e,q,M)};Rt();var B=Tg(),ne=u(B);{let q=Ke(()=>(t(),l(()=>t()("Ex: irc.libera.chat:6697"))));At(ne,{name:"host",get placeholder(){return a(q)},get readonly(){return l(()=>h.forced_connection)},get value(){return a(v).host},set value(M){ze(v,a(v).host=M)},$$slots:{label:(M,R)=>{var j=rg(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(t(),l(()=>t()("Host and port")))]),x(M,j)},help:(M,R)=>{var j=ng(),Y=u(j,!0);c(j),C(U=>{Ge(j,"hidden",l(()=>!h.forced_connection)),$(Y,U)},[()=>(t(),l(()=>t()("You cannot create custom connections.")))]),x(M,j)}},$$legacy:!0})}var Z=_(ne,2);{let q=Ke(()=>(t(),l(()=>t()("Ex: superman"))));At(Z,{name:"nick",get placeholder(){return a(q)},get value(){return a(v).nick},set value(M){ze(v,a(v).nick=M)},$$slots:{label:(M,R)=>{var j=ag(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(t(),l(()=>t()("Nickname")))]),x(M,j)}},$$legacy:!0})}var ae=_(Z,2);{let q=Ke(()=>(t(),l(()=>t()("Ex: Clark Kent"))));At(ae,{name:"realname",get placeholder(){return a(q)},get value(){return a(v).realname},set value(M){ze(v,a(v).realname=M)},$$slots:{label:(M,R)=>{var j=og(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(t(),l(()=>t()("Your name")))]),x(M,j)}},$$legacy:!0})}var G=_(ae,2);{var ie=q=>{Ht(q,{name:"want_to_be_connected",get value(){return a(v).want_to_be_connected},set value(M){ze(v,a(v).want_to_be_connected=M)},$$slots:{label:(M,R)=>{var j=sg(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(t(),l(()=>t()("Want to be connected")))]),x(M,j)}},$$legacy:!0})},te=q=>{{let M=Ke(()=>(t(),l(()=>t()("Ex: #convos"))));At(q,{name:"conversation_id",get placeholder(){return a(M)},get value(){return a(v).conversation_id},set value(R){ze(v,a(v).conversation_id=R)},$$slots:{label:(R,j)=>{var Y=ig(),U=u(Y,!0);c(Y),C(N=>$(U,N),[()=>(t(),l(()=>t()("Conversation name")))]),x(R,Y)}},$$legacy:!0})}};ke(G,q=>{Ue(i()),l(()=>i().connection_id)?q(ie):q(te,!1)})}var me=_(G,2);Ht(me,{name:"tls",get value(){return a(v).tls},set value(q){ze(v,a(v).tls=q)},$$slots:{label:(q,M)=>{var R=lg(),j=u(R,!0);c(R),C(Y=>$(j,Y),[()=>(t(),l(()=>t()("Secure connection (TLS)")))]),x(q,R)}},$$legacy:!0});var H=_(me,2);{let q=Ke(()=>(a(v),l(()=>!a(v).tls))),M=Ke(()=>(a(v),l(()=>!a(v).tls)));Ht(H,{name:"tls_verify",get disabled(){return a(q)},get hidden(){return a(M)},get value(){return a(v).tls_verify},set value(R){ze(v,a(v).tls_verify=R)},$$slots:{label:(R,j)=>{var Y=cg(),U=u(Y,!0);c(Y),C(N=>$(U,N),[()=>(t(),l(()=>t()("Verify certificate (TLS)")))]),x(R,Y)}},$$legacy:!0})}var z=_(H,2);Ht(z,{icon:"caret",name:"show_advanced_settings",get value(){return a(f)},set value(q){ee(f,q)},$$slots:{label:(q,M)=>{var R=ug(),j=u(R,!0);c(R),C(Y=>$(j,Y),[()=>(t(),l(()=>t()("Advanced settings")))]),x(q,R)}},$$legacy:!0});var le=_(z,2);{var ce=q=>{var M=vg(),R=u(M);{let U=Ke(()=>(t(),l(()=>t()("Put each command on a new line."))));Kl(R,{name:"on_connect_commands",get placeholder(){return a(U)},get value(){return a(v).on_connect_commands},set value(N){ze(v,a(v).on_connect_commands=N)},$$slots:{label:(N,W)=>{var F=dg(),Q=u(F,!0);c(F),C(D=>$(Q,D),[()=>(t(),l(()=>t()("On-connect commands")))]),x(N,F)}},$$legacy:!0})}var j=_(R,2);{var Y=U=>{At(U,{name:"local_address",get value(){return a(v).local_address},set value(N){ze(v,a(v).local_address=N)},$$slots:{label:(N,W)=>{var F=fg(),Q=u(F,!0);c(F),C(D=>$(Q,D),[()=>(t(),l(()=>t()("Source IP")))]),x(N,F)},help:(N,W)=>{var F=pg(),Q=u(F,!0);c(F),C(D=>$(Q,D),[()=>(t(),l(()=>t()("Leave this blank, unless you know what you are doing.")))]),x(N,F)}},$$legacy:!0})};ke(j,U=>{l(()=>!h.forced_connection)&&U(Y)})}c(M),Tr(3,M,()=>$o,()=>({duration:150})),x(q,M)};ke(le,q=>{a(f)&&q(ce)})}var K=_(le,2);{var oe=q=>{var M=Eg(),R=Ee(M);Ht(R,{icon:"caret",name:"show_auth_settings",get value(){return a(m)},set value(U){ee(m,U)},$$slots:{label:(U,N)=>{var W=hg(),F=u(W,!0);c(W),C(Q=>$(F,Q),[()=>(t(),l(()=>t()("Authentication settings")))]),x(U,W)}},$$legacy:!0});var j=_(R,2);{var Y=U=>{var N=xg(),W=u(N);At(W,{name:"username",get placeholder(){return a(v),l(()=>a(v).nick)},get value(){return a(v).username},set value(J){ze(v,a(v).username=J)},$$slots:{label:(J,se)=>{var $e=gg(),ue=u($e,!0);c($e),C(V=>$(ue,V),[()=>(t(),l(()=>t()("Username")))]),x(J,$e)},help:(J,se)=>{var $e=_g(),ue=u($e,!0);c($e),C(V=>$(ue,V),[()=>(t(),l(()=>t()("SASL and IRC server username.")))]),x(J,$e)}},$$legacy:!0});var F=_(W,2);{var Q=J=>{At(J,{type:"text",name:"fingerprint",readonly:!0,get value(){return a(v).fingerprint},set value(se){ze(v,a(v).fingerprint=se)},$$slots:{label:(se,$e)=>{var ue=mg(),V=u(ue,!0);c(ue),C(ye=>$(V,ye),[()=>(t(),l(()=>t()("Fingerprint")))]),x(se,ue)},help:(se,$e)=>{var ue=bg(),V=u(ue,!0);c(ue),C(ye=>$(V,ye),[()=>(t(),l(()=>t()("The certificate fingerprint is used for SASL external authentication.")))]),x(se,ue)}},$$legacy:!0})},D=J=>{At(J,{type:"password",name:"password",get value(){return a(v).password},set value(se){ze(v,a(v).password=se)},$$slots:{label:(se,$e)=>{var ue=yg(),V=u(ue,!0);c(ue),C(ye=>$(V,ye),[()=>(t(),l(()=>t()("Password")))]),x(se,ue)},help:(se,$e)=>{var ue=wg(),V=u(ue,!0);c(ue),C(ye=>$(V,ye),[()=>(t(),l(()=>t()("SASL plain or IRC server password.")))]),x(se,ue)}},$$legacy:!0})};ke(F,J=>{a(v),l(()=>a(v).sasl==="external")?J(Q):J(D,!1)})}var X=_(F,2);da(X,{name:"sasl",get options(){return p},get value(){return a(v).sasl},set value(J){ze(v,a(v).sasl=J)},$$slots:{label:(J,se)=>{var $e=$g(),ue=u($e,!0);c($e),C(V=>$(ue,V),[()=>(t(),l(()=>t()("SASL authentication mechanism")))]),x(J,$e)}},$$legacy:!0}),c(N),Tr(3,N,()=>$o,()=>({duration:150})),x(U,N)};ke(j,U=>{a(m)&&U(Y)})}x(q,M)};ke(K,q=>{l(()=>!h.forced_connection)&&q(oe)})}var be=_(K,2),Ne=u(be);{var pe=q=>{ar(q,{icon:"save",get op(){return y},children:(M,R)=>{var j=Sg(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(t(),l(()=>t()("Update")))]),x(M,j)},$$slots:{default:!0}})},Se=q=>{ar(q,{icon:"plus-circle",get op(){return b},children:(M,R)=>{var j=kg(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(t(),l(()=>t()("Add")))]),x(M,j)},$$slots:{default:!0}})};ke(Ne,q=>{Ue(i()),l(()=>i().connection_id)?q(pe):q(Se,!1)})}c(be);var _e=_(be,2);Br(_e,{get op(){return b}});var ge=_(_e,2);Br(ge,{get op(){return y}});var Ce=_(ge,2);{var fe=q=>{var M=Cg(),R=Ee(M),j=u(R,!0);c(R);var Y=_(R,2),U=u(Y),N=_(U);Bt(N,()=>(r(),Ue(i()),t(),l(()=>r()('Please confirm by entering "**%1**" before hitting **%2**.',i().connection_id,t()("Delete"))))),c(Y);var W=_(Y,2);At(W,{name:"confirm_connection_id",get value(){return a(g)},set value(X){ee(g,X)},$$slots:{label:(X,J)=>{var se=Ag(),$e=u(se,!0);c(se),C(ue=>$($e,ue),[()=>(t(),l(()=>t()("Confirm connection ID")))]),x(X,se)}},$$legacy:!0});var F=_(W,2),Q=u(F);{let X=Ke(()=>(a(g),Ue(i()),l(()=>a(g)!==i().connection_id)));ar(Q,{icon:"trash",get op(){return S},get disabled(){return a(X)},$$events:{click:P},children:(J,se)=>{var $e=Og(),ue=u($e,!0);c($e),C(V=>$(ue,V),[()=>(t(),l(()=>t()("Delete")))]),x(J,$e)},$$slots:{default:!0}})}c(F);var D=_(F,2);Br(D,{get op(){return S},success:"Deleted."}),C((X,J)=>{$(j,X),$(U,`${J??""} `)},[()=>(t(),l(()=>t()("Delete"))),()=>(t(),l(()=>t()("This will permanently remove chat logs and other connection related data.")))]),x(q,M)};ke(Ce,q=>{Ue(i()),l(()=>i().connection_id)&&q(fe)})}c(B),rt("submit",B,Qt(I)),x(n,B);var we=Tt(O);return s(),we}var Ng=A("<p> </p>"),Rg=A("<p> </p>"),Pg=A("<p> </p>"),Ig=A("<p> </p>"),Mg=A("<div><h3> </h3> <!> <!></div>");function uf(n,e){if(new.target)return Nt({component:uf,...n});Ct(e,!1);const t=()=>Pe(oa,"$viewport",s),r=()=>Pe(Ur,"$activeMenu",s),o=()=>Pe(tr,"$l",s),[s,i]=Gt(),d=Oe();let h=Xe(e,"connection",12);He(()=>Ue(h()),()=>{ee(d,h().real_host||h().url&&h().url.host)}),Wt();var p={get connection(){return h()},set connection(v){h(v),Ze()},$set:It,$on:(v,f)=>Pt(e,v,f)};Rt();var b=vt(),S=Ee(b);{var y=v=>{var f=Mg();let m;var E=u(f),w=u(E,!0);c(E);var P=_(E,2);{var I=ne=>{var Z=Ng(),ae=u(Z,!0);c(Z),C(G=>$(ae,G),[()=>(o(),l(()=>o()("Connection not found.")))]),x(ne,Z)},O=ne=>{var Z=vt(),ae=Ee(Z);{var G=te=>{var me=Rg(),H=u(me,!0);c(me),C(z=>$(H,z),[()=>(o(),a(d),l(()=>o()("Currently disconnected from %1.",a(d))))]),x(te,me)},ie=te=>{var me=vt(),H=Ee(me);{var z=ce=>{var K=Pg(),oe=u(K,!0);c(K),C(be=>$(oe,be),[()=>(o(),a(d),l(()=>o()("Currently connected to %1.",a(d))))]),x(ce,K)},le=ce=>{var K=Ig(),oe=u(K,!0);c(K),C(be=>$(oe,be),[()=>(o(),a(d),l(()=>o()("Currently connecting to %1.",a(d))))]),x(ce,K)};ke(H,ce=>{Ue(h()),l(()=>h().state==="connected")?ce(z):ce(le,!1)},!0)}x(te,me)};ke(ae,te=>{Ue(h()),l(()=>h().state==="disconnected")?te(G):te(ie,!1)},!0)}x(ne,Z)};ke(P,ne=>{Ue(h()),l(()=>!h().url)?ne(I):ne(O,!1)})}var B=_(P,2);Vl(B,{get connection(){return h()}}),c(f),C(ne=>{m=Zt(f,1,"",null,m,{"sidebar-left":!t().hasRightColumn,"sidebar-right":t().hasRightColumn}),$(w,ne)},[()=>(o(),l(()=>o()("Settings")))]),Tr(3,f,()=>wo,()=>t().sidebarTransition),x(v,f)};ke(S,v=>{t(),r(),l(()=>t().hasRightColumn||r()==="settings")&&v(y)})}x(n,b);var g=Tt(p);return i(),g}const Fa={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",i:"invite_only",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",M:"login_to_talk",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",R:"login_to_join",s:"secret",S:"secure_connection_only",t:"topic_protection"};function dn(n){return Fa[n]?Fa[n]:Object.keys(Fa).filter(e=>n===Fa[e])[0]||""}const du=["Members","Bots","Bots","Voiced","Half operators","Operators","Administrators","Founders"],Lg={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",q:"founder",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};var Dg=A("<h3> </h3>"),Ug=A('<a class="participant prevent-default"><!> <span> </span></a>'),Fg=A('<a href="#settings"><!> </a>'),Bg=A('<nav class="participants"><!></nav>');function df(n,e){if(new.target)return Nt({component:df,...n});Ct(e,!1);const t=()=>Pe(a(d),"$participants",s),r=()=>Pe(tr,"$l",s),o=()=>Pe(p,"$user",s),[s,i]=Gt(),d=Oe();let h=Xe(e,"conversation",12);const p=pr("user");function b(E){const w=[];let P=-1;for(const I of E)P!=I.group&&w.push({heading:du[I.group]||du[0]}),P=I.group,w.push(I);return w}He(()=>Ue(h()),()=>{En(ee(d,h().participants),"$participants",s)}),Wt();var S={get conversation(){return h()},set conversation(E){h(E),Ze()},$set:It,$on:(E,w)=>Pt(e,E,w)};Rt();var y=Bg(),g=u(y);{var v=E=>{var w=vt(),P=Ee(w);Ar(P,1,()=>(t(),l(()=>b(t().toArray()))),kr,(I,O)=>{var B=vt(),ne=Ee(B);{var Z=G=>{var ie=Dg(),te=u(ie,!0);c(ie),C(me=>$(te,me),[()=>(r(),a(O),l(()=>r()(a(O).heading)))]),x(G,ie)},ae=G=>{var ie=Ug(),te=u(ie);{let z=Ke(()=>(a(O),o(),l(()=>a(O).me?o().avatarId:void 0)));Ie(te,{get name(){return`pick:${a(O),l(()=>a(O).nick)??""}`},family:"solid",get color(){return a(O),l(()=>a(O).color)},get avatarId(){return a(z)}})}var me=_(te,2),H=u(me,!0);c(me),c(ie),C(()=>{Ge(ie,"href",`#action:join:${a(O),l(()=>a(O).nick)??""}`),$(H,(a(O),l(()=>a(O).nick)))}),x(G,ie)};ke(ne,G=>{a(O),l(()=>a(O).heading)?G(Z):G(ae,!1)})}x(I,B)}),x(E,w)},f=E=>{var w=Fg(),P=u(w);Ie(P,{name:"users-cog"});var I=_(P);c(w),C(O=>$(I,` ${O??""}`),[()=>(r(),l(()=>r()("Settings")))]),rt("click",w,function(...O){var B;(B=Ur.toggle)==null||B.apply(this,O)}),x(E,w)};ke(g,E=>{t(),l(()=>t().length)?E(v):E(f,!1)})}c(y),x(n,y);var m=Tt(S);return i(),m}function yl(n){if(!n.nick)return["Loading..."];const e=Object.keys(n.channels||{}).sort(),t=[n.nick,n.name||n.user];let r="%1 (%2)";return n.away&&(r+=" is away (%3) and",t.push(n.away)),n.idle_for&&e.length?(r+=" has been idle for %4s in %5.",t.push(n.idle_for),t.push(e.sort().join(", "))):n.idle_for&&!e.length?(r+=" has been idle for %4s, and is not in any channels.",t.push(n.idle_for)):e.length?(r+=" is active in %4.",t.push(e.join(", "))):r+=" is not in any channels.",n.away||(r=r.replace(/%(4|5)/g,(o,s)=>"%"+(s-1))),[r,...t]}function rs(n){const e=["","chat",n.connection_id];return n.conversation_id&&e.push(n.conversation_id),Qe.urlFor(e.map(encodeURIComponent).join("/")+"#"+n.ts.toISOString())}function qg(n,{conversation:e}){const t=n.detail.visibleEls.filter(s=>s.dataset.ts);if(!t.length)return;const r=s=>Qe.go(e.path+(s.length?"#"+s:""),{replace:!0}),o=n.detail.pos;if(o==="top"){const s=t[0].dataset.ts;e.historyStartAt||e.load({before:s}),r(s)}else if(o==="bottom"){const s=t.slice(-1)[0].dataset.ts;e.historyStopAt||e.load({after:s}),r(e.historyStopAt?"":s)}else r(t[0].dataset.ts)}function jg(n,{conversation:e,timestampFromUrl:t}){const{infinityEl:r,scrollHeightChanged:o,scrollTo:s,visibleEls:i,visibleElsChanged:d}=n.detail,h=e.messages;!(r.scrollHeight>r.offsetHeight)&&h.length&&e.load({before:h.get(0).ts.toISOString()}),o&&(s(Qe.hash?'.message[data-ts="'+Qe.hash+'"]':-1),zg(r,t===Qe.hash)),d&&i.forEach(b=>h.render(b.dataset.index))}function zg(n,e){const t=e&&Qe.hash&&n.querySelector('.message[data-ts="'+Qe.hash+'"]');Cr(n,".has-focus",r=>r.classList.remove("has-focus")),t&&t.classList.add("has-focus")}function fu(n,e){return e.is("not_found")?"":n.frozen?n.frozen:n===e?"Connection messages.":e.info.away?e.info.away:e.info.idle_for?Lt.l("User has been idle for %1s.",e.info.idle_for):(e.frozen?e.frozen:e.topic)||(e.is("private")?"Private conversation.":"No topic is set.")}var Hg=A('<span slot="label"> </span>'),Wg=A('<span slot="label"> </span>'),Gg=A('<span slot="label"> </span>'),Kg=A('<span><!></span> <br/><small><a href="#update"> </a></small>',1),Vg=A('<span slot="label"> <b class="badge"> </b></span>'),Yg=A('<span slot="label"> <b class="badge"> </b></span>'),Zg=A('<span slot="label"> <b class="badge"> </b></span>'),Jg=A('<span slot="label"> <b class="badge"> </b></span>'),Xg=A('<span slot="label"> <b class="badge"> </b></span>'),Qg=A('<span slot="label"> </span>'),e_=A("<p><i> </i></p>"),t_=A("<!> <!> <!> <!> <!> <!> <!>",1),r_=A("<span> </span>"),n_=A("<span> </span>"),a_=A('<div><form method="post"><h3> </h3> <!> <!> <!> <p><!></p> <!> <div class="form-actions"><!> <!></div> <!></form> <!></div>');function ff(n,e){if(new.target)return Nt({component:ff,...n});Ct(e,!1);const t=()=>Pe(g(),"$conversation",h),r=()=>Pe(a(b),"$participants",h),o=()=>Pe(Ur,"$activeMenu",h),s=()=>Pe(oa,"$viewport",h),i=()=>Pe(tr,"$l",h),d=()=>Pe(cn,"$lmd",h),[h,p]=Gt(),b=Oe(),S=Oe(),y=Oe();let g=Xe(e,"conversation",12);const v=new ws({api:!1,id:"saveConversationSettings"});let f=Oe({invite_only:!1,moderated:!1,password:!1,prevent_external_send:!1,topic_protection:!1}),m=Oe(""),E=Oe(""),w=Oe("");function P(){g().send("/part",H=>{H.errrors||(Zd(Ur,""),Qe.removeFromHistory(location.href),Qe.go(Qe.history.slice(-1)[0]||"/settings/conversation?connection_id="+(g().connection_id||"")))})}function I(){const H=[];for(const z in a(f))z==="password"&&a(f)[z]?(a(E)&&g().send(a(y)?"/mode +k "+a(E):"/join "+g().name+" "+a(E)),ee(E,"")):a(f)[z]!==(g().modes[z]||!1)&&H.push((a(f)[z]?"+":"-")+dn(z));return a(y)&&H.length&&g().send("/mode "+H.join(""))}function O(){return!a(y)&&g().modes.topic_protection?!1:a(w)!==g().topic&&g().send("/topic "+a(w))}async function B(){v.update({status:"loading"}),await v.on("update"),I(),O(),await yo(),v.update({status:"success"})}function ne(){Object.keys(g().modes).length===0&&!a(S)&&!g().frozen&&g().send("/mode",H=>{H.bubbles=!1,ee(f,Object.assign({},a(f),g().modes)),ee(w,g().topic)})}function Z(){g().send("/whois "+g().name,H=>H.stopPropagation())}He(()=>t(),()=>{En(ee(b,t().participants),"$participants",h)}),He(()=>t(),()=>{ee(S,t().is("private"))}),He(()=>r(),()=>{ee(y,r().me().modes.operator)}),He(()=>(Ue(g()),a(m)),()=>{g().path!=a(m)&&(ee(m,g().path),ne())}),Wt();var ae={get conversation(){return g()},set conversation(H){g(H),Ze()},$set:It,$on:(H,z)=>Pt(e,H,z)};Rt();var G=vt(),ie=Ee(G);{var te=H=>{var z=a_();let le;var ce=u(z),K=u(ce),oe=u(K,!0);c(K);var be=_(K,2);{var Ne=F=>{Ht(F,{name:"want_notifications",get value(){return g().wantNotifications},set value(Q){g(g().wantNotifications=Q,!0)},$$slots:{label:(Q,D)=>{var X=Hg(),J=u(X,!0);c(X),C(se=>$(J,se),[()=>(i(),l(()=>i()("Notify me on new messages")))]),x(Q,X)}},$$legacy:!0})};ke(be,F=>{t(),l(()=>Object.hasOwn(t(),"wantNotifications"))&&F(Ne)})}var pe=_(be,2);Ht(pe,{name:"raw_messages",get value(){return g().messages.raw},set value(F){g(g().messages.raw=F,!0)},$$slots:{label:(F,Q)=>{var D=Wg(),X=u(D,!0);c(D),C(J=>$(X,J),[()=>(i(),l(()=>i()("Show raw messages")))]),x(F,D)}},$$legacy:!0});var Se=_(pe,2);{var _e=F=>{{let Q=Ke(()=>(i(),l(()=>i()("No topic is set.")))),D=Ke(()=>(a(y),t(),l(()=>!a(y)||!t().modes.topic_protection)));Kl(F,{name:"topic",get placeholder(){return a(Q)},get readonly(){return a(D)},get value(){return a(w)},set value(X){ee(w,X)},$$slots:{label:(X,J)=>{var se=Gg(),$e=u(se,!0);c(se),C(ue=>$($e,ue),[()=>(i(),l(()=>i()("Topic")))]),x(X,se)}},$$legacy:!0})}};ke(Se,F=>{a(S)||F(_e)})}var ge=_(Se,2),Ce=u(ge);{var fe=F=>{var Q=fr();C(D=>$(Q,D),[()=>(i(),Ue(g()),l(()=>i()("Conversation with %1 is frozen. Reason: %2",g().name,i()(g().frozen))))]),x(F,Q)},we=F=>{var Q=vt(),D=Ee(Q);{var X=J=>{var se=Kg(),$e=Ee(se),ue=u($e);Bt(ue,()=>(d(),Ue(yl),t(),l(()=>d()(...yl(t().info))))),c($e);var V=_($e,3),ye=u(V),ve=u(ye,!0);c(ye),c(V),C(xe=>$(ve,xe),[()=>(i(),l(()=>i()("Update information")))]),rt("click",ye,Qt(Z)),x(J,se)};ke(D,J=>{a(S)&&J(X)},!0)}x(F,Q)};ke(Ce,F=>{t(),l(()=>t().frozen)?F(fe):F(we,!1)})}c(ge);var q=_(ge,2);{var M=F=>{var Q=t_(),D=Ee(Q);{let xe=Ke(()=>!a(y));Ht(D,{badge:!0,name:"invite_only",get disabled(){return a(xe)},get value(){return a(f).invite_only},set value(de){ze(f,a(f).invite_only=de)},$$slots:{label:(de,Ye)=>{var qe=Vg(),Te=u(qe),k=_(Te),L=u(k);c(k),c(qe),C((Ae,Le)=>{$(Te,`${Ae??""} `),$(L,`${a(f),l(()=>a(f).invite_only?"+":"-")??""}${Le??""}`)},[()=>(i(),l(()=>i()("Invite only"))),()=>(Ue(dn),l(()=>dn("invite_only")))]),x(de,qe)}},$$legacy:!0})}var X=_(D,2);{let xe=Ke(()=>!a(y));Ht(X,{badge:!0,name:"moderated",get disabled(){return a(xe)},get value(){return a(f).moderated},set value(de){ze(f,a(f).moderated=de)},$$slots:{label:(de,Ye)=>{var qe=Yg(),Te=u(qe),k=_(Te),L=u(k);c(k),c(qe),C((Ae,Le)=>{$(Te,`${Ae??""} `),$(L,`${a(f),l(()=>a(f).moderated?"+":"-")??""}${Le??""}`)},[()=>(i(),l(()=>i()("Moderated"))),()=>(Ue(dn),l(()=>dn("moderated")))]),x(de,qe)}},$$legacy:!0})}var J=_(X,2);{let xe=Ke(()=>!a(y));Ht(J,{badge:!0,name:"prevent_external_send",get disabled(){return a(xe)},get value(){return a(f).prevent_external_send},set value(de){ze(f,a(f).prevent_external_send=de)},$$slots:{label:(de,Ye)=>{var qe=Zg(),Te=u(qe),k=_(Te),L=u(k);c(k),c(qe),C((Ae,Le)=>{$(Te,`${Ae??""} `),$(L,`${a(f),l(()=>a(f).prevent_external_send?"+":"-")??""}${Le??""}`)},[()=>(i(),l(()=>i()("Prevent external send"))),()=>(Ue(dn),l(()=>dn("prevent_external_send")))]),x(de,qe)}},$$legacy:!0})}var se=_(J,2);{let xe=Ke(()=>!a(y));Ht(se,{badge:!0,name:"topic_protection",get disabled(){return a(xe)},get value(){return a(f).topic_protection},set value(de){ze(f,a(f).topic_protection=de)},$$slots:{label:(de,Ye)=>{var qe=Jg(),Te=u(qe),k=_(Te),L=u(k);c(k),c(qe),C((Ae,Le)=>{$(Te,`${Ae??""} `),$(L,`${a(f),l(()=>a(f).topic_protection?"+":"-")??""}${Le??""}`)},[()=>(i(),l(()=>i()("Protected topic"))),()=>(Ue(dn),l(()=>dn("topic_protection")))]),x(de,qe)}},$$legacy:!0})}var $e=_(se,2);{let xe=Ke(()=>!a(y));Ht($e,{badge:!0,name:"password",get disabled(){return a(xe)},get value(){return a(f).password},set value(de){ze(f,a(f).password=de)},$$slots:{label:(de,Ye)=>{var qe=Xg(),Te=u(qe),k=_(Te),L=u(k);c(k),c(qe),C((Ae,Le)=>{$(Te,`${Ae??""} `),$(L,`${a(f),l(()=>a(f).password?"+":"-")??""}${Le??""}`)},[()=>(i(),l(()=>i()("Password"))),()=>(Ue(dn),l(()=>dn("password")))]),x(de,qe)}},$$legacy:!0})}var ue=_($e,2);{var V=xe=>{At(xe,{type:"password",name:"password",get value(){return a(E)},set value(de){ee(E,de)},$$slots:{label:(de,Ye)=>{var qe=Qg(),Te=u(qe,!0);c(qe),C(k=>$(Te,k),[()=>(i(),l(()=>i()("Password")))]),x(de,qe)}},$$legacy:!0})};ke(ue,xe=>{a(f),l(()=>a(f).password)&&xe(V)})}var ye=_(ue,2);{var ve=xe=>{var de=e_(),Ye=u(de),qe=u(Ye,!0);c(Ye),c(de),C(Te=>$(qe,Te),[()=>(i(),l(()=>i()("Only operators can change modes.")))]),x(xe,de)};ke(ye,xe=>{a(y)||xe(ve)})}x(F,Q)};ke(q,F=>{a(S)||F(M)})}var R=_(q,2),j=u(R);{var Y=F=>{ar(F,{icon:"save",get op(){return v},children:(Q,D)=>{var X=r_(),J=u(X,!0);c(X),C(se=>$(J,se),[()=>(i(),l(()=>i()("Save")))]),x(Q,X)},$$slots:{default:!0}})};ke(j,F=>{a(S)||F(Y)})}var U=_(j,2);ar(U,{type:"button",icon:"sign-out-alt",$$events:{click:P},children:(F,Q)=>{var D=n_(),X=u(D,!0);c(D),C(J=>$(X,J),[()=>(i(),l(()=>i()("Leave")))]),x(F,D)},$$slots:{default:!0}}),c(R);var N=_(R,2);Br(N,{get op(){return v}}),c(ce);var W=_(ce,2);df(W,{get conversation(){return g()}}),c(z),C(F=>{le=Zt(z,1,"",null,le,{"sidebar-left":!s().hasRightColumn,"sidebar-right":s().hasRightColumn}),$(oe,F)},[()=>(i(),l(()=>i()("Settings")))]),rt("submit",ce,Qt(B)),Tr(3,z,()=>wo,()=>s().sidebarTransition),x(H,z)};ke(ie,H=>{s(),o(),l(()=>s().hasRightColumn||o()==="settings")&&H(te)})}x(n,G);var me=Tt(ae);return p(),me}var Ai,pu;function pf(){if(pu)return Ai;pu=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Ai=n,Ai}var Oi,vu;function o_(){if(vu)return Oi;vu=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return Oi=e,Oi}var Ci,hu;function s_(){if(hu)return Ci;hu=1;var n=o_(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return Ci=t,Ci}var Ti,gu;function i_(){if(gu)return Ti;gu=1;var n=s_(),e=pf(),t=rf(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,i=/^0o[0-7]+$/i,d=parseInt;function h(p){if(typeof p=="number")return p;if(t(p))return r;if(e(p)){var b=typeof p.valueOf=="function"?p.valueOf():p;p=e(b)?b+"":b}if(typeof p!="string")return p===0?p:+p;p=n(p);var S=s.test(p);return S||i.test(p)?d(p.slice(2),S?2:8):o.test(p)?r:+p}return Ti=h,Ti}var Ni,_u;function l_(){if(_u)return Ni;_u=1;var n=pf(),e=tf(),t=i_(),r="Expected a function",o=Math.max,s=Math.min;function i(d,h,p){var b,S,y,g,v,f,m=0,E=!1,w=!1,P=!0;if(typeof d!="function")throw new TypeError(r);h=t(h)||0,n(p)&&(E=!!p.leading,w="maxWait"in p,y=w?o(t(p.maxWait)||0,h):y,P="trailing"in p?!!p.trailing:P);function I(me){var H=b,z=S;return b=S=void 0,m=me,g=d.apply(z,H),g}function O(me){return m=me,v=setTimeout(Z,h),E?I(me):g}function B(me){var H=me-f,z=me-m,le=h-H;return w?s(le,y-z):le}function ne(me){var H=me-f,z=me-m;return f===void 0||H>=h||H<0||w&&z>=y}function Z(){var me=e();if(ne(me))return ae(me);v=setTimeout(Z,B(me))}function ae(me){return v=void 0,P&&b?I(me):(b=S=void 0,g)}function G(){v!==void 0&&clearTimeout(v),m=0,b=f=S=v=void 0}function ie(){return v===void 0?g:ae(e())}function te(){var me=e(),H=ne(me);if(b=arguments,S=this,f=me,H){if(v===void 0)return O(f);if(w)return clearTimeout(v),v=setTimeout(Z,h),I(f)}return v===void 0&&(v=setTimeout(Z,h)),g}return te.cancel=G,te.flush=ie,te}return Ni=i,Ni}var c_=l_();const Yl=so(c_);class u_{constructor(){this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=Yl(()=>this._removeDragOver(),100)}attach(e,t,r=document){this.dropEl=e,this.uploader=t,this.targetEl=r,Object.keys(this.dragAndDropEvents).forEach(o=>{r.addEventListener(o,this.dragAndDropEvents[o])}),Object.keys(this.pasteEvents).forEach(o=>{document.addEventListener(o,this.pasteEvents[o])})}detach(){Object.keys(this.dragAndDropEvents).forEach(e=>{this.targetEl.removeEventListener(e,this.dragAndDropEvents[e])}),Object.keys(this.pasteEvents).forEach(e=>{document.removeEventListener(e,this.pasteEvents[e])})}drop(e){this.stop(e),this.uploader&&this.uploader(e)}paste(e){const t=(e.clipboardData||e.originalEvent.clipboardData).items;if(this.uploader){for(let r=0;r<t.length;r++)if(t[r].kind==="file")return this.uploader({dataTransfer:{files:[t[r].getAsFile()]}})}}stop(e){this._preventDefault(e),this.removeDragOverDebounced()}start(e){if(!this.dropEl)return;this._preventDefault(e);const t=this.dropIndicatorEl.style;t.height=this.dropEl.offsetHeight+"px",t.width=this.dropEl.offsetWidth+"px",t.top=this.dropEl.offsetTop+"px",t.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}_preventDefault(e){e.preventDefault(),e.stopPropagation()}_removeDragOver(){this.dropIndicatorEl.classList.add("hidden")}}var d_=A("<main><div><!></div></main>");function $s(n,e){if(new.target)return Nt({component:$s,...n});Ct(e,!1);const t=Oe(),r=Qp(),o={scrollDelay:80,scrollOffset:80,scrollTop:0,visibleEls:[]};let s=Xe(e,"class",12,""),i=Zo(),d=Oe(0),h=Xe(e,"pos",12,"top");function p(){const w=o.infinityEl;if(!w)return;h(w.scrollTop>a(d)-w.offsetHeight-o.scrollOffset?"bottom":w.scrollTop<o.scrollOffset?"top":"middle"),o.pos=h(),o.scrollHeightChanged=o.scrollHeight!==a(d),o.scrollHeight=a(d),o.visibleElsChanged=!1;const P=Iv(w.firstElementChild,w);(P.length!==o.visibleEls.length||P[0]!==o.visibleEls[0])&&(o.visibleEls=P,o.visibleElsChanged=!0),(o.scrollHeightChanged||o.visibleElsChanged)&&r("visibility",o),o.scrollHeightChanged&&r("rendered",o)}function b(w){o.infinityEl=w,o.scrollTo=g,w.addEventListener("scroll",()=>S(w)),p()}function S(w){o.scrollTid&&clearTimeout(o.scrollTid),o.scrollTid=setTimeout(()=>y(w),o.scrollDelay)}function y(w){i+500>Zo()?(Math.abs(w.scrollTop-o.scrollTop)>40&&(w.scrollTop=o.scrollTop),o.scrollTid&&clearTimeout(o.scrollTid),p()):(o.scrollTop=w.scrollTop,p(),r("scrolled",o))}function g(w){return at.undefined(w)||(w===-1&&(w=a(d)),at.string(w)&&(w=o.infinityEl.querySelector(w)),w&&w.tagName&&(w=w.offsetTop),at.undefined(w))||w<0?!1:(i=Zo(),o.infinityEl.scrollTop=w,o.scrollTop=o.infinityEl.scrollTop,!0)}He(()=>(Ue(s()),Ue(h())),()=>{ee(t,[s()||"infinity-scroll"].concat(["has-pos-"+h()]))}),He(()=>a(d),()=>{a(d)&&p()}),Wt();var v={get class(){return s()},set class(w){s(w),Ze()},get pos(){return h()},set pos(w){h(w),Ze()},$set:It,$on:(w,P)=>Pt(e,w,P)};Rt();var f=d_(),m=u(f),E=u(m);return Tn(E,e,"default",{},null),c(m),c(f),Ml(f,w=>b==null?void 0:b(w)),C(w=>Zt(f,1,w),[()=>(a(t),l(()=>a(t).join(" ")))]),gv(m,"offsetHeight",w=>ee(d,w)),x(n,f),Tt(v)}var f_=A("<a><!></a>");function _t(n,e){if(new.target)return Nt({component:_t,...n});Ct(e,!1);const t=()=>Pe(Qe,"$route",r),[r,o]=Gt(),s=Oe(),i=Oe();let d=Xe(e,"class",12,""),h=Oe(),p=Xe(e,"href",12,"/"),b=Xe(e,"style",12,"");const S=()=>a(h).focus();He(()=>(Ue(p()),t()),()=>{ee(s,p().indexOf("/")===0?t().basePath+p():p())}),He(()=>(t(),a(s)),()=>{ee(i,t().basePath+t().path===a(s).replace(/(#|\?).*/,""))}),Wt();var y={focus:S,get class(){return d()},set class(E){d(E),Ze()},get href(){return p()},set href(E){p(E),Ze()},get style(){return b()},set style(E){b(E),Ze()},$set:It,$on:(E,w)=>Pt(e,E,w)};Rt();var g=f_();let v;var f=u(g);Tn(f,e,"default",{},null),c(g),ms(g,E=>ee(h,E),()=>a(h)),C(()=>{Ge(g,"href",a(s)),v=Zt(g,1,d(),null,v,{"has-path":a(i)}),aa(g,b())}),rt("click",g,function(E){ao.call(this,e,E)}),x(n,g),Zr(e,"focus",S);var m=Tt(y);return o(),m}const p_=oo("notify");class v_ extends Xr{constructor(){super(),this.Notification=window.Notification||{permission:"denied"},this.prop("persist","volume",0),this.prop("persist","notificationCloseDelay",5e3),this.prop("persist","wantNotifications",this.Notification.requestPermission?null:!1),this.prop("ro","appHasFocus",()=>document.hasFocus()),this.prop("ro","volumeOptions",[["0","Muted"],["25","Low"],["50","Medium"],["100","Max"]]),this.prop("rw","desktopAccess",this.Notification.permission)}play(e=this){const t=document.getElementById("audio_notification");t&&(t.muted=!1,t.volume=parseInt(e.volume,10)/100,t.play())}requestDesktopAccess(){return this.Notification.requestPermission?(this.Notification.requestPermission(e=>this.update({desktopAccess:e})),this):this.update({desktopAccess:this.Notification.permission})}show(e,t={}){if(t.title||(t.title=document.title),!this.wantNotifications)return this._showInConsole(e,t);if(this.volume&&this.play(),this.desktopAccess!=="granted")return this.showInApp(e,t);const r=new Notification(t.title,{...t,body:e});return r.onclick=o=>this._onClick(o,r,t),setTimeout(()=>r.close(),this.notificationCloseDelay),r}showInApp(e,t={}){t.title||(t.title=document.title);const r=document.createElement("div"),o={...t,body:e,close:()=>{r.remove(),o.closed=!0},target:"app"};return r.className="notify-notification fade-in",r.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',r.querySelector("a").addEventListener("click",s=>{s.preventDefault(),o.close()}),r.querySelector("h6").textContent=t.title,r.querySelector("div").textContent=e,t.closeAfter===-1?r.querySelector("a").remove():setTimeout(()=>o.close(),t.closeAfter||this.notificationCloseDelay),setTimeout(()=>r.classList.add("is-visible"),1),document.body.appendChild(r),o}_onClick(e,t,r){t.close(),window.focus(),this.emit("click",{...r,sourceEvent:e})}_showInConsole(e,t){return p_.info("[Notify]",e,t),{...t,body:e,close:()=>{},target:"console"}}}const hr=new v_;var h_=A('<a href="#settings"><!><!></a>'),g_=A('<h1 class="ellipsis"><a href="#settings"> </a></h1> <!>',1),__=A('<div class="message__status-line for-loading has-pos-top"><span><!> <i> </i></span></div>'),m_=A('<div class="message__status-line for-start-of-history"><span><!> <i> </i></span></div>'),b_=A('<div class="message__status-line for-day-changed"><span><!> <i> </i></span></div>'),y_=A('<div class="message__status-line for-last-read"><span><!> </span></div>'),w_=A("<a><!></a>"),$_=A("<div></div>"),x_=A('<div class="popover"><a><!> </a> <a class="on-hover"><!> </a> <a class="on-hover"><!> </a> <a class="on-hover"><!> </a></div>'),E_=A('<!> <!> <div><div class="message__ts has-tooltip"><span> </span> <span class="tooltip"> </span></div> <!> <a class="message__from" tabindex="-1"> </a> <div class="message__text"><!> <!></div> <!> <!></div>',1),S_=A("<!> ",1),k_=A("<!> ",1),A_=A("<h2> </h2> <p> </p> <p><!> <!></p>",1),O_=A("<!> <span> </span>",1),C_=A("<!> <span> </span>",1),T_=A("<h2> </h2> <p> </p> <p><!> <!></p>",1),N_=A('<a href="#toggle" class="message is-highlighted"><div class="message__text"><!> <!></div></a>'),R_=A("<!> <span> </span>",1),P_=A("<!> <span> </span>",1),I_=A("<h2> </h2> <p> </p> <p><!> <!></p>",1),M_=A('<div class="message is-highlighted"><div class="message__text"><!> </div></div>'),L_=A('<div class="message"><div> </div> <div class="progress"><div class="progress__bar"> </div></div></div>'),D_=A('<div class="message is-highlighted"><div class="message__text"><!> <!></div></div>'),U_=A('<div class="message__status-line for-loading has-pos-bottom"><span><!> <i> </i></span></div>'),F_=A('<div class="message__status-line for-jump-to-now"><a><!> </a></div>'),B_=A("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1),q_=A("<!> <!> <!> <!>",1);function vf(n,e){if(new.target)return Nt({component:vf,...n});Ct(e,!1);const t=()=>Pe(P,"$user",y),r=()=>Pe(a(O),"$conversation",y),o=()=>Pe(Qe,"$route",y),s=()=>Pe(tr,"$l",y),i=()=>Pe(oa,"$viewport",y),d=()=>Pe(Ur,"$activeMenu",y),h=()=>Pe(a(B),"$messages",y),p=()=>Pe(a(ne),"$participants",y),b=()=>Pe(a(I),"$connection",y),S=()=>Pe(cn,"$lmd",y),[y,g]=Gt(),v=Oe();let f=Xe(e,"connection_id",12,""),m=Xe(e,"conversation_id",12,""),E=Xe(e,"title",12,"Chat");const w=new u_,P=pr("user");let I=Oe(P.notifications),O=Oe(P.notifications),B=Oe(a(O).messages),ne=Oe(a(O).participants),Z=Oe(new wr),ae=Oe(-1),G={},ie=Oe(),te=Oe(),me=Oe(),H=Oe(),z=Oe(""),le;In(()=>{w.attach(document.querySelector(".main"),a(me)),le=Qe.on("click",oe)}),Il(()=>{le(),Object.keys(G).forEach(R=>G[R]()),w.detach()});function ce(){const[R,j]=r().connection_id.split("-");return R+"://"+j+"/"+a(v)+"?tls=1"}function K(){(a(O).notifications||a(O).unread)&&a(O).markAsRead()}function oe(R){const j=R.target.closest("a[href]");if((!j||j.href.indexOf("popover:")===-1)&&ee(ae,-1),!j)return;if(j.classList.contains("le-thumbnail"))return Uv(R,j.querySelector("img"));const U=j.hash.match(/action:([a-z]+):(.*)$/)||["all","unknown","value"];if(U[1]!=="unknown"&&R.preventDefault(),U[2]=decodeURIComponent(U[2]),["join","whois"].indexOf(U[1])!==-1)a(O).send("/"+U[1]+" "+U[2]);else if(U[1]==="expand"){const N=a(O).messages.get(U[2]);N.expanded=!N.expanded,a(O).messages.update({messages:!0})}else if(U[1]==="mention")a(te)(U[2]);else if(U[1]==="popover"){const N=parseInt(U[2],10);ee(ae,a(ae)!==N?N:-1)}else!j.target&&j.getAttribute("href").indexOf("/")!==0&&(j.target="_blank")}function be(R,j){const Y=j.nodes[0]&&j.nodes[0].parentNode;if(Y&&Y.classList){const U=Y.classList.contains("embed")?"add":"remove";Y.classList[U]("hidden")}j.nodes.forEach(U=>R.appendChild(U))}function Ne(R,j){a(O).connection_id===R&&a(O).conversation_id===j||P.setActiveConversation({connection_id:R,conversation_id:j})}function pe(R){if(R.activeConversation!==a(O)){if(G.conversation&&G.conversation(),G.unread&&G.unread(),popoverMessage=null,En(ee(O,R.activeConversation),"$conversation",y),En(ee(B,a(O).messages),"$messages",y),En(ee(ne,a(O).participants),"$participants",y),En(ee(I,R.findConversation({connection_id:a(O).connection_id})||a(O)),"$connection",y),ee(Z,new wr),G.conversation=a(O).subscribe(j=>{En(ee(O,j),"$conversation",y)}),G.unread=()=>a(O).update({unread:0}),a(O).markAsRead(),ee(z,Gh(Qe.hash)&&Qe.hash||""),a(z))return a(O).load({around:a(z)});if(!a(O).historyStopAt)return a(O).load({around:a(Z).toISOString()})}}He(()=>(Ue(f()),Ue(m())),()=>{Ne(f(),m())}),He(()=>t(),()=>{pe(t())}),He(()=>(a(B),t()),()=>{a(B).update({expandUrlToMedia:t().expandUrlToMedia})}),He(()=>r(),()=>{ee(v,encodeURIComponent(r().name))}),He(()=>r(),()=>{E(r().title)}),He(()=>(o(),r(),a(O)),()=>{!o().hash&&!r().historyStopAt&&a(O).load({})}),Wt();var Se={get connection_id(){return f()},set connection_id(R){f(R),Ze()},get conversation_id(){return m()},set conversation_id(R){m(R),Ze()},get title(){return E()},set title(R){E(R),Ze()},$set:It,$on:(R,j)=>Pt(e,R,j)};Rt();var _e=q_();rt("focus",_o,K);var ge=Ee(_e);Jr(ge,{children:(R,j)=>{var Y=g_(),U=Ee(Y),N=u(U),W=u(N,!0);c(N),c(U);var F=_(U,2);{var Q=D=>{var X=h_();let J;var se=u(X);Ie(se,{name:"users-cog"});var $e=_(se);Ie($e,{name:"times"}),c(X),C(()=>J=Zt(X,1,"btn-hallow can-toggle",null,J,{"is-active":d()==="settings"})),rt("click",X,function(...ue){var V;(V=Ur.toggle)==null||V.apply(this,ue)}),x(D,X)};ke(F,D=>{i(),r(),l(()=>!i().hasRightColumn&&!r().is("not_found"))&&D(Q)})}C(D=>$(W,D),[()=>(s(),a(O),l(()=>s()(a(O).name)))]),rt("click",N,function(...D){var X;(X=Ur.toggle)==null||X.apply(this,D)}),x(R,Y)},$$slots:{default:!0}});var Ce=_(ge,2);$s(Ce,{class:"main is-above-chat-input",$$events:{scrolled:R=>qg(R,{conversation:a(O)}),visibility:R=>jg(R,{conversation:a(O),timestampFromUrl:a(z)})},children:(R,j)=>{var Y=B_(),U=Ee(Y);{var N=Te=>{cf(Te,{get conversation(){return r()}})};ke(U,Te=>{h(),r(),l(()=>h().length<10&&!r().is("not_found"))&&Te(N)})}var W=_(U,2);{var F=Te=>{var k=__(),L=u(k),Ae=u(L);Ie(Ae,{name:"spinner",animation:"spin"});var Le=_(Ae,2),je=u(Le,!0);c(Le),c(L),c(k),C(Be=>$(je,Be),[()=>(s(),l(()=>s()("Loading...")))]),x(Te,k)};ke(W,Te=>{r(),h(),l(()=>r().is("loading")&&h().length>10)&&Te(F)})}var Q=_(W,2);{var D=Te=>{var k=m_(),L=u(k),Ae=u(L);Ie(Ae,{name:"calendar-alt"});var Le=_(Ae,2),je=u(Le,!0);c(Le),c(L),c(k),C(Be=>$(je,Be),[()=>(s(),r(),l(()=>s()("Started chatting on %1",r().historyStartAt.getHumanDate())))]),x(Te,k)};ke(Q,Te=>{r(),h(),l(()=>r().historyStartAt&&!r().is("not_found")&&h().length)&&Te(D)})}var X=_(Q,2);Ar(X,1,()=>(h(),l(()=>h().render())),kr,(Te,k,L)=>{var Ae=E_(),Le=Ee(Ae);{var je=Et=>{var bt=b_(),pt=u(bt),Mt=u(pt);Ie(Mt,{name:"calendar-alt"});var Vt=_(Mt,2),Ut=u(Vt,!0);c(Vt),c(pt),c(bt),C(sr=>$(Ut,sr),[()=>(a(k),l(()=>a(k).ts.getHumanDate()))]),x(Et,bt)};ke(Le,Et=>{a(k),l(()=>a(k).dayChanged)&&Et(je)})}var Be=_(Le,2);{var et=Et=>{var bt=y_(),pt=u(bt),Mt=u(pt);Ie(Mt,{name:"comments"});var Vt=_(Mt);c(pt),c(bt),C(Ut=>$(Vt,` ${Ut??""}`),[()=>(s(),l(()=>s()("New messages")))]),x(Et,bt)};ke(Be,Et=>{h(),r(),l(()=>L&&L===h().length-r().unread)&&Et(et)})}var ht=_(Be,2);let lt;var mt=u(ht),xt=u(mt),T=u(xt,!0);c(xt);var re=_(xt,2),Re=u(re,!0);c(re),c(mt);var Ve=_(mt,2);{let Et=Ke(()=>(a(k),t(),l(()=>a(k).yourself?t().avatarId:void 0)));Ie(Ve,{get name(){return`pick:${a(k),l(()=>a(k).from)??""}`},get color(){return a(k),l(()=>a(k).color)},get avatarId(){return a(Et)}})}var ot=_(Ve,2),st=u(ot,!0);c(ot);var Fe=_(ot,2),Me=u(Fe);{var Je=Et=>{var bt=w_(),pt=u(bt);{let Mt=Ke(()=>(a(k),l(()=>a(k).expanded?"caret-square-up":"caret-square-down")));Ie(pt,{get name(){return a(Mt)}})}c(bt),C(()=>Ge(bt,"href",`#action:expand:${a(k),l(()=>a(k).index)??""}`)),x(Et,bt)};ke(Me,Et=>{a(k),l(()=>a(k).details)&&Et(Je)})}var St=_(Me,2);Bt(St,()=>(a(k),l(()=>a(k).html))),c(Fe);var ct=_(Fe,2);Ar(ct,1,()=>(a(k),l(()=>a(k).embeds)),kr,(Et,bt)=>{var pt=vt(),Mt=Ee(pt);Hd(Mt,()=>a(bt),Vt=>{},(Vt,Ut)=>{var sr=$_();Ml(sr,(ur,_r)=>be==null?void 0:be(ur,_r),()=>a(Ut)),C(()=>Zt(sr,1,`embed ${Ue(a(Ut)),l(()=>a(Ut).className)??""}`)),x(Vt,sr)}),x(Et,pt)});var or=_(ct,2);{var er=Et=>{var bt=x_(),pt=u(bt),Mt=u(pt);{let mr=Ke(()=>(a(k),t(),l(()=>a(k).yourself?t().avatarId:void 0)));Ie(Mt,{get name(){return`pick:${a(k),l(()=>a(k).from)??""}`},get color(){return a(k),l(()=>a(k).color)},get avatarId(){return a(mr)}})}var Vt=_(Mt);c(pt);var Ut=_(pt,2),sr=u(Ut);Ie(sr,{name:"quote-left"});var ur=_(sr);c(Ut);var _r=_(Ut,2),rr=u(_r);Ie(rr,{name:"comments"});var vr=_(rr);c(_r);var Xt=_(_r,2),nr=u(Xt);Ie(nr,{name:"address-card"});var Hr=_(nr);c(Xt),c(bt),C((mr,Ln,Dn,sa,Wn,co)=>{Ge(pt,"href",`#action:popover:${a(k),l(()=>a(k).index)??""}`),$(Vt,` ${a(k),l(()=>a(k).from)??""}`),Ge(Ut,"href",`#action:mention:${mr??""}`),$(ur,` ${Ln??""}`),Ge(_r,"href",`#action:join:${Dn??""}`),$(vr,` ${sa??""}`),Ge(Xt,"href",`#action:whois:${Wn??""}`),$(Hr,` ${co??""}`)},[()=>(a(k),l(()=>encodeURIComponent(a(k).from))),()=>(s(),l(()=>s()("Mention"))),()=>(a(k),l(()=>encodeURIComponent(a(k).from))),()=>(s(),l(()=>s()("Chat"))),()=>(a(k),l(()=>encodeURIComponent(a(k).from))),()=>(s(),l(()=>s()("Whois")))]),Tr(3,bt,()=>Ja,()=>({duration:200})),x(Et,bt)};ke(or,Et=>{a(ae),a(k),l(()=>a(ae)===a(k).index)&&Et(er)})}c(ht),C((Et,bt,pt,Mt)=>{lt=Zt(ht,1,(a(k),l(()=>a(k).className)),null,lt,Et),Ge(ht,"data-index",(a(k),l(()=>a(k).index))),Ge(ht,"data-ts",bt),$(T,pt),$(Re,Mt),Ge(ot,"href",`#action:popover:${a(k),l(()=>a(k).index)??""}`),aa(ot,`color:${a(k),l(()=>a(k).color)??""}`),$(st,(a(k),l(()=>a(k).from)))},[()=>({"is-not-present":!p().get(a(k).from),"is-expanded":!!a(k).expanded}),()=>(a(k),l(()=>a(k).ts.toISOString())),()=>(a(k),l(()=>a(k).ts.format("%H:%M"))),()=>(Ue(zr),a(k),l(()=>zr(a(k).ts.toLocaleString())))]),x(Te,Ae)});var J=_(X,2);{var se=Te=>{var k=A_(),L=Ee(k),Ae=u(L,!0);c(L);var Le=_(L,2),je=u(Le,!0);c(Le);var Be=_(Le,2),et=u(Be);{let lt=Ke(()=>(r(),l(()=>encodeURIComponent(ce(r())))));_t(et,{get href(){return`/settings/connections?uri=${a(lt)??""}`},class:"btn",children:(mt,xt)=>{var T=S_(),re=Ee(T);Ie(re,{name:"thumbs-up"});var Re=_(re);C(Ve=>$(Re,` ${Ve??""}`),[()=>(s(),l(()=>s()("Yes")))]),x(mt,T)},$$slots:{default:!0}})}var ht=_(et,2);_t(ht,{href:"/settings/connections",class:"btn is-secondary",children:(lt,mt)=>{var xt=k_(),T=Ee(xt);Ie(T,{name:"thumbs-down"});var re=_(T);C(Re=>$(re,` ${Re??""}`),[()=>(s(),l(()=>s()("No")))]),x(lt,xt)},$$slots:{default:!0}}),c(Be),C((lt,mt)=>{$(Ae,lt),$(je,mt)},[()=>(s(),l(()=>s()("Connection does not exist."))),()=>(s(),b(),l(()=>s()('Do you want to create the connection "%1"?',b().connection_id)))]),x(Te,k)},$e=Te=>{var k=vt(),L=Ee(k);{var Ae=je=>{var Be=T_(),et=Ee(Be),ht=u(et,!0);c(et);var lt=_(et,2),mt=u(lt,!0);c(lt);var xt=_(lt,2),T=u(xt);_t(T,{get href(){return`#action:join:${a(v)??""}`},class:"btn",children:(Re,Ve)=>{var ot=O_(),st=Ee(ot);Ie(st,{name:"thumbs-up"});var Fe=_(st,2),Me=u(Fe,!0);c(Fe),C(Je=>$(Me,Je),[()=>(s(),l(()=>s()("Yes")))]),x(Re,ot)},$$slots:{default:!0}});var re=_(T,2);_t(re,{href:"/settings/conversation",class:"btn is-secondary",children:(Re,Ve)=>{var ot=C_(),st=Ee(ot);Ie(st,{name:"thumbs-down"});var Fe=_(st,2),Me=u(Fe,!0);c(Fe),C(Je=>$(Me,Je),[()=>(s(),l(()=>s()("No")))]),x(Re,ot)},$$slots:{default:!0}}),c(xt),C((Re,Ve)=>{$(ht,Re),$(mt,Ve)},[()=>(s(),l(()=>s()("You are not part of this conversation."))),()=>(s(),r(),l(()=>s()('Do you want to chat with "%1"?',r().name)))]),x(je,Be)},Le=je=>{var Be=vt(),et=Ee(Be);{var ht=mt=>{var xt=N_(),T=u(xt),re=u(T);Ie(re,{name:"exclamation-triangle"});var Re=_(re,2);Bt(Re,()=>(S(),b(),l(()=>S()("Disconnected. Your connection %1 can be edited in [settings](%2).",b().name,"/chat/"+b().connection_id+"#settings")))),c(T),c(xt),rt("click",xt,function(...Ve){var ot;(ot=Ur.toggle)==null||ot.apply(this,Ve)}),x(mt,xt)},lt=mt=>{var xt=vt(),T=Ee(xt);{var re=Ve=>{var ot=I_(),st=Ee(ot),Fe=u(st,!0);c(st);var Me=_(st,2),Je=u(Me,!0);c(Me);var St=_(Me,2),ct=u(St);_t(ct,{get href(){return`#action:join:${a(v)??""}`},class:"btn",children:(er,Et)=>{var bt=R_(),pt=Ee(bt);Ie(pt,{name:"thumbs-up"});var Mt=_(pt,2),Vt=u(Mt,!0);c(Mt),C(Ut=>$(Vt,Ut),[()=>(s(),l(()=>s()("Yes")))]),x(er,bt)},$$slots:{default:!0}});var or=_(ct,2);_t(or,{href:"/settings/conversation",class:"btn is-secondary",children:(er,Et)=>{var bt=P_(),pt=Ee(bt);Ie(pt,{name:"thumbs-down"});var Mt=_(pt,2),Vt=u(Mt,!0);c(Mt),C(Ut=>$(Vt,Ut),[()=>(s(),l(()=>s()("No")))]),x(er,bt)},$$slots:{default:!0}}),c(St),C((er,Et)=>{$(Fe,er),$(Je,Et)},[()=>(s(),a(O),l(()=>s()("You are invited to join %1.",a(O).name))),()=>(s(),l(()=>s()("Do you want to join?")))]),x(Ve,ot)},Re=Ve=>{var ot=vt(),st=Ee(ot);{var Fe=Me=>{var Je=M_(),St=u(Je),ct=u(St);Ie(ct,{name:"exclamation-triangle"});var or=_(ct);c(St),c(Je),C(er=>$(or,` ${er??""}`),[()=>(Ue(fu),b(),r(),l(()=>fu(b(),r())))]),x(Me,Je)};ke(st,Me=>{r(),l(()=>r().frozen&&!r().is("locked"))&&Me(Fe)},!0)}x(Ve,ot)};ke(T,Ve=>{r(),l(()=>r().frozen&&r().is("pending"))?Ve(re):Ve(Re,!1)},!0)}x(mt,xt)};ke(et,mt=>{b(),l(()=>!b().is("unreachable")&&b().frozen)?mt(ht):mt(lt,!1)},!0)}x(je,Be)};ke(L,je=>{r(),l(()=>r().is("not_found"))?je(Ae):je(Le,!1)},!0)}x(Te,k)};ke(J,Te=>{b(),l(()=>b().is("not_found"))?Te(se):Te($e,!1)})}var ue=_(J,2);{var V=Te=>{var k=L_(),L=u(k),Ae=u(L,!0);c(L);var Le=_(L,2),je=u(Le),Be=u(je);c(je),c(Le),c(k),C(et=>{$(Ae,et),aa(je,`width:${a(H)??""}%;`),$(Be,`${a(H)??""}%`)},[()=>(s(),a(me),l(()=>s()("Uploading %1...",a(me).file.name)))]),Tr(3,k,()=>Ja,()=>({duration:200})),x(Te,k)};ke(ue,Te=>{a(H)&&Te(V)})}var ye=_(ue,2);{var ve=Te=>{var k=D_(),L=u(k),Ae=u(L);Ie(Ae,{name:"info-circle"});var Le=_(Ae,2);Bt(Le,()=>(S(),l(()=>S()('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")))),c(L),c(k),x(Te,k)};ke(ye,Te=>{Ue(hr),l(()=>hr.wantNotifications===null)&&Te(ve)})}var xe=_(ye,2);{var de=Te=>{var k=U_(),L=u(k),Ae=u(L);Ie(Ae,{name:"spinner",animation:"spin"});var Le=_(Ae,2),je=u(Le,!0);c(Le),c(L),c(k),C(Be=>$(je,Be),[()=>(s(),l(()=>s()("Loading...")))]),x(Te,k)};ke(xe,Te=>{r(),l(()=>r().is("loading"))&&Te(de)})}var Ye=_(xe,2);{var qe=Te=>{var k=F_(),L=u(k),Ae=u(L);Ie(Ae,{name:"external-link-alt"});var Le=_(Ae);c(L),c(k),C(je=>{Ge(L,"href",(a(O),l(()=>a(O).path))),$(Le,` ${je??""}`)},[()=>(s(),a(Z),l(()=>s()("Jump to %1",a(Z).format("%b %e %H:%M"))))]),x(Te,k)};ke(Ye,Te=>{r(),h(),l(()=>!r().historyStopAt&&h().length)&&Te(qe)})}x(R,Y)},$$slots:{default:!0}});var fe=_(Ce,2);Gl(fe,{get conversation(){return a(O)},get fillIn(){return a(te)},set fillIn(R){ee(te,R)},get focus(){return a(ie)},set focus(R){ee(ie,R)},get uploader(){return a(me)},set uploader(R){ee(me,R)},get uploadProgress(){return a(H)},set uploadProgress(R){ee(H,R)},$$legacy:!0});var we=_(fe,2);{var q=R=>{var j=vt(),Y=Ee(j);{var U=W=>{ff(W,{get conversation(){return a(O)}})},N=W=>{uf(W,{get connection(){return a(I)},get conversation(){return a(O)}})};ke(Y,W=>{m()?W(U):W(N,!1)})}x(R,j)};ke(we,R=>{r(),l(()=>!r().is("not_found"))&&R(q)})}x(n,_e);var M=Tt(Se);return g(),M}var j_=A('<div class="error"> </div>'),z_=A("<tr><td><!></td></tr>");function xo(n,e){if(new.target)return Nt({component:xo,...n});Ct(e,!1);const t=()=>Pe(d(),"$op",o),r=()=>Pe(tr,"$l",o),[o,s]=Gt();let i=Xe(e,"colspan",12,1),d=Xe(e,"op",12);var h={get colspan(){return i()},set colspan(f){i(f),Ze()},get op(){return d()},set op(f){d(f),Ze()},$set:It,$on:(f,m)=>Pt(e,f,m)};Rt();var p=z_(),b=u(p),S=u(b);{var y=f=>{var m=j_(),E=u(m,!0);c(m),C(w=>$(E,w),[()=>(r(),t(),l(()=>r()(t().error())))]),x(f,m)},g=f=>{var m=vt(),E=Ee(m);{var w=I=>{var O=fr();C(B=>$(O,B),[()=>(r(),l(()=>r()("Loading...")))]),x(I,O)},P=I=>{var O=vt(),B=Ee(O);Tn(B,e,"default",{},null),x(I,O)};ke(E,I=>{t(),l(()=>t().is("loading"))?I(w):I(P,!1)},!0)}x(f,m)};ke(S,f=>{t(),l(()=>t().is("error"))?f(y):f(g,!1)})}c(b),c(p),C(()=>Ge(b,"colspan",i())),x(n,p);var v=Tt(h);return s(),v}var H_=A("<h1> </h1>"),W_=A("<tr><td><!></td><td> </td><td> </td></tr>"),G_=A("<!> <span> </span>",1),K_=A('<div class="form-actions"><!></div>'),V_=A("<tr><td><!></td><td> </td><td> </td><td> </td></tr>"),Y_=A("<!> <span> </span>",1),Z_=A('<div class="form-actions"><!></div>'),J_=A('<!> <main class="main"><h2> </h2> <table><thead><tr><th> </th><th> </th><th> </th></tr></thead><tbody></tbody></table> <!> <h2> </h2> <p> </p> <table><thead><tr><th> </th><th> </th><th> </th><th> </th></tr></thead><tbody><!><!></tbody></table> <!></main>',1);function hf(n,e){if(new.target)return Nt({component:hf,...n});Ct(e,!1);const t=()=>Pe(p,"$user",s),r=()=>Pe(tr,"$l",s),o=()=>Pe(b,"$connectionProfiles",s),[s,i]=Gt(),d=Oe(),h="Connections",p=pr("user"),b=p.connectionProfiles,S=W=>W.url.toFields({connection_id:W.connection_id});let y=Oe([]);In(()=>b.load()),He(()=>(t(),a(y)),()=>{t().is("success")&&!a(y).length&&ee(y,p.connections.toArray().map(S))}),He(()=>{},()=>{ee(d,p.roles.has("admin"))}),Wt();var g={title:h,$set:It,$on:(W,F)=>Pt(e,W,F)};Rt();var v=J_(),f=Ee(v);Jr(f,{children:(W,F)=>{var Q=H_(),D=u(Q,!0);c(Q),C(X=>$(D,X),[()=>(r(),l(()=>r()("Connections")))]),x(W,Q)},$$slots:{default:!0}});var m=_(f,2),E=u(m),w=u(E,!0);c(E);var P=_(E,2),I=u(P),O=u(I),B=u(O),ne=u(B,!0);c(B);var Z=_(B),ae=u(Z,!0);c(Z);var G=_(Z),ie=u(G,!0);c(G),c(O),c(I);var te=_(I);Ar(te,5,()=>a(y),kr,(W,F)=>{var Q=W_(),D=u(Q),X=u(D);_t(X,{get href(){return`/settings/connection/${a(F),l(()=>a(F).connection_id)??""}`},children:(V,ye)=>{sn();var ve=fr();C(xe=>$(ve,xe),[()=>(a(F),l(()=>a(F).host.replace(/:\d+$/,"")))]),x(V,ve)},$$slots:{default:!0}}),c(D);var J=_(D),se=u(J,!0);c(J);var $e=_(J),ue=u($e,!0);c($e),c(Q),C(V=>{$(se,V),$(ue,(a(F),l(()=>a(F).nick)))},[()=>(Ue(at),a(F),r(),l(()=>at.true(a(F).tls_verify)?r()("Strict"):at.true(a(F).tls)?r()("Yes"):r()("No")))]),x(W,Q)}),c(te),c(P);var me=_(P,2);{var H=W=>{var F=K_(),Q=u(F);_t(Q,{href:"/settings/connection/add",class:"btn",children:(D,X)=>{var J=G_(),se=Ee(J);Ie(se,{name:"plus-circle"});var $e=_(se,2),ue=u($e,!0);c($e),C(V=>$(ue,V),[()=>(r(),l(()=>r()("Add")))]),x(D,J)},$$slots:{default:!0}}),c(F),x(W,F)};ke(me,W=>{a(d),l(()=>a(d)||!p.forced_connection)&&W(H)})}var z=_(me,2),le=u(z,!0);c(z);var ce=_(z,2),K=u(ce,!0);c(ce);var oe=_(ce,2),be=u(oe),Ne=u(be),pe=u(Ne),Se=u(pe,!0);c(pe);var _e=_(pe),ge=u(_e,!0);c(_e);var Ce=_(_e),fe=u(Ce,!0);c(Ce);var we=_(Ce),q=u(we,!0);c(we),c(Ne),c(be);var M=_(be),R=u(M);xo(R,{get op(){return l(()=>b.op)}});var j=_(R);Ar(j,1,()=>(o(),l(()=>o().search())),kr,(W,F)=>{var Q=V_(),D=u(Q),X=u(D);_t(X,{get href(){return`/settings/connection-profile/${a(F),l(()=>a(F).id)??""}`},children:(ve,xe)=>{sn();var de=fr();C(Ye=>$(de,Ye),[()=>(a(F),l(()=>a(F).url.host.replace(/:\d+$/,"")))]),x(ve,de)},$$slots:{default:!0}}),c(D);var J=_(D),se=u(J,!0);c(J);var $e=_(J),ue=u($e,!0);c($e);var V=_($e),ye=u(V,!0);c(V),c(Q),C((ve,xe,de)=>{$(se,ve),$(ue,xe),$(ye,de)},[()=>(Ue(at),a(F),r(),l(()=>at.true(a(F).tls_verify)?r()("Strict"):at.true(a(F).tls)?r()("Yes"):r()("No"))),()=>(a(F),r(),l(()=>a(F).is_default?r()("Yes"):r()("No"))),()=>(a(F),r(),l(()=>a(F).is_forced?r()("Yes"):r()("No")))]),x(W,Q)}),c(M),c(oe);var Y=_(oe,2);{var U=W=>{var F=Z_(),Q=u(F);_t(Q,{href:"/settings/connection-profile/add",class:"btn",children:(D,X)=>{var J=Y_(),se=Ee(J);Ie(se,{name:"plus-circle"});var $e=_(se,2),ue=u($e,!0);c($e),C(V=>$(ue,V),[()=>(r(),l(()=>r()("Add")))]),x(D,J)},$$slots:{default:!0}}),c(F),x(W,F)};ke(Y,W=>{a(d)&&W(U)})}c(m),C((W,F,Q,D,X,J,se,$e,ue,V)=>{$(w,W),$(ne,F),$(ae,Q),$(ie,D),$(le,X),$(K,J),$(Se,se),$(ge,$e),$(fe,ue),$(q,V)},[()=>(r(),l(()=>r()("Connections"))),()=>(r(),l(()=>r()("Host"))),()=>(r(),l(()=>r()("Secure"))),()=>(r(),l(()=>r()("Nick"))),()=>(r(),l(()=>r()("Connection profiles"))),()=>(r(),l(()=>r()("Connection profiles are used to set up global values for every connection that connect to the same host."))),()=>(r(),l(()=>r()("Host"))),()=>(r(),l(()=>r()("Secure"))),()=>(r(),l(()=>r()("Default"))),()=>(r(),l(()=>r()("Forced")))]),x(n,v),Zr(e,"title",h);var N=Tt(g);return i(),N}var X_=A('<!><!> <span class="tooltip is-left"> </span>',1),Q_=A("<h1> </h1> <!>",1),em=A('<span slot="label"> </span>'),tm=A('<p class="help" slot="help"> </p>'),rm=A('<span slot="label"> </span>'),nm=A('<span slot="label"> </span>'),am=A('<span slot="label"> </span>'),om=A('<span slot="label"> </span>'),sm=A('<p class="help" slot="help"> </p>'),im=A('<span slot="label"> </span>'),lm=A('<span slot="label"> </span>'),cm=A('<p class="help"> </p>'),um=A('<span slot="label"> </span>'),dm=A('<span slot="label"> </span>'),fm=A('<p class="help" slot="help"> </p>'),pm=A('<span slot="label"> </span>'),vm=A('<p class="help" slot="help"> </p>'),hm=A('<span slot="label"> </span>'),gm=A('<span slot="label"> </span>'),_m=A('<div class="form-group"><!> <!> <!> <!> <p class="help"> </p></div>'),mm=A('<p class="error"> </p>'),bm=A("<span> </span>"),ym=A("<span> </span>"),wm=A("<!> <!>",1),$m=A("<span> </span>"),xm=A('<!> <main class="main"><form method="post"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="form-actions"><!></div> <!> <!></form></main>',1);function gf(n,e){if(new.target)return Nt({component:gf,...n});Ct(e,!1);const t=()=>Pe(b,"$connectionProfiles",o),r=()=>Pe(tr,"$l",o),[o,s]=Gt(),i=Oe();let d=Xe(e,"profile_id",12,"add");const h=d()==="add"?"Add connection profile":"Edit connection profile",p=pr("user"),b=p.connectionProfiles,S=qt.op("removeConnectionProfile"),y=qt.op("saveConnectionProfile");let g=Oe(b.defaultProfile()),v=Oe(!1);In(async()=>{await b.load(),Object.assign(a(g),b.defaultProfile(),t().find(d())||{})});async function f(){await S.perform({id:d()}),await b.load({force:!0}),await yo(),Qe.go("/settings/connections")}async function m(){["is_default","is_forced","skip_queue"].forEach(fe=>ze(g,a(g)[fe]=!!a(g)[fe])),ze(g,a(g).service_accounts=Bl(a(g).service_accounts)),ze(g,a(g).url=new ra("irc://localhost").fromFields(a(g)).toString()),await y.perform(a(g)),!y.is("error")&&(a(g).is_default&&p.update({default_connection:a(g).url,forced_connection:a(g).is_forced}),await b.load({force:!0}),await yo(),Qe.go("/settings/connections"))}He(()=>{},()=>{ee(i,p.roles.has("admin"))}),Wt();var E={title:h,get profile_id(){return d()},set profile_id(fe){d(fe),Ze()},$set:It,$on:(fe,we)=>Pt(e,fe,we)};Rt();var w=xm(),P=Ee(w);Jr(P,{children:(fe,we)=>{var q=Q_(),M=Ee(q),R=u(M,!0);c(M);var j=_(M,2);_t(j,{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",children:(Y,U)=>{var N=X_(),W=Ee(N);Ie(W,{name:"list"});var F=_(W);Ie(F,{name:"times"});var Q=_(F,2),D=u(Q,!0);c(Q),C(X=>$(D,X),[()=>(Ue(zr),r(),l(()=>zr(r()("See all connection profiles"))))]),x(Y,N)},$$slots:{default:!0}}),C(Y=>$(R,Y),[()=>(Ue(d()),r(),l(()=>d()==="add"?r()("Add connection profile"):r()("Edit connection profile")))]),x(fe,q)},$$slots:{default:!0}});var I=_(P,2),O=u(I),B=u(O);{let fe=Ke(()=>(r(),l(()=>r()("Ex: irc.libera.chat:6697")))),we=Ke(()=>!a(i));At(B,{name:"host",get placeholder(){return a(fe)},get readonly(){return a(we)},get value(){return a(g).host},set value(q){ze(g,a(g).host=q)},$$slots:{label:(q,M)=>{var R=em(),j=u(R,!0);c(R),C(Y=>$(j,Y),[()=>(r(),l(()=>r()("Host and port")))]),x(q,R)},help:(q,M)=>{var R=tm(),j=u(R,!0);c(R),C(Y=>$(j,Y),[()=>(r(),l(()=>r()("Will match connections on hostname.")))]),x(q,R)}},$$legacy:!0})}var ne=_(B,2);{let fe=Ke(()=>!a(i));Ht(ne,{name:"tls",get disabled(){return a(fe)},get value(){return a(g).tls},set value(we){ze(g,a(g).tls=we)},$$slots:{label:(we,q)=>{var M=rm(),R=u(M,!0);c(M),C(j=>$(R,j),[()=>(r(),l(()=>r()("Secure connection (TLS)")))]),x(we,M)}},$$legacy:!0})}var Z=_(ne,2);{let fe=Ke(()=>(a(g),a(i),l(()=>!a(g).tls||!a(i)))),we=Ke(()=>(a(g),l(()=>!a(g).tls)));Ht(Z,{name:"tls_verify",get disabled(){return a(fe)},get hidden(){return a(we)},get value(){return a(g).tls_verify},set value(q){ze(g,a(g).tls_verify=q)},$$slots:{label:(q,M)=>{var R=nm(),j=u(R,!0);c(R),C(Y=>$(j,Y),[()=>(r(),l(()=>r()("Verify certificate (TLS)")))]),x(q,R)}},$$legacy:!0})}var ae=_(Z,2);{let fe=Ke(()=>(r(),l(()=>r()("Ex: #convos")))),we=Ke(()=>!a(i));At(ae,{name:"conversation_id",get placeholder(){return a(fe)},get readonly(){return a(we)},get value(){return a(g).conversation_id},set value(q){ze(g,a(g).conversation_id=q)},$$slots:{label:(q,M)=>{var R=am(),j=u(R,!0);c(R),C(Y=>$(j,Y),[()=>(r(),l(()=>r()("Conversation name")))]),x(q,R)}},$$legacy:!0})}var G=_(ae,2);{let fe=Ke(()=>(r(),l(()=>r()("chanserv, nickserv, ...")))),we=Ke(()=>!a(i));At(G,{name:"service_accounts",get placeholder(){return a(fe)},get readonly(){return a(we)},get value(){return a(g).service_accounts},set value(q){ze(g,a(g).service_accounts=q)},$$slots:{label:(q,M)=>{var R=om(),j=u(R,!0);c(R),C(Y=>$(j,Y),[()=>(r(),l(()=>r()("Service accounts")))]),x(q,R)},help:(q,M)=>{var R=sm(),j=u(R,!0);c(R),C(Y=>$(j,Y),[()=>(r(),l(()=>r()("Messages from these nicks will be shown in the connection conversation.")))]),x(q,R)}},$$legacy:!0})}var ie=_(G,2);{let fe=Ke(()=>!a(i));Ht(ie,{name:"is_default",get disabled(){return a(fe)},get value(){return a(g).is_default},set value(we){ze(g,a(g).is_default=we)},$$slots:{label:(we,q)=>{var M=im(),R=u(M,!0);c(M),C(j=>$(R,j),[()=>(r(),l(()=>r()("Default connection")))]),x(we,M)}},$$legacy:!0})}var te=_(ie,2);{let fe=Ke(()=>!a(i)),we=Ke(()=>(a(g),l(()=>!a(g).is_default)));Ht(te,{name:"is_forced",get disabled(){return a(fe)},get hidden(){return a(we)},get value(){return a(g).is_forced},set value(q){ze(g,a(g).is_forced=q)},$$slots:{label:(q,M)=>{var R=lm(),j=u(R,!0);c(R),C(Y=>$(j,Y),[()=>(r(),l(()=>r()("Force default connection")))]),x(q,R)}},$$legacy:!0})}var me=_(te,2);{var H=fe=>{var we=cm(),q=u(we,!0);c(we),C(M=>{Ge(we,"hidden",(a(g),l(()=>!a(g).is_default))),$(q,M)},[()=>(r(),l(()=>r()("Tick this box if you want to prevent users from creating custom connections.")))]),x(fe,we)};ke(me,fe=>{a(i)&&fe(H)})}var z=_(me,2);Ht(z,{icon:"caret",name:"show_advanced_settings",get value(){return a(v)},set value(fe){ee(v,fe)},$$slots:{label:(fe,we)=>{var q=um(),M=u(q,!0);c(q),C(R=>$(M,R),[()=>(r(),l(()=>r()("Advanced settings")))]),x(fe,q)}},$$legacy:!0});var le=_(z,2);{var ce=fe=>{var we=_m(),q=u(we);{let N=Ke(()=>!a(i));At(q,{name:"max_bulk_message_size",type:"number",get readonly(){return a(N)},get value(){return a(g).max_bulk_message_size},set value(W){ze(g,a(g).max_bulk_message_size=W)},$$slots:{label:(W,F)=>{var Q=dm(),D=u(Q,!0);c(Q),C(X=>$(D,X),[()=>(r(),l(()=>r()("Max number of pasted lines")))]),x(W,Q)},help:(W,F)=>{var Q=fm(),D=u(Q,!0);c(Q),C(X=>$(D,X),[()=>(r(),l(()=>r()("Setting this value too high might get you banned from the server.")))]),x(W,Q)}},$$legacy:!0})}var M=_(q,2);{let N=Ke(()=>!a(i));At(M,{name:"max_message_length",type:"number",get readonly(){return a(N)},get value(){return a(g).max_message_length},set value(W){ze(g,a(g).max_message_length=W)},$$slots:{label:(W,F)=>{var Q=pm(),D=u(Q,!0);c(Q),C(X=>$(D,X),[()=>(r(),l(()=>r()("Max message length")))]),x(W,Q)},help:(W,F)=>{var Q=vm(),D=u(Q,!0);c(Q),C(X=>$(D,X),[()=>(r(),l(()=>r()("Messages longer than this will be split into multiple messages.")))]),x(W,Q)}},$$legacy:!0})}var R=_(M,2);{let N=Ke(()=>!a(i));At(R,{name:"webirc_password",type:"password",get readonly(){return a(N)},get value(){return a(g).webirc_password},set value(W){ze(g,a(g).webirc_password=W)},$$slots:{label:(W,F)=>{var Q=hm(),D=u(Q,!0);c(Q),C(X=>$(D,X),[()=>(r(),l(()=>r()("WEBIRC password")))]),x(W,Q)}},$$legacy:!0})}var j=_(R,2);{let N=Ke(()=>!a(i));Ht(j,{name:"skip_queue",get disabled(){return a(N)},get value(){return a(g).skip_queue},set value(W){ze(g,a(g).skip_queue=W)},$$slots:{label:(W,F)=>{var Q=gm(),D=u(Q,!0);c(Q),C(X=>$(D,X),[()=>(r(),l(()=>r()("Skip connection queue")))]),x(W,Q)}},$$legacy:!0})}var Y=_(j,2),U=u(Y,!0);c(Y),c(we),C(N=>$(U,N),[()=>(r(),l(()=>r()("This might result in flood ban.")))]),Tr(3,we,()=>$o,()=>({duration:150})),x(fe,we)};ke(le,fe=>{a(v)&&fe(ce)})}var K=_(le,2);{var oe=fe=>{var we=mm(),q=u(we,!0);c(we),C(M=>$(q,M),[()=>(r(),l(()=>r()("Only administrators can edit this section.")))]),x(fe,we)};ke(K,fe=>{a(i)||fe(oe)})}var be=_(K,2),Ne=u(be);{var pe=fe=>{var we=wm(),q=Ee(we);{let R=Ke(()=>!a(i));ar(q,{icon:"save",get op(){return y},get disabled(){return a(R)},children:(j,Y)=>{var U=bm(),N=u(U,!0);c(U),C(W=>$(N,W),[()=>(r(),l(()=>r()("Update")))]),x(j,U)},$$slots:{default:!0}})}var M=_(q,2);{let R=Ke(()=>!a(i));ar(M,{icon:"trash",type:"button",get op(){return S},get disabled(){return a(R)},$$events:{click:f},children:(j,Y)=>{var U=ym(),N=u(U,!0);c(U),C(W=>$(N,W),[()=>(r(),l(()=>r()("Delete")))]),x(j,U)},$$slots:{default:!0}})}x(fe,we)},Se=fe=>{ar(fe,{icon:"plus-circle",get op(){return y},children:(we,q)=>{var M=$m(),R=u(M,!0);c(M),C(j=>$(R,j),[()=>(r(),l(()=>r()("Add")))]),x(we,M)},$$slots:{default:!0}})};ke(Ne,fe=>{d()!=="add"?fe(pe):fe(Se,!1)})}c(be);var _e=_(be,2);Br(_e,{get op(){return S},success:"Deleted."});var ge=_(_e,2);Br(ge,{get op(){return y}}),c(O),c(I),rt("submit",O,Qt(m)),x(n,w),Zr(e,"title",h);var Ce=Tt(E);return s(),Ce}var Em=A('<!><!> <span class="tooltip is-left"> </span>',1),Sm=A("<h1> </h1> <!>",1),km=A('<!> <main class="main"><!></main>',1);function _f(n,e){if(new.target)return Nt({component:_f,...n});Ct(e,!1);const t=()=>Pe(tr,"$l",r),[r,o]=Gt(),s=Oe();let i=Xe(e,"connection_id",12,"add");const d=i()==="add"?"Add connection":"Edit connection",h=pr("user");He(()=>Ue(i()),()=>{ee(s,i()==="add"?{}:h.findConversation({connection_id:i()}))}),Wt();var p={title:d,get connection_id(){return i()},set connection_id(f){i(f),Ze()},$set:It,$on:(f,m)=>Pt(e,f,m)};Rt();var b=km(),S=Ee(b);Jr(S,{children:(f,m)=>{var E=Sm(),w=Ee(E),P=u(w,!0);c(w);var I=_(w,2);_t(I,{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",children:(O,B)=>{var ne=Em(),Z=Ee(ne);Ie(Z,{name:"list"});var ae=_(Z);Ie(ae,{name:"times"});var G=_(ae,2),ie=u(G,!0);c(G),C(te=>$(ie,te),[()=>(Ue(zr),t(),l(()=>zr(t()("See all connections"))))]),x(O,ne)},$$slots:{default:!0}}),C(O=>$(P,O),[()=>(Ue(i()),t(),l(()=>i()==="add"?t()("Add connection"):t()("Edit connection")))]),x(f,E)},$$slots:{default:!0}});var y=_(S,2),g=u(y);Vl(g,{get connection(){return a(s)},is_page:!0}),c(y),x(n,b),Zr(e,"title",d);var v=Tt(p);return o(),v}var Am=A("<h1> </h1>"),Om=A('<span slot="label"> </span>'),Cm=A("<span> </span>"),Tm=A('<span slot="label"> </span>'),Nm=A("<span> </span>"),Rm=A('<p class="error"> </p>'),Pm=A('<a><span class="conversation-add-list__n-users"> </span> <b class="conversation-add-list__name"> </b> <i class="conversation-add-list__title"> </i></a>'),Im=A('<p><!></p> <div class="conversation-add-list"></div>',1),Mm=A('<!> <main class="main"><p> </p> <form method="post"><div class="inputs-side-by-side"><!> <div class="flex-basis-30"><!></div></div> <div class="inputs-side-by-side"><!> <div class="flex-basis-30"><!></div></div> <!> <!></form></main>',1);function mf(n,e){if(new.target)return Nt({component:mf,...n});Ct(e,!1);const t=()=>Pe(p,"$user",o),r=()=>Pe(tr,"$l",o),[o,s]=Gt(),i=Oe(),d="Add conversation",h=pr("socket"),p=pr("user");let b=Oe({conversations:[],done:null,n_conversations:0}),S=Oe(""),y=Oe(""),g;function v(pe){const Se=pe&&pe.target&&pe.target.closest("a");Se&&Se.href&&ee(y,Se.href.replace(/.*#add:/,""));const _e=p.findConversation({connection_id:a(S)});_e&&a(y)&&_e.send("/join "+a(y))}async function f(pe){let Se="/list"+(a(y).length?" /"+a(y)+"/":"");pe.type==="click"&&a(b).done&&(Se+=" refresh"),g&&clearTimeout(g),h.send({connection_id:a(S),message:Se,method:"send"},_e=>{const ge=Fl(_e);ee(b,ge?{conversations:[],done:!0,n_conversations:0,error:ge}:_e);let Ce=pe.interval?pe.interval+500:500;Ce>2e3&&(Ce=2e3),!ge&&!_e.done&&(g=setTimeout(()=>f({interval:Ce}),Ce))})}function m(){ee(S,Qe.param("connection_id")||a(i)[0][0]||""),ee(y,Qe.param("conversation_id")||"")}const E=Yl(f,250);He(()=>t(),()=>{ee(i,Array.from(t().connections.keys()).map(pe=>[pe]))}),He(()=>a(S),()=>{a(S)||m()}),Wt();var w={title:d,$set:It,$on:(pe,Se)=>Pt(e,pe,Se)};Rt();var P=Mm(),I=Ee(P);Jr(I,{children:(pe,Se)=>{var _e=Am(),ge=u(_e,!0);c(_e),C(Ce=>$(ge,Ce),[()=>(r(),l(()=>r()("Add conversation")))]),x(pe,_e)},$$slots:{default:!0}});var O=_(I,2),B=u(O),ne=u(B,!0);c(B);var Z=_(B,2),ae=u(Z),G=u(ae);{let pe=Ke(()=>(r(),l(()=>r()("Select..."))));da(G,{name:"connection_id",get options(){return a(i)},get placeholder(){return a(pe)},get value(){return a(S)},set value(Se){ee(S,Se)},$$slots:{label:(Se,_e)=>{var ge=Om(),Ce=u(ge,!0);c(ge),C(fe=>$(Ce,fe),[()=>(r(),l(()=>r()("Connection")))]),x(Se,ge)}},$$legacy:!0})}var ie=_(G,2),te=u(ie);{let pe=Ke(()=>(a(S),a(b),l(()=>!a(S)||a(b).done===!1)));ar(te,{type:"button",icon:"sync-alt",get disabled(){return a(pe)},$$events:{click:f},children:(Se,_e)=>{var ge=Cm(),Ce=u(ge,!0);c(ge),C(fe=>$(Ce,fe),[()=>(r(),a(b),l(()=>r()(a(b).conversations.length?"Refresh":"Load")))]),x(Se,ge)},$$slots:{default:!0}})}c(ie),c(ae);var me=_(ae,2),H=u(me);{let pe=Ke(()=>(r(),l(()=>r()("#room or nick"))));At(H,{name:"conversation_id",get placeholder(){return a(pe)},autocomplete:"off",get value(){return a(y)},set value(Se){ee(y,Se)},$$events:{keyup:E},$$slots:{label:(Se,_e)=>{var ge=Tm(),Ce=u(ge,!0);c(ge),C(fe=>$(Ce,fe),[()=>(r(),l(()=>r()("Conversation name")))]),x(Se,ge)}},$$legacy:!0})}var z=_(H,2),le=u(z);{let pe=Ke(()=>!a(S)||!a(y));ar(le,{icon:"comment",get disabled(){return a(pe)},children:(Se,_e)=>{var ge=Nm(),Ce=u(ge,!0);c(ge),C(fe=>$(Ce,fe),[()=>(r(),l(()=>r()("Add")))]),x(Se,ge)},$$slots:{default:!0}})}c(z),c(me);var ce=_(me,2);{var K=pe=>{var Se=Rm(),_e=u(Se);c(Se),C(()=>$(_e,`${a(S)??""}: ${a(b),l(()=>a(b).error)??""}`)),x(pe,Se)};ke(ce,pe=>{a(b),l(()=>a(b).error)&&pe(K)})}var oe=_(ce,2);{var be=pe=>{var Se=Im(),_e=Ee(Se),ge=u(_e);{var Ce=q=>{var M=fr();C(R=>$(M,R),[()=>(r(),a(b),l(()=>r()("Showing %1 of %2 conversations.",a(b).conversations.length,a(b).n_conversations)))]),x(q,M)},fe=q=>{var M=fr();C(R=>$(M,R),[()=>(r(),a(b),l(()=>r()("Showing %1 of %2 conversations, but the list is still loading.",a(b).conversations.length,a(b).n_conversations)))]),x(q,M)};ke(ge,q=>{a(b),l(()=>a(b).done)?q(Ce):q(fe,!1)})}c(_e);var we=_(_e,2);Ar(we,5,()=>(a(b),l(()=>a(b).conversations)),kr,(q,M)=>{var R=Pm(),j=u(R),Y=u(j,!0);c(j);var U=_(j,2),N=u(U,!0);c(U);var W=_(U,2),F=u(W,!0);c(W),c(R),C(()=>{Ge(R,"href",`#add:${a(M),l(()=>a(M).name)??""}`),$(Y,(a(M),l(()=>a(M).n_users))),$(N,(a(M),l(()=>a(M).name))),$(F,(a(M),l(()=>a(M).topic||"No topic.")))}),rt("click",R,Qt(v)),x(q,R)}),c(we),x(pe,Se)};ke(oe,pe=>{a(b),l(()=>a(b).done!==null)&&pe(be)})}c(Z),c(O),C(pe=>$(ne,pe),[()=>(r(),l(()=>r()("Enter the name of an exising conversation, or create a new conversation.")))]),rt("submit",Z,Qt(v)),x(n,P),Zr(e,"title",d);var Ne=Tt(w);return s(),Ne}var Lm=A("<p><!> </p>"),Dm=A("<p><!> </p>"),Um=A('<a target="_self" class="btn is-secondary"><!> </a>'),Fm=A('<p><!> </p> <p><!> </p> <!> <p><a class="btn"><!> </a> <!></p>',1),Bm=A('<p> </p> <p><a target="_self" class="btn"><!> </a></p>',1),qm=A('<p><!></p> <p><a target="_self" class="btn"><!> </a></p>',1),jm=A('<main class="cms-main"><h2> </h2> <!></main>');function wl(n,e){if(new.target)return Nt({component:wl,...n});Ct(e,!1);const t=()=>Pe(Qe,"$route",d),r=()=>Pe(v,"$user",d),o=()=>Pe(tr,"$l",d),s=()=>Pe(g,"$socket",d),i=()=>Pe(cn,"$lmd",d),[d,h]=Gt(),p=Oe(),b=Oe();let S=Xe(e,"title",12,"Loading...");const y={loading:"Loading...",not_found:"Not Found"},g=pr("socket"),v=pr("user"),f=Fv(5e3);function m(ae,G){const ie=ae.path.match(/\/err\/(\w+)/);return ie?ie[1]:G.is("pending")||G.is("loading")?"loading":"not_found"}He(()=>(t(),r()),()=>{ee(p,m(t(),r()))}),He(()=>Qe,()=>{ee(b,Qe.urlFor(v.email?"/chat":"/login"))}),He(()=>a(p),()=>{S(y[a(p)])}),Wt();var E={get title(){return S()},set title(ae){S(ae),Ze()},$set:It,$on:(ae,G)=>Pt(e,ae,G)};Rt();var w=jm(),P=u(w),I=u(P,!0);c(P);var O=_(P,2);{var B=ae=>{var G=Fm(),ie=Ee(G),te=u(ie);Ie(te,{name:"download"});var me=_(te);c(ie);var H=_(ie,2),z=u(H);Ie(z,{name:"rocket"});var le=_(z);c(H);var ce=_(H,2);{var K=ge=>{var Ce=Lm(),fe=u(Ce);Ie(fe,{name:"exclamation-triangle"});var we=_(fe);c(Ce),C(q=>$(we,` ${q??""}`),[()=>(o(),s(),l(()=>o()("Loading user data failed: %1",o()(s().error))))]),x(ge,Ce)},oe=ge=>{var Ce=Dm(),fe=u(Ce);Ie(fe,{name:"spinner fa-spin"});var we=_(fe);c(Ce),C(q=>$(we,` ${q??""}`),[()=>(o(),l(()=>o()("Loading user data...")))]),x(ge,Ce)};ke(ce,ge=>{s(),l(()=>s().error)?ge(K):ge(oe,!1)})}var be=_(ce,2),Ne=u(be),pe=u(Ne);Ie(pe,{name:"paper-plane"});var Se=_(pe);c(Ne);var _e=_(Ne,2);Hd(_e,()=>f,ge=>{},ge=>{var Ce=Um(),fe=u(Ce);Ie(fe,{name:"redo"});var we=_(fe);c(Ce),C(q=>{Ge(Ce,"href",a(b)),$(we,` ${q??""}`)},[()=>(o(),l(()=>o()("Retry")))]),Tr(3,Ce,()=>Ja),x(ge,Ce)}),c(be),C((ge,Ce,fe,we)=>{$(me,` ${ge??""}`),$(le,` ${Ce??""}`),Ge(Ne,"href",fe),$(Se,` ${we??""}`)},[()=>(o(),l(()=>o()("Downloaded Convos."))),()=>(o(),l(()=>o()("Started Convos."))),()=>(Ue(dt),l(()=>dt("contact"))),()=>(o(),l(()=>o()("Contact admin")))]),x(ae,G)},ne=ae=>{var G=vt(),ie=Ee(G);{var te=H=>{var z=Bm(),le=Ee(z),ce=u(le,!0);c(le);var K=_(le,2),oe=u(K),be=u(oe);Ie(be,{name:"play"});var Ne=_(be);c(oe),c(K),C((pe,Se)=>{$(ce,pe),Ge(oe,"href",a(b)),$(Ne,` ${Se??""}`)},[()=>(o(),l(()=>o()("The Convos Team have been searching and searching, but the requested page could not be found."))),()=>(o(),l(()=>o()("Go to start page")))]),x(H,z)},me=H=>{var z=qm(),le=Ee(z),ce=u(le);Bt(ce,()=>(i(),l(()=>i()("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")))),c(le);var K=_(le,2),oe=u(K),be=u(oe);Ie(be,{name:"play"});var Ne=_(be);c(oe),c(K),C(pe=>{Ge(oe,"href",a(b)),$(Ne,` ${pe??""}`)},[()=>(o(),l(()=>o()("Go to start page")))]),x(H,z)};ke(ie,H=>{a(p)==="not_found"?H(te):H(me,!1)},!0)}x(ae,G)};ke(O,ae=>{a(p)==="loading"?ae(B):ae(ne,!1)})}c(w),C(ae=>$(I,ae),[()=>(o(),a(p),l(()=>o()(y[a(p)])))]),x(n,w);var Z=Tt(E);return h(),Z}var zm=A('<h1> <small><a target="_blank"> </a></small></h1>'),Hm=A("<dt> </dt> <dd> </dd>",1),Wm=A('<li><a target="_blank"> </a></li>'),Gm=A('<!> <main class="main"><p><!> <!></p> <h2 id="quick-search"> </h2> <p> </p> <dl><dt>+</dt> <dd> </dd> <dt>+@</dt> <dd> </dd> <dt>+#</dt> <dd> </dd> <dt> </dt> <dd> </dd></dl> <h2 id="autocomplete"> </h2> <p> </p> <dl><dt>@nick</dt><dd> </dd> <dt>:emoji_name</dt><dd> </dd> <dt>/command</dt><dd> </dd> <dt>#conversation</dt><dd> </dd></dl> <h2 id="formatting"> </h2> <p> </p> <dl><dt><!></dt> <dd> </dd> <dt> </dt> <dd> </dd> <dt> </dt> <dd><!></dd> <dt> </dt> <dd><!></dd> <dt>https://...</dt> <dd> </dd></dl> <h2 id="commands"> </h2> <p><!></p> <dl></dl> <h2 id="resources"> </h2> <ul><li><a target="_blank"> </a></li> <li><a href="https://convos.chat" target="_blank"> </a></li> <li><a href="https://github.com/convos-chat/convos/issues" target="_blank"> </a></li> <li><a href="https://github.com/convos-chat/convos" target="_blank"> </a></li> <!> <li><a target="_blank"> </a></li></ul> <h2 id="fallback"> </h2> <ul><li><!></li> <li><!></li> <li><!></li></ul></main>',1);function bf(n,e){if(new.target)return Nt({component:bf,...n});Ct(e,!1);const t=()=>Pe(tr,"$l",o),r=()=>Pe(cn,"$lmd",o),[o,s]=Gt(),i="Help",d="https://github.com/convos-chat/convos/blob/v"+dt("version")+"/Changes#L3",h=Object.keys(Lt.emojis.aliases).sort().join(", ");var p={title:i,$set:It,$on:(rr,vr)=>Pt(e,rr,vr)};Rt();var b=Gm(),S=Ee(b);Jr(S,{children:(rr,vr)=>{var Xt=zm(),nr=u(Xt),Hr=_(nr),mr=u(Hr),Ln=u(mr);c(mr),c(Hr),c(Xt),C((Dn,sa)=>{$(nr,`${Dn??""} `),Ge(mr,"href",d),$(Ln,`v${sa??""}`)},[()=>t()("Help"),()=>dt("version")]),x(rr,Xt)},$$slots:{default:!0}});var y=_(S,2),g=u(y),v=u(g);Bt(v,()=>r()('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.'));var f=_(v,2);Bt(f,()=>r()("More information can also be found on https://convos.chat.")),c(g);var m=_(g,2),E=u(m,!0);c(m);var w=_(m,2),P=u(w,!0);c(w);var I=_(w,2),O=_(u(I),2),B=u(O,!0);c(O);var ne=_(O,4),Z=u(ne,!0);c(ne);var ae=_(ne,4),G=u(ae,!0);c(ae);var ie=_(ae,2),te=u(ie,!0);c(ie);var me=_(ie,2),H=u(me,!0);c(me),c(I);var z=_(I,2),le=u(z,!0);c(z);var ce=_(z,2),K=u(ce,!0);c(ce);var oe=_(ce,2),be=_(u(oe)),Ne=u(be,!0);c(be);var pe=_(be,3),Se=u(pe,!0);c(pe);var _e=_(pe,3),ge=u(_e,!0);c(_e);var Ce=_(_e,3),fe=u(Ce,!0);c(Ce),c(oe);var we=_(oe,2),q=u(we,!0);c(we);var M=_(we,2),R=u(M,!0);c(M);var j=_(M,2),Y=u(j),U=u(Y);Bt(U,()=>h),c(Y);var N=_(Y,2),W=u(N,!0);c(N);var F=_(N,2),Q=u(F,!0);c(F);var D=_(F,2),X=u(D,!0);c(D);var J=_(D,2),se=u(J,!0);c(J);var $e=_(J,2),ue=u($e);Bt(ue,()=>r()('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')),c($e);var V=_($e,2),ye=u(V,!0);c(V);var ve=_(V,2),xe=u(ve);Bt(xe,()=>r()("Using backticks around some text, will format it as a `code fragment`.")),c(ve);var de=_(ve,4),Ye=u(de,!0);c(de),c(j);var qe=_(j,2),Te=u(qe,!0);c(qe);var k=_(qe,2),L=u(k);Bt(L,()=>r()('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')),c(k);var Ae=_(k,2);Ar(Ae,5,()=>ca,kr,(rr,vr)=>{var Xt=Hm(),nr=Ee(Xt),Hr=u(nr,!0);c(nr);var mr=_(nr,2),Ln=u(mr,!0);c(mr),C(Dn=>{$(Hr,a(vr).example),$(Ln,Dn)},[()=>t()(a(vr).description)]),x(rr,Xt)}),c(Ae);var Le=_(Ae,2),je=u(Le,!0);c(Le);var Be=_(Le,2),et=u(Be),ht=u(et),lt=u(ht,!0);c(ht),c(et);var mt=_(et,2),xt=u(mt),T=u(xt,!0);c(xt),c(mt);var re=_(mt,2),Re=u(re),Ve=u(Re,!0);c(Re),c(re);var ot=_(re,2),st=u(ot),Fe=u(st,!0);c(st),c(ot);var Me=_(ot,2);{var Je=rr=>{var vr=Wm(),Xt=u(vr),nr=u(Xt,!0);c(Xt),c(vr),C((Hr,mr)=>{Ge(Xt,"href",Hr),$(nr,mr)},[()=>dt("organization_url"),()=>dt("organization_name")]),x(rr,vr)};ke(Me,rr=>{dt("organization_name")!=="Convos"&&dt("organization_url")!=="https://convos.chat"&&rr(Je)})}var St=_(Me,2),ct=u(St),or=u(ct,!0);c(ct),c(St),c(Be);var er=_(Be,2),Et=u(er,!0);c(er);var bt=_(er,2),pt=u(bt),Mt=u(pt);_t(Mt,{href:"/err/loading",children:(rr,vr)=>{sn();var Xt=fr("Loading");x(rr,Xt)},$$slots:{default:!0}}),c(pt);var Vt=_(pt,2),Ut=u(Vt);_t(Ut,{href:"/err/not_found",children:(rr,vr)=>{sn();var Xt=fr("Not found");x(rr,Xt)},$$slots:{default:!0}}),c(Vt);var sr=_(Vt,2),ur=u(sr);_t(ur,{href:"/err/unknown",children:(rr,vr)=>{sn();var Xt=fr("Unknown");x(rr,Xt)},$$slots:{default:!0}}),c(sr),c(bt),c(y),C((rr,vr,Xt,nr,Hr,mr,Ln,Dn,sa,Wn,co,De,nt,wt,jt,ir,Wr,gn,Ta,Nr,Qr,Do,Uo,Fo,xs,Es,Ss,ks,Na,Bo)=>{$(E,rr),$(P,vr),$(B,Xt),$(Z,nr),$(G,Hr),$(te,mr),$(H,Ln),$(le,Dn),$(K,sa),$(Ne,Wn),$(Se,co),$(ge,De),$(fe,nt),$(q,wt),$(R,jt),$(W,ir),$(Q,Wr),$(X,gn),$(se,Ta),$(ye,Nr),$(Ye,Qr),$(Te,Do),$(je,Uo),Ge(ht,"href",d),$(lt,Fo),$(T,xs),$(Ve,Es),$(Fe,Ss),Ge(ct,"href",ks),$(or,Na),$(Et,Bo)},[()=>t()("Quick search"),()=>t()("Pressing `shift+enter` will shift focus between chat input and search in sidebar."),()=>t()("Filter conversations with unread messages."),()=>t()("Filter private conversations with unread messages."),()=>t()("Filter channels with unread messages."),()=>t()("Any other combination"),()=>t()("Filter channels, private conversations or search for a string."),()=>t()("Autocomplete"),()=>t()("The following rules apply when typing a message:"),()=>t()('"@" followed by a character will show matching nicks in the current conversation.'),()=>t()('":" followed by a character will show matching emojis.'),()=>t()('"/" will show the available commands.'),()=>t()('"#" will show the matching conversation names.'),()=>t()("Text formatting"),()=>t()("Convos supports some special way of formatting text:"),()=>t()("Will be automatically converted into emojis."),()=>t()("> some text"),()=>t()('A line starting with ">" will be converted into a quote.'),()=>t()("*some text*, **some text**, ***some text***"),()=>t()("`some fragment`"),()=>t()("URLs will be converted to links, and might be embedded in the chat."),()=>t()("Available commands"),()=>t()("Other resources"),()=>t()("Changelog for v%1",dt("version")),()=>t()("Project homepage"),()=>t()("Bug/issue tracker"),()=>t()("Source code"),()=>dt("contact"),()=>t()("Contact admin"),()=>t()("Demo error pages")]),x(n,b),Zr(e,"title",i);var _r=Tt(p);return s(),_r}var Km=A('<h2> </h2> <p> </p> <p> </p> <p><a class="btn"> </a> <!></p>',1),Vm=A("<p> </p>"),Ym=A('<span slot="label"> </span>'),Zm=A('<p class="help" slot="help"> </p>'),Jm=A('<span slot="label"> </span>'),Xm=A('<p class="help" slot="help"> </p>'),Qm=A("<span> </span>"),eb=A('<h2> </h2> <!> <input type="hidden" name="exp"/> <input type="hidden" name="token"/> <!> <!> <div class="form-actions"><!> <!></div> <!>',1),tb=A('<span slot="label"> </span>'),rb=A('<span slot="label"> </span>'),nb=A('<p class="help" slot="help"><!></p>'),ab=A("<span> </span>"),ob=A('<h2> </h2> <!> <!> <div class="form-actions"><!> <!></div> <!>',1),sb=A('<h2> </h2> <p> </p> <div class="form-actions"><a class="btn"><!> </a> <!></div>',1),ib=A("<a> </a>"),lb=A('<main class="cms-main"><form method="post"><input type="hidden" name="mode"/> <!></form></main> <div class="footer--wrapper is-small"><footer class="footer language-selector"><!> <!></footer></div>',1);function $l(n,e){if(new.target)return Nt({component:$l,...n});Ct(e,!1);const t=()=>Pe(S,"$user",d),r=()=>Pe(Qe,"$route",d),o=()=>Pe(tr,"$l",d),s=()=>Pe(cn,"$lmd",d),i=()=>Pe(Lt,"$i18n",d),[d,h]=Gt(),p=Oe();let b=Xe(e,"title",12,"Sign in");const S=pr("user"),y=qt.op("loginUser"),g=qt.op("registerUser");let v=Oe({});function f(z){if(z.is("loading")||!z.email)return;const le=z.conversations()[0],ce=z.lastUrl?z.lastUrl:le?le.path:"/settings/connections";Qe.go(ce,{replace:!0})}function m(z){const le=z.path.indexOf("register")!==-1,ce=!a(v).mode&&dt("status")>=400?"invalid_invitation":z.param("email")&&dt("existing_user")?"recover":z.param("email")?"invitation":dt("first_user")||le&&dt("open_to_public")?"register":le?"invalid":"login";return ee(v,{email:z.param("email")||a(v).email||"",exp:z.param("exp")||"",mode:ce,password:"",token:z.param("token")||""}),b(ce==="login"?"Sign in":"Sign up"),"ontouchstart"in window||setTimeout(()=>Cr(document,".text-field input").reverse().map(K=>K.readOnly||K.focus()),1),ce}async function E(z){const le=a(p)==="login"?y:g,ce=z.target.closest("form");ze(v,a(v).email=ce.email.value),ze(v,a(v).password=ce.password.value),await le.perform(a(v)),a(p)!=="login"&&Qe.update({lastUrl:""}),le.error()||await S.load()}He(()=>t(),()=>{f(t())}),He(()=>r(),()=>{ee(p,m(r()))}),Wt();var w={get title(){return b()},set title(z){b(z),Ze()},$set:It,$on:(z,le)=>Pt(e,z,le)};Rt();var P=lb(),I=Ee(P),O=u(I),B=u(O);ta(B);var ne=_(B,2);{var Z=z=>{var le=Km(),ce=Ee(le),K=u(ce,!0);c(ce);var oe=_(ce,2),be=u(oe,!0);c(oe);var Ne=_(oe,2),pe=u(Ne,!0);c(Ne);var Se=_(Ne,2),_e=u(Se),ge=u(_e,!0);c(_e);var Ce=_(_e,2);_t(Ce,{href:"/login",children:(fe,we)=>{sn();var q=fr();C(M=>$(q,M),[()=>(o(),l(()=>o()("Sign in")))]),x(fe,q)},$$slots:{default:!0}}),c(Se),C((fe,we,q,M,R)=>{$(K,fe),$(be,we),$(pe,q),Ge(_e,"href",M),$(ge,R)},[()=>(o(),l(()=>o()("Invalid invite/recover URL"))),()=>(o(),Ue(dt),l(()=>o()(dt("status")==410?"The link has expired.":"The link is invalid."))),()=>(o(),l(()=>o()("Please ask your Convos admin for a new link."))),()=>(Ue(dt),l(()=>dt("contact"))),()=>(o(),l(()=>o()("Contact admin")))]),x(z,le)},ae=z=>{var le=vt(),ce=Ee(le);{var K=be=>{var Ne=eb(),pe=Ee(Ne),Se=u(pe,!0);c(pe);var _e=_(pe,2);{var ge=N=>{var W=Vm(),F=u(W,!0);c(W),C(Q=>$(F,Q),[()=>(o(),l(()=>o()('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')))]),x(N,W)};ke(_e,N=>{Ue(dt),l(()=>dt("first_user"))&&N(ge)})}var Ce=_(_e,2);ta(Ce);var fe=_(Ce,2);ta(fe);var we=_(fe,2);{let N=Ke(()=>(o(),l(()=>o()("Ex: john@doe.com")))),W=Ke(()=>a(p)!=="register");At(we,{type:"email",name:"email",get placeholder(){return a(N)},get readonly(){return a(W)},get value(){return a(v).email},set value(F){ze(v,a(v).email=F)},$$slots:{label:(F,Q)=>{var D=Ym(),X=u(D,!0);c(D),C(J=>$(X,J),[()=>(o(),l(()=>o()("Email")))]),x(F,D)},help:(F,Q)=>{var D=Zm(),X=u(D,!0);c(D),C(J=>$(X,J),[()=>(a(p),o(),l(()=>a(p)==="invitation"?o()("Your email is from the invite link."):o()("Your email will be used if you forget your password.")))]),x(F,D)}},$$legacy:!0})}var q=_(we,2);At(q,{type:"password",name:"password",get value(){return a(v).password},set value(N){ze(v,a(v).password=N)},$$slots:{label:(N,W)=>{var F=Jm(),Q=u(F,!0);c(F),C(D=>$(Q,D),[()=>(o(),l(()=>o()("Password")))]),x(N,F)},help:(N,W)=>{var F=Xm(),Q=u(F,!0);c(F),C(D=>$(Q,D),[()=>(o(),l(()=>o()("Hint: Use a phrase from a book.")))]),x(N,F)}},$$legacy:!0});var M=_(q,2),R=u(M);ar(R,{icon:"save",get op(){return g},children:(N,W)=>{var F=Qm(),Q=u(F,!0);c(F),C(D=>$(Q,D),[()=>(a(p),o(),l(()=>a(p)==="recover"?o()("Set new password"):o()("Sign up")))]),x(N,F)},$$slots:{default:!0}});var j=_(R,2);{var Y=N=>{_t(N,{href:"/login",children:(W,F)=>{sn();var Q=fr();C(D=>$(Q,D),[()=>(o(),l(()=>o()("Sign in")))]),x(W,Q)},$$slots:{default:!0}})};ke(j,N=>{Ue(dt),l(()=>!dt("first_user"))&&N(Y)})}c(M);var U=_(M,2);Br(U,{get op(){return g},success:"Loading Convos..."}),C(N=>$(Se,N),[()=>(a(p),o(),l(()=>a(p)==="recover"?o()("Recover account"):o()("Sign up")))]),wa(Ce,()=>a(v).exp,N=>ze(v,a(v).exp=N)),wa(fe,()=>a(v).token,N=>ze(v,a(v).token=N)),x(be,Ne)},oe=be=>{var Ne=vt(),pe=Ee(Ne);{var Se=ge=>{var Ce=ob(),fe=Ee(Ce),we=u(fe,!0);c(fe);var q=_(fe,2);{let N=Ke(()=>(o(),l(()=>o()("Ex: john@doe.com"))));At(q,{type:"email",name:"email",get placeholder(){return a(N)},get value(){return a(v).email},set value(W){ze(v,a(v).email=W)},$$slots:{label:(W,F)=>{var Q=tb(),D=u(Q,!0);c(Q),C(X=>$(D,X),[()=>(o(),l(()=>o()("Email")))]),x(W,Q)}},$$legacy:!0})}var M=_(q,2);At(M,{type:"password",name:"password",autocomplete:"current-password",get value(){return a(v).password},set value(N){ze(v,a(v).password=N)},$$slots:{label:(N,W)=>{var F=rb(),Q=u(F,!0);c(F),C(D=>$(Q,D),[()=>(o(),l(()=>o()("Password")))]),x(N,F)},help:(N,W)=>{var F=nb(),Q=u(F);Bt(Q,()=>(s(),Ue(dt),l(()=>s()("Contact your [Convos admin](%1) if you have forgotten your password.",dt("contact"))))),c(F),x(N,F)}},$$legacy:!0});var R=_(M,2),j=u(R);ar(j,{icon:"sign-in-alt",get op(){return y},children:(N,W)=>{var F=ab(),Q=u(F,!0);c(F),C(D=>$(Q,D),[()=>(o(),l(()=>o()("Sign in")))]),x(N,F)},$$slots:{default:!0}});var Y=_(j,2);_t(Y,{href:"/register",children:(N,W)=>{sn();var F=fr();C(Q=>$(F,Q),[()=>(o(),l(()=>o()("Sign up")))]),x(N,F)},$$slots:{default:!0}}),c(R);var U=_(R,2);Br(U,{get op(){return y},success:"Loading Convos..."}),C(N=>$(we,N),[()=>(o(),l(()=>o()("Sign in")))]),x(ge,Ce)},_e=ge=>{var Ce=sb(),fe=Ee(Ce),we=u(fe,!0);c(fe);var q=_(fe,2),M=u(q,!0);c(q);var R=_(q,2),j=u(R),Y=u(j);Ie(Y,{name:"paper-plane"});var U=_(Y);c(j);var N=_(j,2);_t(N,{href:"/login",children:(W,F)=>{sn();var Q=fr();C(D=>$(Q,D),[()=>(o(),l(()=>o()("Sign in")))]),x(W,Q)},$$slots:{default:!0}}),c(R),C((W,F,Q,D)=>{$(we,W),$(M,F),Ge(j,"href",Q),$(U,` ${D??""}`)},[()=>(o(),l(()=>o()("Sign up"))),()=>(o(),l(()=>o()("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account."))),()=>(Ue(dt),l(()=>dt("contact"))),()=>(o(),l(()=>o()("Contact admin")))]),x(ge,Ce)};ke(pe,ge=>{a(p)==="login"?ge(Se):ge(_e,!1)},!0)}x(be,Ne)};ke(ce,be=>{a(p),l(()=>["recover","invitation","register"].indexOf(a(p))!==-1)?be(K):be(oe,!1)},!0)}x(z,le)};ke(ne,z=>{a(p)==="invalid_invitation"?z(Z):z(ae,!1)})}c(O),c(I);var G=_(I,2),ie=u(G),te=u(ie);Ie(te,{name:"globe"});var me=_(te,2);Ar(me,1,()=>(i(),l(()=>i().languageOptions)),kr,(z,le)=>{var ce=ib(),K=u(ce,!0);c(ce),C(()=>{Ge(ce,"href",`#${a(le),l(()=>a(le)[0])??""}`),$(K,(a(le),l(()=>a(le)[1])))}),rt("click",ce,()=>i().load(a(le)[0])),x(z,ce)}),c(ie),c(G),wa(B,()=>a(v).mode,z=>ze(v,a(v).mode=z)),rt("submit",O,Qt(E)),x(n,P);var H=Tt(w);return h(),H}var cb=A("<h1> </h1> <!>",1),ub=A("<h2> </h2>"),db=A('<div class="message__status-line for-day-changed"><span><!> <i> </i></span></div>'),fb=A('<!> <div><!> <span class="message__from" tabindex="-1"> </span> <a class="svelte-127lfma"><div class="message__ts has-tooltip"><span> </span> <span class="tooltip"> </span></div> <!></a></div>',1),pb=A('<div class="message__status-line for-loading"><span><!> <i> </i></span></div>'),vb=A("<!> <!> <!>",1),hb=A("<!> <!>",1);function yf(n,e){if(new.target)return Nt({component:yf,...n});Ct(e,!1);const t=()=>Pe(y,"$notifications",i),r=()=>Pe(tr,"$l",i),o=()=>Pe(a(p),"$messages",i),s=()=>Pe(S,"$user",i),[i,d]=Gt(),h=Oe(),p=Oe(),b="Notifications",S=pr("user"),y=S.notifications;In(async()=>{await y.load(),await y.markAsRead()}),He(()=>t(),()=>{En(ee(p,t().messages),"$messages",i)}),He(()=>a(p),()=>{ee(h,["main",a(p).length&&"has-results"].filter(w=>w))}),Wt();var g={title:b,$set:It,$on:(w,P)=>Pt(e,w,P)};Rt();var v=hb(),f=Ee(v);Jr(f,{children:(w,P)=>{var I=cb(),O=Ee(I),B=u(O,!0);c(O);var ne=_(O,2);_t(ne,{href:"/settings/account",class:"btn-hallow",children:(Z,ae)=>{Ie(Z,{name:"user-cog"})},$$slots:{default:!0}}),C(Z=>$(B,Z),[()=>(r(),l(()=>r()("Notifications")))]),x(w,I)},$$slots:{default:!0}});var m=_(f,2);{let w=Ke(()=>(a(h),l(()=>a(h).join(" "))));$s(m,{get class(){return a(w)},$$events:{rendered:P=>P.detail.scrollTo(-1)},children:(P,I)=>{var O=vb(),B=Ee(O);{var ne=ie=>{var te=ub(),me=u(te,!0);c(te),C(H=>$(me,H),[()=>(r(),l(()=>r()("No notifications.")))]),x(ie,te)};ke(B,ie=>{o(),l(()=>o().length===0&&!y.is("loading"))&&ie(ne)})}var Z=_(B,2);Ar(Z,1,()=>(o(),l(()=>o().render())),kr,(ie,te,me)=>{var H=fb(),z=Ee(H);{var le=we=>{var q=db(),M=u(q),R=u(M);Ie(R,{name:"calendar-alt"});var j=_(R,2),Y=u(j,!0);c(j),c(M),c(q),C(U=>$(Y,U),[()=>(a(te),l(()=>a(te).ts.getHumanDate()))]),x(we,q)};ke(z,we=>{a(te),l(()=>!me||a(te).dayChanged)&&we(le)})}var ce=_(z,2),K=u(ce);{let we=Ke(()=>(a(te),s(),l(()=>a(te).yourself?s().avatarId:void 0)));Ie(K,{get name(){return`pick:${a(te),l(()=>a(te).from)??""}`},get color(){return a(te),l(()=>a(te).color)},get avatarId(){return a(we)}})}var oe=_(K,2),be=u(oe,!0);c(oe);var Ne=_(oe,2),pe=u(Ne),Se=u(pe),_e=u(Se,!0);c(Se);var ge=_(Se,2),Ce=u(ge,!0);c(ge),c(pe);var fe=_(pe,2);Bt(fe,()=>(a(te),l(()=>a(te).html))),c(Ne),c(ce),C((we,q,M)=>{Zt(ce,1,(a(te),l(()=>a(te).className)),"svelte-127lfma"),aa(oe,`color:${a(te),l(()=>a(te).color)??""}`),$(be,(a(te),l(()=>a(te).from))),Ge(Ne,"href",we),$(_e,q),$(Ce,M)},[()=>(Ue(rs),a(te),l(()=>rs(a(te)))),()=>(a(te),l(()=>a(te).ts.format("%H:%M"))),()=>(Ue(zr),a(te),l(()=>zr(a(te).ts.toLocaleString())))]),x(ie,H)});var ae=_(Z,2);{var G=ie=>{var te=pb(),me=u(te),H=u(me);Ie(H,{name:"spinner",animation:"spin"});var z=_(H,2),le=u(z,!0);c(z),c(me),c(te),C(ce=>$(le,ce),[()=>(r(),l(()=>r()("Loading...")))]),x(ie,te)};ke(ae,ie=>{t(),l(()=>t().is("loading"))&&ie(G)})}x(P,O)},$$slots:{default:!0}})}x(n,v),Zr(e,"title",b);var E=Tt(g);return d(),E}var gb=A('<!><!> <span class="tooltip is-left"> </span>',1),_b=A("<h1> </h1> <!>",1),mb=A("<p><!> </p>"),bb=A("<p><!> <!></p>"),yb=A('<div class="message__status-line for-day-changed"><span><!> <i> </i></span></div>'),wb=A('<!> <div><!> <span class="message__from" tabindex="-1"> </span> <a class="svelte-zsbl6a"><div class="message__ts has-tooltip"><span> </span> <span class="tooltip"> </span></div> <!></a></div>',1),$b=A('<div class="message__status-line for-loading"><span><!> <i> </i></span></div>'),xb=A("<!> <!> <!>",1),Eb=A("<!> <!> <!>",1);function wf(n,e){if(new.target)return Nt({component:wf,...n});Ct(e,!1);const t=()=>Pe(f,"$conversation",h),r=()=>Pe(Qe,"$route",h),o=()=>Pe(a(b),"$messages",h),s=()=>Pe(tr,"$l",h),i=()=>Pe(cn,"$lmd",h),d=()=>Pe(v,"$user",h),[h,p]=Gt(),b=Oe(),S=Oe(),y=Oe(),g="Search",v=pr("user"),f=v.search;In(()=>{v.search.on("send",E),Qe.param("q")&&E({message:Qe.param("q")})});function m(ae){if(a(y))return o().clear();ae.preventDefault(),document.querySelector(".is-primary-input").focus()}function E(ae){const G=ae.message;return f.update({userInput:G}),Qe.go("/search?q="+encodeURIComponent(G),{replace:!0}),G?f.load({match:G}):a(b).clear()}He(()=>t(),()=>{En(ee(b,t().messages),"$messages",h)}),He(()=>(a(b),t()),()=>{ee(S,["main",a(b).length&&"has-results",t().is("search")&&"is-above-chat-input"].filter(ae=>ae))}),He(()=>(r(),o()),()=>{ee(y,r().param("q")||o().length)}),Wt();var w={title:g,$set:It,$on:(ae,G)=>Pt(e,ae,G)};Rt();var P=Eb(),I=Ee(P);Jr(I,{children:(ae,G)=>{var ie=_b(),te=Ee(ie),me=u(te,!0);c(te);var H=_(te,2);{let z=Ke(()=>a(y)?"has-tooltip is-active":"");_t(H,{href:"/search",get class(){return`btn-hallow can-toggle ${a(z)??""}`},$$events:{click:m},children:(le,ce)=>{var K=gb(),oe=Ee(K);Ie(oe,{name:"search"});var be=_(oe);Ie(be,{name:"times"});var Ne=_(be,2),pe=u(Ne,!0);c(Ne),C(Se=>$(pe,Se),[()=>(s(),l(()=>s()("Clear")))]),x(le,K)},$$slots:{default:!0}})}C(z=>$(me,z),[()=>(s(),l(()=>s()(f.name)))]),x(ae,ie)},$$slots:{default:!0}});var O=_(I,2);{let ae=Ke(()=>(a(S),l(()=>a(S).join(" "))));$s(O,{get class(){return a(ae)},$$events:{rendered:G=>G.detail.scrollTo(-1)},children:(G,ie)=>{var te=xb(),me=Ee(te);{var H=K=>{var oe=vt(),be=Ee(oe);{var Ne=Se=>{var _e=mb(),ge=u(_e);Ie(ge,{name:"info-circle"});var Ce=_(ge);c(_e),C(fe=>$(Ce,` ${fe??""}`),[()=>(s(),r(),l(()=>s()('No search results for "%1".',r().param("q"))))]),x(Se,_e)},pe=Se=>{var _e=bb(),ge=u(_e);Ie(ge,{name:"info-circle"});var Ce=_(ge,2);Bt(Ce,()=>(i(),l(()=>i()("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")))),c(_e),x(Se,_e)};ke(be,Se=>{r(),l(()=>r().param("q"))?Se(Ne):Se(pe,!1)})}x(K,oe)};ke(me,K=>{o(),l(()=>o().length===0&&!f.is("loading"))&&K(H)})}var z=_(me,2);Ar(z,1,()=>(o(),l(()=>o().render())),kr,(K,oe,be)=>{var Ne=wb(),pe=Ee(Ne);{var Se=N=>{var W=yb(),F=u(W),Q=u(F);Ie(Q,{name:"calendar-alt"});var D=_(Q,2),X=u(D,!0);c(D),c(F),c(W),C(J=>$(X,J),[()=>(a(oe),l(()=>a(oe).ts.getHumanDate()))]),x(N,W)};ke(pe,N=>{a(oe),l(()=>!be||a(oe).dayChanged)&&N(Se)})}var _e=_(pe,2),ge=u(_e);{let N=Ke(()=>(a(oe),d(),l(()=>a(oe).yourself?d().avatarId:void 0)));Ie(ge,{get name(){return`pick:${a(oe),l(()=>a(oe).from)??""}`},get color(){return a(oe),l(()=>a(oe).color)},get avatarId(){return a(N)}})}var Ce=_(ge,2),fe=u(Ce,!0);c(Ce);var we=_(Ce,2),q=u(we),M=u(q),R=u(M,!0);c(M);var j=_(M,2),Y=u(j,!0);c(j),c(q);var U=_(q,2);Bt(U,()=>(a(oe),l(()=>a(oe).html))),c(we),c(_e),C((N,W,F)=>{Zt(_e,1,(a(oe),l(()=>a(oe).className)),"svelte-zsbl6a"),aa(Ce,`color:${a(oe),l(()=>a(oe).color)??""}`),$(fe,(a(oe),l(()=>a(oe).from))),Ge(we,"href",N),$(R,W),$(Y,F)},[()=>(Ue(rs),a(oe),l(()=>rs(a(oe)))),()=>(a(oe),l(()=>a(oe).ts.format("%H:%M"))),()=>(Ue(zr),a(oe),l(()=>zr(a(oe).ts.toLocaleString())))]),x(K,Ne)});var le=_(z,2);{var ce=K=>{var oe=$b(),be=u(oe),Ne=u(be);Ie(Ne,{name:"spinner",animation:"spin"});var pe=_(Ne,2),Se=u(pe,!0);c(pe),c(be),c(oe),C(_e=>$(Se,_e),[()=>(s(),l(()=>s()("Loading...")))]),x(K,oe)};ke(le,K=>{t(),l(()=>t().is("loading"))&&K(ce)})}x(G,te)},$$slots:{default:!0}})}var B=_(O,2);{var ne=ae=>{Gl(ae,{get conversation(){return f}})};ke(B,ae=>{l(()=>f.is("search"))&&ae(ne)})}x(n,P),Zr(e,"title",g);var Z=Tt(w);return p(),Z}var Sb=A("<h1> </h1>"),kb=A('<span slot="label"> </span>'),Ab=A('<span slot="label"> </span>'),Ob=A("<span> </span>"),Cb=A('<button type="button"><!></button>'),Tb=A('<span slot="label"> </span>'),Nb=A('<span slot="label"> </span>'),Rb=A("<span> </span>"),Pb=A('<span slot="label"> </span>'),Ib=A('<span slot="label"> </span>'),Mb=A('<span slot="label"> </span>'),Lb=A('<span slot="label"> </span>'),Db=A('<span slot="label"> </span>'),Ub=A('<span slot="label"> <!></span>'),Fb=A('<span slot="label"> </span>'),Bb=A('<span slot="label"> </span>'),qb=A("<span> </span>"),jb=A('<span slot="label"> </span>'),zb=A('<span slot="label"> </span>'),Hb=A('<form><h2> </h2> <p> </p> <!> <p class="help"><!></p> <!> <p class="help"><!></p></form>'),Wb=A('<!> <main class="main"><form method="post"><!> <!> <fieldset class="avatar-picker svelte-pbyc7a"><legend class="svelte-pbyc7a"> </legend> <p class="help"> </p> <div class="avatar-preview svelte-pbyc7a"><!> <span> </span> <!></div> <div class="avatar-grid svelte-pbyc7a"></div></fieldset> <!> <p class="help"><!></p> <div class="inputs-side-by-side"><!> <div class="flex-basis-30"><!></div></div> <!> <!> <!> <!> <!> <!> <!> <!> <p> </p> <div class="form-actions"><!></div> <!></form> <!></main>',1);function $f(n,e){if(new.target)return Nt({component:$f,...n});Ct(e,!1);const t=()=>Pe(S,"$themeManager",i),r=()=>Pe(tr,"$l",i),o=()=>Pe(cn,"$lmd",i),s=()=>Pe(Lt,"$i18n",i),[i,d]=Gt(),h=Oe(),p="Account",b="registerProtocolHandler"in navigator,S=pr("themeManager"),y=pr("user"),g=qt.op("updateUser"),v=xv();let f=Oe({});In(()=>{ee(f,{activeTheme:S.activeTheme,avatarId:y.avatarId,colorScheme:S.colorScheme,compactDisplay:S.compactDisplay,email:y.email,expandUrlToMedia:y.expandUrlToMedia,highlightKeywords:y.highlightKeywords.join(", "),ignoreStatuses:y.ignoreStatuses,lang:Lt.lang,password:"",password_again:"",volume:hr.volume,wantNotifications:hr.wantNotifications})}),Il(hr.on("update",(V,ye)=>{!ye.wantNotifications&&!ye.desktopAccess||V.wantNotifications&&V.show(r()("You have enabled notifications."))}));function m(V){navigator.registerProtocolHandler(V,Qe.urlFor("/register?uri=%s"),r()("Convos %1 handler",V))}function E(V){ze(f,a(f).avatarId=V)}function w(){ze(f,a(f).avatarId=null)}function P(){const V=[a(f).password,a(f).password_again];if(V.join("").length&&V[0]!==V[1])return g.error("Passwords does not match.");a(f).wantNotifications||ze(f,a(f).wantNotifications=!1),a(f).wantNotifications&&hr.requestDesktopAccess(),hr.update(a(f)),a(h)&&ze(f,a(f).colorScheme="auto"),S.update(a(f));const ye=Bl(a(f).highlightKeywords),ve={email:y.email,highlight_keywords:ye,avatar_id:a(f).avatarId};V[0]&&(ve.password=V[0]),y.update(a(f)).update({highlightKeywords:ye}),g.perform(ve)}He(()=>(t(),a(f)),()=>{ee(h,!t().hasColorScheme(a(f).activeTheme))}),He(()=>a(f),()=>{Lt.load(a(f).lang)}),He(()=>a(f),()=>{a(f).handle_protocol_irc&&m("irc")}),He(()=>a(f),()=>{a(f).handle_protocol_ircs&&m("ircs")}),Wt();var I={title:p,$set:It,$on:(V,ye)=>Pt(e,V,ye)};Rt();var O=Wb(),B=Ee(O);Jr(B,{children:(V,ye)=>{var ve=Sb(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Account")))]),x(V,ve)},$$slots:{default:!0}});var ne=_(B,2),Z=u(ne),ae=u(Z);At(ae,{type:"email",name:"email",readonly:!0,get value(){return a(f).email},set value(V){ze(f,a(f).email=V)},$$slots:{label:(V,ye)=>{var ve=kb(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Email")))]),x(V,ve)}},$$legacy:!0});var G=_(ae,2);{let V=Ke(()=>(r(),l(()=>r()("whatever, keywords"))));At(G,{name:"highlightKeywords",get placeholder(){return a(V)},get value(){return a(f).highlightKeywords},set value(ye){ze(f,a(f).highlightKeywords=ye)},$$slots:{label:(ye,ve)=>{var xe=Ab(),de=u(xe,!0);c(xe),C(Ye=>$(de,Ye),[()=>(r(),l(()=>r()("Notification keywords")))]),x(ye,xe)}},$$legacy:!0})}var ie=_(G,2),te=u(ie),me=u(te,!0);c(te);var H=_(te,2),z=u(H,!0);c(H);var le=_(H,2),ce=u(le);{let V=Ke(()=>(a(f),l(()=>a(f).email||y.email)));Ie(ce,{get name(){return`pick:${a(V)??""}`},get avatarId(){return a(f),l(()=>a(f).avatarId)}})}var K=_(ce,2),oe=u(K,!0);c(K);var be=_(K,2);{let V=Ke(()=>(a(f),l(()=>a(f).avatarId===null)));ar(be,{type:"button",class:"is-secondary",get disabled(){return a(V)},$$events:{click:w},children:(ye,ve)=>{var xe=Ob(),de=u(xe,!0);c(xe),C(Ye=>$(de,Ye),[()=>(r(),l(()=>r()("Use automatic icon")))]),x(ye,xe)},$$slots:{default:!0}})}c(le);var Ne=_(le,2);Ar(Ne,5,()=>v,kr,(V,ye)=>{var ve=Cb();let xe;var de=u(ve);{let Ye=Ke(()=>(a(f),l(()=>a(f).email||y.email)));Ie(de,{get name(){return`pick:${a(Ye)??""}`},get avatarId(){return a(ye),l(()=>a(ye).id)}})}c(ve),C(Ye=>{Ge(ve,"aria-pressed",(a(f),a(ye),l(()=>a(f).avatarId===a(ye).id))),Ge(ve,"aria-label",Ye),xe=Zt(ve,1,"svelte-pbyc7a",null,xe,{selected:a(f).avatarId===a(ye).id})},[()=>(r(),a(ye),l(()=>r()("Select avatar %1",a(ye).id+1)))]),rt("click",ve,()=>E(a(ye).id)),x(V,ve)}),c(Ne),c(ie);var pe=_(ie,2);Ht(pe,{name:"wantNotifications",get value(){return a(f).wantNotifications},set value(V){ze(f,a(f).wantNotifications=V)},$$slots:{label:(V,ye)=>{var ve=Tb(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Enable notifications")))]),x(V,ve)}},$$legacy:!0});var Se=_(pe,2),_e=u(Se);Bt(_e,()=>(o(),l(()=>o()('Leave this unchecked, and hit "Save" to disable notifications.')))),c(Se);var ge=_(Se,2),Ce=u(ge);da(Ce,{name:"volume",get options(){return Ue(hr),l(()=>hr.volumeOptions)},get value(){return a(f).volume},set value(V){ze(f,a(f).volume=V)},$$slots:{label:(V,ye)=>{var ve=Nb(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Notification sound volume")))]),x(V,ve)}},$$legacy:!0});var fe=_(Ce,2),we=u(fe);{let V=Ke(()=>(a(f),l(()=>!parseInt(a(f).volume,10))));ar(we,{icon:"play",get disabled(){return a(V)},type:"button",$$events:{click:()=>hr.play({volume:a(f).volume})},children:(ye,ve)=>{var xe=Rb(),de=u(xe,!0);c(xe),C(Ye=>$(de,Ye),[()=>(r(),l(()=>r()("Test")))]),x(ye,xe)},$$slots:{default:!0}})}c(fe),c(ge);var q=_(ge,2);Ht(q,{name:"ignoreStatuses",get value(){return a(f).ignoreStatuses},set value(V){ze(f,a(f).ignoreStatuses=V)},$$slots:{label:(V,ye)=>{var ve=Pb(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Ignore join/part messages")))]),x(V,ve)}},$$legacy:!0});var M=_(q,2);Ht(M,{name:"expandUrlToMedia",get value(){return a(f).expandUrlToMedia},set value(V){ze(f,a(f).expandUrlToMedia=V)},$$slots:{label:(V,ye)=>{var ve=Ib(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Expand URL to media")))]),x(V,ve)}},$$legacy:!0});var R=_(M,2);Ht(R,{name:"compactDisplay",get value(){return a(f).compactDisplay},set value(V){ze(f,a(f).compactDisplay=V)},$$slots:{label:(V,ye)=>{var ve=Mb(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Enable compact message display")))]),x(V,ve)}},$$legacy:!0});var j=_(R,2);da(j,{name:"activeTheme",get options(){return l(()=>S.themeOptions)},get value(){return a(f).activeTheme},set value(V){ze(f,a(f).activeTheme=V)},$$slots:{label:(V,ye)=>{var ve=Lb(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Theme")))]),x(V,ve)}},$$legacy:!0});var Y=_(j,2);da(Y,{name:"colorScheme",get readonly(){return a(h)},get options(){return l(()=>S.colorSchemeOptions)},get value(){return a(f).colorScheme},set value(V){ze(f,a(f).colorScheme=V)},$$slots:{label:(V,ye)=>{var ve=Db(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Color scheme")))]),x(V,ve)}},$$legacy:!0});var U=_(Y,2);da(U,{name:"lang",get options(){return s(),l(()=>s().languageOptions)},get value(){return a(f).lang},set value(V){ze(f,a(f).lang=V)},$$slots:{label:(V,ye)=>{var ve=Ub(),xe=u(ve),de=_(xe);Ie(de,{name:"globe"}),c(ve),C(Ye=>$(xe,`${Ye??""} `),[()=>(r(),l(()=>r()("Language")))]),x(V,ve)}},$$legacy:!0});var N=_(U,2);At(N,{type:"password",name:"password",autocomplete:"new-password",get value(){return a(f).password},set value(V){ze(f,a(f).password=V)},$$slots:{label:(V,ye)=>{var ve=Fb(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Password")))]),x(V,ve)}},$$legacy:!0});var W=_(N,2);At(W,{type:"password",name:"password_again",autocomplete:"new-password",get value(){return a(f).password_again},set value(V){ze(f,a(f).password_again=V)},$$slots:{label:(V,ye)=>{var ve=Bb(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Repeat password")))]),x(V,ve)}},$$legacy:!0});var F=_(W,2),Q=u(F,!0);c(F);var D=_(F,2),X=u(D);ar(X,{icon:"save",get op(){return g},children:(V,ye)=>{var ve=qb(),xe=u(ve,!0);c(ve),C(de=>$(xe,de),[()=>(r(),l(()=>r()("Save settings")))]),x(V,ve)},$$slots:{default:!0}}),c(D);var J=_(D,2);Br(J,{get op(){return g}}),c(Z);var se=_(Z,2);{var $e=V=>{var ye=Hb(),ve=u(ye),xe=u(ve,!0);c(ve);var de=_(ve,2),Ye=u(de);c(de);var qe=_(de,2);Ht(qe,{name:"handle_protocol_irc",get value(){return a(f).handle_protocol_irc},set value(je){ze(f,a(f).handle_protocol_irc=je)},$$slots:{label:(je,Be)=>{var et=jb(),ht=u(et,!0);c(et),C(lt=>$(ht,lt),[()=>(r(),l(()=>r()("irc://")))]),x(je,et)}},$$legacy:!0});var Te=_(qe,2),k=u(Te);Bt(k,()=>(o(),l(()=>o()("Test it by clicking on %1.","irc://localhost:6667")))),c(Te);var L=_(Te,2);Ht(L,{name:"handle_protocol_ircs",get value(){return a(f).handle_protocol_ircs},set value(je){ze(f,a(f).handle_protocol_ircs=je)},$$slots:{label:(je,Be)=>{var et=zb(),ht=u(et,!0);c(et),C(lt=>$(ht,lt),[()=>(r(),l(()=>r()("ircs://")))]),x(je,et)}},$$legacy:!0});var Ae=_(L,2),Le=u(Ae);Bt(Le,()=>(o(),l(()=>o()("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")))),c(Ae),c(ye),C((je,Be,et)=>{$(xe,je),$(Ye,`${Be??""}
        ${et??""}`)},[()=>(r(),l(()=>r()("Protocol handlers"))),()=>(r(),l(()=>r()("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",r()("Convos")))),()=>(r(),l(()=>r()("If you do not see any popup, then it probably means %1 already handles the protocol.",r()("Convos"))))]),rt("submit",ye,Qt(function(je){ao.call(this,e,je)})),x(V,ye)};ke(se,V=>{b&&V($e)})}c(ne),C((V,ye,ve,xe)=>{$(me,V),$(z,ye),$(oe,ve),$(Q,xe)},[()=>(r(),l(()=>r()("Avatar"))),()=>(r(),l(()=>r()("Pick the icon you want to use. Leave it automatic to hash your nick like before."))),()=>(a(f),r(),l(()=>a(f).avatarId===null?r()("Automatic"):r()("Selected"))),()=>(r(),l(()=>r()("Leave the password fields empty to keep the current password.")))]),rt("submit",Z,Qt(P)),x(n,O),Zr(e,"title",p);var ue=Tt(I);return d(),ue}var Gb=A("<h1> </h1>"),Kb=A('<span slot="label"> </span>'),Vb=A('<p class="help" slot="help"> </p>'),Yb=A('<span slot="label"> </span>'),Zb=A('<p class="help" slot="help"> </p>'),Jb=A('<span slot="label"> </span>'),Xb=A('<p class="help" slot="help"> </p>'),Qb=A('<span slot="label"> </span>'),ey=A('<p class="help" slot="help"><!></p>'),ty=A('<span slot="label"> </span>'),ry=A("<span> </span>"),ny=A('<div class="error"> </div>'),ay=A("<p> </p>"),oy=A("<p> </p>"),sy=A("<span> </span>"),iy=A('<div id="disk-usage"><h2> </h2> <div class="progress"><div class="progress__bar"> </div></div> <p class="help"> </p> <div class="progress"><div class="progress__bar"> </div></div> <p class="help"> </p></div>'),ly=A('<!> <main class="main"><form id="convos-settings" method="post"><h2> </h2> <p><!></p> <!> <!> <!> <!> <!> <p class="help"> </p> <div class="form-actions"><!></div> <!></form> <h2> </h2> <form id="convos-updates" method="post"><!> <!></form> <!></main>',1);function xf(n,e){if(new.target)return Nt({component:xf,...n});Ct(e,!1);const t=()=>Pe(b,"$checkForUpdatesOp",s),r=()=>Pe(tr,"$l",s),o=()=>Pe(cn,"$lmd",s),[s,i]=Gt(),d=Oe(),h=Oe(),p="Global settings",b=qt.op("checkForUpdates"),S=qt.op("getSettings"),y=qt.op("updateSettings");let g=Oe(null),v=Oe({});In(async()=>{await S.perform();const M=S.res.body;ee(g,f(M.disk_usage)),delete M.disk_usage,M.contact=M.contact.replace(/mailto:/,""),ee(v,{...a(v),...M})});function f(M){if(!M)return null;const R=M.block_size||1024;return{blocks_pct:Math.ceil(M.blocks_used/M.blocks_total*100),blocks_total:Ua(R*M.blocks_total,"B"),blocks_used:Ua(R*M.blocks_used,"B"),inodes_pct:Math.ceil(M.inodes_used/M.inodes_total*100),inodes_total:Ua(M.inodes_total),inodes_used:Ua(M.inodes_used)}}function m(){a(v).contact&&a(v).contact.indexOf("@")>0&&ze(v,a(v).contact="mailto:"+a(v).contact),dt("contact",a(v).contact),dt("open_to_public",a(v).open_to_public),dt("organization_name",a(v).organization_name),dt("organization_url",a(v).organization_url),ts.fromString(a(v).video_service),y.perform(a(v)),ze(v,a(v).contact=a(v).contact.replace(/mailto:/,""))}He(()=>t(),()=>{ee(d,t().res.body.available)}),He(()=>(a(d),dt),()=>{ee(h,a(d)==dt("version"))}),Wt();var E={title:p,$set:It,$on:(M,R)=>Pt(e,M,R)};Rt();var w=ly(),P=Ee(w);Jr(P,{children:(M,R)=>{var j=Gb(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(r(),l(()=>r()("Global settings")))]),x(M,j)},$$slots:{default:!0}});var I=_(P,2),O=u(I),B=u(O),ne=u(B,!0);c(B);var Z=_(B,2),ae=u(Z);Bt(ae,()=>(o(),Ue(dt),l(()=>o()("These settings control what users experience when they visit [%1](%1).",dt("base_url"))))),c(Z);var G=_(Z,2);At(G,{name:"organization_name",get value(){return a(v).organization_name},set value(M){ze(v,a(v).organization_name=M)},$$slots:{label:(M,R)=>{var j=Kb(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(r(),l(()=>r()("Organization name")))]),x(M,j)},help:(M,R)=>{var j=Vb(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(r(),l(()=>r()("Can be changed if you want to add a touch of your organization.")))]),x(M,j)}},$$legacy:!0});var ie=_(G,2);{let M=Ke(()=>(r(),l(()=>r()("https://convos.chat"))));At(ie,{name:"organization_url",get placeholder(){return a(M)},get value(){return a(v).organization_url},set value(R){ze(v,a(v).organization_url=R)},$$slots:{label:(R,j)=>{var Y=Yb(),U=u(Y,!0);c(Y),C(N=>$(U,N),[()=>(r(),l(()=>r()("Organization URL")))]),x(R,Y)},help:(R,j)=>{var Y=Zb(),U=u(Y,!0);c(Y),C(N=>$(U,N),[()=>(r(),l(()=>r()('Used together with "Organization name" to add a link to your organization on the login screen.')))]),x(R,Y)}},$$legacy:!0})}var te=_(ie,2);{let M=Ke(()=>(r(),l(()=>r()("Ex: jhthorsen@cpan.org"))));At(te,{name:"contact",get placeholder(){return a(M)},get value(){return a(v).contact},set value(R){ze(v,a(v).contact=R)},$$slots:{label:(R,j)=>{var Y=Jb(),U=u(Y,!0);c(Y),C(N=>$(U,N),[()=>(r(),l(()=>r()("Admin email")))]),x(R,Y)},help:(R,j)=>{var Y=Xb(),U=u(Y,!0);c(Y),C(N=>$(U,N),[()=>(r(),l(()=>r()("This email can be used by users to get in touch with the Convos admin.")))]),x(R,Y)}},$$legacy:!0})}var me=_(te,2);{let M=Ke(()=>(r(),l(()=>r()("Ex: https://meet.jit.si/"))));At(me,{name:"video_service",get placeholder(){return a(M)},get value(){return a(v).video_service},set value(R){ze(v,a(v).video_service=R)},$$slots:{label:(R,j)=>{var Y=Qb(),U=u(Y,!0);c(Y),C(N=>$(U,N),[()=>(r(),l(()=>r()("Video service")))]),x(R,Y)},help:(R,j)=>{var Y=ey(),U=u(Y);Bt(U,()=>(o(),l(()=>o()("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")))),c(Y),x(R,Y)}},$$legacy:!0})}var H=_(me,2);Ht(H,{name:"open_to_public",get value(){return a(v).open_to_public},set value(M){ze(v,a(v).open_to_public=M)},$$slots:{label:(M,R)=>{var j=ty(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(r(),l(()=>r()("Registration is open to public")))]),x(M,j)}},$$legacy:!0});var z=_(H,2),le=u(z,!0);c(z);var ce=_(z,2),K=u(ce);ar(K,{icon:"save",get op(){return y},children:(M,R)=>{var j=ry(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(r(),l(()=>r()("Save settings")))]),x(M,j)},$$slots:{default:!0}}),c(ce);var oe=_(ce,2);Br(oe,{get op(){return y}}),c(O);var be=_(O,2),Ne=u(be,!0);c(be);var pe=_(be,2),Se=u(pe);{var _e=M=>{var R=ny(),j=u(R,!0);c(R),C(Y=>$(j,Y),[()=>(r(),t(),l(()=>r()(t().error())))]),x(M,R)},ge=M=>{var R=vt(),j=Ee(R);{var Y=N=>{var W=ay(),F=u(W,!0);c(W),C(Q=>$(F,Q),[()=>(o(),a(h),a(d),l(()=>o()(a(h)?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",a(d))))]),x(N,W)},U=N=>{var W=oy(),F=u(W,!0);c(W),C(Q=>$(F,Q),[()=>(o(),Ue(dt),l(()=>o()("You currently have Convos v%1 installed.",dt("version"))))]),x(N,W)};ke(j,N=>{t(),l(()=>t().is("success"))?N(Y):N(U,!1)},!0)}x(M,R)};ke(Se,M=>{t(),l(()=>t().is("error"))?M(_e):M(ge,!1)})}var Ce=_(Se,2);ar(Ce,{icon:"sync-alt",get op(){return b},children:(M,R)=>{var j=sy(),Y=u(j,!0);c(j),C(U=>$(Y,U),[()=>(r(),l(()=>r()("Check for updates")))]),x(M,j)},$$slots:{default:!0}}),c(pe);var fe=_(pe,2);{var we=M=>{var R=iy(),j=u(R),Y=u(j,!0);c(j);var U=_(j,2),N=u(U),W=u(N);c(N),c(U);var F=_(U,2),Q=u(F);c(F);var D=_(F,2),X=u(D),J=u(X);c(X),c(D);var se=_(D,2),$e=u(se);c(se),c(R),C((ue,V,ye)=>{$(Y,ue),aa(N,`width:${a(g),l(()=>a(g).blocks_pct)??""}%;`),$(W,`${a(g),l(()=>a(g).blocks_pct)??""}%`),$(Q,`${V??""}: ${a(g),l(()=>a(g).blocks_used)??""} / ${a(g),l(()=>a(g).blocks_total)??""}`),aa(X,`width:${a(g),l(()=>a(g).inodes_pct)??""}%;`),$(J,`${a(g),l(()=>a(g).inodes_pct)??""}%`),$($e,`${ye??""}: ${a(g),l(()=>a(g).inodes_used)??""} / ${a(g),l(()=>a(g).inodes_total)??""}`)},[()=>(r(),l(()=>r()("Disk usage"))),()=>(r(),l(()=>r()("Disk usage"))),()=>(r(),l(()=>r()("Inode usage")))]),x(M,R)};ke(fe,M=>{a(g)&&M(we)})}c(I),C((M,R,j)=>{$(ne,M),$(le,R),$(Ne,j)},[()=>(r(),l(()=>r()("Convos settings"))),()=>(r(),l(()=>r()("Tick this box if you want users to be able to register without an invite URL."))),()=>(r(),l(()=>r()("Check for updates")))]),rt("submit",O,Qt(m)),rt("submit",pe,Qt(()=>b.perform())),x(n,w),Zr(e,"title",p);var q=Tt(E);return i(),q}var cy=A('<!><!> <span class="tooltip is-left"> </span>',1),uy=A("<h1> </h1> <!>",1),dy=A('<span slot="label"> </span>'),fy=A('<span slot="label"> </span>'),py=A('<p class="help" slot="help"> </p>'),vy=A("<span> </span>"),hy=A('<span slot="label"> </span>'),gy=A("<span> </span>"),_y=A('<form id="edit" method="post"><input type="hidden" name="uid"/> <!> <!> <div class="form-actions"><!></div> <!></form> <h2>Delete account</h2> <form id="delete" method="post"><p> <!></p> <!> <div class="form-actions"><!></div> <!></form>',1),my=A('<span slot="label"> </span>'),by=A('<p class="help" slot="help"> </p>'),yy=A("<h3> </h3> <p><!> <!></p> <a> </a> <p><small> </small></p>",1),wy=A("<span> </span>"),$y=A("<tr><td><a> </a></td><td> </td><td> </td></tr>"),xy=A('<form id="invite" method="post"><h2> </h2> <!> <!> <div class="form-actions"><!></div> <!></form> <h2> <small> </small></h2> <table><thead><tr><th> </th><th> </th><th> </th></tr></thead><tbody><!><!></tbody></table>',1),Ey=A('<!> <main class="main"><!></main>',1);function Ef(n,e){if(new.target)return Nt({component:Ef,...n});Ct(e,!1);const t=()=>Pe(Qe,"$route",d),r=()=>Pe(g,"$inviteLinkOp",d),o=()=>Pe(tr,"$l",d),s=()=>Pe(cn,"$lmd",d),i=()=>Pe(y,"$getUsersOp",d),[d,h]=Gt(),p=Oe();let b=Xe(e,"title",12,"Users");const S=qt.op("deleteUser"),y=qt.op("getUsers"),g=qt.op("inviteUser"),v=qt.op("updateUser");let f=Oe(""),m=Oe({email:""}),E=Oe([]);In(B);function w(le){const ce=Xd(le.target);ce&&hr.showInApp(ce,{title:o()("Invite link copied")})}async function P(){S.reset(),v.reset(),a(f)===a(m).email&&(await S.perform(a(m)),S.is("success")&&(B(),Qe.go("/settings/users",{replace:!0})))}function I(le,ce){const K=le.hash,oe=K&&ce.filter(be=>be.uid===K)[0];ee(m,oe?{...a(m),confirm_email:"",...oe}:{...a(m),confirm_email:"",uid:""})}function O(){g.perform({email:a(m).email})}async function B(){await y.perform(),ee(E,y.res.body.users||[]),y.reset()}function ne(){S.reset(),v.perform({email:a(m).email,roles:Bl(a(m).roles)})}He(()=>(t(),a(E)),()=>{I(t(),a(E))}),He(()=>r(),()=>{ee(p,r().res.body||{})}),He(()=>a(m),()=>{b(a(m).uid?a(m).email:"Users")}),Wt();var Z={get title(){return b()},set title(le){b(le),Ze()},$set:It,$on:(le,ce)=>Pt(e,le,ce)};Rt();var ae=Ey(),G=Ee(ae);Jr(G,{children:(le,ce)=>{var K=uy(),oe=Ee(K),be=u(oe,!0);c(oe);var Ne=_(oe,2);{let pe=Ke(()=>(a(m),l(()=>a(m).uid?"is-active":"")));_t(Ne,{href:"/settings/users",get class(){return`btn-hallow can-toggle has-tooltip ${a(pe)??""}`},children:(Se,_e)=>{var ge=cy(),Ce=Ee(ge);Ie(Ce,{name:"list"});var fe=_(Ce);Ie(fe,{name:"times"});var we=_(fe,2),q=u(we,!0);c(we),C(M=>$(q,M),[()=>(Ue(zr),o(),l(()=>zr(o()("See all users"))))]),x(Se,ge)},$$slots:{default:!0}})}C(pe=>$(be,pe),[()=>(o(),a(m),l(()=>o()(a(m).uid?"Account":"Users")))]),x(le,K)},$$slots:{default:!0}});var ie=_(G,2),te=u(ie);{var me=le=>{var ce=_y(),K=Ee(ce),oe=u(K);ta(oe);var be=_(oe,2);At(be,{name:"email",readonly:!0,get value(){return a(m).email},set value(Y){ze(m,a(m).email=Y)},$$slots:{label:(Y,U)=>{var N=dy(),W=u(N,!0);c(N),C(F=>$(W,F),[()=>(o(),l(()=>o()("Email")))]),x(Y,N)}},$$legacy:!0});var Ne=_(be,2);{let Y=Ke(()=>(o(),l(()=>o()("admin, bot, ..."))));At(Ne,{name:"roles",get placeholder(){return a(Y)},get value(){return a(m).roles},set value(U){ze(m,a(m).roles=U)},$$slots:{label:(U,N)=>{var W=fy(),F=u(W,!0);c(W),C(Q=>$(F,Q),[()=>(o(),l(()=>o()("Roles")))]),x(U,W)},help:(U,N)=>{var W=py(),F=u(W,!0);c(W),C(Q=>$(F,Q),[()=>(o(),l(()=>o()("Roles must be separated by comma.")))]),x(U,W)}},$$legacy:!0})}var pe=_(Ne,2),Se=u(pe);ar(Se,{icon:"save",get op(){return v},children:(Y,U)=>{var N=vy(),W=u(N,!0);c(N),C(F=>$(W,F),[()=>(o(),l(()=>o()("Save user")))]),x(Y,N)},$$slots:{default:!0}}),c(pe);var _e=_(pe,2);Br(_e,{get op(){return v}}),c(K);var ge=_(K,4),Ce=u(ge),fe=u(Ce),we=_(fe);Bt(we,()=>(s(),a(m),o(),l(()=>s()('Please confirm by entering "**%1**" before hitting **%2**.',a(m).email,o()("Delete user"))))),c(Ce);var q=_(Ce,2);At(q,{name:"confirm_email",get value(){return a(f)},set value(Y){ee(f,Y)},$$slots:{label:(Y,U)=>{var N=hy(),W=u(N,!0);c(N),C(F=>$(W,F),[()=>(o(),l(()=>o()("Confirm email")))]),x(Y,N)}},$$legacy:!0});var M=_(q,2),R=u(M);{let Y=Ke(()=>(a(f),a(m),l(()=>a(f)!==a(m).email)));ar(R,{icon:"trash",get op(){return S},get disabled(){return a(Y)},children:(U,N)=>{var W=gy(),F=u(W,!0);c(W),C(Q=>$(F,Q),[()=>(o(),l(()=>o()("Delete user")))]),x(U,W)},$$slots:{default:!0}})}c(M);var j=_(M,2);Br(j,{get op(){return S},success:"Deleted."}),c(ge),C(Y=>$(fe,`${Y??""} `),[()=>(o(),l(()=>o()("This will permanently remove user settings, chat logs, uploaded files and other user related data.")))]),wa(oe,()=>a(m).uid,Y=>ze(m,a(m).uid=Y)),rt("submit",K,Qt(ne)),rt("submit",ge,Qt(P)),x(le,ce)},H=le=>{var ce=xy(),K=Ee(ce),oe=u(K),be=u(oe,!0);c(oe);var Ne=_(oe,2);{let $e=Ke(()=>(o(),l(()=>o()("user@example.com"))));At(Ne,{type:"email",name:"email",get placeholder(){return a($e)},get value(){return a(m).email},set value(ue){ze(m,a(m).email=ue)},$$slots:{label:(ue,V)=>{var ye=my(),ve=u(ye,!0);c(ye),C(xe=>$(ve,xe),[()=>(o(),l(()=>o()("User email")))]),x(ue,ye)},help:(ue,V)=>{var ye=by(),ve=u(ye,!0);c(ye),C(xe=>$(ve,xe),[()=>(o(),l(()=>o()("Using this form, you can generate a forgotten password or invite link for a user.")))]),x(ue,ye)}},$$legacy:!0})}var pe=_(Ne,2);{var Se=$e=>{var ue=yy(),V=Ee(ue),ye=u(V,!0);c(V);var ve=_(V,2),xe=u(ve);Bt(xe,()=>(s(),a(p),l(()=>s()(a(p).existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user."))));var de=_(xe,2);Bt(de,()=>(s(),a(p),l(()=>s()("The link is valid until **%1**.",new Date(a(p).expires).toLocaleString())))),c(ve);var Ye=_(ve,2),qe=u(Ye,!0);c(Ye);var Te=_(Ye,2),k=u(Te),L=u(k,!0);c(k),c(Te),C((Ae,Le)=>{$(ye,Ae),Ge(Ye,"href",(a(p),l(()=>a(p).url))),$(qe,(a(p),l(()=>a(p).url))),$(L,Le)},[()=>(o(),l(()=>o()("A link was generated"))),()=>(o(),l(()=>o()("Tip: Clicking on the link will copy it to your clipboard.")))]),rt("click",Ye,Qt(w)),x($e,ue)};ke(pe,$e=>{a(p),l(()=>a(p).url)&&$e(Se)})}var _e=_(pe,2),ge=u(_e);{let $e=Ke(()=>(a(m),l(()=>!a(m).email)));ar(ge,{icon:"save",get op(){return g},get disabled(){return a($e)},children:(ue,V)=>{var ye=wy(),ve=u(ye,!0);c(ye),C(xe=>$(ve,xe),[()=>(o(),l(()=>o()("Generate link")))]),x(ue,ye)},$$slots:{default:!0}})}c(_e);var Ce=_(_e,2);Br(Ce,{get op(){return g},success:"Link generated."}),c(K);var fe=_(K,2),we=u(fe),q=_(we),M=u(q);c(q),c(fe);var R=_(fe,2),j=u(R),Y=u(j),U=u(Y),N=u(U,!0);c(U);var W=_(U),F=u(W,!0);c(W);var Q=_(W),D=u(Q,!0);c(Q),c(Y),c(j);var X=_(j),J=u(X);xo(J,{colspan:"3",get op(){return i()}});var se=_(J);Ar(se,1,()=>a(E),kr,($e,ue)=>{var V=$y(),ye=u(V),ve=u(ye),xe=u(ve,!0);c(ve),c(ye);var de=_(ye),Ye=u(de,!0);c(de);var qe=_(de),Te=u(qe,!0);c(qe),c(V),C((k,L)=>{Ge(ve,"href",`#${a(ue),l(()=>a(ue).uid)??""}`),$(xe,(a(ue),l(()=>a(ue).email))),$(Ye,k),$(Te,L)},[()=>(a(ue),l(()=>a(ue).roles.join(", "))),()=>(Ue(wr),a(ue),l(()=>new wr(a(ue).registered).getHumanDate({year:!0})))]),x($e,V)}),c(X),c(R),C(($e,ue,V,ye,ve)=>{$(be,$e),$(we,`${ue??""} `),$(M,`(${a(E),l(()=>a(E).length)??""})`),$(N,V),$(F,ye),$(D,ve)},[()=>(o(),l(()=>o()("Invite or recover password"))),()=>(o(),l(()=>o()("Users"))),()=>(o(),l(()=>o()("Email"))),()=>(o(),l(()=>o()("Roles"))),()=>(o(),l(()=>o()("Registered")))]),rt("submit",K,Qt(O)),x(le,ce)};ke(te,le=>{a(m),l(()=>a(m).uid)?le(me):le(H,!1)})}c(ie),x(n,ae);var z=Tt(Z);return h(),z}var Sy=A("<h1> </h1>"),ky=A('<tr><td> </td><td><a href="#copy"><!></a></td><td><a target="convos_files_file"> </a></td><td class="text-right"> </td><td class="text-right"><!></td></tr>'),Ay=A('<tr><td colspan="5"> </td></tr>'),Oy=A("<div>&nbsp;</div>"),Cy=A('<span class="disabled"> </span>'),Ty=A('<span class="disabled"> </span>'),Ny=A("<span> </span>"),Ry=A("<p><!></p>"),Py=A('<!> <main class="main"><form method="post"><table><thead><tr><th> </th><th>&nbsp;</th><th> </th><th class="text-right"> </th><th class="text-right"><!></th></tr></thead><tbody><!><!><!><!></tbody></table> <div class="pagination"><!> <!></div> <div class="form-actions"><!></div> <!></form></main>',1);function Sf(n,e){if(new.target)return Nt({component:Sf,...n});Ct(e,!1);const t=()=>Pe(Qe,"$route",d),r=()=>Pe(tr,"$l",d),o=()=>Pe(b,"$getFilesOp",d),s=()=>Pe(p,"$deleteFilesOp",d),i=()=>Pe(cn,"$lmd",d),[d,h]=Gt(),p=qt.op("deleteFiles"),b=qt.op("getFiles"),S=pr("user");let y=Oe(!1),g=Oe(!0),v=Oe([]),f=Oe(""),m=Oe("");function E(J){const se=J.target.closest("tr").querySelector('[target="convos_files_file"]'),$e=Xd({value:se.href});$e&&hr.showInApp($e,{closeAfter:3e3,title:r()("File URL copied")})}async function w(){const J=a(v).filter(se=>se.selected);await p.perform({fid:J.map(se=>se.id).join(","),uid:S.id}),ee(v,a(v).filter(se=>!se.selected)),ee(y,!1),I(),a(v).length===0&&P(Qe)}async function P(J){const se=J.query.after||"";await b.perform({after:se,limit:20}),ee(v,b.res.body.files||[]),ee(y,!1),I(),(a(v).length||!se)&&(ee(f,o().res.body.next&&a(v).slice(-1)[0].id||""),ee(m,o().res.body.prev||""))}function I(){ee(g,!a(v).find(J=>J.selected))}function O(J){ee(v,a(v).map(se=>(se.selected=J,se)))}He(()=>t(),()=>{P(t())}),He(()=>a(y),()=>{O(a(y))}),Wt();var B={$set:It,$on:(J,se)=>Pt(e,J,se)};Rt();var ne=Py(),Z=Ee(ne);Jr(Z,{children:(J,se)=>{var $e=Sy(),ue=u($e,!0);c($e),C(V=>$(ue,V),[()=>(r(),l(()=>r()("Files")))]),x(J,$e)},$$slots:{default:!0}});var ae=_(Z,2),G=u(ae),ie=u(G),te=u(ie),me=u(te),H=u(me),z=u(H,!0);c(H);var le=_(H,2),ce=u(le,!0);c(le);var K=_(le),oe=u(K,!0);c(K);var be=_(K),Ne=u(be);Ht(Ne,{get value(){return a(y)},set value(J){ee(y,J)},$$legacy:!0}),c(be),c(me),c(te);var pe=_(te),Se=u(pe);Ar(Se,1,()=>a(v),kr,(J,se,$e)=>{var ue=ky(),V=u(ue),ye=u(V,!0);c(V);var ve=_(V),xe=u(ve),de=u(xe);Ie(de,{name:"copy"}),c(xe),c(ve);var Ye=_(ve),qe=u(Ye),Te=u(qe,!0);c(qe),c(Ye);var k=_(Ye),L=u(k,!0);c(k);var Ae=_(k),Le=u(Ae);Ht(Le,{get name(){return a(se),l(()=>a(se).id)},get value(){return a(se).selected},set value(je){a(se).selected=je,Np(()=>a(v))},$$legacy:!0}),c(Ae),c(ue),C((je,Be,et)=>{$(ye,je),Ge(qe,"href",Be),$(Te,(a(se),l(()=>a(se).name))),$(L,et)},[()=>(Ue(wr),a(se),l(()=>new wr(a(se).saved).getHumanDate({year:!0}))),()=>(Ue(Qe),a(se),l(()=>Qe.urlFor("/file/"+S.id+"/"+a(se).id))),()=>(Ue(Ua),a(se),l(()=>Ua(a(se).size,"B")))]),rt("click",xe,E),x(J,ue)});var _e=_(Se);{var ge=J=>{var se=Ay(),$e=u(se),ue=u($e,!0);c($e),c(se),C(V=>$(ue,V),[()=>(r(),l(()=>r()("No files.")))]),x(J,se)};ke(_e,J=>{a(v),l(()=>a(v).length===0)&&J(ge)})}var Ce=_(_e);xo(Ce,{colspan:"5",get op(){return p}});var fe=_(Ce);{var we=J=>{xo(J,{colspan:"5",get op(){return b},children:(se,$e)=>{var ue=Oy();x(se,ue)},$$slots:{default:!0}})};ke(fe,J=>{s(),l(()=>!s().is("loading"))&&J(we)})}c(pe),c(ie);var q=_(ie,2),M=u(q);{var R=J=>{_t(J,{get href(){return`/settings/files?after=${a(m)??""}`},children:(se,$e)=>{sn();var ue=fr();C(V=>$(ue,V),[()=>(r(),l(()=>r()("Previous")))]),x(se,ue)},$$slots:{default:!0}})},j=J=>{var se=Cy(),$e=u(se,!0);c(se),C(ue=>$($e,ue),[()=>(r(),l(()=>r()("Previous")))]),x(J,se)};ke(M,J=>{a(m),t(),l(()=>a(m)||t().query.after)?J(R):J(j,!1)})}var Y=_(M,2);{var U=J=>{_t(J,{get href(){return`/settings/files?after=${a(f)??""}`},children:(se,$e)=>{sn();var ue=fr();C(V=>$(ue,V),[()=>(r(),l(()=>r()("Next")))]),x(se,ue)},$$slots:{default:!0}})},N=J=>{var se=Ty(),$e=u(se,!0);c(se),C(ue=>$($e,ue),[()=>(r(),l(()=>r()("Next")))]),x(J,se)};ke(Y,J=>{a(f)?J(U):J(N,!1)})}c(q);var W=_(q,2),F=u(W);ar(F,{icon:"trash",get op(){return p},get disabled(){return a(g)},$$events:{click:w},children:(J,se)=>{var $e=Ny(),ue=u($e,!0);c($e),C(V=>$(ue,V),[()=>(r(),l(()=>r()("Delete selected files")))]),x(J,$e)},$$slots:{default:!0}}),c(W);var Q=_(W,2);{var D=J=>{var se=Ry(),$e=u(se);Bt($e,()=>(i(),l(()=>i()("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")))),c(se),x(J,se)};ke(Q,J=>{a(v),t(),l(()=>a(v).length||t().query.after)&&J(D)})}c(G),c(ae),C((J,se,$e)=>{$(z,J),$(ce,se),$(oe,$e)},[()=>(r(),l(()=>r()("Uploaded"))),()=>(r(),l(()=>r()("Name"))),()=>(r(),l(()=>r()("Size")))]),rt("change",G,I),rt("submit",G,Qt(function(J){ao.call(this,e,J)})),x(n,ne);var X=Tt(B);return h(),X}var Iy=A('<!> <small class="badge is-important"> </small>',1),My=A('<div class="header-wrapper svelte-1kxrp39"><form><input type="text" id="search_input" class="is-primary-menu-item"/> <label for="search_input" class="btn-hallow"><!></label> <!></form></div>'),Ly=A("<!> <span> </span>",1),Dy=A('<!> <span class="name"> </span> <span class="tooltip svelte-1kxrp39"> </span> <span class="badge"> </span>',1),Uy=A('<!> <span class="name"> </span> <span class="tooltip svelte-1kxrp39"> </span> <span> </span>',1),Fy=A('<div class="collapsible svelte-1kxrp39"><!> <!></div>'),By=A('<a href="#toggle"><!> <span> </span></a> <!>',1),qy=A('<!> <span class="name"> </span> <span class="badge"> </span>',1),jy=A('<!> <span class="name"> </span>',1),zy=A('<!> <span class="name"> </span>',1),Hy=A('<!> <span class="name"> </span>',1),Wy=A('<!> <span class="name"> </span>',1),Gy=A('<!> <span class="name"> </span>',1),Ky=A('<!> <span class="name"> </span>',1),Vy=A('<!> <span class="name"> </span>',1),Yy=A("<!> <!>",1),Zy=A('<!> <span class="name"> </span>',1),Jy=A('<div class="collapsible svelte-1kxrp39"><!> <!> <!> <!> <!> <!> <!> <!> <a target="_self" class="svelte-1kxrp39"><!> <span class="name"> </span></a></div>'),Xy=A('<!> <span class="name"> </span>',1),Qy=A('<div class="sidebar-left"><!> <nav><h3> </h3> <!> <!> <h3> </h3> <a href="#toggle"><!> <span> </span></a> <!> <!></nav></div>');function kf(n,e){if(new.target)return Nt({component:kf,...n});Ct(e,!1);const t=()=>Pe(y,"$user",i),r=()=>Pe(Qe,"$route",i),o=()=>Pe(tr,"$l",i),s=()=>Pe(g,"$notifications",i),[i,d]=Gt(),h=Oe(),p=Oe(),b=Oe();let S=Xe(e,"transition",12);const y=pr("user"),g=y.notifications;let v=Oe(0),f=Oe(""),m=Oe(),E=Oe(!1),w=Oe([]),P=Oe(JSON.parse(localStorage.getItem("convos:collapsedStates")||localStorage.getItem("collapsedStates")||"{}"));In(()=>Qe.on("update",U=>U.path&&Ur.set("")));function I(){Cr(a(m),"a",U=>U.classList.remove("has-focus")),setTimeout(()=>{if(!a(m))return;ee(f,"");const U=document.activeElement;U&&bl(U,a(m))&&Cr(a(m),"a.has-path",N=>N.focus())},100)}function O(U,N){const W=[N.conversation_id?"for-conversation":"for-connection"];return(N.frozen||U.state!=="connected")&&W.push("is-frozen"),N.frozen&&W.push("has-tooltip"),W.join(" ")}function B(){if(!a(m))return;ee(v,0),ee(w,[]);const U=[a(f).match(/^\W+/)?"":"\\b\\W*"];U[0]&&U.push("");for(let W=0;W<U.length;W++){const F=a(f)==="+"?new RegExp(/[1-9]\d*\+?\s*$/):a(f)==="+@"?new RegExp(/^\s*\w.*[1-9]\d*\+?\s*$/):a(f)==="+#"?new RegExp(/^\s*#.*[1-9]\d*\+?\s*$/):new RegExp(U[W]+io(a(f)),"i"),Q={};if(Cr(a(m),"a",(D,X)=>{const J=D.classList;!a(f).length&&J.contains("has-path")&&ee(v,X),J.remove("has-focus");const se=!a(f).length||!D.href.match(/\/search$/)&&!Q[D.href]&&D.textContent.match(F);se&&a(w).push(D),D.classList[se?"remove":"add"]("hidden"),Q[D.href]=!0}),a(w).length)break}const N=a(m).querySelector(".for-search");N.classList[a(f)?"remove":"add"]("hidden"),N.classList.contains("hidden")||a(w).push(N),Cr(a(m),"h3",W=>{let F=W;for(;(F=F.nextElementSibling)&&!ql(F,"h3");)if(!F.classList.contains("hidden"))return W.classList.remove("hidden");W.classList.add("hidden")})}function ne(){ee(E,!1),a(f).indexOf("+")!==0&&I()}function Z(){ee(E,!0)}function ae(U){if(U.key=="Enter"){U.preventDefault(),I(),a(w)[a(v)]&&Qe.go(a(w)[a(v)].href);return}const N=U.key=="ArrowUp"?-1:U.key=="ArrowDown"?1:0;N&&(U.preventDefault(),a(w)[a(v)]&&a(w)[a(v)].classList.remove("has-focus"),ee(v,a(v)+(U.ctrlKey?N*4:N))),a(v)<0&&ee(v,a(w).length-1),a(v)>=a(w).length&&ee(v,0)}function G(U,N=60){return U.unread>N?N+"+":U.unread||0}function ie(U){ze(P,a(P)[U]=!a(P)[U]),localStorage.setItem("convos:collapsedStates",JSON.stringify(a(P))),localStorage.removeItem("collapsedStates")}He(()=>a(f),()=>{B({filter:a(f)})}),He(()=>t(),()=>{ee(h,"/settings/conversation?connection_id="+(t().activeConversation.connection_id||""))}),He(()=>a(E),()=>{ee(p,a(E)?0:250)}),He(()=>a(f),()=>{ee(b,a(f).replace(/^\//,""))}),He(()=>(a(m),r()),()=>{a(m)&&I(r())}),He(()=>(a(w),a(v)),()=>{a(w)[a(v)]&&a(w)[a(v)].classList.add("has-focus")}),Wt();var te={get transition(){return S()},set transition(U){S(U),Ze()},$set:It,$on:(U,N)=>Pt(e,U,N)};Rt();var me=Qy(),H=u(me);{var z=U=>{var N=My(),W=u(N);let F;var Q=u(W);ta(Q);var D=_(Q,2),X=u(D);Ie(X,{name:"search"}),c(D);var J=_(D,2);_t(J,{href:"/chat",class:"btn-hallow for-notifications",children:(se,$e)=>{var ue=Iy(),V=Ee(ue);Ie(V,{family:"regular",name:"bell"});var ye=_(V,2),ve=u(ye,!0);c(ye),C(xe=>{Ge(ye,"hidden",(s(),l(()=>!s().unread))),$(ve,xe)},[()=>(s(),l(()=>G(s())))]),x(se,ue)},$$slots:{default:!0}}),c(W),c(N),C(se=>{F=Zt(W,1,"sidebar-header",null,F,{"has-focus":a(E)}),Ge(Q,"placeholder",se)},[()=>(a(E),o(),l(()=>a(E)?o()("Search..."):o()("Convos")))]),wa(Q,()=>a(f),se=>ee(f,se)),rt("blur",Q,ne),rt("focus",Q,Z),rt("keydown",Q,ae),rt("submit",W,se=>se.preventDefault()),x(U,N)};ke(H,U=>{Ue(oa),l(()=>!oa.isSingleColumn)&&U(z)})}var le=_(H,2);let ce;var K=u(le),oe=u(K,!0);c(K);var be=_(K,2);{var Ne=U=>{_t(U,{href:"/settings/connections",children:(N,W)=>{var F=Ly(),Q=Ee(F);Ie(Q,{name:"exclamation-circle"});var D=_(Q,2),X=u(D,!0);c(D),C(J=>$(X,J),[()=>(o(),l(()=>o()("No conversations")))]),x(N,F)},$$slots:{default:!0}})};ke(be,U=>{t(),l(()=>!t().connections.size)&&U(Ne)})}var pe=_(be,2);Ar(pe,1,()=>(t(),l(()=>t().connections.toArray())),kr,(U,N)=>{var W=By(),F=Ee(W);let Q;var D=u(F);Ie(D,{name:"chevron-up"});var X=_(D,2),J=u(X,!0);c(X),c(F);var se=_(F,2);{var $e=ue=>{var V=Fy(),ye=u(V);{let xe=Ke(()=>(a(N),l(()=>O(a(N),a(N)))));_t(ye,{get href(){return a(N),l(()=>a(N).path)},get class(){return a(xe)},children:(de,Ye)=>{var qe=Dy(),Te=Ee(qe);Ie(Te,{name:"network-wired"});var k=_(Te,2),L=u(k,!0);c(k);var Ae=_(k,2),Le=u(Ae,!0);c(Ae);var je=_(Ae,2),Be=u(je,!0);c(je),C((et,ht,lt)=>{$(L,et),$(Le,ht),Ge(je,"hidden",(a(N),l(()=>!a(N).unread))),$(Be,lt)},[()=>(a(f),a(N),o(),l(()=>a(f).length>0?a(N).name:o()("Server"))),()=>(o(),a(N),l(()=>o()(a(N).frozen))),()=>(a(N),l(()=>G(a(N))))]),x(de,qe)},$$slots:{default:!0}})}var ve=_(ye,2);Ar(ve,1,()=>(a(N),l(()=>a(N).conversations.toArray())),kr,(xe,de)=>{{let Ye=Ke(()=>(a(N),a(de),l(()=>O(a(N),a(de)))));_t(xe,{get href(){return a(de),l(()=>a(de).path)},get class(){return a(Ye)},children:(qe,Te)=>{var k=Uy(),L=Ee(k);{var Ae=T=>{Ie(T,{name:"exclamation-triangle"})},Le=T=>{{let re=Ke(()=>(a(de),l(()=>a(de).is("private")?"user":"user-friends")));Ie(T,{get name(){return a(re)}})}};ke(L,T=>{a(de),l(()=>a(de).frozen&&!a(de).is("private"))?T(Ae):T(Le,!1)})}var je=_(L,2),Be=u(je,!0);c(je);var et=_(je,2),ht=u(et,!0);c(et);var lt=_(et,2);let mt;var xt=u(lt,!0);c(lt),C((T,re)=>{$(Be,(a(de),l(()=>a(de).name))),$(ht,T),mt=Zt(lt,1,"badge",null,mt,{"is-important":!!a(de).notifications}),Ge(lt,"hidden",(a(de),l(()=>!a(de).unread))),$(xt,re)},[()=>(o(),a(de),l(()=>o()(a(de).frozen))),()=>(a(de),l(()=>G(a(de))))]),x(qe,k)},$$slots:{default:!0}})}}),c(V),Tr(3,V,()=>$o,()=>({duration:a(p)})),x(ue,V)};ke(se,ue=>{a(P),a(N),a(f),l(()=>!a(P)[a(N).connection_id]||a(f).length)&&ue($e)})}C(()=>{Ge(F,"hidden",(a(f),l(()=>a(f).length>0))),Q=Zt(F,1,"svelte-1kxrp39",null,Q,{collapsed:a(P)[a(N).connection_id]}),$(J,(a(N),l(()=>a(N).name||a(N).connection_id)))}),rt("click",F,Qt(()=>ie(a(N).connection_id))),x(U,W)});var Se=_(pe,2),_e=u(Se,!0);c(Se);var ge=_(Se,2);let Ce;var fe=u(ge);Ie(fe,{name:"chevron-up"});var we=_(fe,2),q=u(we,!0);c(we),c(ge);var M=_(ge,2);{var R=U=>{var N=Jy(),W=u(N);_t(W,{href:"/chat",children:(de,Ye)=>{var qe=qy(),Te=Ee(qe);Ie(Te,{name:"bell"});var k=_(Te,2),L=u(k,!0);c(k);var Ae=_(k,2),Le=u(Ae,!0);c(Ae),C((je,Be)=>{$(L,je),Ge(Ae,"hidden",(s(),l(()=>!s().unread))),$(Le,Be)},[()=>(o(),l(()=>o()("Notifications"))),()=>(s(),l(()=>G(s())))]),x(de,qe)},$$slots:{default:!0}});var F=_(W,2);_t(F,{href:"/search",children:(de,Ye)=>{var qe=jy(),Te=Ee(qe);Ie(Te,{name:"search"});var k=_(Te,2),L=u(k,!0);c(k),C(Ae=>$(L,Ae),[()=>(o(),l(()=>o()("Search")))]),x(de,qe)},$$slots:{default:!0}});var Q=_(F,2);_t(Q,{get href(){return a(h)},children:(de,Ye)=>{var qe=zy(),Te=Ee(qe);Ie(Te,{name:"comment"});var k=_(Te,2),L=u(k,!0);c(k),C(Ae=>$(L,Ae),[()=>(o(),l(()=>o()("Add conversation")))]),x(de,qe)},$$slots:{default:!0}});var D=_(Q,2);_t(D,{href:"/settings/connections",children:(de,Ye)=>{var qe=Hy(),Te=Ee(qe);Ie(Te,{name:"network-wired"});var k=_(Te,2),L=u(k,!0);c(k),C(Ae=>$(L,Ae),[()=>(o(),l(()=>o()("Connections")))]),x(de,qe)},$$slots:{default:!0}});var X=_(D,2);_t(X,{href:"/settings/account",children:(de,Ye)=>{var qe=Wy(),Te=Ee(qe);Ie(Te,{name:"user-cog"});var k=_(Te,2),L=u(k,!0);c(k),C(Ae=>$(L,Ae),[()=>(o(),l(()=>o()("Account")))]),x(de,qe)},$$slots:{default:!0}});var J=_(X,2);_t(J,{href:"/settings/files",children:(de,Ye)=>{var qe=Gy(),Te=Ee(qe);Ie(Te,{name:"folder-open"});var k=_(Te,2),L=u(k,!0);c(k),C(Ae=>$(L,Ae),[()=>(o(),l(()=>o()("Files")))]),x(de,qe)},$$slots:{default:!0}});var se=_(J,2);{var $e=de=>{var Ye=Yy(),qe=Ee(Ye);_t(qe,{href:"/settings",children:(k,L)=>{var Ae=Ky(),Le=Ee(Ae);Ie(Le,{name:"tools"});var je=_(Le,2),Be=u(je,!0);c(je),C(et=>$(Be,et),[()=>(o(),l(()=>o()("Settings")))]),x(k,Ae)},$$slots:{default:!0}});var Te=_(qe,2);_t(Te,{href:"/settings/users",children:(k,L)=>{var Ae=Vy(),Le=Ee(Ae);Ie(Le,{name:"users"});var je=_(Le,2),Be=u(je,!0);c(je),C(et=>$(Be,et),[()=>(o(),l(()=>o()("Users")))]),x(k,Ae)},$$slots:{default:!0}}),x(de,Ye)};ke(se,de=>{t(),l(()=>t().is("admin"))&&de($e)})}var ue=_(se,2);_t(ue,{href:"/help",children:(de,Ye)=>{var qe=Zy(),Te=Ee(qe);Ie(Te,{name:"question-circle"});var k=_(Te,2),L=u(k,!0);c(k),C(Ae=>$(L,Ae),[()=>(o(),l(()=>o()("Help")))]),x(de,qe)},$$slots:{default:!0}});var V=_(ue,2),ye=u(V);Ie(ye,{name:"power-off"});var ve=_(ye,2),xe=u(ve,!0);c(ve),c(V),c(N),C((de,Ye,qe)=>{Ge(V,"href",`${de??""}?csrf=${Ye??""}`),$(xe,qe)},[()=>(Ue(Qe),l(()=>Qe.urlFor("/logout"))),()=>(Ue(dt),l(()=>dt("csrf"))),()=>(o(),l(()=>o()("Log out")))]),Tr(3,N,()=>$o,()=>({duration:a(p)})),x(U,N)};ke(M,U=>{a(P),a(f),l(()=>!a(P).settings&&!a(f).length)&&U(R)})}var j=_(M,2);{let U=Ke(()=>(a(b),l(()=>encodeURIComponent(a(b)))));_t(j,{get href(){return`/search?q=${a(U)??""}`},class:"for-search hidden",children:(N,W)=>{var F=Xy(),Q=Ee(F);Ie(Q,{name:"search"});var D=_(Q,2),X=u(D,!0);c(D),C(J=>$(X,J),[()=>(o(),a(b),l(()=>o()('Search for "%1"',a(b))))]),x(N,F)},$$slots:{default:!0}})}c(le),ms(le,U=>ee(m,U),()=>a(m)),c(me),C((U,N)=>{ce=Zt(le,1,"sidebar-left__nav svelte-1kxrp39",null,ce,{"is-filtering":a(f).length>0}),Ge(K,"hidden",(a(f),l(()=>a(f).length>0))),$(oe,U),Ge(Se,"hidden",(a(f),l(()=>a(f).length>0))),$(_e,N),Ge(ge,"hidden",(a(f),l(()=>a(f).length>0))),Ce=Zt(ge,1,"svelte-1kxrp39",null,Ce,{collapsed:a(P).settings}),$(q,(t(),l(()=>t().email)))},[()=>(o(),l(()=>o()("Conversations"))),()=>(o(),l(()=>o()("Settings")))]),rt("click",ge,Qt(()=>ie("settings"))),Tr(3,me,()=>wo,S),x(n,me);var Y=Tt(te);return d(),Y}class e1 extends Xr{constructor(){super(),this.prop("cookie","activeTheme","convos",{key:"theme"}),this.prop("cookie","colorScheme","auto"),this.prop("cookie","compactDisplay",!1),this.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map(e=>[e.toLowerCase(),e])),this.prop("ro","themeOptions",()=>Array.from(this._stylesheets.entries())),this.prop("rw","osColorScheme",""),this._stylesheets=new Map([])}hasColorScheme(e){return Cr(document,'link[id$="-'+e+'"]').length>1}start(){Cr(document,'link[rel="alternate stylesheet"][title]',t=>{const r=t.title.replace(/\s\([a-z]+\)$/,"");this._stylesheets.set(t.id.replace(/^theme_alt__[a-z]+-/,""),r)});let e=this.osColorScheme;return this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:()=>{}},this._matchMedia.addListener(t=>this.update({osColorScheme:t.matches?"dark":"light"})),e=this._matchMedia.matches?"dark":"light"),this.update({compactDisplay:this.compactDisplay,osColorScheme:e})}update(e){return(e.activeTheme||e.colorScheme||e.osColorScheme)&&this._activateTheme(e),super.update(e)}_activateTheme(e){const t=e.activeTheme||this.activeTheme,r=e.colorScheme||this.colorScheme,o=e.osColorScheme||this.osColorScheme,s=[r==="auto"?o:r,"normal","light"];let i;for(let d=0;d<s.length&&(i=document.getElementById("theme_alt__"+s[d]+"-"+t),!i);d++);Cr(document,'link[rel*="style"][title]',d=>{i||(i=d),d.disabled=!0,d.disabled=d.href!==i.href,d.setAttribute("media",d===i?"":"none"),d.setAttribute("rel",d===i?"stylesheet":"alternate stylesheet")})}}var Ri,mu;function t1(){if(mu)return Ri;mu=1;function n(T){return T instanceof Map?T.clear=T.delete=T.set=function(){throw new Error("map is read-only")}:T instanceof Set&&(T.add=T.clear=T.delete=function(){throw new Error("set is read-only")}),Object.freeze(T),Object.getOwnPropertyNames(T).forEach(re=>{const Re=T[re],Ve=typeof Re;(Ve==="object"||Ve==="function")&&!Object.isFrozen(Re)&&n(Re)}),T}class e{constructor(re){re.data===void 0&&(re.data={}),this.data=re.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(T){return T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(T,...re){const Re=Object.create(null);for(const Ve in T)Re[Ve]=T[Ve];return re.forEach(function(Ve){for(const ot in Ve)Re[ot]=Ve[ot]}),Re}const o="</span>",s=T=>!!T.scope,i=(T,{prefix:re})=>{if(T.startsWith("language:"))return T.replace("language:","language-");if(T.includes(".")){const Re=T.split(".");return[`${re}${Re.shift()}`,...Re.map((Ve,ot)=>`${Ve}${"_".repeat(ot+1)}`)].join(" ")}return`${re}${T}`};class d{constructor(re,Re){this.buffer="",this.classPrefix=Re.classPrefix,re.walk(this)}addText(re){this.buffer+=t(re)}openNode(re){if(!s(re))return;const Re=i(re.scope,{prefix:this.classPrefix});this.span(Re)}closeNode(re){s(re)&&(this.buffer+=o)}value(){return this.buffer}span(re){this.buffer+=`<span class="${re}">`}}const h=(T={})=>{const re={children:[]};return Object.assign(re,T),re};class p{constructor(){this.rootNode=h(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(re){this.top.children.push(re)}openNode(re){const Re=h({scope:re});this.add(Re),this.stack.push(Re)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(re){return this.constructor._walk(re,this.rootNode)}static _walk(re,Re){return typeof Re=="string"?re.addText(Re):Re.children&&(re.openNode(Re),Re.children.forEach(Ve=>this._walk(re,Ve)),re.closeNode(Re)),re}static _collapse(re){typeof re!="string"&&re.children&&(re.children.every(Re=>typeof Re=="string")?re.children=[re.children.join("")]:re.children.forEach(Re=>{p._collapse(Re)}))}}class b extends p{constructor(re){super(),this.options=re}addText(re){re!==""&&this.add(re)}startScope(re){this.openNode(re)}endScope(){this.closeNode()}__addSublanguage(re,Re){const Ve=re.root;Re&&(Ve.scope=`language:${Re}`),this.add(Ve)}toHTML(){return new d(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function S(T){return T?typeof T=="string"?T:T.source:null}function y(T){return f("(?=",T,")")}function g(T){return f("(?:",T,")*")}function v(T){return f("(?:",T,")?")}function f(...T){return T.map(Re=>S(Re)).join("")}function m(T){const re=T[T.length-1];return typeof re=="object"&&re.constructor===Object?(T.splice(T.length-1,1),re):{}}function E(...T){return"("+(m(T).capture?"":"?:")+T.map(Ve=>S(Ve)).join("|")+")"}function w(T){return new RegExp(T.toString()+"|").exec("").length-1}function P(T,re){const Re=T&&T.exec(re);return Re&&Re.index===0}const I=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function O(T,{joinWith:re}){let Re=0;return T.map(Ve=>{Re+=1;const ot=Re;let st=S(Ve),Fe="";for(;st.length>0;){const Me=I.exec(st);if(!Me){Fe+=st;break}Fe+=st.substring(0,Me.index),st=st.substring(Me.index+Me[0].length),Me[0][0]==="\\"&&Me[1]?Fe+="\\"+String(Number(Me[1])+ot):(Fe+=Me[0],Me[0]==="("&&Re++)}return Fe}).map(Ve=>`(${Ve})`).join(re)}const B=/\b\B/,ne="[a-zA-Z]\\w*",Z="[a-zA-Z_]\\w*",ae="\\b\\d+(\\.\\d+)?",G="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",ie="\\b(0b[01]+)",te="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",me=(T={})=>{const re=/^#![ ]*\//;return T.binary&&(T.begin=f(re,/.*\b/,T.binary,/\b.*/)),r({scope:"meta",begin:re,end:/$/,relevance:0,"on:begin":(Re,Ve)=>{Re.index!==0&&Ve.ignoreMatch()}},T)},H={begin:"\\\\[\\s\\S]",relevance:0},z={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[H]},le={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[H]},ce={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},K=function(T,re,Re={}){const Ve=r({scope:"comment",begin:T,end:re,contains:[]},Re);Ve.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const ot=E("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return Ve.contains.push({begin:f(/[ ]+/,"(",ot,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),Ve},oe=K("//","$"),be=K("/\\*","\\*/"),Ne=K("#","$"),pe={scope:"number",begin:ae,relevance:0},Se={scope:"number",begin:G,relevance:0},_e={scope:"number",begin:ie,relevance:0},ge={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[H,{begin:/\[/,end:/\]/,relevance:0,contains:[H]}]},Ce={scope:"title",begin:ne,relevance:0},fe={scope:"title",begin:Z,relevance:0},we={begin:"\\.\\s*"+Z,relevance:0};var M=Object.freeze({__proto__:null,APOS_STRING_MODE:z,BACKSLASH_ESCAPE:H,BINARY_NUMBER_MODE:_e,BINARY_NUMBER_RE:ie,COMMENT:K,C_BLOCK_COMMENT_MODE:be,C_LINE_COMMENT_MODE:oe,C_NUMBER_MODE:Se,C_NUMBER_RE:G,END_SAME_AS_BEGIN:function(T){return Object.assign(T,{"on:begin":(re,Re)=>{Re.data._beginMatch=re[1]},"on:end":(re,Re)=>{Re.data._beginMatch!==re[1]&&Re.ignoreMatch()}})},HASH_COMMENT_MODE:Ne,IDENT_RE:ne,MATCH_NOTHING_RE:B,METHOD_GUARD:we,NUMBER_MODE:pe,NUMBER_RE:ae,PHRASAL_WORDS_MODE:ce,QUOTE_STRING_MODE:le,REGEXP_MODE:ge,RE_STARTERS_RE:te,SHEBANG:me,TITLE_MODE:Ce,UNDERSCORE_IDENT_RE:Z,UNDERSCORE_TITLE_MODE:fe});function R(T,re){T.input[T.index-1]==="."&&re.ignoreMatch()}function j(T,re){T.className!==void 0&&(T.scope=T.className,delete T.className)}function Y(T,re){re&&T.beginKeywords&&(T.begin="\\b("+T.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",T.__beforeBegin=R,T.keywords=T.keywords||T.beginKeywords,delete T.beginKeywords,T.relevance===void 0&&(T.relevance=0))}function U(T,re){Array.isArray(T.illegal)&&(T.illegal=E(...T.illegal))}function N(T,re){if(T.match){if(T.begin||T.end)throw new Error("begin & end are not supported with match");T.begin=T.match,delete T.match}}function W(T,re){T.relevance===void 0&&(T.relevance=1)}const F=(T,re)=>{if(!T.beforeMatch)return;if(T.starts)throw new Error("beforeMatch cannot be used with starts");const Re=Object.assign({},T);Object.keys(T).forEach(Ve=>{delete T[Ve]}),T.keywords=Re.keywords,T.begin=f(Re.beforeMatch,y(Re.begin)),T.starts={relevance:0,contains:[Object.assign(Re,{endsParent:!0})]},T.relevance=0,delete Re.beforeMatch},Q=["of","and","for","in","not","or","if","then","parent","list","value"],D="keyword";function X(T,re,Re=D){const Ve=Object.create(null);return typeof T=="string"?ot(Re,T.split(" ")):Array.isArray(T)?ot(Re,T):Object.keys(T).forEach(function(st){Object.assign(Ve,X(T[st],re,st))}),Ve;function ot(st,Fe){re&&(Fe=Fe.map(Me=>Me.toLowerCase())),Fe.forEach(function(Me){const Je=Me.split("|");Ve[Je[0]]=[st,J(Je[0],Je[1])]})}}function J(T,re){return re?Number(re):se(T)?0:1}function se(T){return Q.includes(T.toLowerCase())}const $e={},ue=T=>{console.error(T)},V=(T,...re)=>{console.log(`WARN: ${T}`,...re)},ye=(T,re)=>{$e[`${T}/${re}`]||(console.log(`Deprecated as of ${T}. ${re}`),$e[`${T}/${re}`]=!0)},ve=new Error;function xe(T,re,{key:Re}){let Ve=0;const ot=T[Re],st={},Fe={};for(let Me=1;Me<=re.length;Me++)Fe[Me+Ve]=ot[Me],st[Me+Ve]=!0,Ve+=w(re[Me-1]);T[Re]=Fe,T[Re]._emit=st,T[Re]._multi=!0}function de(T){if(Array.isArray(T.begin)){if(T.skip||T.excludeBegin||T.returnBegin)throw ue("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ve;if(typeof T.beginScope!="object"||T.beginScope===null)throw ue("beginScope must be object"),ve;xe(T,T.begin,{key:"beginScope"}),T.begin=O(T.begin,{joinWith:""})}}function Ye(T){if(Array.isArray(T.end)){if(T.skip||T.excludeEnd||T.returnEnd)throw ue("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ve;if(typeof T.endScope!="object"||T.endScope===null)throw ue("endScope must be object"),ve;xe(T,T.end,{key:"endScope"}),T.end=O(T.end,{joinWith:""})}}function qe(T){T.scope&&typeof T.scope=="object"&&T.scope!==null&&(T.beginScope=T.scope,delete T.scope)}function Te(T){qe(T),typeof T.beginScope=="string"&&(T.beginScope={_wrap:T.beginScope}),typeof T.endScope=="string"&&(T.endScope={_wrap:T.endScope}),de(T),Ye(T)}function k(T){function re(Fe,Me){return new RegExp(S(Fe),"m"+(T.case_insensitive?"i":"")+(T.unicodeRegex?"u":"")+(Me?"g":""))}class Re{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Me,Je){Je.position=this.position++,this.matchIndexes[this.matchAt]=Je,this.regexes.push([Je,Me]),this.matchAt+=w(Me)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Me=this.regexes.map(Je=>Je[1]);this.matcherRe=re(O(Me,{joinWith:"|"}),!0),this.lastIndex=0}exec(Me){this.matcherRe.lastIndex=this.lastIndex;const Je=this.matcherRe.exec(Me);if(!Je)return null;const St=Je.findIndex((or,er)=>er>0&&or!==void 0),ct=this.matchIndexes[St];return Je.splice(0,St),Object.assign(Je,ct)}}class Ve{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Me){if(this.multiRegexes[Me])return this.multiRegexes[Me];const Je=new Re;return this.rules.slice(Me).forEach(([St,ct])=>Je.addRule(St,ct)),Je.compile(),this.multiRegexes[Me]=Je,Je}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Me,Je){this.rules.push([Me,Je]),Je.type==="begin"&&this.count++}exec(Me){const Je=this.getMatcher(this.regexIndex);Je.lastIndex=this.lastIndex;let St=Je.exec(Me);if(this.resumingScanAtSamePosition()&&!(St&&St.index===this.lastIndex)){const ct=this.getMatcher(0);ct.lastIndex=this.lastIndex+1,St=ct.exec(Me)}return St&&(this.regexIndex+=St.position+1,this.regexIndex===this.count&&this.considerAll()),St}}function ot(Fe){const Me=new Ve;return Fe.contains.forEach(Je=>Me.addRule(Je.begin,{rule:Je,type:"begin"})),Fe.terminatorEnd&&Me.addRule(Fe.terminatorEnd,{type:"end"}),Fe.illegal&&Me.addRule(Fe.illegal,{type:"illegal"}),Me}function st(Fe,Me){const Je=Fe;if(Fe.isCompiled)return Je;[j,N,Te,F].forEach(ct=>ct(Fe,Me)),T.compilerExtensions.forEach(ct=>ct(Fe,Me)),Fe.__beforeBegin=null,[Y,U,W].forEach(ct=>ct(Fe,Me)),Fe.isCompiled=!0;let St=null;return typeof Fe.keywords=="object"&&Fe.keywords.$pattern&&(Fe.keywords=Object.assign({},Fe.keywords),St=Fe.keywords.$pattern,delete Fe.keywords.$pattern),St=St||/\w+/,Fe.keywords&&(Fe.keywords=X(Fe.keywords,T.case_insensitive)),Je.keywordPatternRe=re(St,!0),Me&&(Fe.begin||(Fe.begin=/\B|\b/),Je.beginRe=re(Je.begin),!Fe.end&&!Fe.endsWithParent&&(Fe.end=/\B|\b/),Fe.end&&(Je.endRe=re(Je.end)),Je.terminatorEnd=S(Je.end)||"",Fe.endsWithParent&&Me.terminatorEnd&&(Je.terminatorEnd+=(Fe.end?"|":"")+Me.terminatorEnd)),Fe.illegal&&(Je.illegalRe=re(Fe.illegal)),Fe.contains||(Fe.contains=[]),Fe.contains=[].concat(...Fe.contains.map(function(ct){return Ae(ct==="self"?Fe:ct)})),Fe.contains.forEach(function(ct){st(ct,Je)}),Fe.starts&&st(Fe.starts,Me),Je.matcher=ot(Je),Je}if(T.compilerExtensions||(T.compilerExtensions=[]),T.contains&&T.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return T.classNameAliases=r(T.classNameAliases||{}),st(T)}function L(T){return T?T.endsWithParent||L(T.starts):!1}function Ae(T){return T.variants&&!T.cachedVariants&&(T.cachedVariants=T.variants.map(function(re){return r(T,{variants:null},re)})),T.cachedVariants?T.cachedVariants:L(T)?r(T,{starts:T.starts?r(T.starts):null}):Object.isFrozen(T)?r(T):T}var Le="11.9.0";class je extends Error{constructor(re,Re){super(re),this.name="HTMLInjectionError",this.html=Re}}const Be=t,et=r,ht=Symbol("nomatch"),lt=7,mt=function(T){const re=Object.create(null),Re=Object.create(null),Ve=[];let ot=!0;const st="Could not find the language '{}', did you forget to load/include a language module?",Fe={disableAutodetect:!0,name:"Plain text",contains:[]};let Me={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:b};function Je(De){return Me.noHighlightRe.test(De)}function St(De){let nt=De.className+" ";nt+=De.parentNode?De.parentNode.className:"";const wt=Me.languageDetectRe.exec(nt);if(wt){const jt=nr(wt[1]);return jt||(V(st.replace("{}",wt[1])),V("Falling back to no-highlight mode for this block.",De)),jt?wt[1]:"no-highlight"}return nt.split(/\s+/).find(jt=>Je(jt)||nr(jt))}function ct(De,nt,wt){let jt="",ir="";typeof nt=="object"?(jt=De,wt=nt.ignoreIllegals,ir=nt.language):(ye("10.7.0","highlight(lang, code, ...args) has been deprecated."),ye("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ir=De,jt=nt),wt===void 0&&(wt=!0);const Wr={code:jt,language:ir};Wn("before:highlight",Wr);const gn=Wr.result?Wr.result:or(Wr.language,Wr.code,wt);return gn.code=Wr.code,Wn("after:highlight",gn),gn}function or(De,nt,wt,jt){const ir=Object.create(null);function Wr(We,tt){return We.keywords[tt]}function gn(){if(!ut.keywords){br.addText(Yt);return}let We=0;ut.keywordPatternRe.lastIndex=0;let tt=ut.keywordPatternRe.exec(Yt),gt="";for(;tt;){gt+=Yt.substring(We,tt.index);const Ft=_n.case_insensitive?tt[0].toLowerCase():tt[0],Or=Wr(ut,Ft);if(Or){const[Un,Uf]=Or;if(br.addText(gt),gt="",ir[Ft]=(ir[Ft]||0)+1,ir[Ft]<=lt&&(qo+=Uf),Un.startsWith("_"))gt+=tt[0];else{const Ff=_n.classNameAliases[Un]||Un;Qr(tt[0],Ff)}}else gt+=tt[0];We=ut.keywordPatternRe.lastIndex,tt=ut.keywordPatternRe.exec(Yt)}gt+=Yt.substring(We),br.addText(gt)}function Ta(){if(Yt==="")return;let We=null;if(typeof ut.subLanguage=="string"){if(!re[ut.subLanguage]){br.addText(Yt);return}We=or(ut.subLanguage,Yt,!0,Zl[ut.subLanguage]),Zl[ut.subLanguage]=We._top}else We=Et(Yt,ut.subLanguage.length?ut.subLanguage:null);ut.relevance>0&&(qo+=We.relevance),br.__addSublanguage(We._emitter,We.language)}function Nr(){ut.subLanguage!=null?Ta():gn(),Yt=""}function Qr(We,tt){We!==""&&(br.startScope(tt),br.addText(We),br.endScope())}function Do(We,tt){let gt=1;const Ft=tt.length-1;for(;gt<=Ft;){if(!We._emit[gt]){gt++;continue}const Or=_n.classNameAliases[We[gt]]||We[gt],Un=tt[gt];Or?Qr(Un,Or):(Yt=Un,gn(),Yt=""),gt++}}function Uo(We,tt){return We.scope&&typeof We.scope=="string"&&br.openNode(_n.classNameAliases[We.scope]||We.scope),We.beginScope&&(We.beginScope._wrap?(Qr(Yt,_n.classNameAliases[We.beginScope._wrap]||We.beginScope._wrap),Yt=""):We.beginScope._multi&&(Do(We.beginScope,tt),Yt="")),ut=Object.create(We,{parent:{value:ut}}),ut}function Fo(We,tt,gt){let Ft=P(We.endRe,gt);if(Ft){if(We["on:end"]){const Or=new e(We);We["on:end"](tt,Or),Or.isMatchIgnored&&(Ft=!1)}if(Ft){for(;We.endsParent&&We.parent;)We=We.parent;return We}}if(We.endsWithParent)return Fo(We.parent,tt,gt)}function xs(We){return ut.matcher.regexIndex===0?(Yt+=We[0],1):(Cs=!0,0)}function Es(We){const tt=We[0],gt=We.rule,Ft=new e(gt),Or=[gt.__beforeBegin,gt["on:begin"]];for(const Un of Or)if(Un&&(Un(We,Ft),Ft.isMatchIgnored))return xs(tt);return gt.skip?Yt+=tt:(gt.excludeBegin&&(Yt+=tt),Nr(),!gt.returnBegin&&!gt.excludeBegin&&(Yt=tt)),Uo(gt,We),gt.returnBegin?0:tt.length}function Ss(We){const tt=We[0],gt=nt.substring(We.index),Ft=Fo(ut,We,gt);if(!Ft)return ht;const Or=ut;ut.endScope&&ut.endScope._wrap?(Nr(),Qr(tt,ut.endScope._wrap)):ut.endScope&&ut.endScope._multi?(Nr(),Do(ut.endScope,We)):Or.skip?Yt+=tt:(Or.returnEnd||Or.excludeEnd||(Yt+=tt),Nr(),Or.excludeEnd&&(Yt=tt));do ut.scope&&br.closeNode(),!ut.skip&&!ut.subLanguage&&(qo+=ut.relevance),ut=ut.parent;while(ut!==Ft.parent);return Ft.starts&&Uo(Ft.starts,We),Or.returnEnd?0:tt.length}function ks(){const We=[];for(let tt=ut;tt!==_n;tt=tt.parent)tt.scope&&We.unshift(tt.scope);We.forEach(tt=>br.openNode(tt))}let Na={};function Bo(We,tt){const gt=tt&&tt[0];if(Yt+=We,gt==null)return Nr(),0;if(Na.type==="begin"&&tt.type==="end"&&Na.index===tt.index&&gt===""){if(Yt+=nt.slice(tt.index,tt.index+1),!ot){const Ft=new Error(`0 width match regex (${De})`);throw Ft.languageName=De,Ft.badRule=Na.rule,Ft}return 1}if(Na=tt,tt.type==="begin")return Es(tt);if(tt.type==="illegal"&&!wt){const Ft=new Error('Illegal lexeme "'+gt+'" for mode "'+(ut.scope||"<unnamed>")+'"');throw Ft.mode=ut,Ft}else if(tt.type==="end"){const Ft=Ss(tt);if(Ft!==ht)return Ft}if(tt.type==="illegal"&&gt==="")return 1;if(Os>1e5&&Os>tt.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Yt+=gt,gt.length}const _n=nr(De);if(!_n)throw ue(st.replace("{}",De)),new Error('Unknown language: "'+De+'"');const Df=k(_n);let As="",ut=jt||Df;const Zl={},br=new Me.__emitter(Me);ks();let Yt="",qo=0,ia=0,Os=0,Cs=!1;try{if(_n.__emitTokens)_n.__emitTokens(nt,br);else{for(ut.matcher.considerAll();;){Os++,Cs?Cs=!1:ut.matcher.considerAll(),ut.matcher.lastIndex=ia;const We=ut.matcher.exec(nt);if(!We)break;const tt=nt.substring(ia,We.index),gt=Bo(tt,We);ia=We.index+gt}Bo(nt.substring(ia))}return br.finalize(),As=br.toHTML(),{language:De,value:As,relevance:qo,illegal:!1,_emitter:br,_top:ut}}catch(We){if(We.message&&We.message.includes("Illegal"))return{language:De,value:Be(nt),illegal:!0,relevance:0,_illegalBy:{message:We.message,index:ia,context:nt.slice(ia-100,ia+100),mode:We.mode,resultSoFar:As},_emitter:br};if(ot)return{language:De,value:Be(nt),illegal:!1,relevance:0,errorRaised:We,_emitter:br,_top:ut};throw We}}function er(De){const nt={value:Be(De),illegal:!1,relevance:0,_top:Fe,_emitter:new Me.__emitter(Me)};return nt._emitter.addText(De),nt}function Et(De,nt){nt=nt||Me.languages||Object.keys(re);const wt=er(De),jt=nt.filter(nr).filter(mr).map(Nr=>or(Nr,De,!1));jt.unshift(wt);const ir=jt.sort((Nr,Qr)=>{if(Nr.relevance!==Qr.relevance)return Qr.relevance-Nr.relevance;if(Nr.language&&Qr.language){if(nr(Nr.language).supersetOf===Qr.language)return 1;if(nr(Qr.language).supersetOf===Nr.language)return-1}return 0}),[Wr,gn]=ir,Ta=Wr;return Ta.secondBest=gn,Ta}function bt(De,nt,wt){const jt=nt&&Re[nt]||wt;De.classList.add("hljs"),De.classList.add(`language-${jt}`)}function pt(De){let nt=null;const wt=St(De);if(Je(wt))return;if(Wn("before:highlightElement",{el:De,language:wt}),De.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",De);return}if(De.children.length>0&&(Me.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(De)),Me.throwUnescapedHTML))throw new je("One of your code blocks includes unescaped HTML.",De.innerHTML);nt=De;const jt=nt.textContent,ir=wt?ct(jt,{language:wt,ignoreIllegals:!0}):Et(jt);De.innerHTML=ir.value,De.dataset.highlighted="yes",bt(De,wt,ir.language),De.result={language:ir.language,re:ir.relevance,relevance:ir.relevance},ir.secondBest&&(De.secondBest={language:ir.secondBest.language,relevance:ir.secondBest.relevance}),Wn("after:highlightElement",{el:De,result:ir,text:jt})}function Mt(De){Me=et(Me,De)}const Vt=()=>{ur(),ye("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Ut(){ur(),ye("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let sr=!1;function ur(){if(document.readyState==="loading"){sr=!0;return}document.querySelectorAll(Me.cssSelector).forEach(pt)}function _r(){sr&&ur()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",_r,!1);function rr(De,nt){let wt=null;try{wt=nt(T)}catch(jt){if(ue("Language definition for '{}' could not be registered.".replace("{}",De)),ot)ue(jt);else throw jt;wt=Fe}wt.name||(wt.name=De),re[De]=wt,wt.rawDefinition=nt.bind(null,T),wt.aliases&&Hr(wt.aliases,{languageName:De})}function vr(De){delete re[De];for(const nt of Object.keys(Re))Re[nt]===De&&delete Re[nt]}function Xt(){return Object.keys(re)}function nr(De){return De=(De||"").toLowerCase(),re[De]||re[Re[De]]}function Hr(De,{languageName:nt}){typeof De=="string"&&(De=[De]),De.forEach(wt=>{Re[wt.toLowerCase()]=nt})}function mr(De){const nt=nr(De);return nt&&!nt.disableAutodetect}function Ln(De){De["before:highlightBlock"]&&!De["before:highlightElement"]&&(De["before:highlightElement"]=nt=>{De["before:highlightBlock"](Object.assign({block:nt.el},nt))}),De["after:highlightBlock"]&&!De["after:highlightElement"]&&(De["after:highlightElement"]=nt=>{De["after:highlightBlock"](Object.assign({block:nt.el},nt))})}function Dn(De){Ln(De),Ve.push(De)}function sa(De){const nt=Ve.indexOf(De);nt!==-1&&Ve.splice(nt,1)}function Wn(De,nt){const wt=De;Ve.forEach(function(jt){jt[wt]&&jt[wt](nt)})}function co(De){return ye("10.7.0","highlightBlock will be removed entirely in v12.0"),ye("10.7.0","Please use highlightElement now."),pt(De)}Object.assign(T,{highlight:ct,highlightAuto:Et,highlightAll:ur,highlightElement:pt,highlightBlock:co,configure:Mt,initHighlighting:Vt,initHighlightingOnLoad:Ut,registerLanguage:rr,unregisterLanguage:vr,listLanguages:Xt,getLanguage:nr,registerAliases:Hr,autoDetection:mr,inherit:et,addPlugin:Dn,removePlugin:sa}),T.debugMode=function(){ot=!1},T.safeMode=function(){ot=!0},T.versionString=Le,T.regex={concat:f,lookahead:y,either:E,optional:v,anyNumberOfTimes:g};for(const De in M)typeof M[De]=="object"&&n(M[De]);return Object.assign(T,M),T},xt=mt({});return xt.newInstance=()=>mt({}),Ri=xt,xt.HighlightJS=xt,xt.default=xt,Ri}var r1=t1();const gr=so(r1);function n1(n){n.lineNumbersBlock=function(e,t){n.highlightBlock(e,t),e.innerHTML=u1(e,t)}}var a1="hljs-ln",bu="hljs-ln-line",Af="hljs-ln-code",o1="hljs-ln-numbers",s1="hljs-ln-n",Jo="data-line-number",Of=/\r\n|\r|\n/g;function i1(n){for(var e=n;e;){if(e.className&&e.className.indexOf("hljs-ln-code")!==-1)return!0;e=e.parentNode}return!1}function l1(n){for(var e=n;e.nodeName!=="TABLE";)e=e.parentNode;return e}function c1(n){for(var e=n.toString(),t=n.anchorNode;t.nodeName!=="TD";)t=t.parentNode;for(var r=n.focusNode;r.nodeName!=="TD";)r=r.parentNode;var o=parseInt(t.dataset.lineNumber,10),s=parseInt(r.dataset.lineNumber,10);if(o!==s){var i=t.textContent,d=r.textContent;if(o>s){var h=o;o=s,s=h,h=i,i=d,d=h}for(;e.indexOf(i)!==0;)i=i.slice(1);for(;e.lastIndexOf(d)===-1;)d=d.slice(0,-1);for(var p=i,b=l1(t),S=o+1;S<s;++S){var y=`.${Af}[${Jo}="${S}"]`,g=b.querySelector(y);p+=`
`+g.textContent}return p+=`
`+d,p}else return e}document.addEventListener("copy",function(n){var e=window.getSelection();if(i1(e.anchorNode)){var t;window.navigator.userAgent.indexOf("Edge")!==-1?t=c1(e):t=e.toString(),n.clipboardData.setData("text/plain",t),n.preventDefault()}});function u1(n,e){e=e||{singleLine:!1};var t=e.singleLine?0:1;return Cf(n),d1(n.innerHTML,t)}function d1(n,e){var t=Tf(n);if(t[t.length-1].trim()===""&&t.pop(),t.length>e){for(var r="",o=0,s=t.length;o<s;o++){let i=o+1;r+=`<tr><td class="${bu} ${o1}" ${Jo}="${i}"><div class="${s1}" ${Jo}="${i}"></div></td><td class="${bu} ${Af}" ${Jo}="${i}">`+(t[o].length>0?t[o]:" ")+"</td></tr>"}return`<table class="${a1}">${r}</table>`}return n}function Cf(n){var e=n.childNodes;for(var t in e)if(Object.hasOwn(e,t)){var r=e[t];p1(r.textContent)>0&&(r.childNodes.length>0?Cf(r):f1(r.parentNode))}}function f1(n){var e=n.className;if(/hljs-/.test(e)){for(var t=Tf(n.innerHTML),r=0,o="";r<t.length;r++){var s=t[r].length>0?t[r]:" ";o+=`<span class="${e}">${s}</span>
`}n.innerHTML=o.trim()}}function Tf(n){return n.length===0?[]:n.split(Of)}function p1(n){return(n.trim().match(Of)||[]).length}function v1(n){return{name:"Dockerfile",aliases:["docker"],case_insensitive:!0,keywords:["from","maintainer","expose","env","arg","user","onbuild","stopsignal"],contains:[n.HASH_COMMENT_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}}const yu="[A-Za-z$_][0-9A-Za-z$_]*",h1=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],g1=["true","false","null","undefined","NaN","Infinity"],Nf=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Rf=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Pf=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],_1=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],m1=[].concat(Pf,Nf,Rf);function b1(n){const e=n.regex,t=(K,{after:oe})=>{const be="</"+K[0].slice(1);return K.input.indexOf(be,oe)!==-1},r=yu,o={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(K,oe)=>{const be=K[0].length+K.index,Ne=K.input[be];if(Ne==="<"||Ne===","){oe.ignoreMatch();return}Ne===">"&&(t(K,{after:be})||oe.ignoreMatch());let pe;const Se=K.input.substring(be);if(pe=Se.match(/^\s*=/)){oe.ignoreMatch();return}if((pe=Se.match(/^\s+extends\s+/))&&pe.index===0){oe.ignoreMatch();return}}},d={$pattern:yu,keyword:h1,literal:g1,built_in:m1,"variable.language":_1},h="[0-9](_?[0-9])*",p=`\\.(${h})`,b="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",S={className:"number",variants:[{begin:`(\\b(${b})((${p})|\\.)?|(${p}))[eE][+-]?(${h})\\b`},{begin:`\\b(${b})\\b((${p})\\b|\\.)?|(${p})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},y={className:"subst",begin:"\\$\\{",end:"\\}",keywords:d,contains:[]},g={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,y],subLanguage:"xml"}},v={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,y],subLanguage:"css"}},f={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,y],subLanguage:"graphql"}},m={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,y]},w={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},P=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,g,v,f,m,{match:/\$\d+/},S];y.contains=P.concat({begin:/\{/,end:/\}/,keywords:d,contains:["self"].concat(P)});const I=[].concat(w,y.contains),O=I.concat([{begin:/\(/,end:/\)/,keywords:d,contains:["self"].concat(I)}]),B={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:d,contains:O},ne={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},Z={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Nf,...Rf]}},ae={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},G={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[B],illegal:/%/},ie={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function te(K){return e.concat("(?!",K.join("|"),")")}const me={match:e.concat(/\b/,te([...Pf,"super","import"]),r,e.lookahead(/\(/)),className:"title.function",relevance:0},H={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},z={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},B]},le="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",ce={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(le)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[B]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:d,exports:{PARAMS_CONTAINS:O,CLASS_REFERENCE:Z},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),ae,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,g,v,f,m,w,{match:/\$\d+/},S,Z,{className:"attr",begin:r+e.lookahead(":"),relevance:0},ce,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[w,n.REGEXP_MODE,{className:"function",begin:le,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:d,contains:O}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:s},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},G,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[B,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},H,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[B]},me,ie,ne,z,{match:/\$[(.]/}]}}function y1(n){const e=n.regex,t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},i={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},d=/[A-Za-z][A-Za-z0-9+.-]*/,h={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,d,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},p={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},b={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},S=n.inherit(p,{contains:[]}),y=n.inherit(b,{contains:[]});p.contains.push(y),b.contains.push(S);let g=[t,h];return[p,b,S,y].forEach(m=>{m.contains=m.contains.concat(g)}),g=g.concat(p,b),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:g},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:g}]}]},t,s,p,b,{className:"quote",begin:"^>\\s+",contains:g,end:"$"},o,r,h,i]}}function w1(n){return{name:"Mojolicious",subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}}function $1(n){const e=n.regex,t=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:t.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},i={begin:/->\{/,end:/\}/},d={variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},h=[n.BACKSLASH_ESCAPE,s,d],p=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],b=(g,v,f="\\1")=>{const m=f==="\\1"?f:e.concat(f,v);return e.concat(e.concat("(?:",g,")"),v,/(?:\\.|[^\\\/])*?/,m,/(?:\\.|[^\\\/])*?/,f,r)},S=(g,v,f)=>e.concat(e.concat("(?:",g,")"),v,/(?:\\.|[^\\\/])*?/,f,r),y=[d,n.HASH_COMMENT_MODE,n.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),i,{className:"string",contains:h,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:b("s|tr|y",e.either(...p,{capture:!0}))},{begin:b("s|tr|y","\\(","\\)")},{begin:b("s|tr|y","\\[","\\]")},{begin:b("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:S("(?:m|qr)?",/\//,/\//)},{begin:S("m|qr",e.either(...p,{capture:!0}),/\1/)},{begin:S("m|qr",/\(/,/\)/)},{begin:S("m|qr",/\[/,/\]/)},{begin:S("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=y,i.contains=y,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:y}}const x1=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),E1=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],S1=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],k1=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],A1=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],O1=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function C1(n){const e=x1(n),t=A1,r=k1,o="@[a-z-]+",s="and or not only",d={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+E1.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+t.join("|")+")"},d,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+O1.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,d,e.HEXCOLOR,e.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:o,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:S1.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},d,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function T1(n){const e=n.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},i=n.inherit(s,{begin:/\(/,end:/\)/}),d=n.inherit(n.APOS_STRING_MODE,{className:"string"}),h=n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),p={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,h,d,i,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,i,h,d]}]}]},n.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[h]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[p],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[p],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:p}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function N1(n){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:n.C_NUMBER_RE+"[i]",relevance:1},n.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function R1(n){const e=n.regex,t={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:e.concat(/[$@]/,n.UNDERSCORE_IDENT_RE)}]},o={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[n.HASH_COMMENT_MODE,{className:"string",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[t]},{className:"regexp",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},t]};return{name:"Nginx config",aliases:["nginxconf"],contains:[n.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:o.contains,keywords:{section:"upstream location"}},{className:"section",begin:e.concat(n.UNDERSCORE_IDENT_RE+e.lookahead(/\s+\{/)),relevance:0},{begin:e.lookahead(n.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:n.UNDERSCORE_IDENT_RE,starts:o}],relevance:0}],illegal:"[^\\s\\}\\{]"}}function P1(n){const e=n.regex,t=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],d={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},h={className:"meta",begin:/^(>>>|\.\.\.) /},p={className:"subst",begin:/\{/,end:/\}/,keywords:d,illegal:/#/},b={begin:/\{\{/,relevance:0},S={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,h],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,h],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,h,b,p]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,h,b,p]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,b,p]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,b,p]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},y="[0-9](_?[0-9])*",g=`(\\b(${y}))?\\.(${y})|\\b(${y})\\.`,v=`\\b|${r.join("|")}`,f={className:"number",relevance:0,variants:[{begin:`(\\b(${y})|(${g}))[eE][+-]?(${y})[jJ]?(?=${v})`},{begin:`(${g})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${v})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${v})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${v})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${v})`},{begin:`\\b(${y})[jJ](?=${v})`}]},m={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:d,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},E={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:d,contains:["self",h,f,S,n.HASH_COMMENT_MODE]}]};return p.contains=[S,f,h],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:d,illegal:/(<\/|\?)|=>/,contains:[h,f,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},S,m,n.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[E]},{variants:[{match:[/\bclass/,/\s+/,t,/\s*/,/\(\s*/,t,/\s*\)/]},{match:[/\bclass/,/\s+/,t]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[f,E,S]}]}}function I1(n){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}const M1=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),L1=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],D1=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],U1=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],F1=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],B1=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function q1(n){const e=n.regex,t=M1(n),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},o="and or not only",s=/@-?\w[\w]*(-\w+)*/,i="[a-zA-Z-][a-zA-Z0-9_-]*",d=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,r,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+i,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+U1.join("|")+")"},{begin:":(:)?("+F1.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+B1.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...d,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...d,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:D1.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...d,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+L1.join("|")+")\\b"}]}}function j1(n){const e=n.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function z1(n){const e=n.regex,t="HTTP/([32]|1\\.[01])",r=/[A-Za-z][A-Za-z0-9-]*/,o={className:"attribute",begin:e.concat("^",r,"(?=\\:\\s)"),starts:{contains:[{className:"punctuation",begin:/: /,relevance:0,starts:{end:"$",relevance:0}}]}},s=[o,{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}];return{name:"HTTP",aliases:["https"],illegal:/\S/,contains:[{begin:"^(?="+t+" \\d{3})",end:/$/,contains:[{className:"meta",begin:t},{className:"number",begin:"\\b\\d{3}\\b"}],starts:{end:/\b\B/,illegal:/\S/,contains:s}},{begin:"(?=^[A-Z]+ (.*?) "+t+"$)",end:/$/,contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{className:"meta",begin:t},{className:"keyword",begin:"[A-Z]+"}],starts:{end:/\b\B/,illegal:/\S/,contains:s}},n.inherit(o,{relevance:0})]}}function H1(n){const e="true false yes no null",t="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,o]},i=n.inherit(s,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),S={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},y={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},g={begin:/\{/,end:/\}/,contains:[y],illegal:"\\n",relevance:0},v={begin:"\\[",end:"\\]",contains:[y],illegal:"\\n",relevance:0},f=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+t},{className:"type",begin:"!<"+t+">"},{className:"type",begin:"!"+t},{className:"type",begin:"!!"+t},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},S,{className:"number",begin:n.C_NUMBER_RE+"\\b",relevance:0},g,v,s],m=[...f];return m.pop(),m.push(i),y.contains=m,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:f}}gr.registerLanguage("css",q1);gr.registerLanguage("diff",j1);gr.registerLanguage("dockerfile",v1);gr.registerLanguage("go",N1);gr.registerLanguage("http",z1);gr.registerLanguage("javascript",b1);gr.registerLanguage("markdown",y1);gr.registerLanguage("mojolicious",w1);gr.registerLanguage("nginx",R1);gr.registerLanguage("perl",$1);gr.registerLanguage("python",P1);gr.registerLanguage("scss",C1);gr.registerLanguage("shell",I1);gr.registerLanguage("xml",T1);gr.registerLanguage("yaml",H1);n1(gr);var Pi={exports:{}},wu;function W1(){if(wu)return Pi.exports;wu=1;function n(e){let t=document.createElement("div");const r=[[e,t]],o=[];for(;r.length;){const[s,i]=r.shift();let d,h,p=typeof s;if(s===null||p=="undefined"?p="null":Array.isArray(s)&&(p="array"),p=="array")h=b=>b,h.len=s.length,d=document.createElement("div"),d.className="json-array "+(h.len?"has-items":"is-empty");else if(p=="object"){const b=Object.keys(s).sort();h=S=>b[S],h.len=b.length,d=document.createElement("div"),d.className="json-object "+(h.len?"has-items":"is-empty")}else d=document.createElement("span"),d.className="json-"+p,d.textContent=p=="null"?"null":p!="boolean"?s:s?"true":"false";if(h){const b=document.createElement("span");if(b.className="json-type",b.textContent=h.len?p+"["+h.len+"]":"{}",i.appendChild(b),o.indexOf(s)!=-1)t.classList.add("has-recursive-items"),d.classList.add("is-seen");else{for(let S=0;S<h.len;S++){const y=h(S),g=document.createElement("div"),v=document.createElement("span");v.className="json-key",v.textContent=y,g.appendChild(v),d.appendChild(g),r.push([s[y],g])}o.push(s)}}i.className="json-item "+d.className.replace(/^json-/,"contains-"),i.appendChild(d)}return t}try{Pi.exports={jsonhtmlify:n}}catch{window.jsonhtmlify=n}return Pi.exports}var G1=W1();function $u(n,e){const t=e.vars?Lt.l(e.message,...e.vars):e.message;return n?Lt.raw(t):Lt.md(t)}const K1={};let V1=0;class Y1 extends Xr{constructor(e){super();let t=e.connection_id;e.conversation_id&&(t+=":"+e.conversation_id),this.prop("ro","length",()=>this.messages.length),this.prop("ro","messages",[]),this.prop("rw","expandUrlToMedia",!0),this.prop("persist","raw",!1,{key:t+":raw"}),this.embedCache=K1}clear(){return this.messages.length=0,this.update({messages:!0})}get(e){return e<0?this.messages.slice(e)[0]:this.messages[e]}push(e){return[].push.apply(this.messages,this._fill(e)),this.update({messages:!0})}render(e=-1){if(e!==-1){const r=this.get(e);return r&&!r.hasBeenSeen&&(r.embeds=this._embeds(r),r.hasBeenSeen=!0,this.update({messages:!0})),this.messages}let t={};return this.messages.map((r,o)=>(r.index=o,r.embeds||(r.dayChanged=this._dayChanged(r,t),r.className=this._className(r,t),r.embeds=[],r.html=$u(this.raw,r)),t=r))}toArray(){return this.messages}update(e){const t=this._changed(e,"expandUrlToMedia")||this._changed(e,"raw");if(super.update(e),t)for(let r of this.messages)r.embeds=r.hasBeenSeen?this._embeds(r):[],r.html=$u(this.raw,r);return this}unshift(e){return[].unshift.apply(this.messages,this._fill(e)),this.update({messages:!0})}_changed(e,t){return Object.hasOwn(e,t)&&e[t]!==this[t]}_className(e,t){const r=["message"];e.type&&r.push("is-type-"+e.type),e.highlight&&r.push("is-highlighted");const o=e.from===t.from&&e.conversation_id===t.conversation_id&&e.connection_id===t.connection_id;return r.push(!e.dayChanged&&o?"has-same-from":"has-not-same-from"),r.join(" ")}_dayChanged(e,t){return!!(t.ts&&e.ts.getDate()!==t.ts.getDate())}_embeds(e){const t=[];return this._msgDetails(e)&&t.push(Promise.resolve({className:"le-details",details:!0,nodes:[G1.jsonhtmlify(e.details).lastChild]})),!this.expandUrlToMedia||this.raw||e.type==="notice"?this._embedsPromises(t):((e.message.match(/https?:\/\/(\S+)/g)||[]).forEach(r=>{r=r.replace(/(\W)?$/,""),this.embedCache[r]||(this.embedCache[r]=this._loadEmbed(e,r)),t.push(this.embedCache[r])}),this._embedsPromises(t))}_embedsPromises(e){return e.map(t=>(t.finally(()=>this.update({messages:!0})),t.catch(r=>console.error("[Messages:embed]",r))))}_fill(e){for(let t=0;t<e.length;t++){const r=e[t];r.from||([r.internal,r.from]=[!0,"Convos"]),r.type||(r.type="notice"),r.color=r.from==="Convos"?"inherit":es(r.from.toLowerCase()),r.ts=new wr(r.ts),r.id=++V1}return e}_isProbablyConvosVideoLink(e){return!!e.match(/\/video\/[^/]+\/[^/]+($|\?)/)}async _loadEmbed(e,t){const o=(await qt.op("embed",{url:t}).perform()).res.body;if(o.nodes=[],o.provider=(o.provider_name||"").toLowerCase(),!o.html)return o;let s=document.createRange().createContextualFragment(o.html).firstChild;return s&&(s=this._renderVideoChat(e,o,s)||this._renderPaste(e,o,s)||s,Cr(s,"img",["error",i=>i.target.style.display="none"]),Cr(s,".le-goto-link",i=>i.parentNode.children.length===1&&i.parentNode.remove()),delete o.html,o.className=s.className,o.nodes=s.tagName.toLowerCase()==="iframe"?[s]:[].slice.call(s.childNodes,0)),o}_msgDetails(e){if(Object.hasOwn(e,"details"))return e.details;if(e.type!=="error"&&e.type!=="notice")return e.details=null;const t={...e.sent||e};return["bubbles","className","command","connection_id","dispatchTo","color","dayChanged","hasBeenSeen","embeds","event","fresh","highlight","html","id","index","internal","method","silent","stopPropagation","ts"].forEach(r=>delete t[r]),Object.keys(t).sort().join(":")==="from:message:type"?e.details=null:e.details=t}_renderPaste(e,t,r){const o=r.querySelector("pre");if(!o)return;const s=r.querySelector(".le-meta");return s&&s.appendChild(Qd("a",{className:"prevent-default",href:"#action:expand:"+e.index,innerHTML:'<i class="fas fa-angle-down"/>'})),gr.lineNumbersBlock(o),r}_renderVideoChat(e,t,r){const o=new URL(t.url).pathname.replace(/\/+$/,"").split("/");if(!(o.length&&(r.classList.contains("le-video-chat")||this._isProbablyConvosVideoLink(t.url))))return;const d=decodeURIComponent(o.slice(-1)[0]).replace(/\s-\s[\w-]+$/,"").replace(/[_.-]+/g," ").replace(/([a-z ])([A-Z])/g,(p,b,S)=>b+" "+S.toUpperCase()).replace(/((?:^|[ ])\w)/g,p=>p.toUpperCase()),h=Lt.l('Do you want to join the %1 video chat with "%2"?',t.provider_name,d);return r=document.createElement("div"),r.className="le-card le-rich le-join-request le-provider-"+t.provider,r.innerHTML='<a class="le-thumbnail" href="'+t.url+'" target="convos_video"><i class="fas fa-video"></i></a><h3>'+h+'</h3><p class="le-description"><a href="'+t.url+'" target="convos_video">'+Lt.l("Yes, I want to join.")+"</a></p>",e.fresh&&this.emit("notify",{...e,message:h}),r}}class Z1 extends Xr{constructor(){super(),this.prop("ro","length",()=>this._map.size),this.prop("ro","_map",new Map)}clear(){const e=this.me();return this._map.clear(),this.add(e),this}delete(e){return this._map.delete(this._id(e)),this.update({})}get(e){return this._map.get(this._id(e))}has(e){return this._map.has(this._id(e))}me(){return Array.from(this._map.values()).filter(e=>e.me)[0]||this._defaultParticipant()}nicks(){return Array.from(this._map.values()).map(e=>e.nick)}rename(e,t){const r=this.get(e)||{};return delete r.id,r.nick=t,this.delete(e),this.add(r)}add(e){if(Array.isArray(e))return e.forEach(r=>this.add(r)),this;e.id=this._id(e.nick),e.color=es(e.id),e.group=es(e.id),at.string(e.mode)?(e.modes=ml(Lg,e.mode),e.group=e.modes.founder?7:e.modes.admin?6:e.modes.operator?5:e.modes.half_operator?4:e.modes.voice?3:e.modes.bot?2:e.modes.service_bot?1:0):(e.modes={},e.group=0);const t=this._map.get(e.id);return t&&Object.keys(t).forEach(r=>e[r]||(e[r]=t[r])),e.nick||(e.nick=e.name),this._map.set(e.id,e),this.update({length:!0})}toArray(){return Array.from(this._map.values()).sort((e,t)=>t.group-e.group||e.nick.localeCompare(t.nick))}_defaultParticipant(){return{color:"#000000",id:"",modes:{},nick:""}}_id(e){return e.toLowerCase()}}const Ma=oo("socket"),Xa=n=>Xa.singletons[n]||(Xa.singletons[n]=new J1);Xa.singletons={};const Lo=[];Lo[WebSocket.CONNECTING]="connecting";Lo[WebSocket.OPEN]="open";Lo[WebSocket.CLOSING]="closing";Lo[WebSocket.CLOSED]="closed";class J1 extends Xr{constructor(){super(),this.prop("ro","readyState",()=>this.ws.readyState),this.prop("ro","readyStateHuman",()=>Lo[this.ws.readyState]),this.prop("ro","waiting",new Map),this.prop("rw","closed",0),this.prop("rw","error",""),this.prop("rw","keepaliveInterval",1e4),this.prop("rw","url",""),this.id=0,this.queue=[],this.keepClosed=!0,this._resetWebSocket()}close(e,t){return typeof e!="number"&&([e,t]=[1e3,e]),this.ws.close&&this.ws.close(e,t),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}deflateMessage(e){return JSON.stringify(e)}deleteWaitingMessage(e){this.waiting.delete(e),this.update({waiting:!0})}getWaitingMessages(e){return arguments.length===0?Array.from(this.waiting.values()):e.map(t=>this.waiting.get(t))}inflateMessage(e){return JSON.parse(e)}is(e){return this.ws.readyState===WebSocket[e.toUpperCase()]}open(){if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=e=>this._onClose(e),this.ws.onerror=e=>this._onError(e),this.ws.onmessage=e=>this._onMessage(e),this.ws.onopen=e=>this._onOpen(e),this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(e){this._onError(e.message?e:{message:String(e)})}return this}reconnectIn(e){return e.code===1008||e.code===1011?!1:this.closed<=1?1e3:this.closed>5?1e4:1e3*(this.closed*2)}send(e,t){const r=e.id||String(++this.id);return this.queue.push({...e,id:r}),this.open(),this._dequeue(),t&&this.on("message_"+r,t),this}_dequeue(){const e=this.queue;for(e.length&&this.update({waiting:!0});e.length;){if(this.ws.readyState!==WebSocket.OPEN)return;const t=e.shift();Ma.trace("<<<",t),this.ws.send(this.deflateMessage(t)),t.waitingForResponse=!0,t.ts||(t.ts=new wr),this.waiting.set(t.id,t)}}_keepAliveStart(){this._keepAliveStop(),this.keepaliveTid=setInterval(()=>this.ws.readyState===WebSocket.OPEN&&this.ws.send("{}"),this.keepaliveInterval)}_keepAliveStop(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}_onClose(e){Ma.debug("close",e);for(let[t,r]of this.waiting)Object.keys(r).length<=1&&this.waiting.delete(t),r.waitingForResponse=!1;this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(e))}_onError(e){let t=String(e.message||e);(!t||t.indexOf("[")===0)&&(t="Could not connect."),Ma.error("error",t,e),this.update({error:t})}_onMessage(e){const t=this.inflateMessage(e.data);if(Ma.trace(">>>",t),t.bubbles=!0,t.stopPropagation=()=>{t.bubbles=!1},t.id&&(this.emit("message_"+t.id,t),this.waiting.delete(t.id)),t.bubbles&&this.emit("message",t),this.update({waiting:!0}),!(!t.errors||t.id)){for(let r of this.waiting.keys())this.emit("message_"+r,t);this.waiting.clear()}}_onOpen(e){Ma.info("open",e),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}_reconnectStart(e){if(this._reconnectStop(),Ma.info("reconnect in",e),e===!0)return this.open();if(typeof e!="number")return this.keepClosed=!0;this.reconnectTid=setTimeout(()=>this.open(),e)}_reconnectStop(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}_resetWebSocket(){this.ws={readyState:WebSocket.CLOSED}}}const X1=new RegExp("^[#&]");class Eo extends Xr{constructor(e){super();const t=[e.connection_id,e.conversation_id,""].filter(at.defined).join(":");this.prop("persist","userInput","",{key:t+"userInput"}),this.prop("ro","color",es(e.conversation_id||e.connection_id||"")),this.prop("ro","connection_id",e.connection_id||""),this.prop("ro","messages",new Y1(e)),this.prop("ro","participants",new Z1),this.prop("ro","path",Qe.conversationPath(e)),this.prop("rw","historyStartAt",null),this.prop("rw","historyStopAt",null),this.prop("rw","info",e.info||{}),this.prop("rw","modes",{}),this.prop("rw","name",e.name||e.conversation_id||e.connection_id||"ERR"),this.prop("rw","notifications",e.notifications||0),this.prop("rw","status","pending"),this.prop("rw","topic",e.topic||""),this.prop("rw","unread",e.unread||0),Object.hasOwn(e,"conversation_id")?(this.prop("ro","conversation_id",e.conversation_id),this.prop("ro","title",()=>[this.name,this.connection_id.replace(/^\w+-/,"")].join(" - ")),this.prop("rw","frozen",e.frozen||"")):(this.prop("ro","frozen",()=>this._calculateFrozen()),this.prop("ro","title",()=>this.name)),e.conversation_id&&this.prop("persist","wantNotifications",this.is("private"),{key:e.conversation_id+":wantNotifications"}),this.socket=e.socket||Xa("/events"),this.messages.on("notify",r=>this.notify(r)),this._addOperations()}addMessages(e,t){if(!Array.isArray(e)){if(this._maybeIncreaseUnread(e),this._maybeNotify(e),!this.historyStopAt&&["action","private"].indexOf(e.type)!==-1)return;e.fresh=!0,e=[e]}return this.messages[t||"push"](e),this}is(e){return e==="connection"?!this.conversation_id:e==="conversation"?this.conversation_id&&!this.is("notifications"):e==="frozen"?this.frozen&&!0:e==="locked"?this.frozen==="Invalid password.":e==="not_found"?this.frozen==="Not found.":e==="notifications"?!1:e==="pending"?this.frozen.match(/pending invitation/i):e==="private"?this.conversation_id&&!X1.test(this.conversation_id)||!1:e==="search"?!1:e==="unread"?this.unread&&!0:this.status===e}async load(e={}){if(this._skipLoad(e))return this;this.update({status:"loading"}),e.limit||(e.limit=40);const t={...e,connection_id:this.connection_id,conversation_id:this.conversation_id};await this.messagesOp.perform(t),this.update({status:this.messagesOp.status});const r=this.messagesOp.res.body;r.messages||(r.messages=[]);const o=[];return(e.around||!e.after&&!e.before)&&(o.push.apply(o,this.messages.toArray().filter(s=>s.internal)),this.messages.clear()),this.addMessages(r.messages,e.before?"unshift":"push"),this.addMessages(o,"push"),this._setEndOfStream(e,r),this}notify(e){if(hr.appHasFocus)return;const t=e.from===this.name?e.from:Lt.l("%1 in %2",e.from,this.name);this.lastNotification=hr.show(e.message,{path:this.path,title:t})}send(e,t){return at.string(e)&&(e={message:e}),this.socket.send({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||"",...e},t)}async markAsRead(){if(this.markAsReadOp)return this.update({notifications:0}),await this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id}),this}update(e){return this._loadInformation(),super.update(e),(Object.hasOwn(e,"notifications")||Object.hasOwn(e,"unread"))&&this.emit("unread",e),this}wsEventMode(e){const t=["banlist","exceptlist","invitelist","quietlist"].filter(r=>e[r])[0];if(t){const r=e[t].length,o=r===1?"entry":"entries";this.addMessages({...e,message:"%1 has %2 "+o+" in %3.",vars:[this.name,r,Lt.l(t)]})}else e.nick?(this.participants.add({nick:e.nick,mode:e.mode}),this.addMessages({...e,message:"%1 got mode %2 from %3.",vars:[e.nick,e.mode,e.from]})):e.mode_changed?(this.addMessages({...e,message:"%1 received mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,ml(Fa,e.mode))})):(this.addMessages({...e,message:"%1 got mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,ml(Fa,e.mode))}))}wsEventNickChange(e){if(!this.participants.has(e.old_nick)||e.old_nick===e.new_nick)return;this.participants.rename(e.old_nick,e.new_nick);const t=e.type==="me"?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessages({message:t,vars:[e.old_nick,e.new_nick]})}wsEventPart(e){const t=this.participants.get(e.nick);!t||t.me||(this.participants.delete(e.nick),this.update({participants:!0}),e.silent||this.addMessages(this._partMessage(e)))}wsEventSentClear(e){e.errors||(this.messages.clear(),this.addMessages({message:"History was cleared for %1.",vars:[this.name]}))}wsEventSentNames(e){this.participants.add(e.participants);const t={...e,message:"Participants (%1): %2",vars:[]},r=this.participants.nicks();r.length>1&&(t.message+=" and %3.",t.vars[2]=r.pop()),t.vars[0]=r.length,t.vars[1]=r.join(", "),this.addMessages(t)}wsEventSentTopic(e){const t=e.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessages({message:t,vars:[this.name,e.topic]}),this.update({topic:e.topic})}_addOperations(){this.prop("ro","messagesOp",qt.op("conversationMessages")),this.prop("ro","markAsReadOp",qt.op("markConversationAsRead"))}_calculateFrozen(){return""}_loadInformation(){if(!(this.participantsLoaded||!this.conversation_id||!this.messagesOp)&&!(this.is("frozen")||!this.messagesOp.is("success")))if(this.participantsLoaded=!0,this.is("private")){if(this.info.ts&&this.info.ts>new wr().toEpoch()-300)return;this.send("/whois "+this.conversation_id,e=>{e.stopPropagation(),this.update({frozen:e.errors&&e.errors.length?e.errors[0].message:""})})}else this.send("/names "+this.conversation_id,e=>{e.stopPropagation(),this.participants.clear(),e.participants&&this.participants.add(e.participants)})}_maybeIncreaseUnread(e){if(!e.from||e.yourself)return this;if(["action","error","private"].indexOf(e.type)===-1)return this;this.update({unread:this.unread+1})}_maybeNotify(e){!e.from||e.yourself||["action","error","private"].indexOf(e.type)!==-1&&(!e.highlight&&!this.wantNotifications||this.notify(e))}_noop(){}_partMessage(e){const t={message:"%1 parted.",vars:[e.nick]};return e.kicker?(t.message="%1 was kicked by %2"+(e.message?": %3":""),t.vars.push(e.kicker),t.vars.push(e.message)):e.message&&(t.message+=" Reason: %2",t.vars.push(e.message)),t}_setEndOfStream(e,t){if(!e.before&&!t.after){const r=t.messages.slice(-1)[0];this.update({historyStopAt:new wr(r&&r.ts)})}if(!e.after&&!t.before){const r=t.messages[0];this.update({historyStartAt:new wr(r&&r.ts)})}t.after&&this.update({historyStopAt:null}),t.before&&this.update({historyStartAt:null}),t.messages&&t.messages.length<=1&&this.update({historyStartAt:new wr,historyStopAt:new wr})}_skipLoad(e){return!this.messagesOp||this.is("loading")?!0:this.messages.length?e.around?!!this.messages.toArray().find(t=>t.ts.toISOString()===e.around):!!(e.before&&this.historyStartAt||e.after&&this.historyStopAt):this.is("success")}}const Q1=(n,e)=>n.name.localeCompare(e.name);class If extends Map{constructor(e=[],t={}){super(e),this.sorter=t.sorter||Q1,this._sort()}filter(e){return Array.from(this.values()).filter(e)}set(e,t){super.set.call(this,e,t),this._sort()}toArray(){return Array.from(this.values())}_sort(){const e=Array.from(this.entries()),t=this.sorter;return this.clear(),e.sort((r,o)=>t(r[1],o[1])).forEach(([r,o])=>super.set.call(this,r,o)),e}}const ew=(n,e)=>n.is("private")-e.is("private")||n.name.localeCompare(e.name);class xu extends Eo{constructor(e){super(e),this.prop("rw","certificate",{}),this.prop("ro","conversations",new If([],{sorter:ew})),this.prop("rw","on_connect_commands",e.on_connect_commands||[]),this.prop("rw","state",e.state||"disconnected"),this.prop("rw","wanted_state",e.wanted_state||"connected"),this.prop("rw","url",at.string(e.url)?new ra(e.url):e.url||new ra("irc://localhost"));const t=this.url.searchParams.get("nick")||"guest";this.prop("rw","nick",t),this.prop("rw","real_host",this.url.hostname),this.prop("rw","server_op",!1),e.info&&this.wsEventInfo(e.info)}ensureConversation(e){let t=this.conversations.get(e.conversation_id);return t?t.update(e):(!e.frozen&&this.frozen&&(e.frozen=this.frozen),t=new Eo({...e,connection_id:this.connection_id}),t.on("message",r=>this.emit("message",r)),t.on("update",()=>this.update({conversations:!0})),t.on("unread",()=>this.emit("unread")),e.frozen||this._addDefaultParticipants(t),this.conversations.set(t.conversation_id,t),this.update({conversations:!0}),this.emit("conversationadd",t),t)}findConversation(e){return this.conversations.get(e.conversation_id)||null}is(e){return this.state===e||super.is(e)}removeConversation(e){const t=this.findConversation(e)||e;return this.conversations.delete(t.conversation_id),this.emit("conversationremove",t),this.update({conversations:!0})}send(e){at.string(e)&&(e={message:e});const t=new RegExp("^"+this.participants.toArray().map(r=>io(r.id)).join("|")+":","i");return e.message.indexOf("/")!==0&&!e.message.match(t)&&(e.message="/quote "+e.message),super.send(e)}update(e){return e.url&&at.string(e.url)&&(e.url=new ra(e.url)),super.update(e)}wsEventSentAway(e){(this.findConversation(e)||this).addMessages({message:e.reason,sent:e,type:"notice"})}wsEventConnection(e){this.update({state:e.state})}wsEventFrozen(e){const t=this.findConversation(e),r=t&&t.frozen,o=this.ensureConversation(e);!e.frozen&&r&&t.addMessages({message:"Connected.",vars:[]}),e.frozen||o.participants.add({nick:this.nick,me:!0}),e.frozen&&o.is("pending")&&hr.show(e.frozen,{title:e.name})}wsEventInfo(e){e.nick&&this.wsEventNickChange(e),e.server_op&&this.addMessages({message:"You are an IRC operator.",vars:[],highlight:!0}),e.real_host&&this.participants.add({nick:e.real_host}),this.update(e)}wsEventMessage(e){return e.yourself=e.from===this.nick,e.conversation_id?this.ensureConversation(e).addMessages(e):this.addMessages(e)}wsEventNickChange(e){const t={old_nick:e.old_nick||this.nick,new_nick:e.new_nick||e.nick,type:e.type};e.old_nick===this.nick&&(t.me=!0),super.wsEventNickChange(t),this.conversations.forEach(r=>r.wsEventNickChange(t))}wsEventError(e){const t={message:Fl(e)||e.frozen||"Unknown error from %1.",sent:e,type:"error",vars:e.command||[e.message]},r=(e.message||"").match(/^\/j(oin)? (\S+)/);if(r)return this.ensureConversation({...e,conversation_id:r[2]});const o=e.conversation_id&&e.frozen?this.ensureConversation(e):this.findConversation(e)||this;console.error(o.conversation_id,t),o.addMessages(t)}wsEventJoin(e){const t=this.ensureConversation({connection_id:e.connection_id,conversation_id:e.conversation_id}),r=e.nick||this.nick;r!==this.nick&&!e.silent&&t.addMessages({message:"%1 joined.",vars:[r]}),t.participants.add({nick:r})}wsEventPart(e){if(e.nick===this.nick)return this.removeConversation(e);e.conversation_id||this.conversations.forEach(t=>t.wsEventPart(e))}wsEventQuit(e){this.wsEventPart(e)}wsEventSentJoin(e){this.wsEventJoin(e)}wsEventSentList(e){const t=e.args||"/*/";this.addMessages(e.done?{message:"Found %1 of %2 conversations from %3.",vars:[e.conversations.length,e.n_conversations,t]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[e.conversations.length,e.n_conversations,t]})}wsEventSentMode(e){const t=this.findConversation(e);return t?t.wsEventMode(e):this.addMessages({message:"%1 received mode %2.",vars:[e.target,e.mode]})}wsEventSentQuery(e){this.ensureConversation(e)}wsEventSentWhois(e){const[t,...r]=yl(e);(this.findConversation(e)||this).addMessages({message:t,vars:r,sent:e})}wsEventSentNames(){}_addDefaultParticipants(e){const t=[{nick:this.nick,me:!0}];e.is("private")&&t.push({nick:e.name}),e.participants.add(t)}_addOperations(){this.prop("ro","markAsReadOp",qt.op("markConnectionAsRead")),this.prop("ro","messagesOp",qt.op("connectionMessages"))}_calculateFrozen(){switch(this.state){case"connected":return"";case"connecting":return"Connecting...";case"disconnected":return"Disconnected.";case"disconnecting":return"Disconnecting...";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}class tw extends Xr{constructor(e){super(e),this.prop("ro","op",qt.op("listConnectionProfiles")),this.prop("rw","profiles",[]),this.prop("rw","status","pending")}find(e){return this.search(t=>t.id===e)[0]}defaultProfile(){return{conversation_id:"",host:"",is_default:!1,is_forced:!0,max_bulk_message_size:3,max_message_length:512,service_accounts:"chanserv, nickserv",skip_queue:!1,tls:!0,tls_verify:!0,webirc_password:"",url:new ra("irc://0.0.0.0")}}is(e){return this.status===e}async load(e={}){return this.is("loading")?this:!e.force&&this.profiles.length?this:(this.update({status:"loading"}),await this.op.perform(),this.update({status:this.op.status}),this.is("success")&&this.update({profiles:this.op.res.body.profiles.map(t=>this._expand(t))}),this)}search(e=()=>!0){return this.profiles.filter(e)}_expand(e){e.url=new ra(e.url),e.service_accounts=e.service_accounts.join(", "),e.url.toFields(e);const t=this.defaultProfile();return Object.keys(t).forEach(r=>Object.hasOwn(e,r)||(e[r]=t[r])),e}}class rw extends Eo{constructor(e){super({...e,connection_id:"",conversation_id:"notifications",name:"Notifications"})}addMessages(e){return Array.isArray(e)||(e=[e]),this.messages.push(e),this}async markAsRead(){return await super.markAsRead(),this.emit("cleared"),this}is(e){return e==="notifications"?!0:super.is(e)}send(e={}){return Promise.resolve(e)}_addOperations(){this.prop("ro","markAsReadOp",qt.op("markNotificationsAsRead")),this.prop("ro","messagesOp",qt.op("notificationMessages"))}_skipLoad(){return!1}}class nw extends Eo{constructor(e){super({...e,connection_id:"",conversation_id:"search",name:"Search"}),this.prop("rw","query",""),this.update({status:"success"})}is(e){return e==="conversation"?!1:e==="search"?!0:super.is(e)}async load(e={}){if(this.is("loading"))return this;const t={...e};if(t.match=e.match||e.message,!(t.match||"").match(/\S/))return this.messages.clear().push([{message:'Search query "%1" does not contain anything to search for.',vars:[e.message]}]);this.update({query:t.match,status:"loading"}),this.messages.clear(),await this.messagesOp.perform(t);const r=this.messagesOp.res.body;return this.messages[t.before?"unshift":"push"](r.messages||[]),this.update({status:this.messagesOp.status})}send(e){return at.string(e)&&(e={message:e}),this.emit("send",e),Promise.resolve(e)}_addOperations(){this.prop("ro","messagesOp",qt.op("searchMessages")),this.prop("ro","markAsReadOp",null)}_loadInformation(){}}var Ii,Eu;function aw(){if(Eu)return Ii;Eu=1;function n(e,t,r){var o=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++o<s;)i[o]=e[o+t];return i}return Ii=n,Ii}var Mi,Su;function ow(){if(Su)return Mi;Su=1;var n=aw();function e(t,r,o){var s=t.length;return o=o===void 0?s:o,!r&&o>=s?t:n(t,r,o)}return Mi=e,Mi}var Li,ku;function Mf(){if(ku)return Li;ku=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=e+t+r,s="\\ufe0e\\ufe0f",i="\\u200d",d=RegExp("["+i+n+o+s+"]");function h(p){return d.test(p)}return Li=h,Li}var Di,Au;function sw(){if(Au)return Di;Au=1;function n(e){return e.split("")}return Di=n,Di}var Ui,Ou;function iw(){if(Ou)return Ui;Ou=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=e+t+r,s="\\ufe0e\\ufe0f",i="["+n+"]",d="["+o+"]",h="\\ud83c[\\udffb-\\udfff]",p="(?:"+d+"|"+h+")",b="[^"+n+"]",S="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",v=p+"?",f="["+s+"]?",m="(?:"+g+"(?:"+[b,S,y].join("|")+")"+f+v+")*",E=f+v+m,w="(?:"+[b+d+"?",d,S,y,i].join("|")+")",P=RegExp(h+"(?="+h+")|"+w+E,"g");function I(O){return O.match(P)||[]}return Ui=I,Ui}var Fi,Cu;function lw(){if(Cu)return Fi;Cu=1;var n=sw(),e=Mf(),t=iw();function r(o){return e(o)?t(o):n(o)}return Fi=r,Fi}var Bi,Tu;function cw(){if(Tu)return Bi;Tu=1;var n=ow(),e=Mf(),t=lw(),r=Io();function o(s){return function(i){i=r(i);var d=e(i)?t(i):void 0,h=d?d[0]:i.charAt(0),p=d?n(d,1).join(""):i.slice(1);return h[s]()+p}}return Bi=o,Bi}var qi,Nu;function uw(){if(Nu)return qi;Nu=1;var n=cw(),e=n("toUpperCase");return qi=e,qi}var ji,Ru;function dw(){if(Ru)return ji;Ru=1;var n=Io(),e=uw();function t(r){return e(n(r).toLowerCase())}return ji=t,ji}var zi,Pu;function fw(){if(Pu)return zi;Pu=1;function n(e,t,r,o){var s=-1,i=e==null?0:e.length;for(o&&i&&(r=e[++s]);++s<i;)r=t(r,e[s],s,e);return r}return zi=n,zi}var Hi,Iu;function pw(){if(Iu)return Hi;Iu=1;function n(e){return function(t){return e==null?void 0:e[t]}}return Hi=n,Hi}var Wi,Mu;function vw(){if(Mu)return Wi;Mu=1;var n=pw(),e={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},t=n(e);return Wi=t,Wi}var Gi,Lu;function hw(){if(Lu)return Gi;Lu=1;var n=vw(),e=Io(),t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,r="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",i=r+o+s,d="["+i+"]",h=RegExp(d,"g");function p(b){return b=e(b),b&&b.replace(t,n).replace(h,"")}return Gi=p,Gi}var Ki,Du;function gw(){if(Du)return Ki;Du=1;var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function e(t){return t.match(n)||[]}return Ki=e,Ki}var Vi,Uu;function _w(){if(Uu)return Vi;Uu=1;var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function e(t){return n.test(t)}return Vi=e,Vi}var Yi,Fu;function mw(){if(Fu)return Yi;Fu=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=e+t+r,s="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",d="\\xac\\xb1\\xd7\\xf7",h="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",p="\\u2000-\\u206f",b=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",S="A-Z\\xc0-\\xd6\\xd8-\\xde",y="\\ufe0e\\ufe0f",g=d+h+p+b,v="['â]",f="["+g+"]",m="["+o+"]",E="\\d+",w="["+s+"]",P="["+i+"]",I="[^"+n+g+E+s+i+S+"]",O="\\ud83c[\\udffb-\\udfff]",B="(?:"+m+"|"+O+")",ne="[^"+n+"]",Z="(?:\\ud83c[\\udde6-\\uddff]){2}",ae="[\\ud800-\\udbff][\\udc00-\\udfff]",G="["+S+"]",ie="\\u200d",te="(?:"+P+"|"+I+")",me="(?:"+G+"|"+I+")",H="(?:"+v+"(?:d|ll|m|re|s|t|ve))?",z="(?:"+v+"(?:D|LL|M|RE|S|T|VE))?",le=B+"?",ce="["+y+"]?",K="(?:"+ie+"(?:"+[ne,Z,ae].join("|")+")"+ce+le+")*",oe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",be="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ne=ce+le+K,pe="(?:"+[w,Z,ae].join("|")+")"+Ne,Se=RegExp([G+"?"+P+"+"+H+"(?="+[f,G,"$"].join("|")+")",me+"+"+z+"(?="+[f,G+te,"$"].join("|")+")",G+"?"+te+"+"+H,G+"+"+z,be,oe,E,pe].join("|"),"g");function _e(ge){return ge.match(Se)||[]}return Yi=_e,Yi}var Zi,Bu;function bw(){if(Bu)return Zi;Bu=1;var n=gw(),e=_w(),t=Io(),r=mw();function o(s,i,d){return s=t(s),i=d?void 0:i,i===void 0?e(s)?r(s):n(s):s.match(i)||[]}return Zi=o,Zi}var Ji,qu;function yw(){if(qu)return Ji;qu=1;var n=fw(),e=hw(),t=bw(),r="['â]",o=RegExp(r,"g");function s(i){return function(d){return n(t(e(d).replace(o,"")),i,"")}}return Ji=s,Ji}var Xi,ju;function ww(){if(ju)return Xi;ju=1;var n=dw(),e=yw(),t=e(function(r,o,s){return o=o.toLowerCase(),r+(s?n(o):o)});return Xi=t,Xi}var $w=ww();const xw=so($w);class Ew extends Xr{constructor(e){super(),this.prop("ro","connections",new If),this.prop("ro","connectionProfiles",new tw),this.prop("ro","notifications",new rw({})),this.prop("ro","search",new nw({})),this.prop("ro","roles",new Set),this.prop("persist","expandUrlToMedia",!0),this.prop("persist","ignoreStatuses",!1),this.prop("persist","lastUrl",""),this.prop("rw","activeConversation",this.notifications),this.prop("rw","avatarId",null),this.prop("rw","email",""),this.prop("rw","forced_connection",!1),this.prop("rw","default_connection","irc://irc.libera.chat:6697/%23convos"),this.prop("rw","highlightKeywords",[]),this.prop("rw","id",""),this.prop("rw","status","pending"),this.prop("rw","unreadIncludePrivateMessages",!1),this.socket=e.socket||Xa("/events"),this.socket.on("message",t=>this._dispatchMessage(t)),this.socket.on("update",t=>this._onConnectionChange(t)),this.notifications.on("cleared",()=>this._calculateUnread("clear")),this._calculateUnreadDebounced=Yl(this._calculateUnread,25)}conversations(e){const t=[];return this.connections.toArray().forEach(r=>{r.conversations.toArray().forEach(o=>{(!e||e(o))&&t.push(o)})}),t}ensureConversation(e,t){if(e.conversation_id){const o=this.ensureConversation({connection_id:e.connection_id},!0);return this._maybeUpgradeActiveConversation(o.ensureConversation(e))}let r=this.findConversation(e);return r?r.update(e):(r=new xu({...e}),r.on("conversationadd",o=>this._maybeUpgradeActiveConversation(o)),r.on("conversationremove",o=>o===this.activeConversation&&this.setActiveConversation(o)),r.on("update",()=>this.update({connections:!0})),r.on("unread",()=>this._calculateUnreadDebounced()),this.connections.set(r.connection_id,r),this.update({connections:!0}),t?r:this._maybeUpgradeActiveConversation(r))}findConversation(e){const t=this.connections.get(e.connection_id);return e.conversation_id?t&&t.findConversation(e)||null:t}is(e){return Array.isArray(e)?!!e.filter(t=>this.is(t)).length:this.roles.has(e)?!0:this.status===e}async load(){if(this.is("loading"))return this;this.roles.clear(),this.update({status:"loading"});const t=await new Promise(o=>this.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}},o));if(t.errors)return this.update({email:"",roles:!0,status:t.errors?"error":"success"});const r=t.user||{};return this.connections.clear(),(r.connections||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(r.conversations||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(r.roles||[]).forEach(o=>this.roles.add(o)),this.notifications.update({unread:r.unread||0}),ts.fromString(r.video_service||""),this.update({avatarId:Object.hasOwn(r,"avatar_id")?r.avatar_id:null,email:r.email||"",default_connection:r.default_connection||"",forced_connection:r.forced_connection||!1,highlightKeywords:r.highlight_keywords||[],roles:!0,status:t.errors?"error":"success",id:r.uid||""})}removeConversation(e){const t=this.findConversation({connection_id:e.connection_id});if(e.conversation_id)return t&&t.removeConversation(e);this.connections.delete(e.connection_id),t===this.activeConversation&&this.setActiveConversation(t),this.update({connections:!0})}setActiveConversation(e){let t=!e.connection_id&&!e.conversation_id&&this.notifications;if(t)return this.update({activeConversation:t});if(t=this.findConversation(e),t)return this.update({activeConversation:t});const r={...e,connection_id:e.connection_id||"",frozen:"Not found."};return["conversation_id","name"].forEach(o=>Object.hasOwn(e,o)&&(r[o]=e[o])),this.update({activeConversation:r.conversation_id?new Eo(r):new xu(r)})}update(e){return super.update(e),Object.hasOwn(e,"unreadIncludePrivateMessages")&&this._calculateUnreadDebounced(),this}_calculateUnread(e){let[t,r]=[0,0];for(const o of this.connections.toArray())for(const s of o.conversations.toArray())e&&s.update({notifications:0}),t+=s.is("private")?this.unreadIncludePrivateMessages?s.unread:0:s.notifications,r+=s.is("private")?0:s.notifications;e||(this.notifications.update({notifications:t,unread:r}),this.update({notifications:!0}))}_dispatchMessage(e){e.dispatchTo=xw("wsEvent_"+this._getEventNameFromMessage(e)),e.silent=this.ignoreStatuses,this.emit(e.dispatchTo,e);const t=this.findConversation({connection_id:e.connection_id});if(!t||(t[e.dispatchTo]&&t[e.dispatchTo](e),!e.bubbles))return;const r=t.findConversation(e);r&&(r[e.dispatchTo]&&r[e.dispatchTo](e),e.highlight&&!r.is("private")&&(this.notifications.addMessages(e),r===this.activeConversation&&hr.appHasFocus?r.markAsRead():r.update({notifications:r.notifications+1})))}_getEventNameFromMessage(e){return e.errors?"error":e.event==="state"?e.type:e.event==="sent"&&e.message.match(/\/\S+/)?(e.command=e.message.split(/\s+/).filter(t=>t.length),e.command[0]=e.command[0].substring(1),"sent_"+e.command[0].toLowerCase()):e.event}_maybeUpgradeActiveConversation(e){const t=this.activeConversation;return!e.conversation_id||e.connection_id&&e.connection_id!==t.connection_id||e.conversation_id&&e.conversation_id!==t.conversation_id||this.update({activeConversation:e}),e}_onConnectionChange(e){if(e.is("open")&&this.is("pending"))return this.load();e.is("closed")&&(this.connections.forEach(t=>t.update({state:"unreachable"})),this.is(["error","loading"])||this.update({status:"pending"}))}}var Sw=A('<a href="#hide" class="overlay">&nbsp;</a>'),kw=A("<!> <!> <!>",1);function Lf(n,e){if(new.target)return Nt({component:Lf,...n});Ct(e,!1);const t=()=>Pe(b,"$themeManager",d),r=()=>Pe(Qe,"$route",d),o=()=>Pe(S,"$user",d),s=()=>Pe(oa,"$viewport",d),i=()=>Pe(Ur,"$activeMenu",d),[d,h]=Gt(),p=Xa("/events"),b=new e1().start(),S=new Ew({});let y=Qe.path,g=Oe(0),v={closed:!0},f=Oe(Lt.l("Chat"));p.update({debug:"WebSocket"}),window.convosWebSockeet=p,qt.url(Qe.urlFor("/api")),Qe.update({baseUrl:dt("base_url"),enabled:!0}),p.update({url:Qe.wsUrlFor("/events")}),S.on("wsEventSentJoin",G=>Qe.go(Qe.conversationPath(G))),E().catch(G=>console.error("[serviceWorker]",G)),Ns("socket",p),Ns("themeManager",b),Ns("user",S),hr.on("click",G=>G.path&&Qe.go(G.path)),p.on("update",P),Lt.load().then(()=>S.load());function m(G,ie){if(!document)return;const te=dt("organization_name"),me=ie.notifications.notifications?"("+ie.notifications.notifications+") ":"";document.title=te==="Convos"?Lt.l("%1 - Convos",me+Lt.l(G)):Lt.l("%1 - Convos for %2",me+Lt.l(G),te)}async function E(){if(!navigator.serviceWorker)return{};const G=await navigator.serviceWorker.register(Qe.urlFor("/sw.js")),ie=await fetch(Qe.urlFor("/sw/info")),te=ie.status==200&&await ie.json()||{mode:"",version:"0.00"};if(te.version==dt("version"))return{};console.info("[serviceWorker.update]",dt("version"),te),G.update()}async function w(G,ie){ie.email&&Lt.emojis.load(),Ba[ie.email?"add":"remove"]("notify"),await yo();const te=ie.is(["loading","pending"])||document.querySelector(".cms-main")?"cms":"app";if(document.body.className=document.body.className.replace(/for-\w+/,"for-"+te),y!==G.path&&(y=G.path,Zd(Ur,"")),G.pathParts.length===0){const me=ie.email?ie.lastUrl||"/chat":"/login";G.go(me,{replace:!0})}else ie.email&&ie.update({lastUrl:location.href})}function P(G){if(G.is("open"))return v.close&&v.close();const ie=navigator.onLine===!1?Lt.l("You seem to be offline."):G.error?Lt.l(G.error):G.is("connecting")?Lt.l("Connecting to Convos..."):Lt.l("Connection to Convos is %1.",Lt.l(G.readyStateHuman));v.body!==ie&&(v.close&&v.close(),v=hr.showInApp(ie,{closeAfter:-1,title:Lt.l("Status")}))}He(()=>t(),()=>{Ba[t().compactDisplay?"add":"remove"]("compact-display")}),He(()=>(r(),o()),()=>{w(r(),o())}),He(()=>(a(f),o()),()=>{m(a(f),o())}),He(()=>a(g),()=>{oa.setWidth(a(g))}),He(()=>s(),()=>{S.update({unreadIncludePrivateMessages:s().isSingleColumn})}),Wt();var I={$set:It,$on:(G,ie)=>Pt(e,G,ie)};Rt();var O=vt();rt("focus",_o,()=>S.email&&p.open());var B=Ee(O);{var ne=G=>{wl(G,{})},Z=G=>{var ie=vt(),te=Ee(ie);{var me=z=>{var le=kw(),ce=Ee(le);{var K=_e=>{{let ge=Ke(()=>(s(),a(g),l(()=>({duration:s().isSingleColumn?250:0,x:a(g)}))));kf(_e,{get transition(){return a(ge)}})}};ke(ce,_e=>{i(),s(),l(()=>i()==="nav"||!s().isSingleColumn)&&_e(K)})}var oe=_(ce,2);{var be=_e=>{vf(_e,{get connection_id(){return r(),l(()=>r().pathParts[1])},get conversation_id(){return r(),l(()=>r().pathParts[2])},get title(){return a(f)},set title(ge){ee(f,ge)},$$legacy:!0})},Ne=_e=>{var ge=vt(),Ce=Ee(ge);{var fe=q=>{yf(q,{get title(){return a(f)},set title(M){ee(f,M)},$$legacy:!0})},we=q=>{var M=vt(),R=Ee(M);{var j=U=>{bf(U,{get title(){return a(f)},set title(N){ee(f,N)},$$legacy:!0})},Y=U=>{var N=vt(),W=Ee(N);{var F=D=>{wf(D,{get title(){return a(f)},set title(X){ee(f,X)},$$legacy:!0})},Q=D=>{var X=vt(),J=Ee(X);{var se=ue=>{xf(ue,{get title(){return a(f)},set title(V){ee(f,V)},$$legacy:!0})},$e=ue=>{var V=vt(),ye=Ee(V);{var ve=de=>{$f(de,{get title(){return a(f)},set title(Ye){ee(f,Ye)},$$legacy:!0})},xe=de=>{var Ye=vt(),qe=Ee(Ye);{var Te=L=>{hf(L,{get title(){return a(f)},set title(Ae){ee(f,Ae)},$$legacy:!0})},k=L=>{var Ae=vt(),Le=Ee(Ae);{var je=et=>{Sf(et,{get title(){return a(f)},set title(ht){ee(f,ht)},$$legacy:!0})},Be=et=>{var ht=vt(),lt=Ee(ht);{var mt=T=>{_f(T,{get connection_id(){return r(),l(()=>r().pathParts[2])},get title(){return a(f)},set title(re){ee(f,re)},$$legacy:!0})},xt=T=>{var re=vt(),Re=Ee(re);{var Ve=st=>{gf(st,{get profile_id(){return r(),l(()=>r().pathParts[2])},get title(){return a(f)},set title(Fe){ee(f,Fe)},$$legacy:!0})},ot=st=>{var Fe=vt(),Me=Ee(Fe);{var Je=ct=>{mf(ct,{get title(){return a(f)},set title(or){ee(f,or)},$$legacy:!0})},St=ct=>{var or=vt(),er=Ee(or);{var Et=pt=>{Ef(pt,{get title(){return a(f)},set title(Mt){ee(f,Mt)},$$legacy:!0})},bt=pt=>{var Mt=vt(),Vt=Ee(Mt);{var Ut=ur=>{$l(ur,{get title(){return a(f)},set title(_r){ee(f,_r)},$$legacy:!0})},sr=ur=>{wl(ur,{get title(){return a(f)},set title(_r){ee(f,_r)},$$legacy:!0})};ke(Vt,ur=>{r(),l(()=>r().path==="/login"||r().path==="/register")?ur(Ut):ur(sr,!1)},!0)}x(pt,Mt)};ke(er,pt=>{r(),l(()=>r().path==="/settings/users")?pt(Et):pt(bt,!1)},!0)}x(ct,or)};ke(Me,ct=>{r(),l(()=>r().path==="/settings/conversation")?ct(Je):ct(St,!1)},!0)}x(st,Fe)};ke(Re,st=>{r(),l(()=>r().path.indexOf("/settings/connection-profile/")===0)?st(Ve):st(ot,!1)},!0)}x(T,re)};ke(lt,T=>{r(),l(()=>r().path.indexOf("/settings/connection/")===0)?T(mt):T(xt,!1)},!0)}x(et,ht)};ke(Le,et=>{r(),l(()=>r().path==="/settings/files")?et(je):et(Be,!1)},!0)}x(L,Ae)};ke(qe,L=>{r(),l(()=>r().path==="/settings/connections")?L(Te):L(k,!1)},!0)}x(de,Ye)};ke(ye,de=>{r(),l(()=>r().path==="/settings/account")?de(ve):de(xe,!1)},!0)}x(ue,V)};ke(J,ue=>{r(),l(()=>r().path==="/settings")?ue(se):ue($e,!1)},!0)}x(D,X)};ke(W,D=>{r(),l(()=>r().path==="/search")?D(F):D(Q,!1)},!0)}x(U,N)};ke(R,U=>{r(),l(()=>r().path==="/help")?U(j):U(Y,!1)},!0)}x(q,M)};ke(Ce,q=>{r(),l(()=>r().path.indexOf("/chat")===0)?q(fe):q(we,!1)},!0)}x(_e,ge)};ke(oe,_e=>{r(),l(()=>r().path.match(/\/chat\/./))?_e(be):_e(Ne,!1)})}var pe=_(oe,2);{var Se=_e=>{var ge=Sw();Tr(3,ge,()=>Ja,()=>({duration:200})),rt("click",ge,()=>Ur.set("")),x(_e,ge)};ke(pe,_e=>{i(),s(),l(()=>i()&&s().haSingleColumn)&&_e(Se)})}x(z,le)},H=z=>{$l(z,{get title(){return a(f)},set title(le){ee(f,le)},$$legacy:!0})};ke(te,z=>{o(),l(()=>o().email)?z(me):z(H,!1)},!0)}x(G,ie)};ke(B,G=>{o(),l(()=>o().is(["loading","pending"]))?G(ne):G(Z,!1)})}_v("innerWidth",G=>ee(g,G)),x(n,O);var ae=Tt(I);return h(),ae}class Aw extends Xr{constructor(e){super(),this.prop("ro","domain",e.domain||"meet.jit.si"),this.prop("ro","email",e.email||""),this.prop("rw","nick",e.nick||""),this.prop("rw","roomName",e.roomName||"convos-default"),this.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),this.prop("persist","disableH264",!0,{key:"video:disableH264"}),this.prop("persist","resolution",720,{key:"video:resolution"})}async render(e){try{const t=[].slice.call(e.children,0);this.targetEl=e,this.jitsi=await this._load(),t.forEach(r=>r.remove()),e.className=e.className.replace(/cms-main/,"video-chat--wrapper"),document.querySelector(".cms-navbar").classList.add("is-full-width")}catch(t){console.error("[Jitsi]",{err:t});const r=document.querySelector(".video-error");r.querySelector("span").textContent=String(t).substring(0,350),r.classList.remove("hidden"),Cr(document,".cms-main .fa-spin",o=>o.parentNode.classList.add("hidden"))}return this.jitsi?(document.addEventListener("keydown",t=>{t.code==="KeyC"&&this.jitsi.executeCommand("toggleChat"),t.code==="KeyD"&&this.jitsi.executeCommand("toggleShareScreen"),t.code==="KeyF"&&this.jitsi.executeCommand("toggleFilmStrip"),t.code==="KeyM"&&this.jitsi.executeCommand("toggleAudio"),t.code==="KeyR"&&this.jitsi.executeCommand("toggleRaiseHand"),t.code==="KeyV"&&this.jitsi.executeCommand("toggleVideo"),t.code==="KeyW"&&this.jitsi.executeCommand("toggleTileView"),t.code==="Space"&&this.jitsi.isAudioMuted().then(r=>r&&this.jitsi.executeCommand("toggleAudio"))}),document.addEventListener("keyup",t=>{t.code==="Space"&&this.jitsi.isAudioMuted().then(r=>r||this.jitsi.executeCommand("toggleAudio"))}),this):this}_configOverwrite(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}_interfaceConfigOverwrite(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar--wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}async _load(){return await Lv("https://"+this.domain+"/external_api.js"),new JitsiMeetExternalAPI(this.domain,this._options())}_options(){const e={};return this.email&&(e.email=this.email),this.nick&&(e.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:e,height:"100%",width:"100%"}}}Cr(document,"#hamburger_checkbox_toggle",n=>{n.checked=!1});Cr(document,".js-close-window",n=>{n.addEventListener("click",e=>{window.opener&&(e.preventDefault(),setTimeout(()=>window.close(),1),window.opener.focus())})});if(document.querySelector('meta[name="convos:start_app"][content="chat"]'))document.querySelector(".footer--wrapper").remove(),document.querySelector(".cms-main").remove(),new Lf({target:document.body});else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer--wrapper").remove();const n=document.querySelector(".cms-main");new Aw(n.dataset).render(n)}else document.addEventListener("DOMContentLoaded",function(){Cr(document,"pre",n=>gr.lineNumbersBlock(n))});document.addEventListener("keydown",function(n){n.keyCode==27&&(Cr(document,".fullscreen",e=>e.click()),zu()),n.keyCode==13&&n.shiftKey&&(n.preventDefault(),zu("toggle"))});function zu(n){if("ontouchstart"in window)return;const e=s=>{for(let i=0;i<s.length;i++){const d=document.querySelector(s[i]);if(d&&d.tabIndex!==-1)return d}return null},t=n&&e(["input.is-primary-menu-item","a.is-primary-menu-item"]),r=document.activeElement;if(ql(r,["a","input","textarea"])&&t&&r!==t)return t.focus();const o=e([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);if(o)return o.focus();if(t)return t.focus()}
