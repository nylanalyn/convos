var dd=Object.defineProperty;var Yi=n=>{throw TypeError(n)};var fd=(n,e,t)=>e in n?dd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Kr=(n,e,t)=>fd(n,typeof e!="symbol"?e+"":e,t),Lo=(n,e,t)=>e.has(n)||Yi("Cannot "+t);var Je=(n,e,t)=>(Lo(n,e,"read from private field"),t?t.call(n):e.get(n)),Qt=(n,e,t)=>e.has(n)?Yi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Br=(n,e,t,r)=>(Lo(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),$r=(n,e,t)=>(Lo(n,e,"access private method"),t);const ea={add(n){document.body.classList.remove("no-"+n),document.body.classList.add("has-"+n)},has(n){return document.body.classList.contains("has-"+n)},remove(n){document.body.classList.add("no-"+n),document.body.classList.remove("has-"+n)}};qc("mousemove","mouse");qc("touchstart","touch");ea.add("js");function qc(n,e){const t=()=>{n!=="mousemove"&&ea.add(e),n==="mousemove"&&!ea.has("touch")&&ea.add(e),document.removeEventListener(n,t)};document.addEventListener(n,t)}const pd="5";var Bc;typeof window<"u"&&((Bc=window.__svelte??(window.__svelte={})).v??(Bc.v=new Set)).add(pd);let da=!1,vd=!1;function hd(){da=!0}hd();const jc=1,zc=2,Hc=4,gd=8,_d=16,md=1,bd=2,yd=4,$d=8,wd=16,xd=4,Ed=1,Sd=2,sr=Symbol(),kd="http://www.w3.org/1999/xhtml",Wc=!1;var go=Array.isArray,Ad=Array.prototype.indexOf,Gc=Array.from,Kc=Object.defineProperty,xa=Object.getOwnPropertyDescriptor,Vc=Object.getOwnPropertyDescriptors,Od=Object.prototype,Cd=Array.prototype,xi=Object.getPrototypeOf;function Td(n){return typeof n=="function"}const wr=()=>{};function Nd(n){return typeof(n==null?void 0:n.then)=="function"}function Rd(n){return n()}function no(n){for(var e=0;e<n.length;e++)n[e]()}function Yc(){var n,e,t=new Promise((r,o)=>{n=r,e=o});return{promise:t,resolve:n,reject:e}}const ur=2,Ei=4,_o=8,tn=16,fn=32,fa=64,Si=128,Hr=512,lr=1024,Er=2048,rn=4096,Tr=8192,bn=16384,mo=32768,ia=65536,Zi=1<<17,Zc=1<<18,bo=1<<19,Jc=1<<20,Ea=32768,si=1<<21,ki=1<<22,yn=1<<23,Pn=Symbol("$state"),Pd=Symbol("legacy props"),Id=Symbol(""),Yn=new class extends Error{constructor(){super(...arguments);Kr(this,"name","StaleReactionError");Kr(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function yo(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Md(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ld(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Dd(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ud(n){throw new Error("https://svelte.dev/e/effect_orphan")}function Fd(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Bd(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function qd(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function jd(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function zd(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Xc(n){return n===this.v}function Ai(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function Qc(n){return!Ai(n,this.v)}let Pt=null;function ao(n){Pt=n}function rr(n){return eu().get(n)}function Do(n,e){return eu().set(n,e),e}function wt(n,e=!1,t){Pt={p:Pt,i:!1,c:null,e:null,s:n,x:null,l:da&&!e?{s:null,u:null,$:[]}:null}}function xt(n){var e=Pt,t=e.e;if(t!==null){e.e=null;for(var r of t)hu(r)}return n!==void 0&&(e.x=n),e.i=!0,Pt=e.p,n??{}}function pa(){return!da||Pt!==null&&Pt.l===null}function eu(n){return Pt===null&&yo(),Pt.c??(Pt.c=new Map(Hd(Pt)||void 0))}function Hd(n){let e=n.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}let Tn=[];function tu(){var n=Tn;Tn=[],no(n)}function va(n){if(Tn.length===0&&!ta){var e=Tn;queueMicrotask(()=>{e===Tn&&tu()})}Tn.push(n)}function Wd(){for(;Tn.length>0;)tu()}function Gd(n){var e=Tt;if(e===null)return yt.f|=yn,n;if(e.f&mo)oo(n,e);else{if(!(e.f&Si))throw n;e.b.error(n)}}function oo(n,e){for(;e!==null;){if(e.f&Si)try{e.b.error(n);return}catch(t){n=t}e=e.parent}throw n}const Ya=new Set;let Rt=null,Qa=null,Kt=null,Zr=[],$o=null,ii=!1,ta=!1;var ra,na,Nn,Rn,Ia,aa,oa,er,li,On,ci,ru,nu;const fo=class fo{constructor(){Qt(this,er);Kr(this,"committed",!1);Kr(this,"current",new Map);Kr(this,"previous",new Map);Qt(this,ra,new Set);Qt(this,na,new Set);Qt(this,Nn,0);Qt(this,Rn,0);Qt(this,Ia,null);Qt(this,aa,[]);Qt(this,oa,[]);Kr(this,"skipped_effects",new Set);Kr(this,"is_fork",!1)}is_deferred(){return this.is_fork||Je(this,Rn)>0}process(e){var r;Zr=[],Qa=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of e)$r(this,er,li).call(this,o,t);this.is_fork||$r(this,er,ru).call(this),this.is_deferred()?($r(this,er,On).call(this,t.effects),$r(this,er,On).call(this,t.render_effects),$r(this,er,On).call(this,t.block_effects)):(Qa=this,Rt=null,Ji(t.render_effects),Ji(t.effects),Qa=null,(r=Je(this,Ia))==null||r.resolve()),Kt=null}capture(e,t){this.previous.has(e)||this.previous.set(e,t),e.f&yn||(this.current.set(e,e.v),Kt==null||Kt.set(e,e.v))}activate(){Rt=this,this.apply()}deactivate(){Rt===this&&(Rt=null,Kt=null)}flush(){if(this.activate(),Zr.length>0){if(ou(),Rt!==null&&Rt!==this)return}else Je(this,Nn)===0&&this.process([]);this.deactivate()}discard(){for(const e of Je(this,na))e(this);Je(this,na).clear()}increment(e){Br(this,Nn,Je(this,Nn)+1),e&&Br(this,Rn,Je(this,Rn)+1)}decrement(e){Br(this,Nn,Je(this,Nn)-1),e&&Br(this,Rn,Je(this,Rn)-1),this.revive()}revive(){for(const e of Je(this,aa))cr(e,Er),Dn(e);for(const e of Je(this,oa))cr(e,rn),Dn(e);Br(this,aa,[]),Br(this,oa,[]),this.flush()}oncommit(e){Je(this,ra).add(e)}ondiscard(e){Je(this,na).add(e)}settled(){return(Je(this,Ia)??Br(this,Ia,Yc())).promise}static ensure(){if(Rt===null){const e=Rt=new fo;Ya.add(Rt),ta||fo.enqueue(()=>{Rt===e&&e.flush()})}return Rt}static enqueue(e){va(e)}apply(){}};ra=new WeakMap,na=new WeakMap,Nn=new WeakMap,Rn=new WeakMap,Ia=new WeakMap,aa=new WeakMap,oa=new WeakMap,er=new WeakSet,li=function(e,t){var m;e.f^=lr;for(var r=e.first;r!==null;){var o=r.f,s=(o&(fn|fa))!==0,i=s&&(o&lr)!==0,d=i||(o&Tr)!==0||this.skipped_effects.has(r);if(r.f&Si&&((m=r.b)!=null&&m.is_pending())&&(t={parent:t,effect:r,effects:[],render_effects:[],block_effects:[]}),!d&&r.fn!==null){s?r.f^=lr:o&Ei?t.effects.push(r):ha(r)&&(r.f&tn&&t.block_effects.push(r),la(r));var h=r.first;if(h!==null){r=h;continue}}var f=r.parent;for(r=r.next;r===null&&f!==null;)f===t.effect&&($r(this,er,On).call(this,t.effects),$r(this,er,On).call(this,t.render_effects),$r(this,er,On).call(this,t.block_effects),t=t.parent),r=f.next,f=f.parent}},On=function(e){for(const t of e)(t.f&Er?Je(this,aa):Je(this,oa)).push(t),$r(this,er,ci).call(this,t.deps),cr(t,lr)},ci=function(e){if(e!==null)for(const t of e)!(t.f&ur)||!(t.f&Ea)||(t.f^=Ea,$r(this,er,ci).call(this,t.deps))},ru=function(){if(Je(this,Rn)===0){for(const e of Je(this,ra))e();Je(this,ra).clear()}Je(this,Nn)===0&&$r(this,er,nu).call(this)},nu=function(){var o;if(Ya.size>1){this.previous.clear();var e=Kt,t=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Ya){if(s===this){t=!1;continue}const i=[];for(const[h,f]of this.current){if(s.current.has(h))if(t&&f!==s.current.get(h))s.current.set(h,f);else continue;i.push(h)}if(i.length===0)continue;const d=[...s.current.keys()].filter(h=>!this.current.has(h));if(d.length>0){const h=new Set,f=new Map;for(const m of i)su(m,d,h,f);if(Zr.length>0){Rt=s,s.apply();for(const m of Zr)$r(o=s,er,li).call(o,m,r);Zr=[],s.deactivate()}}}Rt=null,Kt=e}this.committed=!0,Ya.delete(this)};let Sa=fo;function au(n){var e=ta;ta=!0;try{for(var t;;){if(Wd(),Zr.length===0&&(Rt==null||Rt.flush(),Zr.length===0))return $o=null,t;ou()}}finally{ta=e}}function ou(){var n=In;ii=!0;try{var e=0;for(el(!0);Zr.length>0;){var t=Sa.ensure();if(e++>1e3){var r,o;Kd()}t.process(Zr),$n.clear()}}finally{ii=!1,el(n),$o=null}}function Kd(){try{Fd()}catch(n){oo(n,$o)}}let jr=null;function Ji(n){var e=n.length;if(e!==0){for(var t=0;t<e;){var r=n[t++];if(!(r.f&(bn|Tr))&&ha(r)&&(jr=new Set,la(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?bu(r):r.fn=null),(jr==null?void 0:jr.size)>0)){$n.clear();for(const o of jr){if(o.f&(bn|Tr))continue;const s=[o];let i=o.parent;for(;i!==null;)jr.has(i)&&(jr.delete(i),s.push(i)),i=i.parent;for(let d=s.length-1;d>=0;d--){const h=s[d];h.f&(bn|Tr)||la(h)}}jr.clear()}}jr=null}}function su(n,e,t,r){if(!t.has(n)&&(t.add(n),n.reactions!==null))for(const o of n.reactions){const s=o.f;s&ur?su(o,e,t,r):s&(ki|tn)&&!(s&Er)&&iu(o,e,r)&&(cr(o,Er),Dn(o))}}function iu(n,e,t){const r=t.get(n);if(r!==void 0)return r;if(n.deps!==null)for(const o of n.deps){if(e.includes(o))return!0;if(o.f&ur&&iu(o,e,t))return t.set(o,!0),!0}return t.set(n,!1),!1}function Dn(n){for(var e=$o=n;e.parent!==null;){e=e.parent;var t=e.f;if(ii&&e===Tt&&t&tn&&!(t&Zc))return;if(t&(fa|fn)){if(!(t&lr))return;e.f^=lr}}Zr.push(e)}function Vd(n,e,t,r){const o=pa()?wo:je;if(t.length===0&&n.length===0){r(e.map(o));return}var s=Rt,i=Tt,d=lu();function h(){Promise.all(t.map(f=>Yd(f))).then(f=>{d();try{r([...e.map(o),...f])}catch(m){i.f&bn||oo(m,i)}s==null||s.deactivate(),ka()}).catch(f=>{oo(f,i)})}n.length>0?Promise.all(n).then(()=>{d();try{return h()}finally{s==null||s.deactivate(),ka()}}):h()}function lu(){var n=Tt,e=yt,t=Pt,r=Rt;return function(s=!0){xn(n),Qr(e),ao(t),s&&(r==null||r.activate())}}function ka(){xn(null),Qr(null),ao(null)}function wo(n){var e=ur|Er,t=yt!==null&&yt.f&ur?yt:null;return Tt!==null&&(Tt.f|=bo),{ctx:Pt,deps:null,effects:null,equals:Xc,f:e,fn:n,reactions:null,rv:0,v:sr,wv:0,parent:t??Tt,ac:null}}function Yd(n,e){let t=Tt;t===null&&Md();var r=t.b,o=void 0,s=Un(sr),i=!yt,d=new Map;return lf(()=>{var $;var h=Yc();o=h.promise;try{Promise.resolve(n()).then(h.resolve,h.reject).then(()=>{f===Rt&&f.committed&&f.deactivate(),ka()})}catch(g){h.reject(g),ka()}var f=Rt;if(i){var m=!r.is_pending();r.update_pending_count(1),f.increment(m),($=d.get(f))==null||$.reject(Yn),d.delete(f),d.set(f,h)}const x=(g,p=void 0)=>{if(f.activate(),p)p!==Yn&&(s.f|=yn,un(s,p));else{s.f&yn&&(s.f^=yn),un(s,g);for(const[u,_]of d){if(d.delete(u),u===f)break;_.reject(Yn)}}i&&(r.update_pending_count(-1),f.decrement(m))};h.promise.then(x,g=>x(null,g||"unknown"))}),Fa(()=>{for(const h of d.values())h.reject(Yn)}),new Promise(h=>{function f(m){function x(){m===o?h(s):f(o)}m.then(x,x)}f(o)})}function je(n){const e=wo(n);return e.equals=Qc,e}function cu(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)dn(e[t])}}function Zd(n){for(var e=n.parent;e!==null;){if(!(e.f&ur))return e;e=e.parent}return null}function Oi(n){var e,t=Tt;xn(Zd(n));try{n.f&=~Ea,cu(n),e=ku(n)}finally{xn(t)}return e}function uu(n){var e=Oi(n);if(n.equals(e)||(n.v=e,n.wv=Eu()),!jn)if(Kt!==null)Ti()&&Kt.set(n,n.v);else{var t=n.f&Hr?lr:rn;cr(n,t)}}let ui=new Set;const $n=new Map;let du=!1;function Un(n,e){var t={f:0,v:n,reactions:null,equals:Xc,rv:0,wv:0};return t}function hn(n,e){const t=Un(n);return pf(t),t}function Ee(n,e=!1,t=!0){var o;const r=Un(n);return e||(r.equals=Qc),da&&t&&Pt!==null&&Pt.l!==null&&((o=Pt.l).s??(o.s=[])).push(r),r}function Me(n,e){return K(n,l(()=>a(n))),e}function K(n,e,t=!1){yt!==null&&(!Xr||yt.f&Zi)&&pa()&&yt.f&(ur|tn|ki|Zi)&&!(yr!=null&&yr.includes(n))&&zd();let r=t?Zn(e):e;return un(n,r)}function un(n,e){if(!n.equals(e)){var t=n.v;jn?$n.set(n,e):$n.set(n,t),n.v=e;var r=Sa.ensure();r.capture(n,t),n.f&ur&&(n.f&Er&&Oi(n),cr(n,n.f&Hr?lr:rn)),n.wv=Eu(),fu(n,Er),pa()&&Tt!==null&&Tt.f&lr&&!(Tt.f&(fn|fa))&&(Lr===null?vf([n]):Lr.push(n)),!r.is_fork&&ui.size>0&&!du&&Jd()}return e}function Jd(){du=!1;const n=Array.from(ui);for(const e of n)e.f&lr&&cr(e,rn),ha(e)&&la(e);ui.clear()}function Xi(n,e=1){var t=a(n),r=e===1?t++:t--;return K(n,t),r}function Uo(n){K(n,n.v+1)}function fu(n,e){var t=n.reactions;if(t!==null)for(var r=pa(),o=t.length,s=0;s<o;s++){var i=t[s],d=i.f;if(!(!r&&i===Tt)){var h=(d&Er)===0;if(h&&cr(i,e),d&ur){var f=i;Kt==null||Kt.delete(f),d&Ea||(d&Hr&&(i.f|=Ea),fu(f,rn))}else h&&(d&tn&&jr!==null&&jr.add(i),Dn(i))}}}function Zn(n){if(typeof n!="object"||n===null||Pn in n)return n;const e=xi(n);if(e!==Od&&e!==Cd)return n;var t=new Map,r=go(n),o=hn(0),s=Mn,i=d=>{if(Mn===s)return d();var h=yt,f=Mn;Qr(null),rl(s);var m=d();return Qr(h),rl(f),m};return r&&t.set("length",hn(n.length)),new Proxy(n,{defineProperty(d,h,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&qd();var m=t.get(h);return m===void 0?m=i(()=>{var x=hn(f.value);return t.set(h,x),x}):K(m,f.value,!0),!0},deleteProperty(d,h){var f=t.get(h);if(f===void 0){if(h in d){const m=i(()=>hn(sr));t.set(h,m),Uo(o)}}else K(f,sr),Uo(o);return!0},get(d,h,f){var g;if(h===Pn)return n;var m=t.get(h),x=h in d;if(m===void 0&&(!x||(g=xa(d,h))!=null&&g.writable)&&(m=i(()=>{var p=Zn(x?d[h]:sr),u=hn(p);return u}),t.set(h,m)),m!==void 0){var $=a(m);return $===sr?void 0:$}return Reflect.get(d,h,f)},getOwnPropertyDescriptor(d,h){var f=Reflect.getOwnPropertyDescriptor(d,h);if(f&&"value"in f){var m=t.get(h);m&&(f.value=a(m))}else if(f===void 0){var x=t.get(h),$=x==null?void 0:x.v;if(x!==void 0&&$!==sr)return{enumerable:!0,configurable:!0,value:$,writable:!0}}return f},has(d,h){var $;if(h===Pn)return!0;var f=t.get(h),m=f!==void 0&&f.v!==sr||Reflect.has(d,h);if(f!==void 0||Tt!==null&&(!m||($=xa(d,h))!=null&&$.writable)){f===void 0&&(f=i(()=>{var g=m?Zn(d[h]):sr,p=hn(g);return p}),t.set(h,f));var x=a(f);if(x===sr)return!1}return m},set(d,h,f,m){var P;var x=t.get(h),$=h in d;if(r&&h==="length")for(var g=f;g<x.v;g+=1){var p=t.get(g+"");p!==void 0?K(p,sr):g in d&&(p=i(()=>hn(sr)),t.set(g+"",p))}if(x===void 0)(!$||(P=xa(d,h))!=null&&P.writable)&&(x=i(()=>hn(void 0)),K(x,Zn(f)),t.set(h,x));else{$=x.v!==sr;var u=i(()=>Zn(f));K(x,u)}var _=Reflect.getOwnPropertyDescriptor(d,h);if(_!=null&&_.set&&_.set.call(m,f),!$){if(r&&typeof h=="string"){var w=t.get("length"),E=Number(h);Number.isInteger(E)&&E>=w.v&&K(w,E+1)}Uo(o)}return!0},ownKeys(d){a(o);var h=Reflect.ownKeys(d).filter(x=>{var $=t.get(x);return $===void 0||$.v!==sr});for(var[f,m]of t)m.v!==sr&&!(f in d)&&h.push(f);return h},setPrototypeOf(){jd()}})}var Ci,Xd,Qd,ef;function Fn(n=""){return document.createTextNode(n)}function mn(n){return Qd.call(n)}function Ua(n){return ef.call(n)}function c(n,e){return mn(n)}function _e(n,e=!1){{var t=mn(n);return t instanceof Comment&&t.data===""?Ua(t):t}}function v(n,e=1,t=!1){let r=n;for(;e--;)r=Ua(r);return r}function tf(n){n.textContent=""}function pu(){return!1}let Qi=!1;function rf(){Qi||(Qi=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function nf(n,e,t,r=!0){r&&t();for(var o of e)n.addEventListener(o,t);Fa(()=>{for(var s of e)n.removeEventListener(s,t)})}function qn(n){var e=yt,t=Tt;Qr(null),xn(null);try{return n()}finally{Qr(e),xn(t)}}function af(n,e,t,r=t){n.addEventListener(e,()=>qn(t));const o=n.__on_r;o?n.__on_r=()=>{o(),r(!0)}:n.__on_r=()=>r(!0),rf()}function vu(n){Tt===null&&(yt===null&&Ud(),Dd()),jn&&Ld()}function of(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function pn(n,e,t){var r=Tt;r!==null&&r.f&Tr&&(n|=Tr);var o={ctx:Pt,deps:null,nodes_start:null,nodes_end:null,f:n|Er|Hr,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{la(o),o.f|=mo}catch(d){throw dn(o),d}else e!==null&&Dn(o);var s=o;if(t&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&!(s.f&bo)&&(s=s.first,n&tn&&n&ia&&s!==null&&(s.f|=ia)),s!==null&&(s.parent=r,r!==null&&of(s,r),yt!==null&&yt.f&ur&&!(n&fa))){var i=yt;(i.effects??(i.effects=[])).push(s)}return o}function Ti(){return yt!==null&&!Xr}function Fa(n){const e=pn(_o,null,!1);return cr(e,lr),e.teardown=n,e}function di(n){vu();var e=Tt.f,t=!yt&&(e&fn)!==0&&(e&mo)===0;if(t){var r=Pt;(r.e??(r.e=[])).push(n)}else return hu(n)}function hu(n){return pn(Ei|Jc,n,!1)}function sf(n){return vu(),pn(_o|Jc,n,!0)}function xo(n){return pn(Ei,n,!1)}function Be(n,e){var t=Pt,r={effect:null,ran:!1,deps:n};t.l.$.push(r),r.effect=Ba(()=>{n(),!r.ran&&(r.ran=!0,l(e))})}function Mt(){var n=Pt;Ba(()=>{for(var e of n.l.$){e.deps();var t=e.effect;t.f&lr&&cr(t,rn),ha(t)&&la(t),e.ran=!1}})}function lf(n){return pn(ki|bo,n,!0)}function Ba(n,e=0){return pn(_o|e,n,!0)}function A(n,e=[],t=[],r=[]){Vd(r,e,t,o=>{pn(_o,()=>n(...o.map(a)),!0)})}function Ni(n,e=0){var t=pn(tn|e,n,!0);return t}function Aa(n){return pn(fn|bo,n,!0)}function gu(n){var e=n.teardown;if(e!==null){const t=jn,r=yt;tl(!0),Qr(null);try{e.call(null)}finally{tl(t),Qr(r)}}}function _u(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){const o=t.ac;o!==null&&qn(()=>{o.abort(Yn)});var r=t.next;t.f&fa?t.parent=null:dn(t,e),t=r}}function cf(n){for(var e=n.first;e!==null;){var t=e.next;e.f&fn||dn(e),e=t}}function dn(n,e=!0){var t=!1;(e||n.f&Zc)&&n.nodes_start!==null&&n.nodes_end!==null&&(mu(n.nodes_start,n.nodes_end),t=!0),_u(n,e&&!t),so(n,0),cr(n,bn);var r=n.transitions;if(r!==null)for(const s of r)s.stop();gu(n);var o=n.parent;o!==null&&o.first!==null&&bu(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=n.ac=null}function mu(n,e){for(;n!==null;){var t=n===e?null:Ua(n);n.remove(),n=t}}function bu(n){var e=n.parent,t=n.prev,r=n.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),e!==null&&(e.first===n&&(e.first=r),e.last===n&&(e.last=t))}function yu(n,e,t=!0){var r=[];Ri(n,r,!0),$u(r,()=>{t&&dn(n),e&&e()})}function $u(n,e){var t=n.length;if(t>0){var r=()=>--t||e();for(var o of n)o.out(r)}else e()}function Ri(n,e,t){if(!(n.f&Tr)){if(n.f^=Tr,n.transitions!==null)for(const i of n.transitions)(i.is_global||t)&&e.push(i);for(var r=n.first;r!==null;){var o=r.next,s=(r.f&ia)!==0||(r.f&fn)!==0&&(n.f&tn)!==0;Ri(r,e,s?t:!1),r=o}}}function Pi(n){wu(n,!0)}function wu(n,e){if(n.f&Tr){n.f^=Tr,n.f&lr||(cr(n,Er),Dn(n));for(var t=n.first;t!==null;){var r=t.next,o=(t.f&ia)!==0||(t.f&fn)!==0;wu(t,o?e:!1),t=r}if(n.transitions!==null)for(const s of n.transitions)(s.is_global||e)&&s.in()}}function uf(n,e){for(var t=n.nodes_start,r=n.nodes_end;t!==null;){var o=t===r?null:Ua(t);e.append(t),t=o}}let gn=null;function df(n){var e=gn;try{if(gn=new Set,l(n),e!==null)for(var t of gn)e.add(t);return gn}finally{gn=e}}function ff(n){for(var e of df(n))un(e,e.v)}let In=!1;function el(n){In=n}let jn=!1;function tl(n){jn=n}let yt=null,Xr=!1;function Qr(n){yt=n}let Tt=null;function xn(n){Tt=n}let yr=null;function pf(n){yt!==null&&(yr===null?yr=[n]:yr.push(n))}let br=null,Or=0,Lr=null;function vf(n){Lr=n}let xu=1,Oa=0,Mn=Oa;function rl(n){Mn=n}function Eu(){return++xu}function ha(n){var e=n.f;if(e&Er)return!0;if(e&ur&&(n.f&=-32769),e&rn){var t=n.deps;if(t!==null)for(var r=t.length,o=0;o<r;o++){var s=t[o];if(ha(s)&&uu(s),s.wv>n.wv)return!0}e&Hr&&Kt===null&&cr(n,lr)}return!1}function Su(n,e,t=!0){var r=n.reactions;if(r!==null&&!(yr!=null&&yr.includes(n)))for(var o=0;o<r.length;o++){var s=r[o];s.f&ur?Su(s,e,!1):e===s&&(t?cr(s,Er):s.f&lr&&cr(s,rn),Dn(s))}}function ku(n){var p;var e=br,t=Or,r=Lr,o=yt,s=yr,i=Pt,d=Xr,h=Mn,f=n.f;br=null,Or=0,Lr=null,yt=f&(fn|fa)?null:n,yr=null,ao(n.ctx),Xr=!1,Mn=++Oa,n.ac!==null&&(qn(()=>{n.ac.abort(Yn)}),n.ac=null);try{n.f|=si;var m=n.fn,x=m(),$=n.deps;if(br!==null){var g;if(so(n,Or),$!==null&&Or>0)for($.length=Or+br.length,g=0;g<br.length;g++)$[Or+g]=br[g];else n.deps=$=br;if(In&&Ti()&&n.f&Hr)for(g=Or;g<$.length;g++)((p=$[g]).reactions??(p.reactions=[])).push(n)}else $!==null&&Or<$.length&&(so(n,Or),$.length=Or);if(pa()&&Lr!==null&&!Xr&&$!==null&&!(n.f&(ur|rn|Er)))for(g=0;g<Lr.length;g++)Su(Lr[g],n);return o!==null&&o!==n&&(Oa++,Lr!==null&&(r===null?r=Lr:r.push(...Lr))),n.f&yn&&(n.f^=yn),x}catch(u){return Gd(u)}finally{n.f^=si,br=e,Or=t,Lr=r,yt=o,yr=s,ao(i),Xr=d,Mn=h}}function hf(n,e){let t=e.reactions;if(t!==null){var r=Ad.call(t,n);if(r!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[r]=t[o],t.pop())}}t===null&&e.f&ur&&(br===null||!br.includes(e))&&(cr(e,rn),e.f&Hr&&(e.f^=Hr,e.f&=-32769),cu(e),so(e,0))}function so(n,e){var t=n.deps;if(t!==null)for(var r=e;r<t.length;r++)hf(n,t[r])}function la(n){var e=n.f;if(!(e&bn)){cr(n,lr);var t=Tt,r=In;Tt=n,In=!0;try{e&tn?cf(n):_u(n),gu(n);var o=ku(n);n.teardown=typeof o=="function"?o:null,n.wv=xu;var s;Wc&&vd&&n.f&Er&&n.deps}finally{In=r,Tt=t}}}async function Ca(){await Promise.resolve(),au()}function a(n){var e=n.f,t=(e&ur)!==0;if(gn==null||gn.add(n),yt!==null&&!Xr){var r=Tt!==null&&(Tt.f&bn)!==0;if(!r&&!(yr!=null&&yr.includes(n))){var o=yt.deps;if(yt.f&si)n.rv<Oa&&(n.rv=Oa,br===null&&o!==null&&o[Or]===n?Or++:br===null?br=[n]:br.includes(n)||br.push(n));else{(yt.deps??(yt.deps=[])).push(n);var s=n.reactions;s===null?n.reactions=[yt]:s.includes(yt)||s.push(yt)}}}if(jn){if($n.has(n))return $n.get(n);if(t){var i=n,d=i.v;return(!(i.f&lr)&&i.reactions!==null||Ou(i))&&(d=Oi(i)),$n.set(i,d),d}}else if(t){if(i=n,Kt!=null&&Kt.has(i))return Kt.get(i);ha(i)&&uu(i),In&&Ti()&&!(i.f&Hr)&&Au(i)}else if(Kt!=null&&Kt.has(n))return Kt.get(n);if(n.f&yn)throw n.v;return n.v}function Au(n){if(n.deps!==null){n.f^=Hr;for(const e of n.deps)(e.reactions??(e.reactions=[])).push(n),e.f&ur&&!(e.f&Hr)&&Au(e)}}function Ou(n){if(n.v===sr)return!0;if(n.deps===null)return!1;for(const e of n.deps)if($n.has(e)||e.f&ur&&Ou(e))return!0;return!1}function l(n){var e=Xr;try{return Xr=!0,n()}finally{Xr=e}}const gf=-7169;function cr(n,e){n.f=n.f&gf|e}function Pe(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Pn in n)fi(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&Pn in t&&fi(t)}}}function fi(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let r in n)try{fi(n[r],e)}catch{}const t=xi(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=Vc(t);for(let o in r){const s=r[o].get;if(s)try{s.call(n)}catch{}}}}}function _f(n,e,t,r={}){function o(s){if(r.capture||mf.call(e,s),!s.cancelBubble)return qn(()=>t==null?void 0:t.call(this,s))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?va(()=>{e.addEventListener(n,o,r)}):e.addEventListener(n,o,r),o}function Qe(n,e,t,r,o){var s={capture:r,passive:o},i=_f(n,e,t,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Fa(()=>{e.removeEventListener(n,i,s)})}let nl=null;function mf(n){var _;var e=this,t=e.ownerDocument,r=n.type,o=((_=n.composedPath)==null?void 0:_.call(n))||[],s=o[0]||n.target;nl=n;var i=0,d=nl===n&&n.__root;if(d){var h=o.indexOf(d);if(h!==-1&&(e===document||e===window)){n.__root=e;return}var f=o.indexOf(e);if(f===-1)return;h<=f&&(i=h)}if(s=o[i]||n.target,s!==e){Kc(n,"currentTarget",{configurable:!0,get(){return s||t}});var m=yt,x=Tt;Qr(null),xn(null);try{for(var $,g=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var u=s["__"+r];u!=null&&(!s.disabled||n.target===s)&&u.call(s,n)}catch(w){$?g.push(w):$=w}if(n.cancelBubble||p===e||p===null)break;s=p}if($){for(let w of g)queueMicrotask(()=>{throw w});throw $}}finally{n.__root=e,delete n.currentTarget,Qr(m),xn(x)}}}function Cu(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function Ta(n,e){var t=Tt;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function S(n,e){var t=(e&Ed)!==0,r=(e&Sd)!==0,o,s=!n.startsWith("<!>");return()=>{o===void 0&&(o=Cu(s?n:"<!>"+n),t||(o=mn(o)));var i=r||Xd?document.importNode(o,!0):o.cloneNode(!0);if(t){var d=mn(i),h=i.lastChild;Ta(d,h)}else Ta(i,i);return i}}function tr(n=""){{var e=Fn(n+"");return Ta(e,e),e}}function ct(){var n=document.createDocumentFragment(),e=document.createComment(""),t=Fn();return n.append(e,t),Ta(e,t),n}function y(n,e){n!==null&&n.before(e)}function b(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}var zr,Yr,Cr,Ma,La,po;class Tu{constructor(e,t=!0){Kr(this,"anchor");Qt(this,zr,new Map);Qt(this,Yr,new Map);Qt(this,Cr,new Map);Qt(this,Ma,!0);Qt(this,La,()=>{var e=Rt;if(Je(this,zr).has(e)){var t=Je(this,zr).get(e),r=Je(this,Yr).get(t);if(r)Pi(r);else{var o=Je(this,Cr).get(t);o&&(Je(this,Yr).set(t,o.effect),Je(this,Cr).delete(t),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of Je(this,zr)){if(Je(this,zr).delete(s),s===e)break;const d=Je(this,Cr).get(i);d&&(dn(d.effect),Je(this,Cr).delete(i))}for(const[s,i]of Je(this,Yr)){if(s===t)continue;const d=()=>{if(Array.from(Je(this,zr).values()).includes(s)){var f=document.createDocumentFragment();uf(i,f),f.append(Fn()),Je(this,Cr).set(s,{effect:i,fragment:f})}else dn(i);Je(this,Yr).delete(s)};Je(this,Ma)||!r?yu(i,d,!1):d()}}});Qt(this,po,e=>{Je(this,zr).delete(e);const t=Array.from(Je(this,zr).values());for(const[r,o]of Je(this,Cr))t.includes(r)||(dn(o.effect),Je(this,Cr).delete(r))});this.anchor=e,Br(this,Ma,t)}ensure(e,t){var r=Rt,o=pu();if(t&&!Je(this,Yr).has(e)&&!Je(this,Cr).has(e))if(o){var s=document.createDocumentFragment(),i=Fn();s.append(i),Je(this,Cr).set(e,{effect:Aa(()=>t(i)),fragment:s})}else Je(this,Yr).set(e,Aa(()=>t(this.anchor)));if(Je(this,zr).set(r,e),o){for(const[d,h]of Je(this,Yr))d===e?r.skipped_effects.delete(h):r.skipped_effects.add(h);for(const[d,h]of Je(this,Cr))d===e?r.skipped_effects.delete(h.effect):r.skipped_effects.add(h.effect);r.oncommit(Je(this,La)),r.ondiscard(Je(this,po))}else Je(this,La).call(this)}}zr=new WeakMap,Yr=new WeakMap,Cr=new WeakMap,Ma=new WeakMap,La=new WeakMap,po=new WeakMap;function nn(n){Pt===null&&yo(),da&&Pt.l!==null?$f(Pt).m.push(n):di(()=>{const e=l(n);if(typeof e=="function")return e})}function Ii(n){Pt===null&&yo(),nn(()=>()=>l(n))}function bf(n,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:r})}function yf(){const n=Pt;return n===null&&yo(),(e,t,r)=>{var s;const o=(s=n.s.$$events)==null?void 0:s[e];if(o){const i=go(o)?o.slice():[o],d=bf(e,t,r);for(const h of i)h.call(n.x,d);return!d.defaultPrevented}return!0}}function $f(n){var e=n.l;return e.u??(e.u={a:[],b:[],m:[]})}const wf=0,Fo=1;function Nu(n,e,t,r,o){var s=pa(),i=sr,d=s?Un(i):Ee(i,!1,!1),h=s?Un(i):Ee(i,!1,!1),f=new Tu(n);Ni(()=>{var m=e(),x=!1;if(Nd(m)){var $=lu(),g=!1;const p=u=>{if(!x){g=!0,$(!1),Sa.ensure();try{u()}finally{ka(),ta||au()}}};m.then(u=>{p(()=>{un(d,u),f.ensure(Fo,r&&(_=>r(_,d)))})},u=>{p(()=>{if(un(h,u),f.ensure(Fo,o&&(_=>o(_,h))),!o)throw h.v})}),va(()=>{g||p(()=>{f.ensure(wf,t)})})}else un(d,m),f.ensure(Fo,r&&(p=>r(p,d)));return()=>{x=!0}})}function me(n,e,t=!1){var r=new Tu(n),o=t?ia:0;function s(i,d){r.ensure(i,d)}Ni(()=>{var i=!1;e((d,h=!0)=>{i=!0,s(h,d)}),i||s(!1,null)},o)}function dr(n,e){return e}function xf(n,e,t){for(var r=[],o=e.length,s=0;s<o;s++)Ri(e[s].e,r,!0);$u(r,()=>{var i=r.length===0&&t!==null;if(i){var d=t,h=d.parentNode;tf(h),h.append(d),n.items.clear(),Vr(n,e[0].prev,e[o-1].next)}for(var f=0;f<o;f++){var m=e[f];i||(n.items.delete(m.k),Vr(n,m.prev,m.next)),dn(m.e,!i)}n.first===e[0]&&(n.first=e[0].prev)})}function fr(n,e,t,r,o,s=null){var i=n,d={items:new Map,first:null},h=(e&Hc)!==0,f=(e&jc)!==0,m=(e&zc)!==0;if(h){var x=n;i=x.appendChild(Fn())}var $=null,g=je(()=>{var E=t();return go(E)?E:E==null?[]:Gc(E)}),p,u=!0;function _(){Ef(w,p,d,i,e,r),$!==null&&(p.length===0?($.fragment?(i.before($.fragment),$.fragment=null):Pi($.effect),w.first=$.effect):yu($.effect,()=>{$=null}))}var w=Ni(()=>{p=a(g);for(var E=p.length,P=new Set,I=Rt,k=null,Y=pu(),ue=0;ue<E;ue+=1){var L=p[ue],X=r(L,ue),te=u?null:d.items.get(X);te?(f&&un(te.v,L),m?un(te.i,ue):te.i=ue,I.skipped_effects.delete(te.e)):(te=Sf(u?i:null,k,L,X,ue,o,e,t),u&&(te.o=!0,k===null?d.first=te:k.next=te,k=te),d.items.set(X,te)),P.add(X)}if(E===0&&s&&!$)if(u)$={fragment:null,effect:Aa(()=>s(i))};else{var ve=document.createDocumentFragment(),ne=Fn();ve.append(ne),$={fragment:ve,effect:Aa(()=>s(ne))}}for(const[q,W]of d.items)P.has(q)||I.skipped_effects.add(W.e);u||(Y?(I.oncommit(_),I.ondiscard(()=>{})):_()),a(g)});u=!1}function Ef(n,e,t,r,o,s){var ve,ne,q,W;var i=(o&gd)!==0,d=e.length,h=t.items,f=t.first,m,x=null,$,g=[],p=[],u,_,w,E;if(i)for(E=0;E<d;E+=1)u=e[E],_=s(u,E),w=h.get(_),(ve=w.a)==null||ve.measure(),($??($=new Set)).add(w);for(E=0;E<d;E+=1){if(u=e[E],_=s(u,E),w=h.get(_),t.first??(t.first=w),!w.o){w.o=!0;var P=x?x.next:f;Vr(t,x,w),Vr(t,w,P),Bo(w,P,r),x=w,g=[],p=[],f=x.next;continue}if(w.e.f&Tr&&(Pi(w.e),i&&((ne=w.a)==null||ne.unfix(),($??($=new Set)).delete(w))),w!==f){if(m!==void 0&&m.has(w)){if(g.length<p.length){var I=p[0],k;x=I.prev;var Y=g[0],ue=g[g.length-1];for(k=0;k<g.length;k+=1)Bo(g[k],I,r);for(k=0;k<p.length;k+=1)m.delete(p[k]);Vr(t,Y.prev,ue.next),Vr(t,x,Y),Vr(t,ue,I),f=I,x=ue,E-=1,g=[],p=[]}else m.delete(w),Bo(w,f,r),Vr(t,w.prev,w.next),Vr(t,w,x===null?t.first:x.next),Vr(t,x,w),x=w;continue}for(g=[],p=[];f!==null&&f.k!==_;)f.e.f&Tr||(m??(m=new Set)).add(f),p.push(f),f=f.next;if(f===null)continue;w=f}g.push(w),x=w,f=w.next}if(f!==null||m!==void 0){for(var L=m===void 0?[]:Gc(m);f!==null;)f.e.f&Tr||L.push(f),f=f.next;var X=L.length;if(X>0){var te=o&Hc&&d===0?r:null;if(i){for(E=0;E<X;E+=1)(q=L[E].a)==null||q.measure();for(E=0;E<X;E+=1)(W=L[E].a)==null||W.fix()}xf(t,L,te)}}i&&va(()=>{var J;if($!==void 0)for(w of $)(J=w.a)==null||J.apply()}),n.first=t.first&&t.first.e,n.last=x&&x.e,x&&(x.e.next=null)}function Sf(n,e,t,r,o,s,i,d){var h=(i&jc)!==0,f=(i&_d)===0,m=h?f?Ee(t,!1,!1):Un(t):t,x=i&zc?Un(o):o,$={i:x,v:m,k:r,a:null,e:null,o:!1,prev:e,next:null};try{if(n===null){var g=document.createDocumentFragment();g.append(n=Fn())}return $.e=Aa(()=>s(n,m,x,d)),$.e.prev=e&&e.e,e!==null&&(e.next=$,e.e.next=$.e),$}finally{}}function Bo(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,o=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==null&&s!==r;){var i=Ua(s);o.before(s),s=i}}function Vr(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Ot(n,e,t=!1,r=!1,o=!1){var s=n,i="";A(()=>{var d=Tt;if(i!==(i=e()??"")&&(d.nodes_start!==null&&(mu(d.nodes_start,d.nodes_end),d.nodes_start=d.nodes_end=null),i!=="")){var h=i+"";t?h=`<svg>${h}</svg>`:r&&(h=`<math>${h}</math>`);var f=Cu(h);if((t||r)&&(f=mn(f)),Ta(mn(f),f.lastChild),t||r)for(;mn(f);)s.before(mn(f));else s.before(f)}})}function en(n,e,t,r,o){var d;var s=(d=e.$$slots)==null?void 0:d[t],i=!1;s===!0&&(s=e[t==="default"?"children":t],i=!0),s===void 0?o!==null&&o(n):s(n,i?()=>r:r)}function Mi(n,e,t){xo(()=>{var r=l(()=>e(n,t==null?void 0:t())||{});if(t&&(r!=null&&r.update)){var o=!1,s={};Ba(()=>{var i=t();Pe(i),o&&Ai(s,i)&&(s=i,r.update(i))}),o=!0}if(r!=null&&r.destroy)return()=>r.destroy()})}const al=[...` 	
\r\f \v\uFEFF`];function kf(n,e,t){var r=n==null?"":""+n;if(e&&(r=r?r+" "+e:e),t){for(var o in t)if(t[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var d=i+s;(i===0||al.includes(r[i-1]))&&(d===r.length||al.includes(r[d]))?r=(i===0?"":r.substring(0,i))+r.substring(d+1):i=d}}return r===""?null:r}function Af(n,e){return n==null?null:String(n)}function Ut(n,e,t,r,o,s){var i=n.__className;if(i!==t||i===void 0){var d=kf(t,r,s);d==null?n.removeAttribute("class"):n.className=d,n.__className=t}else if(s&&o!==s)for(var h in s){var f=!!s[h];(o==null||f!==!!o[h])&&n.classList.toggle(h,f)}return s}function En(n,e,t,r){var o=n.__style;if(o!==e){var s=Af(e);s==null?n.removeAttribute("style"):n.style.cssText=s,n.__style=e}return r}const Of=Symbol("is custom element"),Cf=Symbol("is html");function Tf(n,e){var t=Li(n);t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function Nf(n,e){var t=Li(n);t.checked!==(t.checked=e??void 0)&&(n.checked=e)}function ze(n,e,t,r){var o=Li(n);o[e]!==(o[e]=t)&&(e==="loading"&&(n[Id]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Rf(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Li(n){return n.__attributes??(n.__attributes={[Of]:n.nodeName.includes("-"),[Cf]:n.namespaceURI===kd})}var ol=new Map;function Rf(n){var e=n.getAttribute("is")||n.nodeName,t=ol.get(e);if(t)return t;ol.set(e,t=[]);for(var r,o=n,s=Element.prototype;s!==o;){r=Vc(o);for(var i in r)r[i].set&&t.push(i);o=xi(o)}return t}const Pf=()=>performance.now(),cn={tick:n=>requestAnimationFrame(n),now:()=>Pf(),tasks:new Set};function Ru(){const n=cn.now();cn.tasks.forEach(e=>{e.c(n)||(cn.tasks.delete(e),e.f())}),cn.tasks.size!==0&&cn.tick(Ru)}function If(n){let e;return cn.tasks.size===0&&cn.tick(Ru),{promise:new Promise(t=>{cn.tasks.add(e={c:n,f:t})}),abort(){cn.tasks.delete(e)}}}function Za(n,e){qn(()=>{n.dispatchEvent(new CustomEvent(e))})}function Mf(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function sl(n){const e={},t=n.split(";");for(const r of t){const[o,s]=r.split(":");if(!o||s===void 0)break;const i=Mf(o.trim());e[i]=s.trim()}return e}const Lf=n=>n;function gr(n,e,t,r){var o=(n&xd)!==0,s="both",i,d=e.inert,h=e.style.overflow,f,m;function x(){return qn(()=>i??(i=t()(e,(r==null?void 0:r())??{},{direction:s})))}var $={is_global:o,in(){e.inert=d,Za(e,"introstart"),f=pi(e,x(),m,1,()=>{Za(e,"introend"),f==null||f.abort(),f=i=void 0,e.style.overflow=h})},out(_){e.inert=!0,Za(e,"outrostart"),m=pi(e,x(),f,0,()=>{Za(e,"outroend"),_==null||_()})},stop:()=>{f==null||f.abort(),m==null||m.abort()}},g=Tt;(g.transitions??(g.transitions=[])).push($);{var p=o;if(!p){for(var u=g.parent;u&&u.f&ia;)for(;(u=u.parent)&&!(u.f&tn););p=!u||(u.f&mo)!==0}p&&xo(()=>{l(()=>$.in())})}}function pi(n,e,t,r,o){var s=r===1;if(Td(e)){var i,d=!1;return va(()=>{if(!d){var _=e({direction:s?"in":"out"});i=pi(n,_,t,r,o)}}),{abort:()=>{d=!0,i==null||i.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return o(),{abort:wr,deactivate:wr,reset:wr,t:()=>r};const{delay:h=0,css:f,tick:m,easing:x=Lf}=e;var $=[];if(s&&t===void 0&&(m&&m(0,1),f)){var g=sl(f(0,1));$.push(g,g)}var p=()=>1-r,u=n.animate($,{duration:h,fill:"forwards"});return u.onfinish=()=>{u.cancel();var _=(t==null?void 0:t.t())??1-r;t==null||t.abort();var w=r-_,E=e.duration*Math.abs(w),P=[];if(E>0){var I=!1;if(f)for(var k=Math.ceil(E/16.666666666666668),Y=0;Y<=k;Y+=1){var ue=_+w*x(Y/k),L=sl(f(ue,1-ue));P.push(L),I||(I=L.overflow==="hidden")}I&&(n.style.overflow="hidden"),p=()=>{var X=u.currentTime;return _+w*x(X/E)},m&&If(()=>{if(u.playState!=="running")return!1;var X=p();return m(X,1-X),!0})}u=n.animate(P,{duration:E,fill:"forwards"}),u.onfinish=()=>{p=()=>r,m==null||m(r,1-r),o()}},{abort:()=>{u&&(u.cancel(),u.effect=null,u.onfinish=wr)},deactivate:()=>{o=wr},reset:()=>{r===0&&(m==null||m(1,0))},t:()=>p()}}function Ln(n,e,t=e){var r=new WeakSet;af(n,"input",async o=>{var s=o?n.defaultValue:n.value;if(s=qo(n)?jo(s):s,t(s),Rt!==null&&r.add(Rt),await Ca(),s!==(s=e())){var i=n.selectionStart,d=n.selectionEnd,h=n.value.length;if(n.value=s??"",d!==null){var f=n.value.length;i===d&&d===h&&f>h?(n.selectionStart=f,n.selectionEnd=f):(n.selectionStart=i,n.selectionEnd=Math.min(d,f))}}}),l(e)==null&&n.value&&(t(qo(n)?jo(n.value):n.value),Rt!==null&&r.add(Rt)),Ba(()=>{var o=e();if(n===document.activeElement){var s=Qa??Rt;if(r.has(s))return}qo(n)&&o===jo(n.value)||n.type==="date"&&!o&&!n.value||o!==n.value&&(n.value=o??"")})}function qo(n){var e=n.type;return e==="number"||e==="range"}function jo(n){return n===""?null:+n}function Nr(n,e,t){var r=xa(n,e);r&&r.set&&(n[e]=t,Fa(()=>{n[e]=null}))}var _n,sa,Da,vo,Pu;const ho=class ho{constructor(e){Qt(this,vo);Qt(this,_n,new WeakMap);Qt(this,sa);Qt(this,Da);Br(this,Da,e)}observe(e,t){var r=Je(this,_n).get(e)||new Set;return r.add(t),Je(this,_n).set(e,r),$r(this,vo,Pu).call(this).observe(e,Je(this,Da)),()=>{var o=Je(this,_n).get(e);o.delete(t),o.size===0&&(Je(this,_n).delete(e),Je(this,sa).unobserve(e))}}};_n=new WeakMap,sa=new WeakMap,Da=new WeakMap,vo=new WeakSet,Pu=function(){return Je(this,sa)??Br(this,sa,new ResizeObserver(e=>{for(var t of e){ho.entries.set(t.target,t);for(var r of Je(this,_n).get(t.target)||[])r(t)}}))},Kr(ho,"entries",new WeakMap);let vi=ho;var Df=new vi({box:"border-box"});function Uf(n,e,t){var r=Df.observe(n,()=>t(n[e]));xo(()=>(l(()=>t(n[e])),r))}function il(n,e){return n===e||(n==null?void 0:n[Pn])===e}function Eo(n={},e,t,r){return xo(()=>{var o,s;return Ba(()=>{o=s,s=[],l(()=>{n!==t(...s)&&(e(n,...s),o&&il(t(...o),n)&&e(null,...o))})}),()=>{va(()=>{s&&il(t(...s),n)&&e(null,...s)})}}),n}function Ff(n,e){nf(window,["resize"],()=>qn(()=>e(window[n])))}function qt(n){return function(...e){var t=e[0];return t.preventDefault(),n==null?void 0:n.apply(this,e)}}function Et(n=!1){const e=Pt,t=e.l.u;if(!t)return;let r=()=>Pe(e.s);if(n){let o=0,s={};const i=wo(()=>{let d=!1;const h=e.s;for(const f in h)h[f]!==s[f]&&(s[f]=h[f],d=!0);return d&&o++,o});r=()=>a(i)}t.b.length&&sf(()=>{ll(e,r),no(t.b)}),di(()=>{const o=l(()=>t.m.map(Rd));return()=>{for(const s of o)typeof s=="function"&&s()}}),t.a.length&&di(()=>{ll(e,r),no(t.a)})}function ll(n,e){if(n.l.s)for(const t of n.l.s)a(t);e()}function ga(n,e){var s;var t=(s=n.$$events)==null?void 0:s[e.type],r=go(t)?t.slice():t==null?[]:[t];for(var o of r)o.call(this,e)}function Di(n,e,t){if(n==null)return e(void 0),t&&t(void 0),wr;const r=l(()=>n.subscribe(e,t));return r.unsubscribe?()=>r.unsubscribe():r}const Gn=[];function Bf(n,e){return{subscribe:Iu(n,e).subscribe}}function Iu(n,e=wr){let t=null;const r=new Set;function o(d){if(Ai(n,d)&&(n=d,t)){const h=!Gn.length;for(const f of r)f[1](),Gn.push(f,n);if(h){for(let f=0;f<Gn.length;f+=2)Gn[f][0](Gn[f+1]);Gn.length=0}}}function s(d){o(d(n))}function i(d,h=wr){const f=[d,h];return r.add(f),r.size===1&&(t=e(o,s)||wr),d(n),()=>{r.delete(f),r.size===0&&t&&(t(),t=null)}}return{set:o,update:s,subscribe:i}}function Mu(n,e,t){const r=!Array.isArray(n),o=r?[n]:n;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Bf(t,(i,d)=>{let h=!1;const f=[];let m=0,x=wr;const $=()=>{if(m)return;x();const p=e(r?f[0]:f,i,d);s?i(p):x=typeof p=="function"?p:wr},g=o.map((p,u)=>Di(p,_=>{f[u]=_,m&=~(1<<u),h&&$()},()=>{m|=1<<u}));return h=!0,$(),function(){no(g),x(),h=!1}})}function Lu(n){let e;return Di(n,t=>e=t)(),e}let Ja=!1,hi=Symbol();function Oe(n,e,t){const r=t[e]??(t[e]={store:null,source:Ee(void 0),unsubscribe:wr});if(r.store!==n&&!(hi in t))if(r.unsubscribe(),r.store=n??null,n==null)r.source.v=void 0,r.unsubscribe=wr;else{var o=!0;r.unsubscribe=Di(n,s=>{o?r.source.v=s:K(r.source,s)}),o=!1}return n&&hi in t?Lu(n):a(r.source)}function Jr(n,e,t){let r=t[e];return r&&r.store!==n&&(r.unsubscribe(),r.unsubscribe=wr),n}function Du(n,e){return n.set(e),e}function Lt(){const n={};function e(){Fa(()=>{for(var t in n)n[t].unsubscribe();Kc(n,hi,{enumerable:!1,value:!0})})}return[n,e]}function qf(n){var e=Ja;try{return Ja=!1,[n(),Ja]}finally{Ja=e}}function Ye(n,e,t,r){var P;var o=!da||(t&bd)!==0,s=(t&$d)!==0,i=(t&wd)!==0,d=r,h=!0,f=()=>(h&&(h=!1,d=i?l(r):r),d),m;if(s){var x=Pn in n||Pd in n;m=((P=xa(n,e))==null?void 0:P.set)??(x&&e in n?I=>n[e]=I:void 0)}var $,g=!1;s?[$,g]=qf(()=>n[e]):$=n[e],$===void 0&&r!==void 0&&($=f(),m&&(o&&Bd(),m($)));var p;if(o?p=()=>{var I=n[e];return I===void 0?f():(h=!0,I)}:p=()=>{var I=n[e];return I!==void 0&&(d=void 0),I===void 0?d:I},o&&!(t&yd))return p;if(m){var u=n.$$legacy;return function(I,k){return arguments.length>0?((!o||!k||u||g)&&m(k?p():I),I):p()}}var _=!1,w=(t&md?wo:je)(()=>(_=!1,p()));s&&a(w);var E=Tt;return function(I,k){if(arguments.length>0){const Y=k?a(w):o&&s?Zn(I):I;return K(w,Y),_=!0,d!==void 0&&(d=Y),I}return jn&&_||E.f&bn?w.v:a(w)}}const Ui=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"],eo=Ui.length;function jf(n=""){let e=0;for(let t=0;t<n.length;t++)e=n.charCodeAt(t)+((e<<5)-e),e=e&e;return e=Math.abs(e),e%eo}function zf(n){return Number.isInteger(n)?(n%eo+eo)%eo:void 0}function Hf(n,e){const t=zf(e),r=typeof t=="number"?t:jf(n);return Ui[r]}function Wf(){return Ui.map((n,e)=>({className:n,id:e}))}const Gf={brand:"fab",regular:"far",solid:"fas"},zo={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"};var Kf=S("<i></i>");function Te(n,e){wt(e,!1);let t=Ye(e,"class",8,""),r=Ye(e,"animation",8,""),o=Ye(e,"color",8,""),s=Ye(e,"family",8,""),i=Ye(e,"name",8),d=Ye(e,"avatarId",8);function h(x,$,g,p){const u=[],_=x.match(/^pick:(.+)$/);if(_){if(_[1]==="Convos")return"fas fa-info-circle";if(zo[_[1]])return"fas fa-contributor for-"+_[1].toLowerCase();u.push(Hf(_[1],p))}else u.push(Gf[$]||"fas"),u.push("fa-"+x);return g&&u.push(g.split(" ").map(w=>"fa-"+w)),t()&&u.push(t().split(" ")),u.join(" ")}function f(x,$){const g=[];let p="color:";const u=x.match(/^pick:(.+)$/);return u&&zo[u[1]]&&(p="background-color:",g.push('background-image:url("'+zo[u[1]]+'")')),$&&g.push(p+$),g.join(";")}Et();var m=Kf();A((x,$)=>{Ut(m,1,x),En(m,$),ze(m,"hidden",!i())},[()=>(Pe(i()),Pe(s()),Pe(r()),Pe(d()),l(()=>h(i(),s(),r(),d()))),()=>(Pe(i()),Pe(o()),l(()=>f(i(),o())))]),y(n,m),xt()}function So(n,e){const t=Iu(n);t.get=()=>Lu(t);for(let r in e)Object.hasOwn(e,r)&&(t[r]=e[r].bind(t));return t}const xr=So("",{toggle(n){n.preventDefault();const e=n.target.closest("a"),t=e&&e.href.replace(/.*#/,"");this.set(this.get()===t?"":t)}}),Sn=So({hasLeftColumn:!1,hasRightColumn:!1,isSingleColumn:!0,sidebarTransition:{},width:0},{setWidth(n){const e=n>=800,t=n>=1200,r=!(e||t),o={duration:250,x:r?n:0};this.set({hasLeftColumn:e,hasRightColumn:t,isSingleColumn:r,sidebarTransition:o,width:n})}});var Vf=S('<a href="#nav"><!><!> <small class="badge is-important"> </small></a>'),Yf=S('<header class="chat-header"><!> <!></header>');function Dr(n,e){wt(e,!1);const t=()=>Oe(Sn,"$viewport",s),r=()=>Oe(xr,"$activeMenu",s),o=()=>Oe(d,"$notifications",s),[s,i]=Lt(),d=rr("user").notifications;Et();var h=Yf(),f=c(h);en(f,e,"default",{},null);var m=v(f,2);{var x=$=>{var g=Vf();let p;var u=c(g);Te(u,{name:"bars"});var _=v(u);Te(_,{name:"times"});var w=v(_,2),E=c(w);A(()=>{p=Ut(g,1,"btn-hallow can-toggle",null,p,{"is-active":r()==="nav"}),ze(w,"hidden",!o().notifications),b(E,o().notifications)}),Qe("click",g,function(...P){var I;(I=xr.toggle)==null||I.apply(this,P)}),y($,g)};me(m,$=>{t().hasLeftColumn||$(x)})}y(n,h),xt(),i()}/*! js-cookie v3.0.5 | MIT */function Xa(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)n[r]=t[r]}return n}var Zf={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function gi(n,e){function t(o,s,i){if(!(typeof document>"u")){i=Xa({},e,i),typeof i.expires=="number"&&(i.expires=new Date(Date.now()+i.expires*864e5)),i.expires&&(i.expires=i.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var h in i)i[h]&&(d+="; "+h,i[h]!==!0&&(d+="="+i[h].split(";")[0]));return document.cookie=o+"="+n.write(s,o)+d}}function r(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var s=document.cookie?document.cookie.split("; "):[],i={},d=0;d<s.length;d++){var h=s[d].split("="),f=h.slice(1).join("=");try{var m=decodeURIComponent(h[0]);if(i[m]=n.read(f,m),o===m)break}catch{}}return o?i[o]:i}}return Object.create({set:t,get:r,remove:function(o,s){t(o,"",Xa({},s,{expires:-1}))},withAttributes:function(o){return gi(this.converter,Xa({},this.attributes,o))},withConverter:function(o){return gi(Xa({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var cl=gi(Zf,{path:"/"}),ul={};const Jf=typeof process>"u"||typeof ul!="object"?"info":ul.LOG_LEVEL||"quiet",Ho=["trace","debug","info","warn","error","quiet"],_i={},Kn={},dl=()=>{};_i.root=new Uu({name:"root"});function Xf(n){return Kn.root===void 0&&(Object.entries(JSON.parse(localStorage.getItem("logger:nameToLevel")||"{}")).forEach(([e,t])=>{Kn[e]=t||"debug"}),((location.href.match(/_debug=([a-z,:]+)/)||[]).pop()||"").split(",").forEach(e=>{const[t,r]=e.split(":");Kn[t]=r||"debug"}),localStorage.setItem("logger:nameToLevel",JSON.stringify(Kn))),Kn[n]||Kn.root||Jf}function Uu({name:n}){this.name=n,this.isLevel=e=>{const t=Ho.indexOf(e)||e||e.length;return this.numLevel>=t},this.setLevel=e=>{let t=Ho.indexOf(e);return t===-1&&(t=2),this.numLevel=t,Ho.forEach((r,o)=>{const s=r==="trace"||r==="debug"?"log":r,i=!console||o<t?dl:console[s]||console.log||dl;this[r]=i.bind(this,"["+this.name+"]")}),this},this.setLevel(Xf(n))}function _a(n="root"){return _i[n]||(_i[n]=new Uu({name:n}))}const Qf=_a("util"),ep=.618033988749,mi=1e3,bi=mi*1e3,fl=bi*1e3;function yi(n,e){if(e&&!e.match(/^[+-]\w/)&&(e="+"+e),!e)return{};const t={};let r=!0;for(const o of e)o==="+"?r=!0:o==="-"?r=!1:t[n[o]||o]=r;return t}function $i(n,e){for(;n;){if(e.tagName?n===e:n.matches&&n.matches(e))return n;n=n.parentNode}return null}function Fu(n){const t=Bu("textarea",{style:{opacity:0,position:"absolute"},value:n.textContent||n.value});document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(r){t.value="",Qf.error("copyToClipboard() failed:",r)}return document.body.removeChild(t),t.value}function Bu(n,e){const t=document.createElement(n);for(let r in e)Object.hasOwn(e,r)&&(t[r]=e[r]);return t}function tp(n,e,t){let r=n&&n.querySelector("."+e.split(" ").join("."));return r||(r=document.createElement("div"),r.className=e,n&&n.appendChild(r),t&&t(r),r)}function Fi(n,e="message"){const t=n.errors||n;return t&&t[0]?t[0][e]||"Unknown error.":""}function rp(n,e=document){const t=[...n.childNodes],r=[];let o=0;for(;o<t.length;)t[o].nodeType===Node.ELEMENT_NODE?(r.push([o,t[o]]),o++):t.splice(o,1);if(!t.length)return[];const s=e.scrollTop;for(;r.length>1;){const f=Math.floor(r.length/2);r[f][1].offsetTop<=s?r.splice(0,f):r.splice(f)}r.length||r.push([0,t[0]]);const i=e.offsetHeight,d=r[0][0];let h=d;for(;h<t.length&&!(t[h].offsetTop>s+i);)h++;return t.slice(d,h).filter(f=>!f.getAttribute("aria-hidden"))}function np(n=0,e=.5,t=.95){var r=Math.floor(n*6),o=n*6-r,s=t*(1-e),i=t*(1-o*e),d=t*(1-(1-o)*e),h=255,f=255,m=255;switch(r){case 0:h=t,f=d,m=s;break;case 1:h=i,f=t,m=s;break;case 2:h=s,f=t,m=d;break;case 3:h=s,f=i,m=t;break;case 4:h=d,f=s,m=t;break;case 5:h=t,f=s,m=i;break}return[Math.floor(h*255),Math.floor(f*255),Math.floor(m*255)]}function Jn(n,e){const t=n<mi?[n,""]:n<bi?[n/mi,"k"]:n<fl?[n/bi,"M"]:[n/fl,"G"],r=String(Math.round(t[0]*10)/10);return(r.match(/\./)?r:r+".0")+t[1]+(e||"")}const tt={array:n=>Array.isArray(n),defined:n=>!tt.undefined(n),false:n=>!tt.true(n),function:n=>typeof n=="function",number:n=>typeof n=="number",object:n=>typeof n=="object"&&n!==null,string:n=>typeof n=="string",stringable:n=>typeof n=="number"||typeof n=="string",true:n=>tt.string(n)?!!n.length&&n!=="0":!!n,undefined:n=>n===null||typeof n>"u"};function ap(n){const e=document,t=n.replace(/\W/g,"_");if(e.getElementById(t))return;const r=e.createElement("script");return[r.id,r.src]=[t,n],e.getElementsByTagName("head")[0].appendChild(r),new Promise((o,s)=>{r.addEventListener("error",s),r.addEventListener("load",o)})}function Sr(n,e=" "){return n.replace(/\s/g,e)}function hr(n,e,t){const r=e===":children"?n.children:n.querySelectorAll(e);if(!t)return[].slice.call(r,0);if(Array.isArray(t))return[].forEach.call(r,s=>s.addEventListener(t[0],t[1]));const o=[];for(let s=0;s<r.length;s++)o.push(t(r[s],s));return o}function op(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function it(n,e){const t=r=>document.querySelector('meta[name="convos:'+r+'"]')||document.querySelector('meta[name="'+r+'"]');if(arguments.length===1){n==="organization_name"&&(n="contactorganization"),n==="organization_url"&&(n="contactnetworkaddress");const r=t(n);if(!r)throw'Cannot get settings for "'+n+'".';const o={no:!1,yes:!0};return n==="contact"?atob(r.content||""):Object.hasOwn(o,r.content)?o[r.content]:r.content}n==="organization_name"&&(n="contactorganization"),n==="organization_url"&&(n="contactnetworkaddress"),n==="contact"&&(e=btoa(e)),typeof e=="boolean"&&(e=e?"yes":"no"),t(n).content=e}function sp(n,e){n&&n.preventDefault&&n.preventDefault();const t=tp(document.body,"fullscreen",r=>{r.addEventListener("click",o=>o.target===r&&r.hide()),r.hide=()=>t.classList.add("hidden")});return op(t),e?(t.classList.remove("hidden"),t.appendChild(e.cloneNode(!0)),t):t.hide()}function Bi(n){return(tt.string(n)?n:"").split(/[.,\s]+/).map(e=>e.trim()).filter(e=>e.length)}function io(n,e=100){if(n.length===0)return"#000";let t=0;for(let r=0;r<n.length;r++)t=n.charCodeAt(r)+((t<<5)-t),t=t&t;return t=Math.abs(t%e/e),"#"+np((t+ep)%1,.4,.7).map(r=>r.toString(16)).join("")}function qi(n,e){return tt.array(e)?e.find(t=>qi(n,t))||!1:n&&n.tagName&&n.tagName.toLowerCase()===e||!1}function ip(n,e=!0){return new Promise((t,r)=>{setTimeout(()=>{typeof e=="function"?t(e()):typeof e=="string"?r(e):t(e)},n)})}function ko(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}const Wo=_a("reactive");class Pr{constructor(){this.cookieName="convos_js",this._on={},this._props={}}emit(e,...t){const r=this._on[e];for(let o=0;o<(r||[]).length;o++)r[o][0](...t);return this}on(e,t){const r=t?null:new Promise(d=>{t=d}),o=this._on[e]||(this._on[e]=[]),s=[t];o.push(s);const i=()=>{const d=o.indexOf(s);d!==-1&&o.splice(d,1)};return r?r.finally(i):i}prop(e,t,r,o={}){const s={...o,defaultValue:r,name:t,type:e,value:r};switch(this._props[t]=s,s.updateable=["cookie","persist","rw"].indexOf(e)!==-1,e){case"cookie":return this._cookieProp(s);case"persist":return this._localStorageProp(s);case"ro":return this._readOnlyProp(s);case"rw":return this._updateableProp(s)}throw"["+this.constructor.name+'] Unknown prop type "'+e+'" for prop "'+t+'".'}subscribe(e){return e(this),this.on("update",e)}update(e){return Object.keys(e).forEach(t=>{const r=this._props[t];if(!r)return Wo.trace("["+this.constructor.name+'] Unknown prop "'+t+'".');Object.hasOwn(r,"prev")||(r.prev=r.type==="ro"?void 0:r.value),r.updateable&&(r.value=e[t])}),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}_cookie(e,t){const r=e.key||e.name,o=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!o[this.cookieName])try{const d=cl.get(this.cookieName);o[this.cookieName]=JSON.parse(d?atob(d):"{}")}catch(d){Wo.error({[r]:d})}const s=o[this.cookieName]||{};if(arguments.length===1)return s[r];t===e.defaultValue?delete s[r]:s[r]=t;const i=location.href.indexOf("https:")===0;cl.set(this.cookieName,btoa(JSON.stringify(s)),{expires:365,SameSite:"Lax",secure:i})}_cookieProp(e){const t=this._cookie(e);tt.defined(t)&&(e.value=t),tt.undefined(t)&&this._cookie(e,e.value),this._updateableProp(e)}_delayedUpdate(){const e={};return Object.keys(this._props).forEach(t=>{const r=this._props[t];if(!Object.hasOwn(r,"prev"))return;const o=r.prev;delete r.prev,r.value!==o&&(r.type==="cookie"&&this._cookie(r,r.value),r.type==="persist"&&this._localStorage(r,r.value),e[t]=r.type!=="ro")}),delete this._updatedTid,Object.keys(e).length&&this.emit("update",this,e),e}_localStorage(e,t){const r="convos:"+(e.key||e.name);if(arguments.length===2)return t===e.defaultValue?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(t));try{return Object.hasOwn(localStorage,r)?JSON.parse(localStorage.getItem(r)):void 0}catch(o){Wo.error({[r]:localStorage.getItem(r)},o);return}}_localStorageProp(e){const t=this._localStorage(e);tt.defined(t)&&(e.value=t),tt.undefined(t)&&this._localStorage(e,e.value),this._updateableProp(e)}_readOnlyProp(e){if(e.value===void 0)throw"["+this.constructor.name+'] Read-only attribute "'+e.name+'" cannot be undefined';const t=tt.function(e.value)?e.value:()=>e.value;Object.defineProperty(this,e.name,{get:t})}_updateableProp(e){const t=e.name;Object.defineProperty(this,t,{get(){return e.value},set(r){e.value===r||this.update({[t]:r})}})}}class lp extends Pr{constructor(){super(),this.prop("persist","history",[],{key:"command_history"}),this.prop("rw","conversation",null),this.prop("rw","index",-1)}add(e){if(!e.length)return this;const t=this.history.slice(0,19);return t.unshift(e),this.update({history:t,index:-1})}attach(e){this.inputEl=e}render(e,t){t=this.index+t,t<-1&&(t=-1),t>=this.history.length&&(t=this.history.length-1);const r=this.inputEl.value;return this.inputEl.selectionStart!==r.length||r.length&&r!==this.history[this.index]?!1:(e.preventDefault(),this.update({index:t}),this.inputEl.value=t===-1?"":this.history[t],!0)}update(e){return e.conversation&&e.conversation!==this.conversation&&this.update({index:-1}),super.update(e)}}var wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ma(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function cp(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),t}var Go,pl;function up(){if(pl)return Go;pl=1;var n=typeof wa=="object"&&wa&&wa.Object===Object&&wa;return Go=n,Go}var Ko,vl;function qu(){if(vl)return Ko;vl=1;var n=up(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=n||e||Function("return this")();return Ko=t,Ko}var Vo,hl;function ju(){if(hl)return Vo;hl=1;var n=qu(),e=function(){return n.Date.now()};return Vo=e,Vo}var dp=ju();const to=ma(dp);var Yo,gl;function ji(){if(gl)return Yo;gl=1;var n=qu(),e=n.Symbol;return Yo=e,Yo}var Zo,_l;function fp(){if(_l)return Zo;_l=1;function n(e,t){for(var r=-1,o=e==null?0:e.length,s=Array(o);++r<o;)s[r]=t(e[r],r,e);return s}return Zo=n,Zo}var Jo,ml;function pp(){if(ml)return Jo;ml=1;var n=Array.isArray;return Jo=n,Jo}var Xo,bl;function vp(){if(bl)return Xo;bl=1;var n=ji(),e=Object.prototype,t=e.hasOwnProperty,r=e.toString,o=n?n.toStringTag:void 0;function s(i){var d=t.call(i,o),h=i[o];try{i[o]=void 0;var f=!0}catch{}var m=r.call(i);return f&&(d?i[o]=h:delete i[o]),m}return Xo=s,Xo}var Qo,yl;function hp(){if(yl)return Qo;yl=1;var n=Object.prototype,e=n.toString;function t(r){return e.call(r)}return Qo=t,Qo}var es,$l;function gp(){if($l)return es;$l=1;var n=ji(),e=vp(),t=hp(),r="[object Null]",o="[object Undefined]",s=n?n.toStringTag:void 0;function i(d){return d==null?d===void 0?o:r:s&&s in Object(d)?e(d):t(d)}return es=i,es}var ts,wl;function _p(){if(wl)return ts;wl=1;function n(e){return e!=null&&typeof e=="object"}return ts=n,ts}var rs,xl;function zu(){if(xl)return rs;xl=1;var n=gp(),e=_p(),t="[object Symbol]";function r(o){return typeof o=="symbol"||e(o)&&n(o)==t}return rs=r,rs}var ns,El;function mp(){if(El)return ns;El=1;var n=ji(),e=fp(),t=pp(),r=zu(),o=n?n.prototype:void 0,s=o?o.toString:void 0;function i(d){if(typeof d=="string")return d;if(t(d))return e(d,i)+"";if(r(d))return s?s.call(d):"";var h=d+"";return h=="0"&&1/d==-1/0?"-0":h}return ns=i,ns}var as,Sl;function qa(){if(Sl)return as;Sl=1;var n=mp();function e(t){return t==null?"":n(t)}return as=e,as}var os,kl;function bp(){if(kl)return os;kl=1;var n=qa(),e=/[\\^$.*+?()[\]{}|]/g,t=RegExp(e.source);function r(o){return o=n(o),o&&t.test(o)?o.replace(e,"\\$&"):o}return os=r,os}var yp=bp();const ba=ma(yp),$p=_a("api");class Ao extends Pr{constructor(e){super(),this.prop("ro","api",e.api),this.prop("ro","defaultParams",e.defaultParams||{}),this.prop("ro","id",e.id),this.prop("rw","err",null),this.prop("rw","req",{body:null,headers:{}}),this.prop("rw","res",{body:{},headers:[]}),this.prop("rw","status","pending")}error(e){if(e)return this.update({err:Array.isArray(e)?e:[{message:e}],status:"error"});if(!this.err||!this.err.length)return"";const t=this.err[0],r=t.path&&t.path.match(/\w$/)&&t.path.split("/").pop();return r?r+": "+t.message:t.message}perform(e){let t;return this._promise||(this._promise=this.api.spec(this.id).then(r=>{if(!r)throw'Unknown operationId "'+this.id+'".';const o=this._paramsToRequest(r,e||this.defaultParams);return t=new XMLHttpRequest,this.update({req:o,status:"loading"}),this._send(t,o)}).then(()=>{const r={};r.body=t.response?JSON.parse(t.response):{},r.headers=(t.getAllResponseHeaders()||"").trim().split(/[\r\n]+/).filter(s=>s.length).map(s=>s.split(/:\s*/,2)),r.status=String(t.status||"201");let o=null;return String(r.status).match(/^[23]/)||(o=r.body&&r.body.errors?r.body.errors:[{message:t.statusText||"Unknown error."}]),this.update({err:o,res:r,status:o?"error":"success"})}).catch(r=>(r.type&&(r=r.type),$p.error(this.req.url+" FAILED "+r),this.update({res:{body:{errors:[{message:String(r)}]},headers:[],status:"599"},status:"error"}),this.error(Array.isArray(r)?r:'Failed fetching operationId "'+this.id+'": '+r))).finally(()=>{delete this._promise}))}is(e){return this.status===e}reset(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}_extractValue(e,t){return t.schema?Object.keys(t.schema.properties).reduce((r,o)=>(r[o]=e[o],r),{}):e[t.name]}_hasProperty(e,t){return t.in==="body"?!0:t.in==="formData"?e.formData.has(t.name):Object.hasOwn(e,t.name)}_paramsToRequest(e,t){const r=new URL(e.url),o={headers:this.req.headers,method:e.method.toLowerCase(),url:r},s=[];if((e.parameters||[]).forEach(i=>{if(!this._hasProperty(t,i)&&i.required)s.push({message:"Missing property.",path:"/"+i.name});else{if(!this._hasProperty(t,i)&&!i.required)return;if(i.in==="path"){const d=new RegExp("(%7B|\\{)"+ba(i.name)+"(%7D|\\})","i");r.pathname=r.pathname.replace(d,encodeURIComponent(this._extractValue(t,i)))}else if(i.in==="query")r.searchParams.set(i.name,this._extractValue(t,i));else if(i.in==="formData")delete o.headers["Content-Type"],o.body=t.formData;else if(i.in==="body")o.body=this._extractValue(t,i);else if(i.in==="header")o.header[i.name]=this._extractValue(t,i.name);else throw"[Api] Parameter in:"+i.in+" is not supported."}}),s.length)throw s;return o}_send(e,t){return e.timeout=15e3,e.open(t.method.toUpperCase(),t.url),Object.keys(t.headers).forEach(r=>e.setRequestHeader(r,t.headers[r])),t.method==="post"?(e.upload.addEventListener("progress",r=>this.emit("progress",r)),e.send(tt.object(t.body)&&!tt.function(t.body.has)?JSON.stringify(t.body):t.body)):e.send(),new Promise(r=>{e.addEventListener("abort",r),e.addEventListener("error",r),e.addEventListener("load",r)})}}class wp{constructor(){this.protocol=location.protocol||"http",this._url="/api"}op(e,t){const r=new Ao({api:this,id:e,defaultParams:t});return r.req.headers={"Content-Type":"application/json"},r}async spec(e){if(this._ops&&e)return this._ops[e];if(this._spec)return this._spec;const r=await(await fetch(this._url)).json();if(this._ops={},this._spec=r,Object.keys(r.paths).forEach(o=>{Object.keys(r.paths[o]).forEach(s=>{const i=r.paths[o][s],d=i.operationId;d&&(i.method=s.toUpperCase(),i.url=this.protocol+"//"+r.host+r.basePath+o+".json",i.parameters=(i.parameters||[]).map(h=>this._resolveRef(h)),this._ops[d]=i)})}),this._ops&&e)return this._ops[e];if(this._spec)return this._spec}url(e){return this._url=e,this}_resolveRef(e){let t=e;if(e.$ref){const r=e.$ref.replace(/^#\//,"").split("/");for(t=this._spec;r.length;)t=t[r.shift()]}return tt.object(t)&&Object.keys(t).forEach(r=>{t[r]=this._resolveRef(t[r])}),t}}const Ct=new wp;var ss,Al;function xp(){return Al||(Al=1,ss=Error),ss}var is,Ol;function Ep(){return Ol||(Ol=1,is=EvalError),is}var ls,Cl;function Sp(){return Cl||(Cl=1,ls=RangeError),ls}var cs,Tl;function kp(){return Tl||(Tl=1,cs=ReferenceError),cs}var us,Nl;function Hu(){return Nl||(Nl=1,us=SyntaxError),us}var ds,Rl;function ja(){return Rl||(Rl=1,ds=TypeError),ds}var fs,Pl;function Ap(){return Pl||(Pl=1,fs=URIError),fs}var ps,Il;function Op(){return Il||(Il=1,ps=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var o=42;e[t]=o;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(e,t);if(i.value!==o||i.enumerable!==!0)return!1}return!0}),ps}var vs,Ml;function Cp(){if(Ml)return vs;Ml=1;var n=typeof Symbol<"u"&&Symbol,e=Op();return vs=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},vs}var hs,Ll;function Tp(){if(Ll)return hs;Ll=1;var n={__proto__:null,foo:{}},e=Object;return hs=function(){return{__proto__:n}.foo===n.foo&&!(n instanceof e)},hs}var gs,Dl;function Np(){if(Dl)return gs;Dl=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,r="[object Function]",o=function(h,f){for(var m=[],x=0;x<h.length;x+=1)m[x]=h[x];for(var $=0;$<f.length;$+=1)m[$+h.length]=f[$];return m},s=function(h,f){for(var m=[],x=f,$=0;x<h.length;x+=1,$+=1)m[$]=h[x];return m},i=function(d,h){for(var f="",m=0;m<d.length;m+=1)f+=d[m],m+1<d.length&&(f+=h);return f};return gs=function(h){var f=this;if(typeof f!="function"||e.apply(f)!==r)throw new TypeError(n+f);for(var m=s(arguments,1),x,$=function(){if(this instanceof x){var w=f.apply(this,o(m,arguments));return Object(w)===w?w:this}return f.apply(h,o(m,arguments))},g=t(0,f.length-m.length),p=[],u=0;u<g;u++)p[u]="$"+u;if(x=Function("binder","return function ("+i(p,",")+"){ return binder.apply(this,arguments); }")($),f.prototype){var _=function(){};_.prototype=f.prototype,x.prototype=new _,_.prototype=null}return x},gs}var _s,Ul;function zi(){if(Ul)return _s;Ul=1;var n=Np();return _s=Function.prototype.bind||n,_s}var ms,Fl;function Rp(){if(Fl)return ms;Fl=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=zi();return ms=t.call(n,e),ms}var bs,Bl;function ya(){if(Bl)return bs;Bl=1;var n,e=xp(),t=Ep(),r=Sp(),o=kp(),s=Hu(),i=ja(),d=Ap(),h=Function,f=function(ye){try{return h('"use strict"; return ('+ye+").constructor;")()}catch{}},m=Object.getOwnPropertyDescriptor;if(m)try{m({},"")}catch{m=null}var x=function(){throw new i},$=m?function(){try{return arguments.callee,x}catch{try{return m(arguments,"callee").get}catch{return x}}}():x,g=Cp()(),p=Tp()(),u=Object.getPrototypeOf||(p?function(ye){return ye.__proto__}:null),_={},w=typeof Uint8Array>"u"||!u?n:u(Uint8Array),E={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":g&&u?u([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":_,"%AsyncGenerator%":_,"%AsyncGeneratorFunction%":_,"%AsyncIteratorPrototype%":_,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":t,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":h,"%GeneratorFunction%":_,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&u?u(u([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!g||!u?n:u(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":r,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!g||!u?n:u(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&u?u(""[Symbol.iterator]()):n,"%Symbol%":g?Symbol:n,"%SyntaxError%":s,"%ThrowTypeError%":$,"%TypedArray%":w,"%TypeError%":i,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":d,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet};if(u)try{null.error}catch(ye){var P=u(u(ye));E["%Error.prototype%"]=P}var I=function ye(Q){var le;if(Q==="%AsyncFunction%")le=f("async function () {}");else if(Q==="%GeneratorFunction%")le=f("function* () {}");else if(Q==="%AsyncGeneratorFunction%")le=f("async function* () {}");else if(Q==="%AsyncGenerator%"){var xe=ye("%AsyncGeneratorFunction%");xe&&(le=xe.prototype)}else if(Q==="%AsyncIteratorPrototype%"){var Re=ye("%AsyncGenerator%");Re&&u&&(le=u(Re.prototype))}return E[Q]=le,le},k={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Y=zi(),ue=Rp(),L=Y.call(Function.call,Array.prototype.concat),X=Y.call(Function.apply,Array.prototype.splice),te=Y.call(Function.call,String.prototype.replace),ve=Y.call(Function.call,String.prototype.slice),ne=Y.call(Function.call,RegExp.prototype.exec),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,W=/\\(\\)?/g,J=function(Q){var le=ve(Q,0,1),xe=ve(Q,-1);if(le==="%"&&xe!=="%")throw new s("invalid intrinsic syntax, expected closing `%`");if(xe==="%"&&le!=="%")throw new s("invalid intrinsic syntax, expected opening `%`");var Re=[];return te(Q,q,function(se,ie,de,we){Re[Re.length]=de?te(we,W,"$1"):ie||se}),Re},$e=function(Q,le){var xe=Q,Re;if(ue(k,xe)&&(Re=k[xe],xe="%"+Re[0]+"%"),ue(E,xe)){var se=E[xe];if(se===_&&(se=I(xe)),typeof se>"u"&&!le)throw new i("intrinsic "+Q+" exists, but is not available. Please file an issue!");return{alias:Re,name:xe,value:se}}throw new s("intrinsic "+Q+" does not exist!")};return bs=function(Q,le){if(typeof Q!="string"||Q.length===0)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof le!="boolean")throw new i('"allowMissing" argument must be a boolean');if(ne(/^%?[^%]*%?$/,Q)===null)throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var xe=J(Q),Re=xe.length>0?xe[0]:"",se=$e("%"+Re+"%",le),ie=se.name,de=se.value,we=!1,Ce=se.alias;Ce&&(Re=Ce[0],X(xe,L([0,1],Ce)));for(var j=1,ee=!0;j<xe.length;j+=1){var z=xe[j],M=ve(z,0,1),F=ve(z,-1);if((M==='"'||M==="'"||M==="`"||F==='"'||F==="'"||F==="`")&&M!==F)throw new s("property names with quotes must have matching quotes");if((z==="constructor"||!ee)&&(we=!0),Re+="."+z,ie="%"+Re+"%",ue(E,ie))de=E[ie];else if(de!=null){if(!(z in de)){if(!le)throw new i("base intrinsic for "+Q+" exists, but the property is not available.");return}if(m&&j+1>=xe.length){var T=m(de,z);ee=!!T,ee&&"get"in T&&!("originalValue"in T.get)?de=T.get:de=de[z]}else ee=ue(de,z),de=de[z];ee&&!we&&(E[ie]=de)}}return de},bs}var ys={exports:{}},$s,ql;function Hi(){if(ql)return $s;ql=1;var n=ya(),e=n("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return $s=e,$s}var ws,jl;function Wu(){if(jl)return ws;jl=1;var n=ya(),e=n("%Object.getOwnPropertyDescriptor%",!0);if(e)try{e([],"length")}catch{e=null}return ws=e,ws}var xs,zl;function Pp(){if(zl)return xs;zl=1;var n=Hi(),e=Hu(),t=ja(),r=Wu();return xs=function(s,i,d){if(!s||typeof s!="object"&&typeof s!="function")throw new t("`obj` must be an object or a function`");if(typeof i!="string"&&typeof i!="symbol")throw new t("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new t("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new t("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new t("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new t("`loose`, if provided, must be a boolean");var h=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,m=arguments.length>5?arguments[5]:null,x=arguments.length>6?arguments[6]:!1,$=!!r&&r(s,i);if(n)n(s,i,{configurable:m===null&&$?$.configurable:!m,enumerable:h===null&&$?$.enumerable:!h,value:d,writable:f===null&&$?$.writable:!f});else if(x||!h&&!f&&!m)s[i]=d;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},xs}var Es,Hl;function Ip(){if(Hl)return Es;Hl=1;var n=Hi(),e=function(){return!!n};return e.hasArrayLengthDefineBug=function(){if(!n)return null;try{return n([],"length",{value:1}).length!==1}catch{return!0}},Es=e,Es}var Ss,Wl;function Mp(){if(Wl)return Ss;Wl=1;var n=ya(),e=Pp(),t=Ip()(),r=Wu(),o=ja(),s=n("%Math.floor%");return Ss=function(d,h){if(typeof d!="function")throw new o("`fn` is not a function");if(typeof h!="number"||h<0||h>4294967295||s(h)!==h)throw new o("`length` must be a positive 32-bit integer");var f=arguments.length>2&&!!arguments[2],m=!0,x=!0;if("length"in d&&r){var $=r(d,"length");$&&!$.configurable&&(m=!1),$&&!$.writable&&(x=!1)}return(m||x||!f)&&(t?e(d,"length",h,!0,!0):e(d,"length",h)),d},Ss}var Gl;function Lp(){return Gl||(Gl=1,function(n){var e=zi(),t=ya(),r=Mp(),o=ja(),s=t("%Function.prototype.apply%"),i=t("%Function.prototype.call%"),d=t("%Reflect.apply%",!0)||e.call(i,s),h=Hi(),f=t("%Math.max%");n.exports=function($){if(typeof $!="function")throw new o("a function is required");var g=d(e,i,arguments);return r(g,1+f(0,$.length-(arguments.length-1)),!0)};var m=function(){return d(e,s,arguments)};h?h(n.exports,"apply",{value:m}):n.exports.apply=m}(ys)),ys.exports}var ks,Kl;function Dp(){if(Kl)return ks;Kl=1;var n=ya(),e=Lp(),t=e(n("String.prototype.indexOf"));return ks=function(o,s){var i=n(o,!!s);return typeof i=="function"&&t(o,".prototype.")>-1?e(i):i},ks}const Up={},Fp=Object.freeze(Object.defineProperty({__proto__:null,default:Up},Symbol.toStringTag,{value:"Module"})),Bp=cp(Fp);var As,Vl;function qp(){if(Vl)return As;Vl=1;var n=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=n&&e&&typeof e.get=="function"?e.get:null,r=n&&Map.prototype.forEach,o=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,i=o&&s&&typeof s.get=="function"?s.get:null,d=o&&Set.prototype.forEach,h=typeof WeakMap=="function"&&WeakMap.prototype,f=h?WeakMap.prototype.has:null,m=typeof WeakSet=="function"&&WeakSet.prototype,x=m?WeakSet.prototype.has:null,$=typeof WeakRef=="function"&&WeakRef.prototype,g=$?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,u=Object.prototype.toString,_=Function.prototype.toString,w=String.prototype.match,E=String.prototype.slice,P=String.prototype.replace,I=String.prototype.toUpperCase,k=String.prototype.toLowerCase,Y=RegExp.prototype.test,ue=Array.prototype.concat,L=Array.prototype.join,X=Array.prototype.slice,te=Math.floor,ve=typeof BigInt=="function"?BigInt.prototype.valueOf:null,ne=Object.getOwnPropertySymbols,q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,W=typeof Symbol=="function"&&typeof Symbol.iterator=="object",J=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===W||!0)?Symbol.toStringTag:null,$e=Object.prototype.propertyIsEnumerable,ye=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(N){return N.__proto__}:null);function Q(N,U){if(N===1/0||N===-1/0||N!==N||N&&N>-1e3&&N<1e3||Y.call(/e/,U))return U;var Ue=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof N=="number"){var Ke=N<0?-te(-N):te(N);if(Ke!==N){var Ve=String(Ke),He=E.call(U,Ve.length+1);return P.call(Ve,Ue,"$&_")+"."+P.call(P.call(He,/([0-9]{3})/g,"$&_"),/_$/,"")}}return P.call(U,Ue,"$&_")}var le=Bp,xe=le.custom,Re=F(xe)?xe:null;As=function N(U,Ue,Ke,Ve){var He=Ue||{};if(V(He,"quoteStyle")&&He.quoteStyle!=="single"&&He.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(He,"maxStringLength")&&(typeof He.maxStringLength=="number"?He.maxStringLength<0&&He.maxStringLength!==1/0:He.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var at=V(He,"customInspect")?He.customInspect:!0;if(typeof at!="boolean"&&at!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(He,"indent")&&He.indent!==null&&He.indent!=="	"&&!(parseInt(He.indent,10)===He.indent&&He.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(He,"numericSeparator")&&typeof He.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ut=He.numericSeparator;if(typeof U>"u")return"undefined";if(U===null)return"null";if(typeof U=="boolean")return U?"true":"false";if(typeof U=="string")return Ie(U,He);if(typeof U=="number"){if(U===0)return 1/0/U>0?"0":"-0";var lt=String(U);return ut?Q(U,lt):lt}if(typeof U=="bigint"){var rt=String(U)+"n";return ut?Q(U,rt):rt}var mt=typeof He.depth>"u"?5:He.depth;if(typeof Ke>"u"&&(Ke=0),Ke>=mt&&mt>0&&typeof U=="object")return de(U)?"[Array]":"[Object]";var O=ge(He,Ke);if(typeof Ve>"u")Ve=[];else if(Z(Ve,U)>=0)return"[Circular]";function re(Wt,Xt,Fr){if(Xt&&(Ve=X.call(Ve),Ve.push(Xt)),Fr){var vn={depth:He.depth};return V(He,"quoteStyle")&&(vn.quoteStyle=He.quoteStyle),N(Wt,vn,Ke+1,Ve)}return N(Wt,He,Ke+1,Ve)}if(typeof U=="function"&&!Ce(U)){var ke=H(U),We=Fe(U,re);return"[Function"+(ke?": "+ke:" (anonymous)")+"]"+(We.length>0?" { "+L.call(We,", ")+" }":"")}if(F(U)){var ot=W?P.call(String(U),/^(Symbol\(.*\))_[^)]*$/,"$1"):q.call(U);return typeof U=="object"&&!W?he(ot):ot}if(Ae(U)){for(var nt="<"+k.call(String(U.nodeName)),De=U.attributes||[],Le=0;Le<De.length;Le++)nt+=" "+De[Le].name+"="+se(ie(De[Le].value),"double",He);return nt+=">",U.childNodes&&U.childNodes.length&&(nt+="..."),nt+="</"+k.call(String(U.nodeName))+">",nt}if(de(U)){if(U.length===0)return"[]";var Ge=Fe(U,re);return O&&!be(Ge)?"["+ae(Ge,O)+"]":"[ "+L.call(Ge,", ")+" ]"}if(j(U)){var bt=Fe(U,re);return!("cause"in Error.prototype)&&"cause"in U&&!$e.call(U,"cause")?"{ ["+String(U)+"] "+L.call(ue.call("[cause]: "+re(U.cause),bt),", ")+" }":bt.length===0?"["+String(U)+"]":"{ ["+String(U)+"] "+L.call(bt,", ")+" }"}if(typeof U=="object"&&at){if(Re&&typeof U[Re]=="function"&&le)return le(U,{depth:mt-Ke});if(at!=="symbol"&&typeof U.inspect=="function")return U.inspect()}if(fe(U)){var ft=[];return r&&r.call(U,function(Wt,Xt){ft.push(re(Xt,U,!0)+" => "+re(Wt,U))}),Se("Map",t.call(U),ft,O)}if(pe(U)){var pt=[];return d&&d.call(U,function(Wt){pt.push(re(Wt,U))}),Se("Set",i.call(U),pt,O)}if(R(U))return G("WeakMap");if(ce(U))return G("WeakSet");if(B(U))return G("WeakRef");if(z(U))return he(re(Number(U)));if(T(U))return he(re(ve.call(U)));if(M(U))return he(p.call(U));if(ee(U))return he(re(String(U)));if(typeof window<"u"&&U===window)return"{ [object Window] }";if(U===wa)return"{ [object globalThis] }";if(!we(U)&&!Ce(U)){var gt=Fe(U,re),_t=ye?ye(U)===Object.prototype:U instanceof Object||U.constructor===Object,St=U instanceof Object?"":"null prototype",Bt=!_t&&J&&Object(U)===U&&J in U?E.call(D(U),8,-1):St?"Object":"",jt=_t||typeof U.constructor!="function"?"":U.constructor.name?U.constructor.name+" ":"",Jt=jt+(Bt||St?"["+L.call(ue.call([],Bt||[],St||[]),": ")+"] ":"");return gt.length===0?Jt+"{}":O?Jt+"{"+ae(gt,O)+"}":Jt+"{ "+L.call(gt,", ")+" }"}return String(U)};function se(N,U,Ue){var Ke=(Ue.quoteStyle||U)==="double"?'"':"'";return Ke+N+Ke}function ie(N){return P.call(String(N),/"/g,"&quot;")}function de(N){return D(N)==="[object Array]"&&(!J||!(typeof N=="object"&&J in N))}function we(N){return D(N)==="[object Date]"&&(!J||!(typeof N=="object"&&J in N))}function Ce(N){return D(N)==="[object RegExp]"&&(!J||!(typeof N=="object"&&J in N))}function j(N){return D(N)==="[object Error]"&&(!J||!(typeof N=="object"&&J in N))}function ee(N){return D(N)==="[object String]"&&(!J||!(typeof N=="object"&&J in N))}function z(N){return D(N)==="[object Number]"&&(!J||!(typeof N=="object"&&J in N))}function M(N){return D(N)==="[object Boolean]"&&(!J||!(typeof N=="object"&&J in N))}function F(N){if(W)return N&&typeof N=="object"&&N instanceof Symbol;if(typeof N=="symbol")return!0;if(!N||typeof N!="object"||!q)return!1;try{return q.call(N),!0}catch{}return!1}function T(N){if(!N||typeof N!="object"||!ve)return!1;try{return ve.call(N),!0}catch{}return!1}var C=Object.prototype.hasOwnProperty||function(N){return N in this};function V(N,U){return C.call(N,U)}function D(N){return u.call(N)}function H(N){if(N.name)return N.name;var U=w.call(_.call(N),/^function\s*([\w$]+)/);return U?U[1]:null}function Z(N,U){if(N.indexOf)return N.indexOf(U);for(var Ue=0,Ke=N.length;Ue<Ke;Ue++)if(N[Ue]===U)return Ue;return-1}function fe(N){if(!t||!N||typeof N!="object")return!1;try{t.call(N);try{i.call(N)}catch{return!0}return N instanceof Map}catch{}return!1}function R(N){if(!f||!N||typeof N!="object")return!1;try{f.call(N,f);try{x.call(N,x)}catch{return!0}return N instanceof WeakMap}catch{}return!1}function B(N){if(!g||!N||typeof N!="object")return!1;try{return g.call(N),!0}catch{}return!1}function pe(N){if(!i||!N||typeof N!="object")return!1;try{i.call(N);try{t.call(N)}catch{return!0}return N instanceof Set}catch{}return!1}function ce(N){if(!x||!N||typeof N!="object")return!1;try{x.call(N,x);try{f.call(N,f)}catch{return!0}return N instanceof WeakSet}catch{}return!1}function Ae(N){return!N||typeof N!="object"?!1:typeof HTMLElement<"u"&&N instanceof HTMLElement?!0:typeof N.nodeName=="string"&&typeof N.getAttribute=="function"}function Ie(N,U){if(N.length>U.maxStringLength){var Ue=N.length-U.maxStringLength,Ke="... "+Ue+" more character"+(Ue>1?"s":"");return Ie(E.call(N,0,U.maxStringLength),U)+Ke}var Ve=P.call(P.call(N,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,oe);return se(Ve,"single",U)}function oe(N){var U=N.charCodeAt(0),Ue={8:"b",9:"t",10:"n",12:"f",13:"r"}[U];return Ue?"\\"+Ue:"\\x"+(U<16?"0":"")+I.call(U.toString(16))}function he(N){return"Object("+N+")"}function G(N){return N+" { ? }"}function Se(N,U,Ue,Ke){var Ve=Ke?ae(Ue,Ke):L.call(Ue,", ");return N+" ("+U+") {"+Ve+"}"}function be(N){for(var U=0;U<N.length;U++)if(Z(N[U],`
`)>=0)return!1;return!0}function ge(N,U){var Ue;if(N.indent==="	")Ue="	";else if(typeof N.indent=="number"&&N.indent>0)Ue=L.call(Array(N.indent+1)," ");else return null;return{base:Ue,prev:L.call(Array(U+1),Ue)}}function ae(N,U){if(N.length===0)return"";var Ue=`
`+U.prev+U.base;return Ue+L.call(N,","+Ue)+`
`+U.prev}function Fe(N,U){var Ue=de(N),Ke=[];if(Ue){Ke.length=N.length;for(var Ve=0;Ve<N.length;Ve++)Ke[Ve]=V(N,Ve)?U(N[Ve],N):""}var He=typeof ne=="function"?ne(N):[],at;if(W){at={};for(var ut=0;ut<He.length;ut++)at["$"+He[ut]]=He[ut]}for(var lt in N)V(N,lt)&&(Ue&&String(Number(lt))===lt&&lt<N.length||W&&at["$"+lt]instanceof Symbol||(Y.call(/[^\w$]/,lt)?Ke.push(U(lt,N)+": "+U(N[lt],N)):Ke.push(lt+": "+U(N[lt],N))));if(typeof ne=="function")for(var rt=0;rt<He.length;rt++)$e.call(N,He[rt])&&Ke.push("["+U(He[rt])+"]: "+U(N[He[rt]],N));return Ke}return As}var Os,Yl;function jp(){if(Yl)return Os;Yl=1;var n=ya(),e=Dp(),t=qp(),r=ja(),o=n("%WeakMap%",!0),s=n("%Map%",!0),i=e("WeakMap.prototype.get",!0),d=e("WeakMap.prototype.set",!0),h=e("WeakMap.prototype.has",!0),f=e("Map.prototype.get",!0),m=e("Map.prototype.set",!0),x=e("Map.prototype.has",!0),$=function(_,w){for(var E=_,P;(P=E.next)!==null;E=P)if(P.key===w)return E.next=P.next,P.next=_.next,_.next=P,P},g=function(_,w){var E=$(_,w);return E&&E.value},p=function(_,w,E){var P=$(_,w);P?P.value=E:_.next={key:w,next:_.next,value:E}},u=function(_,w){return!!$(_,w)};return Os=function(){var w,E,P,I={assert:function(k){if(!I.has(k))throw new r("Side channel does not contain "+t(k))},get:function(k){if(o&&k&&(typeof k=="object"||typeof k=="function")){if(w)return i(w,k)}else if(s){if(E)return f(E,k)}else if(P)return g(P,k)},has:function(k){if(o&&k&&(typeof k=="object"||typeof k=="function")){if(w)return h(w,k)}else if(s){if(E)return x(E,k)}else if(P)return u(P,k);return!1},set:function(k,Y){o&&k&&(typeof k=="object"||typeof k=="function")?(w||(w=new o),d(w,k,Y)):s?(E||(E=new s),m(E,k,Y)):(P||(P={key:{},next:null}),p(P,k,Y))}};return I},Os}var Cs,Zl;function Wi(){if(Zl)return Cs;Zl=1;var n=String.prototype.replace,e=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Cs={default:t.RFC3986,formatters:{RFC1738:function(r){return n.call(r,e,"+")},RFC3986:function(r){return String(r)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},Cs}var Ts,Jl;function Gu(){if(Jl)return Ts;Jl=1;var n=Wi(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r=function(){for(var u=[],_=0;_<256;++_)u.push("%"+((_<16?"0":"")+_.toString(16)).toUpperCase());return u}(),o=function(_){for(;_.length>1;){var w=_.pop(),E=w.obj[w.prop];if(t(E)){for(var P=[],I=0;I<E.length;++I)typeof E[I]<"u"&&P.push(E[I]);w.obj[w.prop]=P}}},s=function(_,w){for(var E=w&&w.plainObjects?Object.create(null):{},P=0;P<_.length;++P)typeof _[P]<"u"&&(E[P]=_[P]);return E},i=function u(_,w,E){if(!w)return _;if(typeof w!="object"){if(t(_))_.push(w);else if(_&&typeof _=="object")(E&&(E.plainObjects||E.allowPrototypes)||!e.call(Object.prototype,w))&&(_[w]=!0);else return[_,w];return _}if(!_||typeof _!="object")return[_].concat(w);var P=_;return t(_)&&!t(w)&&(P=s(_,E)),t(_)&&t(w)?(w.forEach(function(I,k){if(e.call(_,k)){var Y=_[k];Y&&typeof Y=="object"&&I&&typeof I=="object"?_[k]=u(Y,I,E):_.push(I)}else _[k]=I}),_):Object.keys(w).reduce(function(I,k){var Y=w[k];return e.call(I,k)?I[k]=u(I[k],Y,E):I[k]=Y,I},P)},d=function(_,w){return Object.keys(w).reduce(function(E,P){return E[P]=w[P],E},_)},h=function(u,_,w){var E=u.replace(/\+/g," ");if(w==="iso-8859-1")return E.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(E)}catch{return E}},f=function(_,w,E,P,I){if(_.length===0)return _;var k=_;if(typeof _=="symbol"?k=Symbol.prototype.toString.call(_):typeof _!="string"&&(k=String(_)),E==="iso-8859-1")return escape(k).replace(/%u[0-9a-f]{4}/gi,function(X){return"%26%23"+parseInt(X.slice(2),16)+"%3B"});for(var Y="",ue=0;ue<k.length;++ue){var L=k.charCodeAt(ue);if(L===45||L===46||L===95||L===126||L>=48&&L<=57||L>=65&&L<=90||L>=97&&L<=122||I===n.RFC1738&&(L===40||L===41)){Y+=k.charAt(ue);continue}if(L<128){Y=Y+r[L];continue}if(L<2048){Y=Y+(r[192|L>>6]+r[128|L&63]);continue}if(L<55296||L>=57344){Y=Y+(r[224|L>>12]+r[128|L>>6&63]+r[128|L&63]);continue}ue+=1,L=65536+((L&1023)<<10|k.charCodeAt(ue)&1023),Y+=r[240|L>>18]+r[128|L>>12&63]+r[128|L>>6&63]+r[128|L&63]}return Y},m=function(_){for(var w=[{obj:{o:_},prop:"o"}],E=[],P=0;P<w.length;++P)for(var I=w[P],k=I.obj[I.prop],Y=Object.keys(k),ue=0;ue<Y.length;++ue){var L=Y[ue],X=k[L];typeof X=="object"&&X!==null&&E.indexOf(X)===-1&&(w.push({obj:k,prop:L}),E.push(X))}return o(w),_},x=function(_){return Object.prototype.toString.call(_)==="[object RegExp]"},$=function(_){return!_||typeof _!="object"?!1:!!(_.constructor&&_.constructor.isBuffer&&_.constructor.isBuffer(_))},g=function(_,w){return[].concat(_,w)},p=function(_,w){if(t(_)){for(var E=[],P=0;P<_.length;P+=1)E.push(w(_[P]));return E}return w(_)};return Ts={arrayToObject:s,assign:d,combine:g,compact:m,decode:h,encode:f,isBuffer:$,isRegExp:x,maybeMap:p,merge:i},Ts}var Ns,Xl;function zp(){if(Xl)return Ns;Xl=1;var n=jp(),e=Gu(),t=Wi(),r=Object.prototype.hasOwnProperty,o={brackets:function(_){return _+"[]"},comma:"comma",indices:function(_,w){return _+"["+w+"]"},repeat:function(_){return _}},s=Array.isArray,i=Array.prototype.push,d=function(u,_){i.apply(u,s(_)?_:[_])},h=Date.prototype.toISOString,f=t.default,m={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,format:f,formatter:t.formatters[f],indices:!1,serializeDate:function(_){return h.call(_)},skipNulls:!1,strictNullHandling:!1},x=function(_){return typeof _=="string"||typeof _=="number"||typeof _=="boolean"||typeof _=="symbol"||typeof _=="bigint"},$={},g=function u(_,w,E,P,I,k,Y,ue,L,X,te,ve,ne,q,W,J,$e,ye){for(var Q=_,le=ye,xe=0,Re=!1;(le=le.get($))!==void 0&&!Re;){var se=le.get(_);if(xe+=1,typeof se<"u"){if(se===xe)throw new RangeError("Cyclic object value");Re=!0}typeof le.get($)>"u"&&(xe=0)}if(typeof X=="function"?Q=X(w,Q):Q instanceof Date?Q=ne(Q):E==="comma"&&s(Q)&&(Q=e.maybeMap(Q,function(D){return D instanceof Date?ne(D):D})),Q===null){if(k)return L&&!J?L(w,m.encoder,$e,"key",q):w;Q=""}if(x(Q)||e.isBuffer(Q)){if(L){var ie=J?w:L(w,m.encoder,$e,"key",q);return[W(ie)+"="+W(L(Q,m.encoder,$e,"value",q))]}return[W(w)+"="+W(String(Q))]}var de=[];if(typeof Q>"u")return de;var we;if(E==="comma"&&s(Q))J&&L&&(Q=e.maybeMap(Q,L)),we=[{value:Q.length>0?Q.join(",")||null:void 0}];else if(s(X))we=X;else{var Ce=Object.keys(Q);we=te?Ce.sort(te):Ce}var j=ue?w.replace(/\./g,"%2E"):w,ee=P&&s(Q)&&Q.length===1?j+"[]":j;if(I&&s(Q)&&Q.length===0)return ee+"[]";for(var z=0;z<we.length;++z){var M=we[z],F=typeof M=="object"&&typeof M.value<"u"?M.value:Q[M];if(!(Y&&F===null)){var T=ve&&ue?M.replace(/\./g,"%2E"):M,C=s(Q)?typeof E=="function"?E(ee,T):ee:ee+(ve?"."+T:"["+T+"]");ye.set(_,xe);var V=n();V.set($,ye),d(de,u(F,C,E,P,I,k,Y,ue,E==="comma"&&J&&s(Q)?null:L,X,te,ve,ne,q,W,J,$e,V))}}return de},p=function(_){if(!_)return m;if(typeof _.allowEmptyArrays<"u"&&typeof _.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof _.encodeDotInKeys<"u"&&typeof _.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(_.encoder!==null&&typeof _.encoder<"u"&&typeof _.encoder!="function")throw new TypeError("Encoder has to be a function.");var w=_.charset||m.charset;if(typeof _.charset<"u"&&_.charset!=="utf-8"&&_.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=t.default;if(typeof _.format<"u"){if(!r.call(t.formatters,_.format))throw new TypeError("Unknown format option provided.");E=_.format}var P=t.formatters[E],I=m.filter;(typeof _.filter=="function"||s(_.filter))&&(I=_.filter);var k;if(_.arrayFormat in o?k=_.arrayFormat:"indices"in _?k=_.indices?"indices":"repeat":k=m.arrayFormat,"commaRoundTrip"in _&&typeof _.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var Y=typeof _.allowDots>"u"?_.encodeDotInKeys===!0?!0:m.allowDots:!!_.allowDots;return{addQueryPrefix:typeof _.addQueryPrefix=="boolean"?_.addQueryPrefix:m.addQueryPrefix,allowDots:Y,allowEmptyArrays:typeof _.allowEmptyArrays=="boolean"?!!_.allowEmptyArrays:m.allowEmptyArrays,arrayFormat:k,charset:w,charsetSentinel:typeof _.charsetSentinel=="boolean"?_.charsetSentinel:m.charsetSentinel,commaRoundTrip:_.commaRoundTrip,delimiter:typeof _.delimiter>"u"?m.delimiter:_.delimiter,encode:typeof _.encode=="boolean"?_.encode:m.encode,encodeDotInKeys:typeof _.encodeDotInKeys=="boolean"?_.encodeDotInKeys:m.encodeDotInKeys,encoder:typeof _.encoder=="function"?_.encoder:m.encoder,encodeValuesOnly:typeof _.encodeValuesOnly=="boolean"?_.encodeValuesOnly:m.encodeValuesOnly,filter:I,format:E,formatter:P,serializeDate:typeof _.serializeDate=="function"?_.serializeDate:m.serializeDate,skipNulls:typeof _.skipNulls=="boolean"?_.skipNulls:m.skipNulls,sort:typeof _.sort=="function"?_.sort:null,strictNullHandling:typeof _.strictNullHandling=="boolean"?_.strictNullHandling:m.strictNullHandling}};return Ns=function(u,_){var w=u,E=p(_),P,I;typeof E.filter=="function"?(I=E.filter,w=I("",w)):s(E.filter)&&(I=E.filter,P=I);var k=[];if(typeof w!="object"||w===null)return"";var Y=o[E.arrayFormat],ue=Y==="comma"&&E.commaRoundTrip;P||(P=Object.keys(w)),E.sort&&P.sort(E.sort);for(var L=n(),X=0;X<P.length;++X){var te=P[X];E.skipNulls&&w[te]===null||d(k,g(w[te],te,Y,ue,E.allowEmptyArrays,E.strictNullHandling,E.skipNulls,E.encodeDotInKeys,E.encode?E.encoder:null,E.filter,E.sort,E.allowDots,E.serializeDate,E.format,E.formatter,E.encodeValuesOnly,E.charset,L))}var ve=k.join(E.delimiter),ne=E.addQueryPrefix===!0?"?":"";return E.charsetSentinel&&(E.charset==="iso-8859-1"?ne+="utf8=%26%2310003%3B&":ne+="utf8=%E2%9C%93&"),ve.length>0?ne+ve:""},Ns}var Rs,Ql;function Hp(){if(Ql)return Rs;Ql=1;var n=Gu(),e=Object.prototype.hasOwnProperty,t=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function($){return $.replace(/&#(\d+);/g,function(g,p){return String.fromCharCode(parseInt(p,10))})},s=function($,g){return $&&typeof $=="string"&&g.comma&&$.indexOf(",")>-1?$.split(","):$},i="utf8=%26%2310003%3B",d="utf8=%E2%9C%93",h=function(g,p){var u={__proto__:null},_=p.ignoreQueryPrefix?g.replace(/^\?/,""):g,w=p.parameterLimit===1/0?void 0:p.parameterLimit,E=_.split(p.delimiter,w),P=-1,I,k=p.charset;if(p.charsetSentinel)for(I=0;I<E.length;++I)E[I].indexOf("utf8=")===0&&(E[I]===d?k="utf-8":E[I]===i&&(k="iso-8859-1"),P=I,I=E.length);for(I=0;I<E.length;++I)if(I!==P){var Y=E[I],ue=Y.indexOf("]="),L=ue===-1?Y.indexOf("="):ue+1,X,te;L===-1?(X=p.decoder(Y,r.decoder,k,"key"),te=p.strictNullHandling?null:""):(X=p.decoder(Y.slice(0,L),r.decoder,k,"key"),te=n.maybeMap(s(Y.slice(L+1),p),function(ne){return p.decoder(ne,r.decoder,k,"value")})),te&&p.interpretNumericEntities&&k==="iso-8859-1"&&(te=o(te)),Y.indexOf("[]=")>-1&&(te=t(te)?[te]:te);var ve=e.call(u,X);ve&&p.duplicates==="combine"?u[X]=n.combine(u[X],te):(!ve||p.duplicates==="last")&&(u[X]=te)}return u},f=function($,g,p,u){for(var _=u?g:s(g,p),w=$.length-1;w>=0;--w){var E,P=$[w];if(P==="[]"&&p.parseArrays)E=p.allowEmptyArrays&&_===""?[]:[].concat(_);else{E=p.plainObjects?Object.create(null):{};var I=P.charAt(0)==="["&&P.charAt(P.length-1)==="]"?P.slice(1,-1):P,k=p.decodeDotInKeys?I.replace(/%2E/g,"."):I,Y=parseInt(k,10);!p.parseArrays&&k===""?E={0:_}:!isNaN(Y)&&P!==k&&String(Y)===k&&Y>=0&&p.parseArrays&&Y<=p.arrayLimit?(E=[],E[Y]=_):k!=="__proto__"&&(E[k]=_)}_=E}return _},m=function(g,p,u,_){if(g){var w=u.allowDots?g.replace(/\.([^.[]+)/g,"[$1]"):g,E=/(\[[^[\]]*])/,P=/(\[[^[\]]*])/g,I=u.depth>0&&E.exec(w),k=I?w.slice(0,I.index):w,Y=[];if(k){if(!u.plainObjects&&e.call(Object.prototype,k)&&!u.allowPrototypes)return;Y.push(k)}for(var ue=0;u.depth>0&&(I=P.exec(w))!==null&&ue<u.depth;){if(ue+=1,!u.plainObjects&&e.call(Object.prototype,I[1].slice(1,-1))&&!u.allowPrototypes)return;Y.push(I[1])}return I&&Y.push("["+w.slice(I.index)+"]"),f(Y,p,u,_)}},x=function(g){if(!g)return r;if(typeof g.allowEmptyArrays<"u"&&typeof g.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof g.decodeDotInKeys<"u"&&typeof g.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(g.decoder!==null&&typeof g.decoder<"u"&&typeof g.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof g.charset<"u"&&g.charset!=="utf-8"&&g.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var p=typeof g.charset>"u"?r.charset:g.charset,u=typeof g.duplicates>"u"?r.duplicates:g.duplicates;if(u!=="combine"&&u!=="first"&&u!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var _=typeof g.allowDots>"u"?g.decodeDotInKeys===!0?!0:r.allowDots:!!g.allowDots;return{allowDots:_,allowEmptyArrays:typeof g.allowEmptyArrays=="boolean"?!!g.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof g.allowPrototypes=="boolean"?g.allowPrototypes:r.allowPrototypes,allowSparse:typeof g.allowSparse=="boolean"?g.allowSparse:r.allowSparse,arrayLimit:typeof g.arrayLimit=="number"?g.arrayLimit:r.arrayLimit,charset:p,charsetSentinel:typeof g.charsetSentinel=="boolean"?g.charsetSentinel:r.charsetSentinel,comma:typeof g.comma=="boolean"?g.comma:r.comma,decodeDotInKeys:typeof g.decodeDotInKeys=="boolean"?g.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof g.decoder=="function"?g.decoder:r.decoder,delimiter:typeof g.delimiter=="string"||n.isRegExp(g.delimiter)?g.delimiter:r.delimiter,depth:typeof g.depth=="number"||g.depth===!1?+g.depth:r.depth,duplicates:u,ignoreQueryPrefix:g.ignoreQueryPrefix===!0,interpretNumericEntities:typeof g.interpretNumericEntities=="boolean"?g.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof g.parameterLimit=="number"?g.parameterLimit:r.parameterLimit,parseArrays:g.parseArrays!==!1,plainObjects:typeof g.plainObjects=="boolean"?g.plainObjects:r.plainObjects,strictNullHandling:typeof g.strictNullHandling=="boolean"?g.strictNullHandling:r.strictNullHandling}};return Rs=function($,g){var p=x(g);if($===""||$===null||typeof $>"u")return p.plainObjects?Object.create(null):{};for(var u=typeof $=="string"?h($,p):$,_=p.plainObjects?Object.create(null):{},w=Object.keys(u),E=0;E<w.length;++E){var P=w[E],I=m(P,u[P],p,typeof $=="string");_=n.merge(_,I,p)}return p.allowSparse===!0?_:n.compact(_)},Rs}var Ps,ec;function Wp(){if(ec)return Ps;ec=1;var n=zp(),e=Hp(),t=Wi();return Ps={formats:t,parse:e,stringify:n},Ps}var Gp=Wp();const Kp=ma(Gp),Vp=_a("route");class Yp extends Pr{constructor(){super(),this.prop("ro","basePath",()=>this._basePath),this.prop("ro","hash",()=>(this._location.hash||"").replace(/^#/,"")),this.prop("ro","path",()=>this._path),this.prop("ro","pathParts",()=>this._pathParts),this.prop("ro","query",()=>this._query),this.prop("rw","baseUrl",""),this.prop("rw","enabled",!1),this.prop("persist","history",[]),this._onClick=this._onClick.bind(this),this._onLocationChange=this._onLocationChange.bind(this),window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onLocationChange),this._history=window.history,this._location=window.location,this._basePath="",this._path="/",this._pathParts=[],this._query={}}conversationPath(e){const t=["","chat"];return e.connection_id&&t.push(e.connection_id),e.conversation_id&&t.push(e.conversation_id),t.map(r=>encodeURIComponent(r)).join("/")}go(e,t={}){e.indexOf(this.baseUrl)===0&&(e=e.substring(this.baseUrl.length));const r=this.baseUrl+e;if(r===this._location.href)return this;this._addToHistory(this._location.href),this._addToHistory(r),this._history[t.replace?"replaceState":"pushState"]({},document.title,r),this.update({path:!0})._onLocationChange({})}param(e,t=""){const r=this.query;return Object.hasOwn(r,e)?r[e]:t}removeFromHistory(e){e.indexOf(this.baseUrl)===0&&(e=e.substring(this.baseUrl.length));const t=this.history.filter(r=>r!==e);this.update({history:t})}subscribe(e){return e(this),this.on("update",e)}update(e){return e.baseUrl&&(e.baseUrl=e.baseUrl.replace(/\/+$/,""),this._basePath=new URL(e.baseUrl).pathname.replace(/\/+$/,"")),super.update(e),e.baseUrl&&this._onLocationChange(),this}urlFor(e,t={}){const r=e.match(/^\w+:/)||e.match(/^#/)?e:this.basePath+e,o=Object.keys(t).sort().filter(s=>tt.defined(t[s])).map(s=>s+"="+encodeURIComponent(t[s])).join("&");return r+(o?"?"+o:"")}wsUrlFor(e){return(e.match(/^\w+:/)?e:this.baseUrl+e).replace(/^http/,"ws")}_addToHistory(e){e=e.indexOf(this.baseUrl)===0?e.substring(this.baseUrl.length):e;const t=this.history.filter(r=>r!==e);for(t.push(e);t.length>10;)t.shift();this.update({history:t})}_onClick(e){if(this.emit("click",e),!this.enabled||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)return;const t=e.target&&e.target.closest("a");if(!t||!t.href)return;if(t.target==="_self"&&(t.href.indexOf("/")===0?this.baseUrl+t.href:t.href)===location.href)return location.reload();if(t.hasAttribute("download")||t.hasAttribute("target"))return;let r=t.getAttribute("href")||"";r.indexOf("#")===0&&(r=this.path+r),r.indexOf("./")===0&&(r="/"+this._pathParts.slice(0,-1).join("/")+r.replace(/^\./,"")),r.indexOf(this.baseUrl)===0&&(r=r.substr(this.baseUrl.length)),r.indexOf(this.basePath)===0&&(r=r.substr(this.basePath.length)),r.indexOf("/")===0&&(this.go(r,{},t.hasAttribute("replace")),e.preventDefault())}_onLocationChange(){if(!this.enabled)return;const e=this._location.href,r=e.substring(this.baseUrl.length).split("#")[0].split("?");this._addToHistory(e),this._query=r.length===2?Kp.parse(r.pop()):{},this._path=r[0],this._pathParts=r[0].length<=1?[]:r[0].replace(/^\//,"").split("/").map(decodeURIComponent),Vp.info('path="'+this._path+'" '+JSON.stringify(this._pathParts)+", query="+JSON.stringify(this._query)),this.update({path:!0})}}const Ze=new Yp;class Zp{constructor(){this.aliases=this._buildAliases(),this.re=this._buildRe(),this.byShortName={},this.grouped={},this.status="pending"}async load(){if(["loading","success"].indexOf(this.status)!==-1)return this;this.status="loading";const e=await fetch(Ze.urlFor("/emojis/0bf11a9aff0d6da7b46f1490f86a71eb.json"));return this._load((await e.json()).emojis),this.status="success",this}markup(e){return e.replace(this.re,(t,r,o)=>{const s=this.aliases[o]||o,i=this.byShortName[s];return r+(i&&i.emoji||o)})}search(e){e=e.toLowerCase();const t=this.grouped[e]||this.grouped[e.substring(0,2)]||{};return Object.keys(t).sort((r,o)=>t[r]-t[o]).map(r=>this.byShortName[r]).filter(r=>(r.shortname+r.name).toLowerCase().indexOf(e)!==-1)}_buildAliases(){return{"&lt;3":":heart:","(Y)":":thumbsup:",":(":":disappointed:",":)":":slight_smile:",":-*":":kissing:",":/":":confused:",":D":":smiley:",":O":":open_mouth:",":P":":stuck_out_tongue:",";)":":wink:",";D":":grin:"}}_buildRe(){const e=Object.keys(this.aliases).sort().map(ba).join("|");return new RegExp("(^|\\s)(:\\w+:|"+e+")(?=&|\\s|\\,|\\.|$)","gi")}_load(e){this.grouped={};for(const t of e)t.emoji&&t.shortname&&(t.name||(t.name=t.shortname),delete t.category,delete t.order,delete t.unicode,this.byShortName[t.shortname]=t,this._toGrouped(t))}_toGrouped(e){const t=this.grouped;([e.shortname,e.name].join("-").replace(/\W+/," ").match(/\W(\w{2})/g)||[]).forEach((o,s)=>{o=o.substring(1).toLowerCase(),t[o]||(t[o]={}),t[o][e.shortname]=s,o=o[0],t[o]||(t[o]={}),t[o][e.shortname]=s})}}const Jp={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"},$a=(n,e=/[&<>'"]/g)=>n.replace(e,t=>Jp[t]),tc=n=>n.replace(/\s$/,"&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;"),mr=n=>[n.map(e=>`<${e}>`).join(""),n.reverse().map(e=>`</${e}>`).join("")];class Xp extends Pr{constructor(){super(),this.prop("cookie","lang",""),this.prop("ro","dictionaries",{}),this.prop("ro","emojis",new Zp),this.prop("ro","languages",()=>this._languages),this.prop("ro","languageOptions",()=>this._languageOptions),this._languages=[],this._languageOptions=[],this._rules=this._makeRules()}l(e,...t){const r=this.dictionaries[this.lang]||{};return String(r[e]||e).replace(/%(\d)(\D|$)/g,(s,i,d)=>typeof t[i-1]>"u"?s:t[i-1]+d)}async load(e){if(e||(e=this.lang||document.documentElement.getAttribute("lang")),this.dictionaries[e])return this.update({lang:e});const t=await Ct.op("getDictionary",{lang:e}).perform();return this.dictionaries[e]=t.res.body.dictionary,this._languages=t.res.body.available_languages||{},this._languageOptions=Object.keys(this._languages).sort().map(r=>[r,this._languages[r].language_team.replace(/\s*<.*/,"")]),this.update({lang:e})}lmd(e,...t){return this.md(this.l(e,...t))}md(e){return e.length?this.emojis.markup(tc(this._tagToHTML(this._makeTag(e)))):"&nbsp;"}raw(e){return e.length?tc($a(e)):"&nbsp;"}_makeRules(){const e=[];return e.push({tag:mr(["code"]),re:/`(?=[^`\s])/,rules:[],handler:"_mdTag"}),e.push({tag:mr(["em","strong"]),re:/\*\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:mr(["strong"]),re:/\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:mr(["em"]),re:/\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:mr(["span"]),re:/\x03\d{1,2}(?:,\d{1,2})?/,rules:e,handler:"_mdIrcColorFormatting"}),e.push({tag:mr(["span"]),re:/[\x02\x1d\x1e\x1f\x11]/,rules:e,handler:"_mdIrcTextFormatting"}),e.push({tag:mr(["a"]),re:/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/,rules:[],handler:"_mdLink"}),e.push({tag:mr(["a"]),re:/\b(https?|mailto):\S+/,rules:[],handler:"_mdURL"}),e.push({tag:mr(["a"]),re:/(\s|^)#[a-zA-Z][\w.-]+(?=\W|$)/,rules:[],handler:"_mdChannelname"}),e}_makeTag(e,t=this._rules,r=0){if(r===0&&e.indexOf("> ")===0)return[mr(["blockquote"]),{},[this._makeTag(e.replace(/^>\s/,""),t,r+1)]];const o=[];for(const s of t){const i=e.match(s.re);if(!i)continue;const d={attrs:{},after:e.substring(i.index+i[0].length),before:e.substring(0,i.index),captured:i[0],index:i.index,match:i,tag:s.tag};if(this[s.handler](d),typeof d.content!="string"){e=d.before+d.captured+d.after;continue}d.before.length&&o.push(this._makeTag(d.before,t,r+1)),o.push([d.tag,d.attrs,[this._makeTag(d.content,s.rules,r+1)]]),d.after.length&&o.push(this._makeTag(d.after,t,r+1));break}return[null,{},o.length?o:[$a(e)]]}_mdChannelname(e){e.captured=e.captured.replace(/^\s/,t=>(e.before+=t,"")),e.content=e.captured,e.attrs.href="./"+encodeURIComponent(e.captured)}_mdIrcColorFormatting(e){const t=e.after.indexOf("");if(t===-1)return;e.content=e.after.substring(0,t),e.after=e.after.substring(t+1);const r=[];e.captured.replace(/\x030?(\d{1,2}),?(\d{1,2})?/,(o,s,i)=>{i&&r.push("bg-"+i),s&&r.push("text-"+s)}),r.length&&(e.attrs.class=r.join(" "))}_mdIrcTextFormatting(e){const t=e.after.indexOf(e.captured);t!==-1&&(e.content=e.after.substring(0,t),e.after=e.after.substring(t+e.captured.length),e.tag=e.captured===""?mr(["strong"]):e.captured===""?mr(["em"]):e.captured===""?mr(["u"]):e.captured===""?mr(["code"]):mr(["span"]))}_mdLink(e){e.content=e.match[1],e.attrs.href=$a(e.match[2]),e.match[2].match(/^\w+:/)&&(e.attrs.target="_blank")}_mdTag(e){if(e.before.match(/\\$/)){e.before=e.before.replace(/\\$/,"");return}const t=e.after.indexOf(e.captured);t!==-1&&(e.content=e.after.substring(0,t),e.after=e.after.substring(t+e.captured.length))}_mdURL(e){e.captured=e.captured.replace(/[,.:;!"')]$/,t=>(e.after=t[0]+e.after,"")),e.content=e.captured.replace(/^(https|mailto):(\/\/)?/,""),e.attrs.href=$a(e.captured),e.attrs.target="_blank"}_tagToHTML(e){if(typeof e=="string")return e;const t=typeof e[2]=="string"?$a(e[2]):e[2].map(s=>this._tagToHTML(s)).join("");if(!e[0])return t;const r=Object.keys(e[1]).sort().map(s=>`${s}="${e[1][s]}"`).join(" ");return(r?e[0][0].replace(/>/," "+r+">"):e[0][0])+t+e[0][1]}}const kt=new Xp,zt=Mu(kt,n=>(...e)=>n.l(...e)),Ur=Mu(kt,n=>(...e)=>n.lmd(...e)),Cn=[],Ku={};function Qp({query:n}){const e=[];for(let t=0;t<Cn.length;t++){if(Cn[t].cmd.indexOf(n)!==0)continue;const r=Cn[t].alias||Cn[t].cmd;e.push({val:r,text:kt.md(Cn[t].example)})}return e}function ev(n){const e=n.split(/\s/),t=Ku[e[0].toLowerCase()];return tt.function(t)?t(e.slice(1)):t?[t].concat(e.slice(1)).filter(r=>tt.defined(r)&&r.length).join(" "):n}const Ft=(n,e,t)=>Cn.push({cmd:n,description:t,example:e});Ft("/me","/me <msg>","Send message as an action.");Ft("/say","/say <msg>",'Used when you want to send a message starting with "/".');Ft("/whois","/whois <nick>","Show information about a user.");Ft("/query","/query <nick>","Open up a new chat window with nick.");Ft("/msg","/msg <nick> <msg>","Send a direct message to nick.");Ft("/shrug","/shrug <msg>","Add a shrug to end of message. Message is optional.");Ft("/join","/join <#channel>","Join channel and open up a chat window.");Ft("/close","/close [nick|#channel]","Close conversation.");Ft("/nick","/nick <nick>","Change your wanted nick.");Ft("/away","/away <message>","Add or remove an away message");Ft("/kick","/kick <nick>","Kick a user from the current channel.");Ft("/mode","/mode [+|-][b|o|v] <user>","Change mode of yourself or a user");Ft("/topic","/topic or /topic <new topic>","Show current topic, or set a new one.");Ft("/names","/names","Show participants in the channel.");Ft("/invite","/invite <nick> [#channel]","Invite a user to a channel.");Ft("/reconnect","/reconnect","Restart the current connection.");Ft("/clear","/clear history <#channel> or /clear history <nick>","Delete all history for the given conversation.");Ft("/oper","/oper <nick> <password>","Gain operator status on a network.");Ft("/cs","/cs <msg>","Send a message to chanserv.");Ft("/ns","/ns <msg>","Send a message to nickserv.");Ft("/ms","/ms <msg>","Send a message to memoserv.");Ft("/hs","/hs <msg>","Send a message to hostserv.");Ft("/bs","/bs <msg>","Send a message to botserv.");Ft("/os","/os <msg>","Send a message to operserv.");Ft("/quote","/quote <irc-command>","Allow you to send any raw IRC message.");const an=(n,e)=>Ku[n]=e;an("/close","/part");an("/shrug",n=>"/say "+n.concat("¯\\_(ツ)_/¯").join(" "));an("/cs","/quote chanserv");an("/ns","/quote nickserv");an("/ms","/quote memoserv");an("/hs","/quote hotserv");an("/bs","/quote botserv");an("/os","/quote operserv");an("/j","/join");an("/raw","/quote");function Bn(n,e){return Bn[n]?Bn[n](e):[]}function tv(n,e){n&&Object.hasOwn(n,"val")&&(n=n.val);const t=e.append?e.value.length:e.cursorPos;let[r,o]=[e.value.substring(0,t),e.value.substring(t)];return tt.undefined(n)?{before:r,middle:"",after:o}:(e.append&&(r=r.replace(/[ ]$/,""),r.length&&(n=" "+n)),e.padBefore&&(r=r.replace(/[ ]$/,""),r.length&&(n=" "+n)),e.padAfter&&(o=o.replace(/^[ ]/,""),n=n+" "),e.replace&&(r=r.replace(/\S*\s?$/,"")),{before:r,middle:n,after:o})}function rv(n,e,{conversation:t,user:r}){let o="",s="";const i=n.substring(0,e).replace(/(\S)(\S*)$/,(f,m,x)=>(o=m,s=x,"")),d=o===":"&&s.length?"emojis":o==="/"&&!i.length?"commands":o==="@"&&s.length?"nicks":o==="#"||o==="&"?"conversations":"none",h=Bn(d,{conversation:t,query:o+s,user:r});return h.length&&h.unshift({autocompleteCategory:d,val:o+s}),h}Bn.commands=({query:n})=>Qp({query:n});Bn.conversations=({conversation:n,query:e,user:t})=>{const r=t.findConversation({connection_id:n.connection_id}),o=r?r.conversations.toArray():t.conversations(),s=[];for(let i=0;i<o.length&&!(o[i].name.toLowerCase().indexOf(e)!==-1&&(s.push({text:o[i].name,val:o[i].conversation_id}),s.length>=20));i++);return s};Bn.emojis=({query:n})=>{const e=kt.emojis,t=[];for(let r of e.search(n.substring(1)))if(t.push({val:r.emoji,text:e.markup(r.emoji)}),t.length>=30)break;return t};Bn.nicks=({conversation:n,query:e})=>{const t=new RegExp("^"+ba(e.slice(1)),"i"),r=[];for(let o of n.participants.toArray()){if(r.length>=20)break;o.nick.match(t)&&r.push({val:o.nick})}return r};const nv=n=>n;function Vu(n){const e=n-1;return e*e*e+1}function rc(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}function ca(n,{delay:e=0,duration:t=400,easing:r=nv}={}){const o=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:s=>`opacity: ${s*o}`}}function Na(n,{delay:e=0,duration:t=400,easing:r=Vu,x:o=0,y:s=0,opacity:i=0}={}){const d=getComputedStyle(n),h=+d.opacity,f=d.transform==="none"?"":d.transform,m=h*(1-i),[x,$]=rc(o),[g,p]=rc(s);return{delay:e,duration:t,easing:r,css:(u,_)=>`
			transform: ${f} translate(${(1-u)*x}${$}, ${(1-u)*g}${p});
			opacity: ${h-m*_}`}}function Ra(n,{delay:e=0,duration:t=400,easing:r=Vu,axis:o="y"}={}){const s=getComputedStyle(n),i=+s.opacity,d=o==="y"?"height":"width",h=parseFloat(s[d]),f=o==="y"?["top","bottom"]:["left","right"],m=f.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),x=parseFloat(s[`padding${m[0]}`]),$=parseFloat(s[`padding${m[1]}`]),g=parseFloat(s[`margin${m[0]}`]),p=parseFloat(s[`margin${m[1]}`]),u=parseFloat(s[`border${m[0]}Width`]),_=parseFloat(s[`border${m[1]}Width`]);return{delay:e,duration:t,easing:r,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*i};${d}: ${w*h}px;padding-${f[0]}: ${w*x}px;padding-${f[1]}: ${w*$}px;margin-${f[0]}: ${w*g}px;margin-${f[1]}: ${w*p}px;border-${f[0]}-width: ${w*u}px;border-${f[1]}-width: ${w*_}px;min-${d}: 0`}}function nc(n){const e=n.is("private")?n.participants.nicks().sort().join("-and-"):n.title;return encodeURIComponent(e).toLowerCase()}const lo=So(null,{conversationToInternalUrl(n){const e=this.get();if(!e)return null;const t=Ze.urlFor("/video/"+e.hostname+"/"+nc(n));return new URL(t,location.href).href},conversationToExternalUrl(n){const e=this.get();return e?new URL("/"+nc(n),e).href:null},fromString(n){this.set(n?new URL(n):null)}}),av=So(null,{close(){const n=this.get();return n?[!0,n.close(),this.set(null)][0]:!1},open(n,e={}){this.window||(this.window=window),n=n.toString(),e.nick&&(n+="?nick="+encodeURIComponent(e.nick));const t=this.window.open(n,"convos_video");["beforeunload","close"].forEach(r=>t.addEventListener(r,()=>this.set(null))),this.set(t)}});var ov=S('<a href="#actions"><!><!></a>'),sv=S("<a><!> </a>"),iv=S('<div class="chat-input_menu for-actions"><!> <label for="upload_files"><!> </label></div>'),lv=S('<a tabindex="-1"><!></a>'),cv=S("<div></div>"),uv=S('<form class="chat-input"><input type="file" id="upload_files" name="upload_files" class="non-interactive"/> <textarea class="non-interactive"></textarea> <textarea class="is-primary-input"></textarea> <!> <button type="buttton" class="btn-hallow has-tooltip chat-input__send"><!> <span class="tooltip is-above is-left"> </span></button> <!></form>');function Yu(n,e){wt(e,!1);const t=()=>Oe(zt,"$l",o),r=()=>Oe(p(),"$conversation",o),[o,s]=Lt(),i=Ee(),d=Ee(),h=Ee(),f=Ee(),m=Ee(),x=Ee(),$=a(ie);let g=Ye(e,"uploadProgress",12,0),p=Ye(e,"conversation",8),u=Ee(""),_=Ee(0),w=Ee([]),E=Ee("none"),P={y:-10,duration:200},I,k=Ee(),Y=Ee(0);const ue=rr("user"),L=new lp;function X(R){const B=R.target.closest("a"),pe=!B||a(u)?"":B.href.replace(/.*#/,"");setTimeout(()=>{K(u,pe)},1)}function te(R,B){const{before:pe,middle:ce,after:Ae}=tv(R,{...B,cursorPos:I.selectionStart,value:I.value});xe(pe+ce+Ae),I.selectionStart=I.selectionEnd=(pe+ce).length}function ve(){I&&I.focus()}function ne(R,B){a(w).length&&(R.preventDefault(),K(_,a(_)+B),a(_)<0&&K(_,a(w).length-1),a(_)>=a(w).length&&K(_,0),te(a(w)[a(_)],{replace:!0}))}function q(R){!R.conversation_id&&p().conversation_id&&(R.conversation_id=p().conversation_id)}function W(R){K(_,0),K(Y,R.selectionStart),p().update({userInput:R.value}),R.value.length||L.update({index:-1})}function J(R){I=R,I.addEventListener("focus",()=>K(Y,I.value.length+1)),I.addEventListener("change",()=>W(I)),I.addEventListener("input",ye),I.addEventListener("keyup",B=>{(B.key.length===1||["ArrowLeft","ArrowRight","Backspace"].indexOf(B.key)!==-1)&&W(I)}),I.addEventListener("keydown",B=>{if(!(B.key==="ArrowDown"&&L.render(B,-1))&&!(B.key==="ArrowUp"&&L.render(B,1))){if(B.key==="ArrowDown")return ne(B,B.shiftKey?4:1);if(B.key==="ArrowUp")return ne(B,B.shiftKey?-4:-1);if(B.key==="Enter")return le(B);if(B.key==="Tab")return ne(B,B.shiftKey?-1:1)}}),L.attach(I),xe(tt.undefined(p().userInput)?"":p().userInput)}function $e(R){R.preventDefault(),av.open(a(x),{nick:p().participants.me().nick});const B=p().messages.toArray().slice(-20).find(pe=>pe.message.indexOf(a(x))!==-1);B&&B.ts.toEpoch()>to()-600||p().send({method:"send",message:lo.conversationToExternalUrl(p())})}function ye(){a(k).maxHeight||Me(k,a(k).maxHeight=a(k).parentNode.offsetHeight),Me(k,a(k).value=I.value),Me(k,a(k).style.width=I.offsetWidth+"px"),I.style.height=(a(k).maxHeight>a(k).scrollHeight?a(k).scrollHeight:a(k).maxHeight)+"px"}function Q(R){K(_,parseInt(R.target.closest("a").href.replace(/.*index:/,""),10)),te(a(w)[a(_)],{padAfter:!0,replace:!0}),setTimeout(()=>{W(I),I.focus()},1)}function le(R){if(a(w)[a(_)])R.preventDefault(),te(a(w)[a(_)],{replace:!0}),K(Y,I.selectionStart+1);else if(!R.altKey&&!R.ctrlKey&&!R.metaKey&&!R.shiftKey){R.preventDefault();const pe={method:"send"};pe.message=ev(I.value),pe.message.length&&p().send(pe,q),L.add(pe.message),p().is("search")||xe(""),setTimeout(ye,10)}}function xe(R){I&&(I.value=R),p().update({userInput:R})}function Re(R){I&&(K(w,R>I.value.length?[]:rv(I.value,R,{conversation:p(),user:ue})),K(E,a(w).length&&a(w)[0].autocompleteCategory||"none"))}function se(R){a(se).lock!==R.path&&(Me(se,a(se).lock=R.path),xe(tt.undefined(R.userInput)?"":R.userInput))}function ie(R){const B=R.target&&R.target.files||R.dataTransfer&&R.dataTransfer.files;if(!B||!B.length)return;if(B.length>1)return p().addMessages({message:"Cannot upload more than one file.",type:"error"});const pe=new FormData;pe.append("file",B[0]),Me(ie,a(ie).file=B[0]);const ce=Ct.op("uploadFile");ce.on("progress",Ae=>{g()<100&&g(parseInt(100*(Ae.total?Ae.loaded/Ae.total:.02),10)),g()>=100&&g(0)}),g(1),ce.perform({formData:pe}).then(Ae=>{const Ie=Ae.res.body;if(g(0),Ie.files&&Ie.files.length)return te(Ie.files[0].url,{append:!0});Ie.errors&&p().addMessages({message:"Could not upload file: %1",vars:[t()(Fi(Ie.errors))],type:"error"})})}Be(()=>Pe(p()),()=>{p()&&K(u,"")}),Be(()=>Pe(p()),()=>{K(i,ue.findConversation({connection_id:p().connection_id}))}),Be(()=>a(i),()=>{K(d,a(i)&&a(i).nick)}),Be(()=>(Pe(p()),t(),a(i),a(d)),()=>{K(h,p().is("search")?t()("What are you looking for?"):a(i)&&a(i).is("unreachable")?t()("Connecting..."):t()("What is on your mind %1?",a(d)))}),Be(()=>Pe(p()),()=>{K(f,p().is("search")?"search":"paper-plane")}),Be(()=>(Pe(p()),t()),()=>{K(m,p().is("search")?t()("Search"):t()("Send"))}),Be(()=>Pe(p()),()=>{K(x,lo.conversationToInternalUrl(p()))}),Be(()=>r(),()=>{L.update({conversation:r()})}),Be(()=>a(Y),()=>{Re(a(Y))}),Be(()=>(a(se),Pe(p())),()=>{a(se)(p())}),Mt();var de={uploader:$,fillIn:te,focus:ve};Et();var we=uv();Qe("click",Ci,()=>{K(u,"")});var Ce=c(we),j=v(Ce,2);Eo(j,R=>K(k,R),()=>a(k));var ee=v(j,2);Mi(ee,R=>J==null?void 0:J(R));var z=v(ee,2);{var M=R=>{var B=ov();let pe;var ce=c(B);Te(ce,{name:"plus-circle"});var Ae=v(ce);Te(Ae,{name:"times"}),A(()=>pe=Ut(B,1,"btn-hallow can-toggle",null,pe,{"is-active":a(u)==="actions"})),Qe("click",B,qt(X)),y(R,B)};me(z,R=>{Pe(p()),l(()=>p().is("conversation"))&&R(M)})}var F=v(z,2),T=c(F);Te(T,{get name(){return a(f)}});var C=v(T,2),V=c(C),D=v(F,2);{var H=R=>{var B=iv(),pe=c(B);{var ce=he=>{var G=sv(),Se=c(G);Te(Se,{name:"video"});var be=v(Se);A(ge=>{ze(G,"href",a(x)),b(be,` ${ge??""}`)},[()=>(t(),l(()=>t()("Start a video conference")))]),Qe("click",G,$e),y(he,G)};me(pe,he=>{a(x)&&he(ce)})}var Ae=v(pe,2),Ie=c(Ae);Te(Ie,{name:"cloud-upload-alt"});var oe=v(Ie);A(he=>b(oe,` ${he??""}`),[()=>(t(),l(()=>t()("Attach a file")))]),gr(3,B,()=>Na,()=>P),y(R,B)},Z=R=>{var B=ct(),pe=_e(B);{var ce=Ae=>{var Ie=cv();fr(Ie,5,()=>a(w),dr,(oe,he,G)=>{var Se=lv();ze(Se,"href",`#index:${G}`);let be;var ge=c(Se);Ot(ge,()=>(a(he),l(()=>a(he).text||a(he).val))),A(()=>be=Ut(Se,1,"",null,be,{"has-focus":G===a(_)})),Qe("click",Se,qt(Q)),y(oe,Se)}),A(()=>Ut(Ie,1,`chat-input_menu for-${a(E)??""}`)),gr(3,Ie,()=>Na,()=>P),y(Ae,Ie)};me(pe,Ae=>{a(w),l(()=>a(w).length)&&Ae(ce)},!0)}y(R,B)};me(D,R=>{a(u),Pe(p()),l(()=>a(u)==="actions"&&p().is("conversation"))?R(H):R(Z,!1)})}A(R=>{ze(j,"placeholder",a(h)),ze(ee,"placeholder",a(h)),b(V,R)},[()=>(Pe(Sr),t(),a(m),l(()=>Sr(t()(a(m)))))]),Qe("change",Ce,function(...R){var B;(B=a(ie))==null||B.apply(this,R)}),Qe("click",F,le),Qe("submit",we,qt(function(R){ga.call(this,e,R)})),y(n,we),Nr(e,"uploader",$),Nr(e,"fillIn",te),Nr(e,"focus",ve);var fe=xt(de);return s(),fe}var dv=S("<p><!> <!></p>"),fv=S("<p><!> <!></p> <p><!> <!></p>",1);function pv(n,e){wt(e,!1);const t=()=>Oe(f(),"$conversation",i),r=()=>Oe(Ur,"$lmd",i),o=()=>Oe(a(h),"$participants",i),s=()=>Oe(zt,"$l",i),[i,d]=Lt(),h=Ee();let f=Ye(e,"conversation",8);Be(()=>Pe(f()),()=>{Jr(K(h,f().participants),"$participants",i)}),Mt(),Et();var m=ct(),x=_e(m);{var $=p=>{var u=dv(),_=c(u);Te(_,{name:"info-circle"});var w=v(_,2);Ot(w,()=>(r(),t(),l(()=>r()('This is a private conversation with "%1".',t().name)))),y(p,u)},g=p=>{var u=ct(),_=_e(u);{var w=E=>{var P=fv(),I=_e(P),k=c(I);Te(k,{name:"info-circle"});var Y=v(k,2);Ot(Y,()=>(r(),t(),l(()=>r()(t().topic?"Topic for %1 is: %2":"No topic is set for %1.",t().name,t().topic))));var ue=v(I,2),L=c(ue);Te(L,{name:"info-circle"});var X=v(L,2);{var te=ne=>{var q=tr();A(W=>b(q,W),[()=>(s(),l(()=>s()("You are the only participant in this conversation.")))]),y(ne,q)},ve=ne=>{var q=ct(),W=_e(q);Ot(W,()=>(r(),o(),l(()=>r()("There are %1 participants in this conversation.",o().length)))),y(ne,q)};me(X,ne=>{o(),l(()=>o().length===1)?ne(te):ne(ve,!1)})}y(E,P)};me(_,E=>{t(),l(()=>!t().frozen)&&E(w)},!0)}y(p,u)};me(x,p=>{t(),l(()=>t().is("private"))?p($):p(g,!1)})}y(n,m),xt(),d()}const vv={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},ac={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},hv=n=>!!String(n||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/);class ir extends Date{constructor(e){typeof e=="string"&&!e.match(/Z$/)&&(e+="Z"),super(e||new Date)}format(e){return e.replace(/%(\w)/g,(t,r)=>ac[r]?this[ac[r]]():r)}getHumanDate(e={}){let t=this.format("%b %e");const r=new ir;return(!(this.getYear()===r.getYear())||e.year)&&(t+=", "+this.getFullYear()),t}setDate(e,t){return[t?super.setUTCDate(e):super.setDate(e),this][1]}setFullYear(e,t){return[t?super.setUTCFullYear(e):super.setFullYear(e),this][1]}setHours(e,t){return[t?super.setUTCHours(e):super.setHours(e),this][1]}setMilliseconds(e,t){return[t?super.setUTCMilliseconds(e):super.setMilliseconds(e),this][1]}setMinutes(e,t){return[t?super.setUTCMinutes(e):super.setMinutes(e),this][1]}setMonth(e,t){return[t?super.setUTCMonth(e):super.setMonth(e),this][1]}setSeconds(e,t){return[t?super.setUTCSeconds(e):super.setSeconds(e),this][1]}setTime(e){return[super.setTime(e),this][1]}setYear(e){return[this.setYear(e),this][1]}toEpoch(){return this.getTime()/1e3}_getMonthAbbr(){return vv[this.getMonth()]||""}_getPaddedHours(){return String(this.getHours()).padStart(2,"0")}_getPaddedMinutes(){return String(this.getMinutes()).padStart(2,"0")}_getPaddedSeconds(){return String(this.getSeconds()).padStart(2,"0")}}var gv=S("<button><!> <!></button>");function Vt(n,e){wt(e,!1);const t=()=>Oe(p(),"$op",r),[r,o]=Lt(),s=Ee(),i=500;let d=Ee(""),h=Ye(e,"class",8,""),f=Ee([]),m=Ee(!1),x=Ee(0),$=Ye(e,"disabled",8,!1),g=Ye(e,"icon",8,""),p=Ye(e,"op",24,()=>new Ao({api:!1,id:""})),u=Ye(e,"type",8,""),_=Ee(g());function w(k){k&&K(x,new ir().toEpoch()),K(d,k?"spin":""),K(_,k?"spinner":g()),K(m,k)}Be(()=>t(),()=>{t().is("loading")&&w(!0)}),Be(()=>(t(),a(x)),()=>{t().is("loading")||setTimeout(()=>w(!1),i-(new ir().toEpoch()-a(x)))}),Be(()=>(Pe(g()),Pe(h())),()=>{K(f,["btn","for-"+(g()||"default")].concat(h()))}),Be(()=>(Pe($()),a(m)),()=>{K(s,$()||a(m))}),Mt(),Et();var E=gv(),P=c(E);Te(P,{get animation(){return a(d)},get name(){return a(_)}});var I=v(P,2);en(I,e,"default",{},null),A(k=>{Ut(E,1,k),E.disabled=a(s),ze(E,"type",u())},[()=>(a(f),l(()=>a(f).join(" ")))]),Qe("click",E,function(k){ga.call(this,e,k)}),y(n,E),xt(),o()}var _v=S('<label><input type="checkbox"/> <!> <!></label>');function It(n,e){wt(e,!1);const t=Ee(),r=Ee();let o=Ye(e,"badge",8,!1),s=Ye(e,"disabled",8,!1),i=Ye(e,"hidden",8,!1),d=Ye(e,"icon",8,"square"),h=Ye(e,"name",8,""),f=Ye(e,"id",24,()=>h()?"form_"+h():ko()),m=Ye(e,"value",12),x=Ee(!1);Be(()=>Pe(d()),()=>{K(t,d()==="caret"?["caret-square-down","caret-square-up"]:["square","check-square"])}),Be(()=>(a(t),Pe(m())),()=>{K(r,a(t)[m()?1:0])}),Mt(),Et();var $=_v();let g;var p=c($),u=v(p,2);Te(u,{family:"regular",get name(){return a(r)}});var _=v(u,2);en(_,e,"label",{},null),A(()=>{g=Ut($,1,"checkbox svelte-nmc67d",null,g,{"has-badge":o(),"has-focus":a(x),"is-disabled":s()}),ze($,"hidden",i()),ze(p,"id",f()),ze(p,"name",h()),Nf(p,!!m()),p.disabled=s()}),Qe("blur",p,()=>{K(x,!1)}),Qe("change",p,w=>{m(w.target.checked)}),Qe("focus",p,()=>{K(x,!0)}),y(n,$),xt()}class wn{constructor(e="http://localhost"){this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:()=>this._url.href.replace(/^http:/,this.protocol),set:t=>{this._url.href=t.replace(/^\w+:/,"http:"),this.protocol=t.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach(t=>{Object.defineProperty(this,t,{get:()=>this._url[t],set:r=>{this._url[t]=r}})}),this.href=e}fromFields(e){tt.string(e.protocol)&&(this.protocol=e.protocol.replace(/:?$/,":")),tt.string(e.host)&&(this.host=e.host),tt.string(e.password)&&(this.password=encodeURIComponent(e.password)),tt.string(e.username)&&(this.username=encodeURIComponent(e.username)),tt.string(e.conversation_id)&&(this.pathname=encodeURIComponent(e.conversation_id));const t=this.searchParams;return tt.string(e.local_address)&&t.append("local_address",e.local_address||""),tt.string(e.nick)&&t.append("nick",e.nick.trim()),tt.string(e.realname)&&e.realname.length&&t.append("realname",e.realname.trim()),tt.string(e.sasl)&&t.append("sasl",e.sasl||"none"),t.append("tls",tt.true(e.tls)?"1":"0"),t.append("tls_verify",tt.true(e.tls)&&tt.true(e.tls_verify)?"1":"0"),this}toFields(e={}){e.protocol=this.protocol.replace(/:$/,""),e.host=this.host,e.password=tt.string(this.password)?decodeURIComponent(this.password):"",e.username=tt.string(this.username)?decodeURIComponent(this.username):"",e.conversation_id=decodeURIComponent(this.pathname.split("/").filter(r=>r.length)[0]||"");const t=this.searchParams;return e.local_address=t.get("local_address")||e.local_address||"",e.nick=t.get("nick")||e.nick||"",e.realname=t.get("realname")||e.realname||"",e.sasl=t.get("sasl")||e.sasl||"none",e.realname=t.get("realname")||e.realname||"",e.tls=tt.true(t.get("tls")),e.tls_verify=tt.true(t.get("tls_verify")),e}toString(){return this.href.replace(/^http:/,this.protocol)}}var mv=S('<div class="error"> </div>'),bv=S('<div class="success"> </div>');function Rr(n,e){wt(e,!1);const t=()=>Oe(i(),"$op",o),r=()=>Oe(zt,"$l",o),[o,s]=Lt();let i=Ye(e,"op",24,()=>new Ao({})),d=Ye(e,"success",8,"Saved."),h=Ee(!1),f;Ii(()=>f&&clearTimeout(f));function m(u){if(!u.is("success"))return K(h,!1);a(h)||(K(h,!0),f=setTimeout(()=>K(h,!1),2e3))}Be(()=>t(),()=>{m(t())}),Mt(),Et();var x=ct(),$=_e(x);{var g=u=>{var _=mv(),w=c(_);A(E=>b(w,E),[()=>(r(),t(),l(()=>r()(t().error())))]),gr(3,_,()=>ca),y(u,_)},p=u=>{var _=ct(),w=_e(_);{var E=P=>{var I=bv(),k=c(I);A(Y=>b(k,Y),[()=>(r(),Pe(d()),l(()=>r()(d())))]),gr(3,I,()=>ca),y(P,I)};me(w,P=>{t(),a(h),l(()=>t().is("success")&&a(h))&&P(E)},!0)}y(u,_)};me($,u=>{t(),l(()=>t().is("error"))?u(g):u(p,!1)})}y(n,x),xt(),s()}var yv=S('<a tabindex="-1"> </a>'),$v=S('<div><label><!></label> <input type="hidden"/> <input type="text" autocomplete="off"/> <div class="select-field__options"></div></div>');function Xn(n,e){wt(e,!1);let t=Ee(0),r=Ee(),o=Ee(!1),s=Ee(""),i=Ee([]),d=Ye(e,"hidden",8,!1),h=Ye(e,"name",8,""),f=Ye(e,"id",24,()=>h()?"form_"+h():ko()),m=Ye(e,"options",8),x=Ye(e,"placeholder",8,""),$=Ye(e,"readonly",8,!1),g=Ye(e,"value",12);const p=["ArrowDown","ArrowUp","Enter"];function u(){setTimeout(()=>document.activeElement.closest(".select-field__option")||K(o,!1),100),I(g())}function _(q,W){let J=new RegExp("(?:^|\\s|-)"+ba(W),"i"),$e=q.filter(ye=>String(ye[0])===W);$e.length||($e=q.filter(ye=>ye[0].match(J)));for(let ye=0;ye<q.length;ye++){const Q=q[ye];Q.length>1&&$e.indexOf(Q)===-1&&Q[1].match(J)&&$e.push(Q)}K(t,0),K(i,$e)}function w(q){if(p.indexOf(q.key)!==-1&&q.preventDefault(),q.key==="Tab"){a(o)&&P(q);return}if(!a(o))return k(q);q.key==="ArrowDown"&&Xi(t),q.key==="ArrowUp"&&Xi(t,-1),q.key==="Enter"&&P(q),a(t)>=m().length&&K(t,0),a(t)<0&&K(t,m().length-1)}function E(q){(q.key.length===1||q.key==="Backspace")&&K(s,a(r).value)}function P(q){let W;if(q.type==="keydown")W=a(i).length&&a(i)[a(t)]||m().filter(J=>J[0]===g())[0];else{const J=$i(q.target,".select-field__option").href.replace(/^.*?#\d+:/,"");W=a(i).filter($e=>String($e[0])===J)[0]||[]}(!W||!W.length)&&(W=[""]),g(W[0]),K(o,!1)}function I(q){const W=a(i).filter(J=>String(J[0])===q)[0]||[];Me(r,a(r).value=W.length>1?W[1]:W.length?W[0]:q)}function k(q){if($())return;const W=q&&q.target&&$i(q.target,".select-field__option");return a(o)||(K(t,a(i).map(J=>J[0]).indexOf(g())),a(r).setSelectionRange(0,9999)),W?P(q):K(o,!a(o))}Be(()=>a(o),()=>{a(o)===!1&&K(s,"")}),Be(()=>(Pe(m()),a(s)),()=>{_(m(),a(s))}),Be(()=>(a(r),Pe(g())),()=>{a(r)&&I(g())}),Be(()=>(a(r),Pe(m()),Pe(g())),()=>{if(a(r)&&!a(r).value&&a(r)!==document.activeElement){const q=m().find(W=>W[0]===g());q&&Me(r,a(r).value=q[1]||q[0])}}),Mt(),Et();var Y=$v();let ue;var L=c(Y),X=c(L);en(X,e,"label",{},q=>{var W=tr("Label");y(q,W)});var te=v(L,2),ve=v(te,2);Eo(ve,q=>K(r,q),()=>a(r));var ne=v(ve,2);fr(ne,5,()=>a(i),dr,(q,W,J)=>{var $e=yv();let ye;var Q=c($e);A(()=>{ze($e,"href",`#${J}:${a(W),l(()=>a(W)[0])??""}`),ye=Ut($e,1,"select-field__option",null,ye,{"is-active":J===a(t)}),b(Q,(a(W),l(()=>a(W).length>1?a(W)[1]:a(W)[0])))}),Qe("click",$e,qt(k)),Qe("focus",$e,()=>{K(t,J)}),Qe("mouseover",$e,()=>{K(t,J)}),y(q,$e)}),A(()=>{ue=Ut(Y,1,"select-field text-field",null,ue,{"is-open":a(o),"is-readonly":$()}),ze(Y,"hidden",d()),ze(L,"for",f()),ze(te,"name",h()),ze(ve,"id",f()),ze(ve,"placeholder",x()),ve.readOnly=$()}),Ln(te,g),Qe("keydown",te,w),Qe("blur",ve,u),Qe("keydown",ve,w),Qe("keyup",ve,E),Qe("click",ve,qt(k)),y(n,Y),xt()}var wv=S('<div class="text-area"><label><!></label> <textarea></textarea></div>');function Zu(n,e){wt(e,!1);let t=Ye(e,"hidden",8,!1),r=Ye(e,"name",8,""),o=Ye(e,"id",24,()=>r()?"form_"+r():ko()),s=Ye(e,"placeholder",8,""),i=Ye(e,"readonly",8,!1),d=Ye(e,"value",12);Et();var h=wv(),f=c(h),m=c(f);en(m,e,"label",{},$=>{var g=tr("Label");y($,g)});var x=v(f,2);A(()=>{ze(h,"hidden",t()),ze(f,"for",o()),ze(x,"id",o()),ze(x,"name",r()),ze(x,"placeholder",s()),x.readOnly=i()}),Ln(x,d),y(n,h),xt()}var xv=S('<a href="#toggle" class="text-field__toggle"><!></a>'),Ev=S("<div><label><!></label> <input/> <!></div> <!>",1);function $t(n,e){wt(e,!1);let t=Ee(!1),r=Ye(e,"autocomplete",8,null),o=Ye(e,"hidden",8,!1),s=Ye(e,"name",8,""),i=Ye(e,"id",24,()=>s()?"form_"+s():ko()),d=Ye(e,"placeholder",8,""),h=Ye(e,"readonly",8,!1),f=Ye(e,"type",8,"text"),m=Ye(e,"value",12);function x(k){m(f().match(/^(number|range)$/)?parseInt(k.target.value,10):k.target.value)}Et();var $=Ev(),g=_e($);let p;var u=c(g),_=c(u);en(_,e,"label",{},k=>{var Y=tr("Label");y(k,Y)});var w=v(u,2),E=v(w,2);{var P=k=>{var Y=xv(),ue=c(Y);{let L=je(()=>a(t)?"eye-slash":"eye");Te(ue,{get name(){return a(L)}})}Qe("click",Y,qt(()=>{K(t,!a(t))})),y(k,Y)};me(E,k=>{f()==="password"&&!h()&&k(P)})}var I=v(g,2);en(I,e,"help",{},null),A(()=>{p=Ut(g,1,"text-field",null,p,{"has-password":f()==="password"}),ze(g,"hidden",o()),ze(u,"for",i()),ze(w,"type",a(t)?"text":f()),ze(w,"id",i()),ze(w,"name",s()),ze(w,"autocomplete",r()),ze(w,"placeholder",d()),w.readOnly=h(),Tf(w,m())}),Qe("input",w,x),Qe("keyup",w,function(k){ga.call(this,e,k)}),y(n,$),xt()}var Sv=S('<span slot="label"> </span>'),kv=S('<p class="help" slot="help"> </p>'),Av=S('<span slot="label"> </span>'),Ov=S('<span slot="label"> </span>'),Cv=S('<span slot="label"> </span>'),Tv=S('<span slot="label"> </span>'),Nv=S('<span slot="label"> </span>'),Rv=S('<span slot="label"> </span>'),Pv=S('<span slot="label"> </span>'),Iv=S('<span slot="label"> </span>'),Mv=S('<span slot="label"> </span>'),Lv=S('<p class="help" slot="help"> </p>'),Dv=S('<div class="form-group"><!> <!></div>'),Uv=S('<span slot="label"> </span>'),Fv=S('<span slot="label"> </span>'),Bv=S('<p class="help" slot="help"> </p>'),qv=S('<span slot="label"> </span>'),jv=S('<p class="help" slot="help"> </p>'),zv=S('<span slot="label"> </span>'),Hv=S('<p class="help" slot="help"> </p>'),Wv=S('<span slot="label"> </span>'),Gv=S('<div class="form-group"><!> <!> <!></div>'),Kv=S("<!> <!>",1),Vv=S("<span> </span>"),Yv=S("<span> </span>"),Zv=S('<span slot="label"> </span>'),Jv=S("<span> </span>"),Xv=S('<h3> </h3> <p> <!></p> <!> <div class="form-actions"><!></div> <!>',1),Qv=S('<form method="post"><!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="form-actions"><!></div> <!> <!> <!></form>');function Ju(n,e){wt(e,!1);const t=()=>Oe(zt,"$l",o),r=()=>Oe(Ur,"$lmd",o),[o,s]=Lt();let i=Ye(e,"connection",28,()=>({})),d=Ye(e,"is_page",8,!1);const h=rr("user"),f=[["none","None"],["plain","Plain"],["external","External"]],m=Ct.op("createConnection"),x=Ct.op("removeConnection"),$=Ct.op("updateConnection");let g=Ee(""),p=Ee({}),u=Ee(!1),_=Ee(!1);function w(j){const ee=j.url?j.url.toFields():{};tt.array(j.on_connect_commands)&&(ee.on_connect_commands=j.on_connect_commands.join(`
`)),ee.nick||(ee.nick=h.email.replace(/@.*/,"").replace(/\W/g,"_")),ee.want_to_be_connected=j.wanted_state!=="disconnected",K(p,{...a(p),...ee,fingerprint:j.certificate.fingerprint||""})}function E(){const j=new wn(Ze.query.uri||h.default_connection||"irc://localhost").toFields();h.connections.size&&!Ze.query.uri&&(j.host=""),j.nick||(j.nick=h.email.replace(/@.*/,"").replace(/\W/g,"_")),K(p,{...a(p),...j,want_to_be_connected:!0})}async function P(){await x.perform(i()),h.removeConversation(i()),Ze.go("/settings/connections")}async function I(){if(Me(p,a(p).on_connect_commands=(a(p).on_connect_commands||"").split(/\n\r?/).filter(j=>j.length)),Me(p,a(p).url=new wn("irc://localhost").fromFields(a(p)).toString()),i().connection_id)Me(p,a(p).connection_id=i().connection_id),Me(p,a(p).wanted_state=a(p).want_to_be_connected?"connected":"disconnected"),await $.perform(a(p)),i(h.ensureConversation($.res.body)),w(i());else{await m.perform(a(p));const j=m.res.body;j.connection_id&&Ze.go(h.ensureConversation(j).path)}d()&&Ze.go("/settings/connections")}Be(()=>Pe(i()),()=>{i().connection_id?w(i()):E()}),Mt(),Et();var k=Qv(),Y=c(k);{let j=je(()=>(t(),l(()=>t()("Ex: irc.libera.chat:6697"))));$t(Y,{name:"host",get placeholder(){return a(j)},get readonly(){return l(()=>h.forced_connection)},get value(){return a(p).host},set value(ee){Me(p,a(p).host=ee)},$$slots:{label:(ee,z)=>{var M=Sv(),F=c(M);A(T=>b(F,T),[()=>(t(),l(()=>t()("Host and port")))]),y(ee,M)},help:(ee,z)=>{var M=kv(),F=c(M);A(T=>{ze(M,"hidden",l(()=>!h.forced_connection)),b(F,T)},[()=>(t(),l(()=>t()("You cannot create custom connections.")))]),y(ee,M)}},$$legacy:!0})}var ue=v(Y,2);{let j=je(()=>(t(),l(()=>t()("Ex: superman"))));$t(ue,{name:"nick",get placeholder(){return a(j)},get value(){return a(p).nick},set value(ee){Me(p,a(p).nick=ee)},$$slots:{label:(ee,z)=>{var M=Av(),F=c(M);A(T=>b(F,T),[()=>(t(),l(()=>t()("Nickname")))]),y(ee,M)}},$$legacy:!0})}var L=v(ue,2);{let j=je(()=>(t(),l(()=>t()("Ex: Clark Kent"))));$t(L,{name:"realname",get placeholder(){return a(j)},get value(){return a(p).realname},set value(ee){Me(p,a(p).realname=ee)},$$slots:{label:(ee,z)=>{var M=Ov(),F=c(M);A(T=>b(F,T),[()=>(t(),l(()=>t()("Your name")))]),y(ee,M)}},$$legacy:!0})}var X=v(L,2);{var te=j=>{It(j,{name:"want_to_be_connected",get value(){return a(p).want_to_be_connected},set value(ee){Me(p,a(p).want_to_be_connected=ee)},$$slots:{label:(ee,z)=>{var M=Cv(),F=c(M);A(T=>b(F,T),[()=>(t(),l(()=>t()("Want to be connected")))]),y(ee,M)}},$$legacy:!0})},ve=j=>{{let ee=je(()=>(t(),l(()=>t()("Ex: #convos"))));$t(j,{name:"conversation_id",get placeholder(){return a(ee)},get value(){return a(p).conversation_id},set value(z){Me(p,a(p).conversation_id=z)},$$slots:{label:(z,M)=>{var F=Tv(),T=c(F);A(C=>b(T,C),[()=>(t(),l(()=>t()("Conversation name")))]),y(z,F)}},$$legacy:!0})}};me(X,j=>{Pe(i()),l(()=>i().connection_id)?j(te):j(ve,!1)})}var ne=v(X,2);It(ne,{name:"tls",get value(){return a(p).tls},set value(j){Me(p,a(p).tls=j)},$$slots:{label:(j,ee)=>{var z=Nv(),M=c(z);A(F=>b(M,F),[()=>(t(),l(()=>t()("Secure connection (TLS)")))]),y(j,z)}},$$legacy:!0});var q=v(ne,2);{let j=je(()=>(a(p),l(()=>!a(p).tls))),ee=je(()=>(a(p),l(()=>!a(p).tls)));It(q,{name:"tls_verify",get disabled(){return a(j)},get hidden(){return a(ee)},get value(){return a(p).tls_verify},set value(z){Me(p,a(p).tls_verify=z)},$$slots:{label:(z,M)=>{var F=Rv(),T=c(F);A(C=>b(T,C),[()=>(t(),l(()=>t()("Verify certificate (TLS)")))]),y(z,F)}},$$legacy:!0})}var W=v(q,2);It(W,{icon:"caret",name:"show_advanced_settings",get value(){return a(u)},set value(j){K(u,j)},$$slots:{label:(j,ee)=>{var z=Pv(),M=c(z);A(F=>b(M,F),[()=>(t(),l(()=>t()("Advanced settings")))]),y(j,z)}},$$legacy:!0});var J=v(W,2);{var $e=j=>{var ee=Dv(),z=c(ee);{let T=je(()=>(t(),l(()=>t()("Put each command on a new line."))));Zu(z,{name:"on_connect_commands",get placeholder(){return a(T)},get value(){return a(p).on_connect_commands},set value(C){Me(p,a(p).on_connect_commands=C)},$$slots:{label:(C,V)=>{var D=Iv(),H=c(D);A(Z=>b(H,Z),[()=>(t(),l(()=>t()("On-connect commands")))]),y(C,D)}},$$legacy:!0})}var M=v(z,2);{var F=T=>{$t(T,{name:"local_address",get value(){return a(p).local_address},set value(C){Me(p,a(p).local_address=C)},$$slots:{label:(C,V)=>{var D=Mv(),H=c(D);A(Z=>b(H,Z),[()=>(t(),l(()=>t()("Source IP")))]),y(C,D)},help:(C,V)=>{var D=Lv(),H=c(D);A(Z=>b(H,Z),[()=>(t(),l(()=>t()("Leave this blank, unless you know what you are doing.")))]),y(C,D)}},$$legacy:!0})};me(M,T=>{l(()=>!h.forced_connection)&&T(F)})}gr(3,ee,()=>Ra,()=>({duration:150})),y(j,ee)};me(J,j=>{a(u)&&j($e)})}var ye=v(J,2);{var Q=j=>{var ee=Kv(),z=_e(ee);It(z,{icon:"caret",name:"show_auth_settings",get value(){return a(_)},set value(T){K(_,T)},$$slots:{label:(T,C)=>{var V=Uv(),D=c(V);A(H=>b(D,H),[()=>(t(),l(()=>t()("Authentication settings")))]),y(T,V)}},$$legacy:!0});var M=v(z,2);{var F=T=>{var C=Gv(),V=c(C);$t(V,{name:"username",get placeholder(){return a(p),l(()=>a(p).nick)},get value(){return a(p).username},set value(R){Me(p,a(p).username=R)},$$slots:{label:(R,B)=>{var pe=Fv(),ce=c(pe);A(Ae=>b(ce,Ae),[()=>(t(),l(()=>t()("Username")))]),y(R,pe)},help:(R,B)=>{var pe=Bv(),ce=c(pe);A(Ae=>b(ce,Ae),[()=>(t(),l(()=>t()("SASL and IRC server username.")))]),y(R,pe)}},$$legacy:!0});var D=v(V,2);{var H=R=>{$t(R,{type:"text",name:"fingerprint",readonly:!0,get value(){return a(p).fingerprint},set value(B){Me(p,a(p).fingerprint=B)},$$slots:{label:(B,pe)=>{var ce=qv(),Ae=c(ce);A(Ie=>b(Ae,Ie),[()=>(t(),l(()=>t()("Fingerprint")))]),y(B,ce)},help:(B,pe)=>{var ce=jv(),Ae=c(ce);A(Ie=>b(Ae,Ie),[()=>(t(),l(()=>t()("The certificate fingerprint is used for SASL external authentication.")))]),y(B,ce)}},$$legacy:!0})},Z=R=>{$t(R,{type:"password",name:"password",get value(){return a(p).password},set value(B){Me(p,a(p).password=B)},$$slots:{label:(B,pe)=>{var ce=zv(),Ae=c(ce);A(Ie=>b(Ae,Ie),[()=>(t(),l(()=>t()("Password")))]),y(B,ce)},help:(B,pe)=>{var ce=Hv(),Ae=c(ce);A(Ie=>b(Ae,Ie),[()=>(t(),l(()=>t()("SASL plain or IRC server password.")))]),y(B,ce)}},$$legacy:!0})};me(D,R=>{a(p),l(()=>a(p).sasl==="external")?R(H):R(Z,!1)})}var fe=v(D,2);Xn(fe,{name:"sasl",get options(){return f},get value(){return a(p).sasl},set value(R){Me(p,a(p).sasl=R)},$$slots:{label:(R,B)=>{var pe=Wv(),ce=c(pe);A(Ae=>b(ce,Ae),[()=>(t(),l(()=>t()("SASL authentication mechanism")))]),y(R,pe)}},$$legacy:!0}),gr(3,C,()=>Ra,()=>({duration:150})),y(T,C)};me(M,T=>{a(_)&&T(F)})}y(j,ee)};me(ye,j=>{l(()=>!h.forced_connection)&&j(Q)})}var le=v(ye,2),xe=c(le);{var Re=j=>{Vt(j,{icon:"save",get op(){return $},children:(ee,z)=>{var M=Vv(),F=c(M);A(T=>b(F,T),[()=>(t(),l(()=>t()("Update")))]),y(ee,M)},$$slots:{default:!0}})},se=j=>{Vt(j,{icon:"plus-circle",get op(){return m},children:(ee,z)=>{var M=Yv(),F=c(M);A(T=>b(F,T),[()=>(t(),l(()=>t()("Add")))]),y(ee,M)},$$slots:{default:!0}})};me(xe,j=>{Pe(i()),l(()=>i().connection_id)?j(Re):j(se,!1)})}var ie=v(le,2);Rr(ie,{get op(){return m}});var de=v(ie,2);Rr(de,{get op(){return $}});var we=v(de,2);{var Ce=j=>{var ee=Xv(),z=_e(ee),M=c(z),F=v(z,2),T=c(F),C=v(T);Ot(C,()=>(r(),Pe(i()),t(),l(()=>r()('Please confirm by entering "**%1**" before hitting **%2**.',i().connection_id,t()("Delete")))));var V=v(F,2);$t(V,{name:"confirm_connection_id",get value(){return a(g)},set value(fe){K(g,fe)},$$slots:{label:(fe,R)=>{var B=Zv(),pe=c(B);A(ce=>b(pe,ce),[()=>(t(),l(()=>t()("Confirm connection ID")))]),y(fe,B)}},$$legacy:!0});var D=v(V,2),H=c(D);{let fe=je(()=>(a(g),Pe(i()),l(()=>a(g)!==i().connection_id)));Vt(H,{icon:"trash",get op(){return x},get disabled(){return a(fe)},$$events:{click:P},children:(R,B)=>{var pe=Jv(),ce=c(pe);A(Ae=>b(ce,Ae),[()=>(t(),l(()=>t()("Delete")))]),y(R,pe)},$$slots:{default:!0}})}var Z=v(D,2);Rr(Z,{get op(){return x},success:"Deleted."}),A((fe,R)=>{b(M,fe),b(T,`${R??""} `)},[()=>(t(),l(()=>t()("Delete"))),()=>(t(),l(()=>t()("This will permanently remove chat logs and other connection related data.")))]),y(j,ee)};me(we,j=>{Pe(i()),l(()=>i().connection_id)&&j(Ce)})}Qe("submit",k,qt(I)),y(n,k),xt(),s()}var eh=S("<p> </p>"),th=S("<p> </p>"),rh=S("<p> </p>"),nh=S("<p> </p>"),ah=S("<div><h3> </h3> <!> <!></div>");function oh(n,e){wt(e,!1);const t=()=>Oe(Sn,"$viewport",s),r=()=>Oe(xr,"$activeMenu",s),o=()=>Oe(zt,"$l",s),[s,i]=Lt(),d=Ee();let h=Ye(e,"connection",8);Be(()=>Pe(h()),()=>{K(d,h().real_host||h().url&&h().url.host)}),Mt(),Et();var f=ct(),m=_e(f);{var x=$=>{var g=ah();let p;var u=c(g),_=c(u),w=v(u,2);{var E=k=>{var Y=eh(),ue=c(Y);A(L=>b(ue,L),[()=>(o(),l(()=>o()("Connection not found.")))]),y(k,Y)},P=k=>{var Y=ct(),ue=_e(Y);{var L=te=>{var ve=th(),ne=c(ve);A(q=>b(ne,q),[()=>(o(),a(d),l(()=>o()("Currently disconnected from %1.",a(d))))]),y(te,ve)},X=te=>{var ve=ct(),ne=_e(ve);{var q=J=>{var $e=rh(),ye=c($e);A(Q=>b(ye,Q),[()=>(o(),a(d),l(()=>o()("Currently connected to %1.",a(d))))]),y(J,$e)},W=J=>{var $e=nh(),ye=c($e);A(Q=>b(ye,Q),[()=>(o(),a(d),l(()=>o()("Currently connecting to %1.",a(d))))]),y(J,$e)};me(ne,J=>{Pe(h()),l(()=>h().state==="connected")?J(q):J(W,!1)},!0)}y(te,ve)};me(ue,te=>{Pe(h()),l(()=>h().state==="disconnected")?te(L):te(X,!1)},!0)}y(k,Y)};me(w,k=>{Pe(h()),l(()=>!h().url)?k(E):k(P,!1)})}var I=v(w,2);Ju(I,{get connection(){return h()}}),A(k=>{p=Ut(g,1,"",null,p,{"sidebar-left":!t().hasRightColumn,"sidebar-right":t().hasRightColumn}),b(_,k)},[()=>(o(),l(()=>o()("Settings")))]),gr(3,g,()=>Na,()=>t().sidebarTransition),y($,g)};me(m,$=>{t(),r(),l(()=>t().hasRightColumn||r()==="settings")&&$(x)})}y(n,f),xt(),i()}const Qn={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",i:"invite_only",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",M:"login_to_talk",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",R:"login_to_join",s:"secret",S:"secure_connection_only",t:"topic_protection"};function qr(n){return Qn[n]?Qn[n]:Object.keys(Qn).filter(e=>n===Qn[e])[0]||""}const oc=["Members","Bots","Bots","Voiced","Half operators","Operators","Administrators","Founders"],sh={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",q:"founder",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};var ih=S("<h3> </h3>"),lh=S('<a class="participant prevent-default"><!> <span> </span></a>'),ch=S('<a href="#settings"><!> </a>'),uh=S('<nav class="participants"><!></nav>');function dh(n,e){wt(e,!1);const t=()=>Oe(a(d),"$participants",s),r=()=>Oe(zt,"$l",s),o=()=>Oe(f,"$user",s),[s,i]=Lt(),d=Ee();let h=Ye(e,"conversation",8);const f=rr("user");function m(u){const _=[];let w=-1;for(const E of u)w!=E.group&&_.push({heading:oc[E.group]||oc[0]}),w=E.group,_.push(E);return _}Be(()=>Pe(h()),()=>{Jr(K(d,h().participants),"$participants",s)}),Mt(),Et();var x=uh(),$=c(x);{var g=u=>{var _=ct(),w=_e(_);fr(w,1,()=>(t(),l(()=>m(t().toArray()))),dr,(E,P)=>{var I=ct(),k=_e(I);{var Y=L=>{var X=ih(),te=c(X);A(ve=>b(te,ve),[()=>(r(),a(P),l(()=>r()(a(P).heading)))]),y(L,X)},ue=L=>{var X=lh(),te=c(X);{let q=je(()=>(a(P),o(),l(()=>a(P).me?o().avatarId:void 0)));Te(te,{get name(){return`pick:${a(P),l(()=>a(P).nick)??""}`},family:"solid",get color(){return a(P),l(()=>a(P).color)},get avatarId(){return a(q)}})}var ve=v(te,2),ne=c(ve);A(()=>{ze(X,"href",`#action:join:${a(P),l(()=>a(P).nick)??""}`),b(ne,(a(P),l(()=>a(P).nick)))}),y(L,X)};me(k,L=>{a(P),l(()=>a(P).heading)?L(Y):L(ue,!1)})}y(E,I)}),y(u,_)},p=u=>{var _=ch(),w=c(_);Te(w,{name:"users-cog"});var E=v(w);A(P=>b(E,` ${P??""}`),[()=>(r(),l(()=>r()("Settings")))]),Qe("click",_,function(...P){var I;(I=xr.toggle)==null||I.apply(this,P)}),y(u,_)};me($,u=>{t(),l(()=>t().length)?u(g):u(p,!1)})}y(n,x),xt(),i()}function wi(n){if(!n.nick)return["Loading..."];const e=Object.keys(n.channels||{}).sort(),t=[n.nick,n.name||n.user];let r="%1 (%2)";return n.away&&(r+=" is away (%3) and",t.push(n.away)),n.idle_for&&e.length?(r+=" has been idle for %4s in %5.",t.push(n.idle_for),t.push(e.sort().join(", "))):n.idle_for&&!e.length?(r+=" has been idle for %4s, and is not in any channels.",t.push(n.idle_for)):e.length?(r+=" is active in %4.",t.push(e.join(", "))):r+=" is not in any channels.",n.away||(r=r.replace(/%(4|5)/g,(o,s)=>"%"+(s-1))),[r,...t]}function co(n){const e=["","chat",n.connection_id];return n.conversation_id&&e.push(n.conversation_id),Ze.urlFor(e.map(encodeURIComponent).join("/")+"#"+n.ts.toISOString())}function fh(n,{conversation:e}){const t=n.detail.visibleEls.filter(s=>s.dataset.ts);if(!t.length)return;const r=s=>Ze.go(e.path+(s.length?"#"+s:""),{replace:!0}),o=n.detail.pos;if(o==="top"){const s=t[0].dataset.ts;e.historyStartAt||e.load({before:s}),r(s)}else if(o==="bottom"){const s=t.slice(-1)[0].dataset.ts;e.historyStopAt||e.load({after:s}),r(e.historyStopAt?"":s)}else r(t[0].dataset.ts)}function ph(n,{conversation:e,timestampFromUrl:t}){const{infinityEl:r,scrollHeightChanged:o,scrollTo:s,visibleEls:i,visibleElsChanged:d}=n.detail,h=e.messages;!(r.scrollHeight>r.offsetHeight)&&h.length&&e.load({before:h.get(0).ts.toISOString()}),o&&(s(Ze.hash?'.message[data-ts="'+Ze.hash+'"]':-1),vh(r,t===Ze.hash)),d&&i.forEach(m=>h.render(m.dataset.index))}function vh(n,e){const t=e&&Ze.hash&&n.querySelector('.message[data-ts="'+Ze.hash+'"]');hr(n,".has-focus",r=>r.classList.remove("has-focus")),t&&t.classList.add("has-focus")}function sc(n,e){return e.is("not_found")?"":n.frozen?n.frozen:n===e?"Connection messages.":e.info.away?e.info.away:e.info.idle_for?kt.l("User has been idle for %1s.",e.info.idle_for):(e.frozen?e.frozen:e.topic)||(e.is("private")?"Private conversation.":"No topic is set.")}var hh=S('<span slot="label"> </span>'),gh=S('<span slot="label"> </span>'),_h=S('<span slot="label"> </span>'),mh=S('<span><!></span> <br/><small><a href="#update"> </a></small>',1),bh=S('<span slot="label"> <b class="badge"> </b></span>'),yh=S('<span slot="label"> <b class="badge"> </b></span>'),$h=S('<span slot="label"> <b class="badge"> </b></span>'),wh=S('<span slot="label"> <b class="badge"> </b></span>'),xh=S('<span slot="label"> <b class="badge"> </b></span>'),Eh=S('<span slot="label"> </span>'),Sh=S("<p><i> </i></p>"),kh=S("<!> <!> <!> <!> <!> <!> <!>",1),Ah=S("<span> </span>"),Oh=S("<span> </span>"),Ch=S('<div><form method="post"><h3> </h3> <!> <!> <!> <p><!></p> <!> <div class="form-actions"><!> <!></div> <!></form> <!></div>');function Th(n,e){wt(e,!1);const t=()=>Oe(g(),"$conversation",h),r=()=>Oe(a(m),"$participants",h),o=()=>Oe(xr,"$activeMenu",h),s=()=>Oe(Sn,"$viewport",h),i=()=>Oe(zt,"$l",h),d=()=>Oe(Ur,"$lmd",h),[h,f]=Lt(),m=Ee(),x=Ee(),$=Ee();let g=Ye(e,"conversation",12);const p=new Ao({api:!1,id:"saveConversationSettings"});let u=Ee({invite_only:!1,moderated:!1,password:!1,prevent_external_send:!1,topic_protection:!1}),_=Ee(""),w=Ee(""),E=Ee("");function P(){g().send("/part",ne=>{ne.errrors||(Du(xr,""),Ze.removeFromHistory(location.href),Ze.go(Ze.history.slice(-1)[0]||"/settings/conversation?connection_id="+(g().connection_id||"")))})}function I(){const ne=[];for(const q in a(u))q==="password"&&a(u)[q]?(a(w)&&g().send(a($)?"/mode +k "+a(w):"/join "+g().name+" "+a(w)),K(w,"")):a(u)[q]!==(g().modes[q]||!1)&&ne.push((a(u)[q]?"+":"-")+qr(q));return a($)&&ne.length&&g().send("/mode "+ne.join(""))}function k(){return!a($)&&g().modes.topic_protection?!1:a(E)!==g().topic&&g().send("/topic "+a(E))}async function Y(){p.update({status:"loading"}),await p.on("update"),I(),k(),await Ca(),p.update({status:"success"})}function ue(){Object.keys(g().modes).length===0&&!a(x)&&!g().frozen&&g().send("/mode",ne=>{ne.bubbles=!1,K(u,Object.assign({},a(u),g().modes)),K(E,g().topic)})}function L(){g().send("/whois "+g().name,ne=>ne.stopPropagation())}Be(()=>t(),()=>{Jr(K(m,t().participants),"$participants",h)}),Be(()=>t(),()=>{K(x,t().is("private"))}),Be(()=>r(),()=>{K($,r().me().modes.operator)}),Be(()=>(Pe(g()),a(_)),()=>{g().path!=a(_)&&(K(_,g().path),ue())}),Mt(),Et();var X=ct(),te=_e(X);{var ve=ne=>{var q=Ch();let W;var J=c(q),$e=c(J),ye=c($e),Q=v($e,2);{var le=D=>{It(D,{name:"want_notifications",get value(){return g().wantNotifications},set value(H){g(g().wantNotifications=H,!0)},$$slots:{label:(H,Z)=>{var fe=hh(),R=c(fe);A(B=>b(R,B),[()=>(i(),l(()=>i()("Notify me on new messages")))]),y(H,fe)}},$$legacy:!0})};me(Q,D=>{t(),l(()=>Object.hasOwn(t(),"wantNotifications"))&&D(le)})}var xe=v(Q,2);It(xe,{name:"raw_messages",get value(){return g().messages.raw},set value(D){g(g().messages.raw=D,!0)},$$slots:{label:(D,H)=>{var Z=gh(),fe=c(Z);A(R=>b(fe,R),[()=>(i(),l(()=>i()("Show raw messages")))]),y(D,Z)}},$$legacy:!0});var Re=v(xe,2);{var se=D=>{{let H=je(()=>(i(),l(()=>i()("No topic is set.")))),Z=je(()=>(a($),t(),l(()=>!a($)||!t().modes.topic_protection)));Zu(D,{name:"topic",get placeholder(){return a(H)},get readonly(){return a(Z)},get value(){return a(E)},set value(fe){K(E,fe)},$$slots:{label:(fe,R)=>{var B=_h(),pe=c(B);A(ce=>b(pe,ce),[()=>(i(),l(()=>i()("Topic")))]),y(fe,B)}},$$legacy:!0})}};me(Re,D=>{a(x)||D(se)})}var ie=v(Re,2),de=c(ie);{var we=D=>{var H=tr();A(Z=>b(H,Z),[()=>(i(),Pe(g()),l(()=>i()("Conversation with %1 is frozen. Reason: %2",g().name,i()(g().frozen))))]),y(D,H)},Ce=D=>{var H=ct(),Z=_e(H);{var fe=R=>{var B=mh(),pe=_e(B),ce=c(pe);Ot(ce,()=>(d(),Pe(wi),t(),l(()=>d()(...wi(t().info)))));var Ae=v(pe,3),Ie=c(Ae),oe=c(Ie);A(he=>b(oe,he),[()=>(i(),l(()=>i()("Update information")))]),Qe("click",Ie,qt(L)),y(R,B)};me(Z,R=>{a(x)&&R(fe)},!0)}y(D,H)};me(de,D=>{t(),l(()=>t().frozen)?D(we):D(Ce,!1)})}var j=v(ie,2);{var ee=D=>{var H=kh(),Z=_e(H);{let he=je(()=>!a($));It(Z,{badge:!0,name:"invite_only",get disabled(){return a(he)},get value(){return a(u).invite_only},set value(G){Me(u,a(u).invite_only=G)},$$slots:{label:(G,Se)=>{var be=bh(),ge=c(be),ae=v(ge),Fe=c(ae);A((N,U)=>{b(ge,`${N??""} `),b(Fe,`${a(u),l(()=>a(u).invite_only?"+":"-")??""}${U??""}`)},[()=>(i(),l(()=>i()("Invite only"))),()=>(Pe(qr),l(()=>qr("invite_only")))]),y(G,be)}},$$legacy:!0})}var fe=v(Z,2);{let he=je(()=>!a($));It(fe,{badge:!0,name:"moderated",get disabled(){return a(he)},get value(){return a(u).moderated},set value(G){Me(u,a(u).moderated=G)},$$slots:{label:(G,Se)=>{var be=yh(),ge=c(be),ae=v(ge),Fe=c(ae);A((N,U)=>{b(ge,`${N??""} `),b(Fe,`${a(u),l(()=>a(u).moderated?"+":"-")??""}${U??""}`)},[()=>(i(),l(()=>i()("Moderated"))),()=>(Pe(qr),l(()=>qr("moderated")))]),y(G,be)}},$$legacy:!0})}var R=v(fe,2);{let he=je(()=>!a($));It(R,{badge:!0,name:"prevent_external_send",get disabled(){return a(he)},get value(){return a(u).prevent_external_send},set value(G){Me(u,a(u).prevent_external_send=G)},$$slots:{label:(G,Se)=>{var be=$h(),ge=c(be),ae=v(ge),Fe=c(ae);A((N,U)=>{b(ge,`${N??""} `),b(Fe,`${a(u),l(()=>a(u).prevent_external_send?"+":"-")??""}${U??""}`)},[()=>(i(),l(()=>i()("Prevent external send"))),()=>(Pe(qr),l(()=>qr("prevent_external_send")))]),y(G,be)}},$$legacy:!0})}var B=v(R,2);{let he=je(()=>!a($));It(B,{badge:!0,name:"topic_protection",get disabled(){return a(he)},get value(){return a(u).topic_protection},set value(G){Me(u,a(u).topic_protection=G)},$$slots:{label:(G,Se)=>{var be=wh(),ge=c(be),ae=v(ge),Fe=c(ae);A((N,U)=>{b(ge,`${N??""} `),b(Fe,`${a(u),l(()=>a(u).topic_protection?"+":"-")??""}${U??""}`)},[()=>(i(),l(()=>i()("Protected topic"))),()=>(Pe(qr),l(()=>qr("topic_protection")))]),y(G,be)}},$$legacy:!0})}var pe=v(B,2);{let he=je(()=>!a($));It(pe,{badge:!0,name:"password",get disabled(){return a(he)},get value(){return a(u).password},set value(G){Me(u,a(u).password=G)},$$slots:{label:(G,Se)=>{var be=xh(),ge=c(be),ae=v(ge),Fe=c(ae);A((N,U)=>{b(ge,`${N??""} `),b(Fe,`${a(u),l(()=>a(u).password?"+":"-")??""}${U??""}`)},[()=>(i(),l(()=>i()("Password"))),()=>(Pe(qr),l(()=>qr("password")))]),y(G,be)}},$$legacy:!0})}var ce=v(pe,2);{var Ae=he=>{$t(he,{type:"password",name:"password",get value(){return a(w)},set value(G){K(w,G)},$$slots:{label:(G,Se)=>{var be=Eh(),ge=c(be);A(ae=>b(ge,ae),[()=>(i(),l(()=>i()("Password")))]),y(G,be)}},$$legacy:!0})};me(ce,he=>{a(u),l(()=>a(u).password)&&he(Ae)})}var Ie=v(ce,2);{var oe=he=>{var G=Sh(),Se=c(G),be=c(Se);A(ge=>b(be,ge),[()=>(i(),l(()=>i()("Only operators can change modes.")))]),y(he,G)};me(Ie,he=>{a($)||he(oe)})}y(D,H)};me(j,D=>{a(x)||D(ee)})}var z=v(j,2),M=c(z);{var F=D=>{Vt(D,{icon:"save",get op(){return p},children:(H,Z)=>{var fe=Ah(),R=c(fe);A(B=>b(R,B),[()=>(i(),l(()=>i()("Save")))]),y(H,fe)},$$slots:{default:!0}})};me(M,D=>{a(x)||D(F)})}var T=v(M,2);Vt(T,{type:"button",icon:"sign-out-alt",$$events:{click:P},children:(D,H)=>{var Z=Oh(),fe=c(Z);A(R=>b(fe,R),[()=>(i(),l(()=>i()("Leave")))]),y(D,Z)},$$slots:{default:!0}});var C=v(z,2);Rr(C,{get op(){return p}});var V=v(J,2);dh(V,{get conversation(){return g()}}),A(D=>{W=Ut(q,1,"",null,W,{"sidebar-left":!s().hasRightColumn,"sidebar-right":s().hasRightColumn}),b(ye,D)},[()=>(i(),l(()=>i()("Settings")))]),Qe("submit",J,qt(Y)),gr(3,q,()=>Na,()=>s().sidebarTransition),y(ne,q)};me(te,ne=>{s(),o(),l(()=>s().hasRightColumn||o()==="settings")&&ne(ve)})}y(n,X),xt(),f()}var Is,ic;function Xu(){if(ic)return Is;ic=1;function n(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Is=n,Is}var Ms,lc;function Nh(){if(lc)return Ms;lc=1;var n=/\s/;function e(t){for(var r=t.length;r--&&n.test(t.charAt(r)););return r}return Ms=e,Ms}var Ls,cc;function Rh(){if(cc)return Ls;cc=1;var n=Nh(),e=/^\s+/;function t(r){return r&&r.slice(0,n(r)+1).replace(e,"")}return Ls=t,Ls}var Ds,uc;function Ph(){if(uc)return Ds;uc=1;var n=Rh(),e=Xu(),t=zu(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,i=/^0o[0-7]+$/i,d=parseInt;function h(f){if(typeof f=="number")return f;if(t(f))return r;if(e(f)){var m=typeof f.valueOf=="function"?f.valueOf():f;f=e(m)?m+"":m}if(typeof f!="string")return f===0?f:+f;f=n(f);var x=s.test(f);return x||i.test(f)?d(f.slice(2),x?2:8):o.test(f)?r:+f}return Ds=h,Ds}var Us,dc;function Ih(){if(dc)return Us;dc=1;var n=Xu(),e=ju(),t=Ph(),r="Expected a function",o=Math.max,s=Math.min;function i(d,h,f){var m,x,$,g,p,u,_=0,w=!1,E=!1,P=!0;if(typeof d!="function")throw new TypeError(r);h=t(h)||0,n(f)&&(w=!!f.leading,E="maxWait"in f,$=E?o(t(f.maxWait)||0,h):$,P="trailing"in f?!!f.trailing:P);function I(q){var W=m,J=x;return m=x=void 0,_=q,g=d.apply(J,W),g}function k(q){return _=q,p=setTimeout(L,h),w?I(q):g}function Y(q){var W=q-u,J=q-_,$e=h-W;return E?s($e,$-J):$e}function ue(q){var W=q-u,J=q-_;return u===void 0||W>=h||W<0||E&&J>=$}function L(){var q=e();if(ue(q))return X(q);p=setTimeout(L,Y(q))}function X(q){return p=void 0,P&&m?I(q):(m=x=void 0,g)}function te(){p!==void 0&&clearTimeout(p),_=0,m=u=x=p=void 0}function ve(){return p===void 0?g:X(e())}function ne(){var q=e(),W=ue(q);if(m=arguments,x=this,u=q,W){if(p===void 0)return k(u);if(E)return clearTimeout(p),p=setTimeout(L,h),I(u)}return p===void 0&&(p=setTimeout(L,h)),g}return ne.cancel=te,ne.flush=ve,ne}return Us=i,Us}var Mh=Ih();const Gi=ma(Mh);class Lh{constructor(){this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=Gi(()=>this._removeDragOver(),100)}attach(e,t,r=document){this.dropEl=e,this.uploader=t,this.targetEl=r,Object.keys(this.dragAndDropEvents).forEach(o=>{r.addEventListener(o,this.dragAndDropEvents[o])}),Object.keys(this.pasteEvents).forEach(o=>{document.addEventListener(o,this.pasteEvents[o])})}detach(){Object.keys(this.dragAndDropEvents).forEach(e=>{this.targetEl.removeEventListener(e,this.dragAndDropEvents[e])}),Object.keys(this.pasteEvents).forEach(e=>{document.removeEventListener(e,this.pasteEvents[e])})}drop(e){this.stop(e),this.uploader&&this.uploader(e)}paste(e){const t=(e.clipboardData||e.originalEvent.clipboardData).items;if(this.uploader){for(let r=0;r<t.length;r++)if(t[r].kind==="file")return this.uploader({dataTransfer:{files:[t[r].getAsFile()]}})}}stop(e){this._preventDefault(e),this.removeDragOverDebounced()}start(e){if(!this.dropEl)return;this._preventDefault(e);const t=this.dropIndicatorEl.style;t.height=this.dropEl.offsetHeight+"px",t.width=this.dropEl.offsetWidth+"px",t.top=this.dropEl.offsetTop+"px",t.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}_preventDefault(e){e.preventDefault(),e.stopPropagation()}_removeDragOver(){this.dropIndicatorEl.classList.add("hidden")}}var Dh=S("<main><div><!></div></main>");function Ki(n,e){wt(e,!1);const t=Ee(),r=yf(),o={scrollDelay:80,scrollOffset:80,scrollTop:0,visibleEls:[]};let s=Ye(e,"class",8,""),i=to(),d=Ee(0),h=Ye(e,"pos",12,"top");function f(){const w=o.infinityEl;if(!w)return;h(w.scrollTop>a(d)-w.offsetHeight-o.scrollOffset?"bottom":w.scrollTop<o.scrollOffset?"top":"middle"),o.pos=h(),o.scrollHeightChanged=o.scrollHeight!==a(d),o.scrollHeight=a(d),o.visibleElsChanged=!1;const E=rp(w.firstElementChild,w);(E.length!==o.visibleEls.length||E[0]!==o.visibleEls[0])&&(o.visibleEls=E,o.visibleElsChanged=!0),(o.scrollHeightChanged||o.visibleElsChanged)&&r("visibility",o),o.scrollHeightChanged&&r("rendered",o)}function m(w){o.infinityEl=w,o.scrollTo=g,w.addEventListener("scroll",()=>x(w)),f()}function x(w){o.scrollTid&&clearTimeout(o.scrollTid),o.scrollTid=setTimeout(()=>$(w),o.scrollDelay)}function $(w){i+500>to()?(Math.abs(w.scrollTop-o.scrollTop)>40&&(w.scrollTop=o.scrollTop),o.scrollTid&&clearTimeout(o.scrollTid),f()):(o.scrollTop=w.scrollTop,f(),r("scrolled",o))}function g(w){return tt.undefined(w)||(w===-1&&(w=a(d)),tt.string(w)&&(w=o.infinityEl.querySelector(w)),w&&w.tagName&&(w=w.offsetTop),tt.undefined(w))||w<0?!1:(i=to(),o.infinityEl.scrollTop=w,o.scrollTop=o.infinityEl.scrollTop,!0)}Be(()=>(Pe(s()),Pe(h())),()=>{K(t,[s()||"infinity-scroll"].concat(["has-pos-"+h()]))}),Be(()=>a(d),()=>{a(d)&&f()}),Mt(),Et();var p=Dh(),u=c(p),_=c(u);en(_,e,"default",{},null),Mi(p,w=>m==null?void 0:m(w)),A(w=>Ut(p,1,w),[()=>(a(t),l(()=>a(t).join(" ")))]),Uf(u,"offsetHeight",w=>K(d,w)),y(n,p),xt()}var Uh=S("<a><!></a>");function vt(n,e){wt(e,!1);const t=()=>Oe(Ze,"$route",r),[r,o]=Lt(),s=Ee(),i=Ee();let d=Ye(e,"class",8,""),h=Ee(),f=Ye(e,"href",8,"/"),m=Ye(e,"style",8,"");const x=()=>a(h).focus();Be(()=>(Pe(f()),t()),()=>{K(s,f().indexOf("/")===0?t().basePath+f():f())}),Be(()=>(t(),a(s)),()=>{K(i,t().basePath+t().path===a(s).replace(/(#|\?).*/,""))}),Mt();var $={focus:x};Et();var g=Uh();let p;var u=c(g);en(u,e,"default",{},null),Eo(g,w=>K(h,w),()=>a(h)),A(()=>{ze(g,"href",a(s)),p=Ut(g,1,d(),null,p,{"has-path":a(i)}),En(g,m())}),Qe("click",g,function(w){ga.call(this,e,w)}),y(n,g),Nr(e,"focus",x);var _=xt($);return o(),_}const Fh=_a("notify");class Bh extends Pr{constructor(){super(),this.Notification=window.Notification||{permission:"denied"},this.prop("persist","volume",0),this.prop("persist","notificationCloseDelay",5e3),this.prop("persist","wantNotifications",this.Notification.requestPermission?null:!1),this.prop("ro","appHasFocus",()=>document.hasFocus()),this.prop("ro","volumeOptions",[["0","Muted"],["25","Low"],["50","Medium"],["100","Max"]]),this.prop("rw","desktopAccess",this.Notification.permission)}play(e=this){const t=document.getElementById("audio_notification");t&&(t.muted=!1,t.volume=parseInt(e.volume,10)/100,t.play())}requestDesktopAccess(){return this.Notification.requestPermission?(this.Notification.requestPermission(e=>this.update({desktopAccess:e})),this):this.update({desktopAccess:this.Notification.permission})}show(e,t={}){if(t.title||(t.title=document.title),!this.wantNotifications)return this._showInConsole(e,t);if(this.volume&&this.play(),this.desktopAccess!=="granted")return this.showInApp(e,t);const r=new Notification(t.title,{...t,body:e});return r.onclick=o=>this._onClick(o,r,t),setTimeout(()=>r.close(),this.notificationCloseDelay),r}showInApp(e,t={}){t.title||(t.title=document.title);const r=document.createElement("div"),o={...t,body:e,close:()=>{r.remove(),o.closed=!0},target:"app"};return r.className="notify-notification fade-in",r.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',r.querySelector("a").addEventListener("click",s=>{s.preventDefault(),o.close()}),r.querySelector("h6").textContent=t.title,r.querySelector("div").textContent=e,t.closeAfter===-1?r.querySelector("a").remove():setTimeout(()=>o.close(),t.closeAfter||this.notificationCloseDelay),setTimeout(()=>r.classList.add("is-visible"),1),document.body.appendChild(r),o}_onClick(e,t,r){t.close(),window.focus(),this.emit("click",{...r,sourceEvent:e})}_showInConsole(e,t){return Fh.info("[Notify]",e,t),{...t,body:e,close:()=>{},target:"console"}}}const nr=new Bh;var qh=S('<a href="#settings"><!><!></a>'),jh=S('<h1 class="ellipsis"><a href="#settings"> </a></h1> <!>',1),zh=S('<div class="message__status-line for-loading has-pos-top"><span><!> <i> </i></span></div>'),Hh=S('<div class="message__status-line for-start-of-history"><span><!> <i> </i></span></div>'),Wh=S('<div class="message__status-line for-day-changed"><span><!> <i> </i></span></div>'),Gh=S('<div class="message__status-line for-last-read"><span><!> </span></div>'),Kh=S("<a><!></a>"),Vh=S("<div></div>"),Yh=S('<div class="popover"><a><!> </a> <a class="on-hover"><!> </a> <a class="on-hover"><!> </a> <a class="on-hover"><!> </a></div>'),Zh=S('<!> <!> <div><div class="message__ts has-tooltip"><span> </span> <span class="tooltip"> </span></div> <!> <a class="message__from" tabindex="-1"> </a> <div class="message__text"><!> <!></div> <!> <!></div>',1),Jh=S("<!> ",1),Xh=S("<!> ",1),Qh=S("<h2> </h2> <p> </p> <p><!> <!></p>",1),eg=S("<!> <span> </span>",1),tg=S("<!> <span> </span>",1),rg=S("<h2> </h2> <p> </p> <p><!> <!></p>",1),ng=S('<a href="#toggle" class="message is-highlighted"><div class="message__text"><!> <!></div></a>'),ag=S("<!> <span> </span>",1),og=S("<!> <span> </span>",1),sg=S("<h2> </h2> <p> </p> <p><!> <!></p>",1),ig=S('<div class="message is-highlighted"><div class="message__text"><!> </div></div>'),lg=S('<div class="message"><div> </div> <div class="progress"><div class="progress__bar"> </div></div></div>'),cg=S('<div class="message is-highlighted"><div class="message__text"><!> <!></div></div>'),ug=S('<div class="message__status-line for-loading has-pos-bottom"><span><!> <i> </i></span></div>'),dg=S('<div class="message__status-line for-jump-to-now"><a><!> </a></div>'),fg=S("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1),pg=S("<!> <!> <!> <!>",1);function vg(n,e){wt(e,!1);const t=()=>Oe(P,"$user",$),r=()=>Oe(a(k),"$conversation",$),o=()=>Oe(Ze,"$route",$),s=()=>Oe(zt,"$l",$),i=()=>Oe(Sn,"$viewport",$),d=()=>Oe(xr,"$activeMenu",$),h=()=>Oe(a(Y),"$messages",$),f=()=>Oe(a(ue),"$participants",$),m=()=>Oe(a(I),"$connection",$),x=()=>Oe(Ur,"$lmd",$),[$,g]=Lt(),p=Ee();let u=Ye(e,"connection_id",8,""),_=Ye(e,"conversation_id",8,""),w=Ye(e,"title",12,"Chat");const E=new Lh,P=rr("user");let I=Ee(P.notifications),k=Ee(P.notifications),Y=Ee(a(k).messages),ue=Ee(a(k).participants),L=Ee(new ir),X=Ee(-1),te={},ve=Ee(),ne=Ee(),q=Ee(),W=Ee(),J=Ee(""),$e;nn(()=>{E.attach(document.querySelector(".main"),a(q)),$e=Ze.on("click",le)}),Ii(()=>{$e(),Object.keys(te).forEach(z=>te[z]()),E.detach()});function ye(){const[z,M]=r().connection_id.split("-");return z+"://"+M+"/"+a(p)+"?tls=1"}function Q(){(a(k).notifications||a(k).unread)&&a(k).markAsRead()}function le(z){const M=z.target.closest("a[href]");if((!M||M.href.indexOf("popover:")===-1)&&K(X,-1),!M)return;if(M.classList.contains("le-thumbnail"))return sp(z,M.querySelector("img"));const T=M.hash.match(/action:([a-z]+):(.*)$/)||["all","unknown","value"];if(T[1]!=="unknown"&&z.preventDefault(),T[2]=decodeURIComponent(T[2]),["join","whois"].indexOf(T[1])!==-1)a(k).send("/"+T[1]+" "+T[2]);else if(T[1]==="expand"){const C=a(k).messages.get(T[2]);C.expanded=!C.expanded,a(k).messages.update({messages:!0})}else if(T[1]==="mention")a(ne)(T[2]);else if(T[1]==="popover"){const C=parseInt(T[2],10);K(X,a(X)!==C?C:-1)}else!M.target&&M.getAttribute("href").indexOf("/")!==0&&(M.target="_blank")}function xe(z,M){const F=M.nodes[0]&&M.nodes[0].parentNode;if(F&&F.classList){const T=F.classList.contains("embed")?"add":"remove";F.classList[T]("hidden")}M.nodes.forEach(T=>z.appendChild(T))}function Re(z,M){a(k).connection_id===z&&a(k).conversation_id===M||P.setActiveConversation({connection_id:z,conversation_id:M})}function se(z){if(z.activeConversation!==a(k)){if(te.conversation&&te.conversation(),te.unread&&te.unread(),popoverMessage=null,Jr(K(k,z.activeConversation),"$conversation",$),Jr(K(Y,a(k).messages),"$messages",$),Jr(K(ue,a(k).participants),"$participants",$),Jr(K(I,z.findConversation({connection_id:a(k).connection_id})||a(k)),"$connection",$),K(L,new ir),te.conversation=a(k).subscribe(M=>{Jr(K(k,M),"$conversation",$)}),te.unread=()=>a(k).update({unread:0}),a(k).markAsRead(),K(J,hv(Ze.hash)&&Ze.hash||""),a(J))return a(k).load({around:a(J)});if(!a(k).historyStopAt)return a(k).load({around:a(L).toISOString()})}}Be(()=>(Pe(u()),Pe(_())),()=>{Re(u(),_())}),Be(()=>t(),()=>{se(t())}),Be(()=>(a(Y),t()),()=>{a(Y).update({expandUrlToMedia:t().expandUrlToMedia})}),Be(()=>r(),()=>{K(p,encodeURIComponent(r().name))}),Be(()=>r(),()=>{w(r().title)}),Be(()=>(o(),r(),a(k)),()=>{!o().hash&&!r().historyStopAt&&a(k).load({})}),Mt(),Et();var ie=pg();Qe("focus",Ci,Q);var de=_e(ie);Dr(de,{children:(z,M)=>{var F=jh(),T=_e(F),C=c(T),V=c(C),D=v(T,2);{var H=Z=>{var fe=qh();let R;var B=c(fe);Te(B,{name:"users-cog"});var pe=v(B);Te(pe,{name:"times"}),A(()=>R=Ut(fe,1,"btn-hallow can-toggle",null,R,{"is-active":d()==="settings"})),Qe("click",fe,function(...ce){var Ae;(Ae=xr.toggle)==null||Ae.apply(this,ce)}),y(Z,fe)};me(D,Z=>{i(),r(),l(()=>!i().hasRightColumn&&!r().is("not_found"))&&Z(H)})}A(Z=>b(V,Z),[()=>(s(),a(k),l(()=>s()(a(k).name)))]),Qe("click",C,function(...Z){var fe;(fe=xr.toggle)==null||fe.apply(this,Z)}),y(z,F)},$$slots:{default:!0}});var we=v(de,2);Ki(we,{class:"main is-above-chat-input",$$events:{scrolled:z=>fh(z,{conversation:a(k)}),visibility:z=>ph(z,{conversation:a(k),timestampFromUrl:a(J)})},children:(z,M)=>{var F=fg(),T=_e(F);{var C=ge=>{pv(ge,{get conversation(){return r()}})};me(T,ge=>{h(),r(),l(()=>h().length<10&&!r().is("not_found"))&&ge(C)})}var V=v(T,2);{var D=ge=>{var ae=zh(),Fe=c(ae),N=c(Fe);Te(N,{name:"spinner",animation:"spin"});var U=v(N,2),Ue=c(U);A(Ke=>b(Ue,Ke),[()=>(s(),l(()=>s()("Loading...")))]),y(ge,ae)};me(V,ge=>{r(),h(),l(()=>r().is("loading")&&h().length>10)&&ge(D)})}var H=v(V,2);{var Z=ge=>{var ae=Hh(),Fe=c(ae),N=c(Fe);Te(N,{name:"calendar-alt"});var U=v(N,2),Ue=c(U);A(Ke=>b(Ue,Ke),[()=>(s(),r(),l(()=>s()("Started chatting on %1",r().historyStartAt.getHumanDate())))]),y(ge,ae)};me(H,ge=>{r(),h(),l(()=>r().historyStartAt&&!r().is("not_found")&&h().length)&&ge(Z)})}var fe=v(H,2);fr(fe,1,()=>(h(),l(()=>h().render())),dr,(ge,ae,Fe)=>{var N=Zh(),U=_e(N);{var Ue=pt=>{var gt=Wh(),_t=c(gt),St=c(_t);Te(St,{name:"calendar-alt"});var Bt=v(St,2),jt=c(Bt);A(Jt=>b(jt,Jt),[()=>(a(ae),l(()=>a(ae).ts.getHumanDate()))]),y(pt,gt)};me(U,pt=>{a(ae),l(()=>a(ae).dayChanged)&&pt(Ue)})}var Ke=v(U,2);{var Ve=pt=>{var gt=Gh(),_t=c(gt),St=c(_t);Te(St,{name:"comments"});var Bt=v(St);A(jt=>b(Bt,` ${jt??""}`),[()=>(s(),l(()=>s()("New messages")))]),y(pt,gt)};me(Ke,pt=>{h(),r(),l(()=>Fe&&Fe===h().length-r().unread)&&pt(Ve)})}var He=v(Ke,2);let at;var ut=c(He),lt=c(ut),rt=c(lt),mt=v(lt,2),O=c(mt),re=v(ut,2);{let pt=je(()=>(a(ae),t(),l(()=>a(ae).yourself?t().avatarId:void 0)));Te(re,{get name(){return`pick:${a(ae),l(()=>a(ae).from)??""}`},get color(){return a(ae),l(()=>a(ae).color)},get avatarId(){return a(pt)}})}var ke=v(re,2),We=c(ke),ot=v(ke,2),nt=c(ot);{var De=pt=>{var gt=Kh(),_t=c(gt);{let St=je(()=>(a(ae),l(()=>a(ae).expanded?"caret-square-up":"caret-square-down")));Te(_t,{get name(){return a(St)}})}A(()=>ze(gt,"href",`#action:expand:${a(ae),l(()=>a(ae).index)??""}`)),y(pt,gt)};me(nt,pt=>{a(ae),l(()=>a(ae).details)&&pt(De)})}var Le=v(nt,2);Ot(Le,()=>(a(ae),l(()=>a(ae).html)));var Ge=v(ot,2);fr(Ge,1,()=>(a(ae),l(()=>a(ae).embeds)),dr,(pt,gt)=>{var _t=ct(),St=_e(_t);Nu(St,()=>a(gt),Bt=>{},(Bt,jt)=>{var Jt=Vh();Mi(Jt,(Wt,Xt)=>xe==null?void 0:xe(Wt,Xt),()=>a(jt)),A(()=>Ut(Jt,1,`embed ${Pe(a(jt)),l(()=>a(jt).className)??""}`)),y(Bt,Jt)}),y(pt,_t)});var bt=v(Ge,2);{var ft=pt=>{var gt=Yh(),_t=c(gt),St=c(_t);{let Ht=je(()=>(a(ae),t(),l(()=>a(ae).yourself?t().avatarId:void 0)));Te(St,{get name(){return`pick:${a(ae),l(()=>a(ae).from)??""}`},get color(){return a(ae),l(()=>a(ae).color)},get avatarId(){return a(Ht)}})}var Bt=v(St),jt=v(_t,2),Jt=c(jt);Te(Jt,{name:"quote-left"});var Wt=v(Jt),Xt=v(jt,2),Fr=c(Xt);Te(Fr,{name:"comments"});var vn=v(Fr),Yt=v(Xt,2),pr=c(Yt);Te(pr,{name:"address-card"});var Zt=v(pr);A((Ht,Ir,kr,on,sn,kn)=>{ze(_t,"href",`#action:popover:${a(ae),l(()=>a(ae).index)??""}`),b(Bt,` ${a(ae),l(()=>a(ae).from)??""}`),ze(jt,"href",`#action:mention:${Ht??""}`),b(Wt,` ${Ir??""}`),ze(Xt,"href",`#action:join:${kr??""}`),b(vn,` ${on??""}`),ze(Yt,"href",`#action:whois:${sn??""}`),b(Zt,` ${kn??""}`)},[()=>(a(ae),l(()=>encodeURIComponent(a(ae).from))),()=>(s(),l(()=>s()("Mention"))),()=>(a(ae),l(()=>encodeURIComponent(a(ae).from))),()=>(s(),l(()=>s()("Chat"))),()=>(a(ae),l(()=>encodeURIComponent(a(ae).from))),()=>(s(),l(()=>s()("Whois")))]),gr(3,gt,()=>ca,()=>({duration:200})),y(pt,gt)};me(bt,pt=>{a(X),a(ae),l(()=>a(X)===a(ae).index)&&pt(ft)})}A((pt,gt,_t,St)=>{at=Ut(He,1,(a(ae),l(()=>a(ae).className)),null,at,pt),ze(He,"data-index",(a(ae),l(()=>a(ae).index))),ze(He,"data-ts",gt),b(rt,_t),b(O,St),ze(ke,"href",`#action:popover:${a(ae),l(()=>a(ae).index)??""}`),En(ke,`color:${a(ae),l(()=>a(ae).color)??""}`),b(We,(a(ae),l(()=>a(ae).from)))},[()=>({"is-not-present":!f().get(a(ae).from),"is-expanded":!!a(ae).expanded}),()=>(a(ae),l(()=>a(ae).ts.toISOString())),()=>(a(ae),l(()=>a(ae).ts.format("%H:%M"))),()=>(Pe(Sr),a(ae),l(()=>Sr(a(ae).ts.toLocaleString())))]),y(ge,N)});var R=v(fe,2);{var B=ge=>{var ae=Qh(),Fe=_e(ae),N=c(Fe),U=v(Fe,2),Ue=c(U),Ke=v(U,2),Ve=c(Ke);{let at=je(()=>(r(),l(()=>encodeURIComponent(ye(r())))));vt(Ve,{get href(){return`/settings/connections?uri=${a(at)??""}`},class:"btn",children:(ut,lt)=>{var rt=Jh(),mt=_e(rt);Te(mt,{name:"thumbs-up"});var O=v(mt);A(re=>b(O,` ${re??""}`),[()=>(s(),l(()=>s()("Yes")))]),y(ut,rt)},$$slots:{default:!0}})}var He=v(Ve,2);vt(He,{href:"/settings/connections",class:"btn is-secondary",children:(at,ut)=>{var lt=Xh(),rt=_e(lt);Te(rt,{name:"thumbs-down"});var mt=v(rt);A(O=>b(mt,` ${O??""}`),[()=>(s(),l(()=>s()("No")))]),y(at,lt)},$$slots:{default:!0}}),A((at,ut)=>{b(N,at),b(Ue,ut)},[()=>(s(),l(()=>s()("Connection does not exist."))),()=>(s(),m(),l(()=>s()('Do you want to create the connection "%1"?',m().connection_id)))]),y(ge,ae)},pe=ge=>{var ae=ct(),Fe=_e(ae);{var N=Ue=>{var Ke=rg(),Ve=_e(Ke),He=c(Ve),at=v(Ve,2),ut=c(at),lt=v(at,2),rt=c(lt);vt(rt,{get href(){return`#action:join:${a(p)??""}`},class:"btn",children:(O,re)=>{var ke=eg(),We=_e(ke);Te(We,{name:"thumbs-up"});var ot=v(We,2),nt=c(ot);A(De=>b(nt,De),[()=>(s(),l(()=>s()("Yes")))]),y(O,ke)},$$slots:{default:!0}});var mt=v(rt,2);vt(mt,{href:"/settings/conversation",class:"btn is-secondary",children:(O,re)=>{var ke=tg(),We=_e(ke);Te(We,{name:"thumbs-down"});var ot=v(We,2),nt=c(ot);A(De=>b(nt,De),[()=>(s(),l(()=>s()("No")))]),y(O,ke)},$$slots:{default:!0}}),A((O,re)=>{b(He,O),b(ut,re)},[()=>(s(),l(()=>s()("You are not part of this conversation."))),()=>(s(),r(),l(()=>s()('Do you want to chat with "%1"?',r().name)))]),y(Ue,Ke)},U=Ue=>{var Ke=ct(),Ve=_e(Ke);{var He=ut=>{var lt=ng(),rt=c(lt),mt=c(rt);Te(mt,{name:"exclamation-triangle"});var O=v(mt,2);Ot(O,()=>(x(),m(),l(()=>x()("Disconnected. Your connection %1 can be edited in [settings](%2).",m().name,"/chat/"+m().connection_id+"#settings")))),Qe("click",lt,function(...re){var ke;(ke=xr.toggle)==null||ke.apply(this,re)}),y(ut,lt)},at=ut=>{var lt=ct(),rt=_e(lt);{var mt=re=>{var ke=sg(),We=_e(ke),ot=c(We),nt=v(We,2),De=c(nt),Le=v(nt,2),Ge=c(Le);vt(Ge,{get href(){return`#action:join:${a(p)??""}`},class:"btn",children:(ft,pt)=>{var gt=ag(),_t=_e(gt);Te(_t,{name:"thumbs-up"});var St=v(_t,2),Bt=c(St);A(jt=>b(Bt,jt),[()=>(s(),l(()=>s()("Yes")))]),y(ft,gt)},$$slots:{default:!0}});var bt=v(Ge,2);vt(bt,{href:"/settings/conversation",class:"btn is-secondary",children:(ft,pt)=>{var gt=og(),_t=_e(gt);Te(_t,{name:"thumbs-down"});var St=v(_t,2),Bt=c(St);A(jt=>b(Bt,jt),[()=>(s(),l(()=>s()("No")))]),y(ft,gt)},$$slots:{default:!0}}),A((ft,pt)=>{b(ot,ft),b(De,pt)},[()=>(s(),a(k),l(()=>s()("You are invited to join %1.",a(k).name))),()=>(s(),l(()=>s()("Do you want to join?")))]),y(re,ke)},O=re=>{var ke=ct(),We=_e(ke);{var ot=nt=>{var De=ig(),Le=c(De),Ge=c(Le);Te(Ge,{name:"exclamation-triangle"});var bt=v(Ge);A(ft=>b(bt,` ${ft??""}`),[()=>(Pe(sc),m(),r(),l(()=>sc(m(),r())))]),y(nt,De)};me(We,nt=>{r(),l(()=>r().frozen&&!r().is("locked"))&&nt(ot)},!0)}y(re,ke)};me(rt,re=>{r(),l(()=>r().frozen&&r().is("pending"))?re(mt):re(O,!1)},!0)}y(ut,lt)};me(Ve,ut=>{m(),l(()=>!m().is("unreachable")&&m().frozen)?ut(He):ut(at,!1)},!0)}y(Ue,Ke)};me(Fe,Ue=>{r(),l(()=>r().is("not_found"))?Ue(N):Ue(U,!1)},!0)}y(ge,ae)};me(R,ge=>{m(),l(()=>m().is("not_found"))?ge(B):ge(pe,!1)})}var ce=v(R,2);{var Ae=ge=>{var ae=lg(),Fe=c(ae),N=c(Fe),U=v(Fe,2),Ue=c(U),Ke=c(Ue);A(Ve=>{b(N,Ve),En(Ue,`width:${a(W)??""}%;`),b(Ke,`${a(W)??""}%`)},[()=>(s(),a(q),l(()=>s()("Uploading %1...",a(q).file.name)))]),gr(3,ae,()=>ca,()=>({duration:200})),y(ge,ae)};me(ce,ge=>{a(W)&&ge(Ae)})}var Ie=v(ce,2);{var oe=ge=>{var ae=cg(),Fe=c(ae),N=c(Fe);Te(N,{name:"info-circle"});var U=v(N,2);Ot(U,()=>(x(),l(()=>x()('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")))),y(ge,ae)};me(Ie,ge=>{Pe(nr),l(()=>nr.wantNotifications===null)&&ge(oe)})}var he=v(Ie,2);{var G=ge=>{var ae=ug(),Fe=c(ae),N=c(Fe);Te(N,{name:"spinner",animation:"spin"});var U=v(N,2),Ue=c(U);A(Ke=>b(Ue,Ke),[()=>(s(),l(()=>s()("Loading...")))]),y(ge,ae)};me(he,ge=>{r(),l(()=>r().is("loading"))&&ge(G)})}var Se=v(he,2);{var be=ge=>{var ae=dg(),Fe=c(ae),N=c(Fe);Te(N,{name:"external-link-alt"});var U=v(N);A(Ue=>{ze(Fe,"href",(a(k),l(()=>a(k).path))),b(U,` ${Ue??""}`)},[()=>(s(),a(L),l(()=>s()("Jump to %1",a(L).format("%b %e %H:%M"))))]),y(ge,ae)};me(Se,ge=>{r(),h(),l(()=>!r().historyStopAt&&h().length)&&ge(be)})}y(z,F)},$$slots:{default:!0}});var Ce=v(we,2);Yu(Ce,{get conversation(){return a(k)},get fillIn(){return a(ne)},set fillIn(z){K(ne,z)},get focus(){return a(ve)},set focus(z){K(ve,z)},get uploader(){return a(q)},set uploader(z){K(q,z)},get uploadProgress(){return a(W)},set uploadProgress(z){K(W,z)},$$legacy:!0});var j=v(Ce,2);{var ee=z=>{var M=ct(),F=_e(M);{var T=V=>{Th(V,{get conversation(){return a(k)}})},C=V=>{oh(V,{get connection(){return a(I)},get conversation(){return a(k)}})};me(F,V=>{_()?V(T):V(C,!1)})}y(z,M)};me(j,z=>{r(),l(()=>!r().is("not_found"))&&z(ee)})}y(n,ie),xt(),g()}var hg=S('<div class="error"> </div>'),gg=S("<tr><td><!></td></tr>");function uo(n,e){wt(e,!1);const t=()=>Oe(d(),"$op",o),r=()=>Oe(zt,"$l",o),[o,s]=Lt();let i=Ye(e,"colspan",8,1),d=Ye(e,"op",8);Et();var h=gg(),f=c(h),m=c(f);{var x=g=>{var p=hg(),u=c(p);A(_=>b(u,_),[()=>(r(),t(),l(()=>r()(t().error())))]),y(g,p)},$=g=>{var p=ct(),u=_e(p);{var _=E=>{var P=tr();A(I=>b(P,I),[()=>(r(),l(()=>r()("Loading...")))]),y(E,P)},w=E=>{var P=ct(),I=_e(P);en(I,e,"default",{},null),y(E,P)};me(u,E=>{t(),l(()=>t().is("loading"))?E(_):E(w,!1)},!0)}y(g,p)};me(m,g=>{t(),l(()=>t().is("error"))?g(x):g($,!1)})}A(()=>ze(f,"colspan",i())),y(n,h),xt(),s()}var _g=S("<h1> </h1>"),mg=S("<tr><td><!></td><td> </td><td> </td></tr>"),bg=S("<!> <span> </span>",1),yg=S('<div class="form-actions"><!></div>'),$g=S("<tr><td><!></td><td> </td><td> </td><td> </td></tr>"),wg=S("<!> <span> </span>",1),xg=S('<div class="form-actions"><!></div>'),Eg=S('<!> <main class="main"><h2> </h2> <table><thead><tr><th> </th><th> </th><th> </th></tr></thead><tbody></tbody></table> <!> <h2> </h2> <p> </p> <table><thead><tr><th> </th><th> </th><th> </th><th> </th></tr></thead><tbody><!><!></tbody></table> <!></main>',1);function Sg(n,e){wt(e,!1);const t=()=>Oe(f,"$user",s),r=()=>Oe(zt,"$l",s),o=()=>Oe(m,"$connectionProfiles",s),[s,i]=Lt(),d=Ee(),h="Connections",f=rr("user"),m=f.connectionProfiles,x=H=>H.url.toFields({connection_id:H.connection_id});let $=Ee([]);nn(()=>m.load()),Be(()=>(t(),a($)),()=>{t().is("success")&&!a($).length&&K($,f.connections.toArray().map(x))}),Be(()=>{},()=>{K(d,f.roles.has("admin"))}),Mt();var g={title:h};Et();var p=Eg(),u=_e(p);Dr(u,{children:(H,Z)=>{var fe=_g(),R=c(fe);A(B=>b(R,B),[()=>(r(),l(()=>r()("Connections")))]),y(H,fe)},$$slots:{default:!0}});var _=v(u,2),w=c(_),E=c(w),P=v(w,2),I=c(P),k=c(I),Y=c(k),ue=c(Y),L=v(Y),X=c(L),te=v(L),ve=c(te),ne=v(I);fr(ne,5,()=>a($),dr,(H,Z)=>{var fe=mg(),R=c(fe),B=c(R);vt(B,{get href(){return`/settings/connection/${a(Z),l(()=>a(Z).connection_id)??""}`},children:(oe,he)=>{var G=tr();A(Se=>b(G,Se),[()=>(a(Z),l(()=>a(Z).host.replace(/:\d+$/,"")))]),y(oe,G)},$$slots:{default:!0}});var pe=v(R),ce=c(pe),Ae=v(pe),Ie=c(Ae);A(oe=>{b(ce,oe),b(Ie,(a(Z),l(()=>a(Z).nick)))},[()=>(Pe(tt),a(Z),r(),l(()=>tt.true(a(Z).tls_verify)?r()("Strict"):tt.true(a(Z).tls)?r()("Yes"):r()("No")))]),y(H,fe)});var q=v(P,2);{var W=H=>{var Z=yg(),fe=c(Z);vt(fe,{href:"/settings/connection/add",class:"btn",children:(R,B)=>{var pe=bg(),ce=_e(pe);Te(ce,{name:"plus-circle"});var Ae=v(ce,2),Ie=c(Ae);A(oe=>b(Ie,oe),[()=>(r(),l(()=>r()("Add")))]),y(R,pe)},$$slots:{default:!0}}),y(H,Z)};me(q,H=>{a(d),l(()=>a(d)||!f.forced_connection)&&H(W)})}var J=v(q,2),$e=c(J),ye=v(J,2),Q=c(ye),le=v(ye,2),xe=c(le),Re=c(xe),se=c(Re),ie=c(se),de=v(se),we=c(de),Ce=v(de),j=c(Ce),ee=v(Ce),z=c(ee),M=v(xe),F=c(M);uo(F,{get op(){return l(()=>m.op)}});var T=v(F);fr(T,1,()=>(o(),l(()=>o().search())),dr,(H,Z)=>{var fe=$g(),R=c(fe),B=c(R);vt(B,{get href(){return`/settings/connection-profile/${a(Z),l(()=>a(Z).id)??""}`},children:(G,Se)=>{var be=tr();A(ge=>b(be,ge),[()=>(a(Z),l(()=>a(Z).url.host.replace(/:\d+$/,"")))]),y(G,be)},$$slots:{default:!0}});var pe=v(R),ce=c(pe),Ae=v(pe),Ie=c(Ae),oe=v(Ae),he=c(oe);A((G,Se,be)=>{b(ce,G),b(Ie,Se),b(he,be)},[()=>(Pe(tt),a(Z),r(),l(()=>tt.true(a(Z).tls_verify)?r()("Strict"):tt.true(a(Z).tls)?r()("Yes"):r()("No"))),()=>(a(Z),r(),l(()=>a(Z).is_default?r()("Yes"):r()("No"))),()=>(a(Z),r(),l(()=>a(Z).is_forced?r()("Yes"):r()("No")))]),y(H,fe)});var C=v(le,2);{var V=H=>{var Z=xg(),fe=c(Z);vt(fe,{href:"/settings/connection-profile/add",class:"btn",children:(R,B)=>{var pe=wg(),ce=_e(pe);Te(ce,{name:"plus-circle"});var Ae=v(ce,2),Ie=c(Ae);A(oe=>b(Ie,oe),[()=>(r(),l(()=>r()("Add")))]),y(R,pe)},$$slots:{default:!0}}),y(H,Z)};me(C,H=>{a(d)&&H(V)})}A((H,Z,fe,R,B,pe,ce,Ae,Ie,oe)=>{b(E,H),b(ue,Z),b(X,fe),b(ve,R),b($e,B),b(Q,pe),b(ie,ce),b(we,Ae),b(j,Ie),b(z,oe)},[()=>(r(),l(()=>r()("Connections"))),()=>(r(),l(()=>r()("Host"))),()=>(r(),l(()=>r()("Secure"))),()=>(r(),l(()=>r()("Nick"))),()=>(r(),l(()=>r()("Connection profiles"))),()=>(r(),l(()=>r()("Connection profiles are used to set up global values for every connection that connect to the same host."))),()=>(r(),l(()=>r()("Host"))),()=>(r(),l(()=>r()("Secure"))),()=>(r(),l(()=>r()("Default"))),()=>(r(),l(()=>r()("Forced")))]),y(n,p),Nr(e,"title",h);var D=xt(g);return i(),D}var kg=S('<!><!> <span class="tooltip is-left"> </span>',1),Ag=S("<h1> </h1> <!>",1),Og=S('<span slot="label"> </span>'),Cg=S('<p class="help" slot="help"> </p>'),Tg=S('<span slot="label"> </span>'),Ng=S('<span slot="label"> </span>'),Rg=S('<span slot="label"> </span>'),Pg=S('<span slot="label"> </span>'),Ig=S('<p class="help" slot="help"> </p>'),Mg=S('<span slot="label"> </span>'),Lg=S('<span slot="label"> </span>'),Dg=S('<p class="help"> </p>'),Ug=S('<span slot="label"> </span>'),Fg=S('<span slot="label"> </span>'),Bg=S('<p class="help" slot="help"> </p>'),qg=S('<span slot="label"> </span>'),jg=S('<p class="help" slot="help"> </p>'),zg=S('<span slot="label"> </span>'),Hg=S('<span slot="label"> </span>'),Wg=S('<div class="form-group"><!> <!> <!> <!> <p class="help"> </p></div>'),Gg=S('<p class="error"> </p>'),Kg=S("<span> </span>"),Vg=S("<span> </span>"),Yg=S("<!> <!>",1),Zg=S("<span> </span>"),Jg=S('<!> <main class="main"><form method="post"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="form-actions"><!></div> <!> <!></form></main>',1);function Xg(n,e){wt(e,!1);const t=()=>Oe(m,"$connectionProfiles",o),r=()=>Oe(zt,"$l",o),[o,s]=Lt(),i=Ee();let d=Ye(e,"profile_id",8,"add");const h=d()==="add"?"Add connection profile":"Edit connection profile",f=rr("user"),m=f.connectionProfiles,x=Ct.op("removeConnectionProfile"),$=Ct.op("saveConnectionProfile");let g=Ee(m.defaultProfile()),p=Ee(!1);nn(async()=>{await m.load(),Object.assign(a(g),m.defaultProfile(),t().find(d())||{})});async function u(){await x.perform({id:d()}),await m.load({force:!0}),await Ca(),Ze.go("/settings/connections")}async function _(){["is_default","is_forced","skip_queue"].forEach(j=>Me(g,a(g)[j]=!!a(g)[j])),Me(g,a(g).service_accounts=Bi(a(g).service_accounts)),Me(g,a(g).url=new wn("irc://localhost").fromFields(a(g)).toString()),await $.perform(a(g)),!$.is("error")&&(a(g).is_default&&f.update({default_connection:a(g).url,forced_connection:a(g).is_forced}),await m.load({force:!0}),await Ca(),Ze.go("/settings/connections"))}Be(()=>{},()=>{K(i,f.roles.has("admin"))}),Mt();var w={title:h};Et();var E=Jg(),P=_e(E);Dr(P,{children:(j,ee)=>{var z=Ag(),M=_e(z),F=c(M),T=v(M,2);vt(T,{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",children:(C,V)=>{var D=kg(),H=_e(D);Te(H,{name:"list"});var Z=v(H);Te(Z,{name:"times"});var fe=v(Z,2),R=c(fe);A(B=>b(R,B),[()=>(Pe(Sr),r(),l(()=>Sr(r()("See all connection profiles"))))]),y(C,D)},$$slots:{default:!0}}),A(C=>b(F,C),[()=>(Pe(d()),r(),l(()=>d()==="add"?r()("Add connection profile"):r()("Edit connection profile")))]),y(j,z)},$$slots:{default:!0}});var I=v(P,2),k=c(I),Y=c(k);{let j=je(()=>(r(),l(()=>r()("Ex: irc.libera.chat:6697")))),ee=je(()=>!a(i));$t(Y,{name:"host",get placeholder(){return a(j)},get readonly(){return a(ee)},get value(){return a(g).host},set value(z){Me(g,a(g).host=z)},$$slots:{label:(z,M)=>{var F=Og(),T=c(F);A(C=>b(T,C),[()=>(r(),l(()=>r()("Host and port")))]),y(z,F)},help:(z,M)=>{var F=Cg(),T=c(F);A(C=>b(T,C),[()=>(r(),l(()=>r()("Will match connections on hostname.")))]),y(z,F)}},$$legacy:!0})}var ue=v(Y,2);{let j=je(()=>!a(i));It(ue,{name:"tls",get disabled(){return a(j)},get value(){return a(g).tls},set value(ee){Me(g,a(g).tls=ee)},$$slots:{label:(ee,z)=>{var M=Tg(),F=c(M);A(T=>b(F,T),[()=>(r(),l(()=>r()("Secure connection (TLS)")))]),y(ee,M)}},$$legacy:!0})}var L=v(ue,2);{let j=je(()=>(a(g),a(i),l(()=>!a(g).tls||!a(i)))),ee=je(()=>(a(g),l(()=>!a(g).tls)));It(L,{name:"tls_verify",get disabled(){return a(j)},get hidden(){return a(ee)},get value(){return a(g).tls_verify},set value(z){Me(g,a(g).tls_verify=z)},$$slots:{label:(z,M)=>{var F=Ng(),T=c(F);A(C=>b(T,C),[()=>(r(),l(()=>r()("Verify certificate (TLS)")))]),y(z,F)}},$$legacy:!0})}var X=v(L,2);{let j=je(()=>(r(),l(()=>r()("Ex: #convos")))),ee=je(()=>!a(i));$t(X,{name:"conversation_id",get placeholder(){return a(j)},get readonly(){return a(ee)},get value(){return a(g).conversation_id},set value(z){Me(g,a(g).conversation_id=z)},$$slots:{label:(z,M)=>{var F=Rg(),T=c(F);A(C=>b(T,C),[()=>(r(),l(()=>r()("Conversation name")))]),y(z,F)}},$$legacy:!0})}var te=v(X,2);{let j=je(()=>(r(),l(()=>r()("chanserv, nickserv, ...")))),ee=je(()=>!a(i));$t(te,{name:"service_accounts",get placeholder(){return a(j)},get readonly(){return a(ee)},get value(){return a(g).service_accounts},set value(z){Me(g,a(g).service_accounts=z)},$$slots:{label:(z,M)=>{var F=Pg(),T=c(F);A(C=>b(T,C),[()=>(r(),l(()=>r()("Service accounts")))]),y(z,F)},help:(z,M)=>{var F=Ig(),T=c(F);A(C=>b(T,C),[()=>(r(),l(()=>r()("Messages from these nicks will be shown in the connection conversation.")))]),y(z,F)}},$$legacy:!0})}var ve=v(te,2);{let j=je(()=>!a(i));It(ve,{name:"is_default",get disabled(){return a(j)},get value(){return a(g).is_default},set value(ee){Me(g,a(g).is_default=ee)},$$slots:{label:(ee,z)=>{var M=Mg(),F=c(M);A(T=>b(F,T),[()=>(r(),l(()=>r()("Default connection")))]),y(ee,M)}},$$legacy:!0})}var ne=v(ve,2);{let j=je(()=>!a(i)),ee=je(()=>(a(g),l(()=>!a(g).is_default)));It(ne,{name:"is_forced",get disabled(){return a(j)},get hidden(){return a(ee)},get value(){return a(g).is_forced},set value(z){Me(g,a(g).is_forced=z)},$$slots:{label:(z,M)=>{var F=Lg(),T=c(F);A(C=>b(T,C),[()=>(r(),l(()=>r()("Force default connection")))]),y(z,F)}},$$legacy:!0})}var q=v(ne,2);{var W=j=>{var ee=Dg(),z=c(ee);A(M=>{ze(ee,"hidden",(a(g),l(()=>!a(g).is_default))),b(z,M)},[()=>(r(),l(()=>r()("Tick this box if you want to prevent users from creating custom connections.")))]),y(j,ee)};me(q,j=>{a(i)&&j(W)})}var J=v(q,2);It(J,{icon:"caret",name:"show_advanced_settings",get value(){return a(p)},set value(j){K(p,j)},$$slots:{label:(j,ee)=>{var z=Ug(),M=c(z);A(F=>b(M,F),[()=>(r(),l(()=>r()("Advanced settings")))]),y(j,z)}},$$legacy:!0});var $e=v(J,2);{var ye=j=>{var ee=Wg(),z=c(ee);{let D=je(()=>!a(i));$t(z,{name:"max_bulk_message_size",type:"number",get readonly(){return a(D)},get value(){return a(g).max_bulk_message_size},set value(H){Me(g,a(g).max_bulk_message_size=H)},$$slots:{label:(H,Z)=>{var fe=Fg(),R=c(fe);A(B=>b(R,B),[()=>(r(),l(()=>r()("Max number of pasted lines")))]),y(H,fe)},help:(H,Z)=>{var fe=Bg(),R=c(fe);A(B=>b(R,B),[()=>(r(),l(()=>r()("Setting this value too high might get you banned from the server.")))]),y(H,fe)}},$$legacy:!0})}var M=v(z,2);{let D=je(()=>!a(i));$t(M,{name:"max_message_length",type:"number",get readonly(){return a(D)},get value(){return a(g).max_message_length},set value(H){Me(g,a(g).max_message_length=H)},$$slots:{label:(H,Z)=>{var fe=qg(),R=c(fe);A(B=>b(R,B),[()=>(r(),l(()=>r()("Max message length")))]),y(H,fe)},help:(H,Z)=>{var fe=jg(),R=c(fe);A(B=>b(R,B),[()=>(r(),l(()=>r()("Messages longer than this will be split into multiple messages.")))]),y(H,fe)}},$$legacy:!0})}var F=v(M,2);{let D=je(()=>!a(i));$t(F,{name:"webirc_password",type:"password",get readonly(){return a(D)},get value(){return a(g).webirc_password},set value(H){Me(g,a(g).webirc_password=H)},$$slots:{label:(H,Z)=>{var fe=zg(),R=c(fe);A(B=>b(R,B),[()=>(r(),l(()=>r()("WEBIRC password")))]),y(H,fe)}},$$legacy:!0})}var T=v(F,2);{let D=je(()=>!a(i));It(T,{name:"skip_queue",get disabled(){return a(D)},get value(){return a(g).skip_queue},set value(H){Me(g,a(g).skip_queue=H)},$$slots:{label:(H,Z)=>{var fe=Hg(),R=c(fe);A(B=>b(R,B),[()=>(r(),l(()=>r()("Skip connection queue")))]),y(H,fe)}},$$legacy:!0})}var C=v(T,2),V=c(C);A(D=>b(V,D),[()=>(r(),l(()=>r()("This might result in flood ban.")))]),gr(3,ee,()=>Ra,()=>({duration:150})),y(j,ee)};me($e,j=>{a(p)&&j(ye)})}var Q=v($e,2);{var le=j=>{var ee=Gg(),z=c(ee);A(M=>b(z,M),[()=>(r(),l(()=>r()("Only administrators can edit this section.")))]),y(j,ee)};me(Q,j=>{a(i)||j(le)})}var xe=v(Q,2),Re=c(xe);{var se=j=>{var ee=Yg(),z=_e(ee);{let F=je(()=>!a(i));Vt(z,{icon:"save",get op(){return $},get disabled(){return a(F)},children:(T,C)=>{var V=Kg(),D=c(V);A(H=>b(D,H),[()=>(r(),l(()=>r()("Update")))]),y(T,V)},$$slots:{default:!0}})}var M=v(z,2);{let F=je(()=>!a(i));Vt(M,{icon:"trash",type:"button",get op(){return x},get disabled(){return a(F)},$$events:{click:u},children:(T,C)=>{var V=Vg(),D=c(V);A(H=>b(D,H),[()=>(r(),l(()=>r()("Delete")))]),y(T,V)},$$slots:{default:!0}})}y(j,ee)},ie=j=>{Vt(j,{icon:"plus-circle",get op(){return $},children:(ee,z)=>{var M=Zg(),F=c(M);A(T=>b(F,T),[()=>(r(),l(()=>r()("Add")))]),y(ee,M)},$$slots:{default:!0}})};me(Re,j=>{d()!=="add"?j(se):j(ie,!1)})}var de=v(xe,2);Rr(de,{get op(){return x},success:"Deleted."});var we=v(de,2);Rr(we,{get op(){return $}}),Qe("submit",k,qt(_)),y(n,E),Nr(e,"title",h);var Ce=xt(w);return s(),Ce}var Qg=S('<!><!> <span class="tooltip is-left"> </span>',1),e_=S("<h1> </h1> <!>",1),t_=S('<!> <main class="main"><!></main>',1);function r_(n,e){wt(e,!1);const t=()=>Oe(zt,"$l",r),[r,o]=Lt(),s=Ee();let i=Ye(e,"connection_id",8,"add");const d=i()==="add"?"Add connection":"Edit connection",h=rr("user");Be(()=>Pe(i()),()=>{K(s,i()==="add"?{}:h.findConversation({connection_id:i()}))}),Mt();var f={title:d};Et();var m=t_(),x=_e(m);Dr(x,{children:(u,_)=>{var w=e_(),E=_e(w),P=c(E),I=v(E,2);vt(I,{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",children:(k,Y)=>{var ue=Qg(),L=_e(ue);Te(L,{name:"list"});var X=v(L);Te(X,{name:"times"});var te=v(X,2),ve=c(te);A(ne=>b(ve,ne),[()=>(Pe(Sr),t(),l(()=>Sr(t()("See all connections"))))]),y(k,ue)},$$slots:{default:!0}}),A(k=>b(P,k),[()=>(Pe(i()),t(),l(()=>i()==="add"?t()("Add connection"):t()("Edit connection")))]),y(u,w)},$$slots:{default:!0}});var $=v(x,2),g=c($);Ju(g,{get connection(){return a(s)},is_page:!0}),y(n,m),Nr(e,"title",d);var p=xt(f);return o(),p}var n_=S("<h1> </h1>"),a_=S('<span slot="label"> </span>'),o_=S("<span> </span>"),s_=S('<span slot="label"> </span>'),i_=S("<span> </span>"),l_=S('<p class="error"> </p>'),c_=S('<a><span class="conversation-add-list__n-users"> </span> <b class="conversation-add-list__name"> </b> <i class="conversation-add-list__title"> </i></a>'),u_=S('<p><!></p> <div class="conversation-add-list"></div>',1),d_=S('<!> <main class="main"><p> </p> <form method="post"><div class="inputs-side-by-side"><!> <div class="flex-basis-30"><!></div></div> <div class="inputs-side-by-side"><!> <div class="flex-basis-30"><!></div></div> <!> <!></form></main>',1);function f_(n,e){wt(e,!1);const t=()=>Oe(f,"$user",o),r=()=>Oe(zt,"$l",o),[o,s]=Lt(),i=Ee(),d="Add conversation",h=rr("socket"),f=rr("user");let m=Ee({conversations:[],done:null,n_conversations:0}),x=Ee(""),$=Ee(""),g;function p(se){const ie=se&&se.target&&se.target.closest("a");ie&&ie.href&&K($,ie.href.replace(/.*#add:/,""));const de=f.findConversation({connection_id:a(x)});de&&a($)&&de.send("/join "+a($))}async function u(se){let ie="/list"+(a($).length?" /"+a($)+"/":"");se.type==="click"&&a(m).done&&(ie+=" refresh"),g&&clearTimeout(g),h.send({connection_id:a(x),message:ie,method:"send"},de=>{const we=Fi(de);K(m,we?{conversations:[],done:!0,n_conversations:0,error:we}:de);let Ce=se.interval?se.interval+500:500;Ce>2e3&&(Ce=2e3),!we&&!de.done&&(g=setTimeout(()=>u({interval:Ce}),Ce))})}function _(){K(x,Ze.param("connection_id")||a(i)[0][0]||""),K($,Ze.param("conversation_id")||"")}const w=Gi(u,250);Be(()=>t(),()=>{K(i,Array.from(t().connections.keys()).map(se=>[se]))}),Be(()=>a(x),()=>{a(x)||_()}),Mt();var E={title:d};Et();var P=d_(),I=_e(P);Dr(I,{children:(se,ie)=>{var de=n_(),we=c(de);A(Ce=>b(we,Ce),[()=>(r(),l(()=>r()("Add conversation")))]),y(se,de)},$$slots:{default:!0}});var k=v(I,2),Y=c(k),ue=c(Y),L=v(Y,2),X=c(L),te=c(X);{let se=je(()=>(r(),l(()=>r()("Select..."))));Xn(te,{name:"connection_id",get options(){return a(i)},get placeholder(){return a(se)},get value(){return a(x)},set value(ie){K(x,ie)},$$slots:{label:(ie,de)=>{var we=a_(),Ce=c(we);A(j=>b(Ce,j),[()=>(r(),l(()=>r()("Connection")))]),y(ie,we)}},$$legacy:!0})}var ve=v(te,2),ne=c(ve);{let se=je(()=>(a(x),a(m),l(()=>!a(x)||a(m).done===!1)));Vt(ne,{type:"button",icon:"sync-alt",get disabled(){return a(se)},$$events:{click:u},children:(ie,de)=>{var we=o_(),Ce=c(we);A(j=>b(Ce,j),[()=>(r(),a(m),l(()=>r()(a(m).conversations.length?"Refresh":"Load")))]),y(ie,we)},$$slots:{default:!0}})}var q=v(X,2),W=c(q);{let se=je(()=>(r(),l(()=>r()("#room or nick"))));$t(W,{name:"conversation_id",get placeholder(){return a(se)},autocomplete:"off",get value(){return a($)},set value(ie){K($,ie)},$$events:{keyup:w},$$slots:{label:(ie,de)=>{var we=s_(),Ce=c(we);A(j=>b(Ce,j),[()=>(r(),l(()=>r()("Conversation name")))]),y(ie,we)}},$$legacy:!0})}var J=v(W,2),$e=c(J);{let se=je(()=>!a(x)||!a($));Vt($e,{icon:"comment",get disabled(){return a(se)},children:(ie,de)=>{var we=i_(),Ce=c(we);A(j=>b(Ce,j),[()=>(r(),l(()=>r()("Add")))]),y(ie,we)},$$slots:{default:!0}})}var ye=v(q,2);{var Q=se=>{var ie=l_(),de=c(ie);A(()=>b(de,`${a(x)??""}: ${a(m),l(()=>a(m).error)??""}`)),y(se,ie)};me(ye,se=>{a(m),l(()=>a(m).error)&&se(Q)})}var le=v(ye,2);{var xe=se=>{var ie=u_(),de=_e(ie),we=c(de);{var Ce=z=>{var M=tr();A(F=>b(M,F),[()=>(r(),a(m),l(()=>r()("Showing %1 of %2 conversations.",a(m).conversations.length,a(m).n_conversations)))]),y(z,M)},j=z=>{var M=tr();A(F=>b(M,F),[()=>(r(),a(m),l(()=>r()("Showing %1 of %2 conversations, but the list is still loading.",a(m).conversations.length,a(m).n_conversations)))]),y(z,M)};me(we,z=>{a(m),l(()=>a(m).done)?z(Ce):z(j,!1)})}var ee=v(de,2);fr(ee,5,()=>(a(m),l(()=>a(m).conversations)),dr,(z,M)=>{var F=c_(),T=c(F),C=c(T),V=v(T,2),D=c(V),H=v(V,2),Z=c(H);A(()=>{ze(F,"href",`#add:${a(M),l(()=>a(M).name)??""}`),b(C,(a(M),l(()=>a(M).n_users))),b(D,(a(M),l(()=>a(M).name))),b(Z,(a(M),l(()=>a(M).topic||"No topic.")))}),Qe("click",F,qt(p)),y(z,F)}),y(se,ie)};me(le,se=>{a(m),l(()=>a(m).done!==null)&&se(xe)})}A(se=>b(ue,se),[()=>(r(),l(()=>r()("Enter the name of an exising conversation, or create a new conversation.")))]),Qe("submit",L,qt(p)),y(n,P),Nr(e,"title",d);var Re=xt(E);return s(),Re}var p_=S("<p><!> </p>"),v_=S("<p><!> </p>"),h_=S('<a target="_self" class="btn is-secondary"><!> </a>'),g_=S('<p><!> </p> <p><!> </p> <!> <p><a class="btn"><!> </a> <!></p>',1),__=S('<p> </p> <p><a target="_self" class="btn"><!> </a></p>',1),m_=S('<p><!></p> <p><a target="_self" class="btn"><!> </a></p>',1),b_=S('<main class="cms-main"><h2> </h2> <!></main>');function fc(n,e){wt(e,!1);const t=()=>Oe(Ze,"$route",d),r=()=>Oe(p,"$user",d),o=()=>Oe(zt,"$l",d),s=()=>Oe(g,"$socket",d),i=()=>Oe(Ur,"$lmd",d),[d,h]=Lt(),f=Ee(),m=Ee();let x=Ye(e,"title",12,"Loading...");const $={loading:"Loading...",not_found:"Not Found"},g=rr("socket"),p=rr("user"),u=ip(5e3);function _(ue,L){const X=ue.path.match(/\/err\/(\w+)/);return X?X[1]:L.is("pending")||L.is("loading")?"loading":"not_found"}Be(()=>(t(),r()),()=>{K(f,_(t(),r()))}),Be(()=>Ze,()=>{K(m,Ze.urlFor(p.email?"/chat":"/login"))}),Be(()=>a(f),()=>{x($[a(f)])}),Mt(),Et();var w=b_(),E=c(w),P=c(E),I=v(E,2);{var k=ue=>{var L=g_(),X=_e(L),te=c(X);Te(te,{name:"download"});var ve=v(te),ne=v(X,2),q=c(ne);Te(q,{name:"rocket"});var W=v(q),J=v(ne,2);{var $e=ie=>{var de=p_(),we=c(de);Te(we,{name:"exclamation-triangle"});var Ce=v(we);A(j=>b(Ce,` ${j??""}`),[()=>(o(),s(),l(()=>o()("Loading user data failed: %1",o()(s().error))))]),y(ie,de)},ye=ie=>{var de=v_(),we=c(de);Te(we,{name:"spinner fa-spin"});var Ce=v(we);A(j=>b(Ce,` ${j??""}`),[()=>(o(),l(()=>o()("Loading user data...")))]),y(ie,de)};me(J,ie=>{s(),l(()=>s().error)?ie($e):ie(ye,!1)})}var Q=v(J,2),le=c(Q),xe=c(le);Te(xe,{name:"paper-plane"});var Re=v(xe),se=v(le,2);Nu(se,()=>u,ie=>{},ie=>{var de=h_(),we=c(de);Te(we,{name:"redo"});var Ce=v(we);A(j=>{ze(de,"href",a(m)),b(Ce,` ${j??""}`)},[()=>(o(),l(()=>o()("Retry")))]),gr(3,de,()=>ca),y(ie,de)}),A((ie,de,we,Ce)=>{b(ve,` ${ie??""}`),b(W,` ${de??""}`),ze(le,"href",we),b(Re,` ${Ce??""}`)},[()=>(o(),l(()=>o()("Downloaded Convos."))),()=>(o(),l(()=>o()("Started Convos."))),()=>(Pe(it),l(()=>it("contact"))),()=>(o(),l(()=>o()("Contact admin")))]),y(ue,L)},Y=ue=>{var L=ct(),X=_e(L);{var te=ne=>{var q=__(),W=_e(q),J=c(W),$e=v(W,2),ye=c($e),Q=c(ye);Te(Q,{name:"play"});var le=v(Q);A((xe,Re)=>{b(J,xe),ze(ye,"href",a(m)),b(le,` ${Re??""}`)},[()=>(o(),l(()=>o()("The Convos Team have been searching and searching, but the requested page could not be found."))),()=>(o(),l(()=>o()("Go to start page")))]),y(ne,q)},ve=ne=>{var q=m_(),W=_e(q),J=c(W);Ot(J,()=>(i(),l(()=>i()("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues"))));var $e=v(W,2),ye=c($e),Q=c(ye);Te(Q,{name:"play"});var le=v(Q);A(xe=>{ze(ye,"href",a(m)),b(le,` ${xe??""}`)},[()=>(o(),l(()=>o()("Go to start page")))]),y(ne,q)};me(X,ne=>{a(f)==="not_found"?ne(te):ne(ve,!1)},!0)}y(ue,L)};me(I,ue=>{a(f)==="loading"?ue(k):ue(Y,!1)})}A(ue=>b(P,ue),[()=>(o(),a(f),l(()=>o()($[a(f)])))]),y(n,w),xt(),h()}var y_=S('<h1> <small><a target="_blank"> </a></small></h1>'),$_=S("<dt> </dt> <dd> </dd>",1),w_=S('<li><a target="_blank"> </a></li>'),x_=S('<!> <main class="main"><p><!> <!></p> <h2 id="quick-search"> </h2> <p> </p> <dl><dt>+</dt> <dd> </dd> <dt>+@</dt> <dd> </dd> <dt>+#</dt> <dd> </dd> <dt> </dt> <dd> </dd></dl> <h2 id="autocomplete"> </h2> <p> </p> <dl><dt>@nick</dt><dd> </dd> <dt>:emoji_name</dt><dd> </dd> <dt>/command</dt><dd> </dd> <dt>#conversation</dt><dd> </dd></dl> <h2 id="formatting"> </h2> <p> </p> <dl><dt><!></dt> <dd> </dd> <dt> </dt> <dd> </dd> <dt> </dt> <dd><!></dd> <dt> </dt> <dd><!></dd> <dt>https://...</dt> <dd> </dd></dl> <h2 id="commands"> </h2> <p><!></p> <dl></dl> <h2 id="resources"> </h2> <ul><li><a target="_blank"> </a></li> <li><a href="https://convos.chat" target="_blank"> </a></li> <li><a href="https://github.com/convos-chat/convos/issues" target="_blank"> </a></li> <li><a href="https://github.com/convos-chat/convos" target="_blank"> </a></li> <!> <li><a target="_blank"> </a></li></ul> <h2 id="fallback"> </h2> <ul><li><!></li> <li><!></li> <li><!></li></ul></main>',1);function E_(n,e){wt(e,!1);const t=()=>Oe(zt,"$l",o),r=()=>Oe(Ur,"$lmd",o),[o,s]=Lt(),i="Help",d="https://github.com/convos-chat/convos/blob/v"+it("version")+"/Changes#L3",h=Object.keys(kt.emojis.aliases).sort().join(", ");var f={title:i};Et();var m=x_(),x=_e(m);Dr(x,{children:(Yt,pr)=>{var Zt=y_(),Ht=c(Zt),Ir=v(Ht),kr=c(Ir),on=c(kr);A((sn,kn)=>{b(Ht,`${sn??""} `),ze(kr,"href",d),b(on,`v${kn??""}`)},[()=>t()("Help"),()=>it("version")]),y(Yt,Zt)},$$slots:{default:!0}});var $=v(x,2),g=c($),p=c(g);Ot(p,()=>r()('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.'));var u=v(p,2);Ot(u,()=>r()("More information can also be found on https://convos.chat."));var _=v(g,2),w=c(_),E=v(_,2),P=c(E),I=v(E,2),k=v(c(I),2),Y=c(k),ue=v(k,4),L=c(ue),X=v(ue,4),te=c(X),ve=v(X,2),ne=c(ve),q=v(ve,2),W=c(q),J=v(I,2),$e=c(J),ye=v(J,2),Q=c(ye),le=v(ye,2),xe=v(c(le)),Re=c(xe),se=v(xe,3),ie=c(se),de=v(se,3),we=c(de),Ce=v(de,3),j=c(Ce),ee=v(le,2),z=c(ee),M=v(ee,2),F=c(M),T=v(M,2),C=c(T),V=c(C);Ot(V,()=>h);var D=v(C,2),H=c(D),Z=v(D,2),fe=c(Z),R=v(Z,2),B=c(R),pe=v(R,2),ce=c(pe),Ae=v(pe,2),Ie=c(Ae);Ot(Ie,()=>r()('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.'));var oe=v(Ae,2),he=c(oe),G=v(oe,2),Se=c(G);Ot(Se,()=>r()("Using backticks around some text, will format it as a `code fragment`."));var be=v(G,4),ge=c(be),ae=v(T,2),Fe=c(ae),N=v(ae,2),U=c(N);Ot(U,()=>r()('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.'));var Ue=v(N,2);fr(Ue,5,()=>Cn,dr,(Yt,pr)=>{var Zt=$_(),Ht=_e(Zt),Ir=c(Ht),kr=v(Ht,2),on=c(kr);A(sn=>{b(Ir,a(pr).example),b(on,sn)},[()=>t()(a(pr).description)]),y(Yt,Zt)});var Ke=v(Ue,2),Ve=c(Ke),He=v(Ke,2),at=c(He),ut=c(at),lt=c(ut),rt=v(at,2),mt=c(rt),O=c(mt),re=v(rt,2),ke=c(re),We=c(ke),ot=v(re,2),nt=c(ot),De=c(nt),Le=v(ot,2);{var Ge=Yt=>{var pr=w_(),Zt=c(pr),Ht=c(Zt);A((Ir,kr)=>{ze(Zt,"href",Ir),b(Ht,kr)},[()=>it("organization_url"),()=>it("organization_name")]),y(Yt,pr)};me(Le,Yt=>{it("organization_name")!=="Convos"&&it("organization_url")!=="https://convos.chat"&&Yt(Ge)})}var bt=v(Le,2),ft=c(bt),pt=c(ft),gt=v(He,2),_t=c(gt),St=v(gt,2),Bt=c(St),jt=c(Bt);vt(jt,{href:"/err/loading",children:(Yt,pr)=>{var Zt=tr("Loading");y(Yt,Zt)},$$slots:{default:!0}});var Jt=v(Bt,2),Wt=c(Jt);vt(Wt,{href:"/err/not_found",children:(Yt,pr)=>{var Zt=tr("Not found");y(Yt,Zt)},$$slots:{default:!0}});var Xt=v(Jt,2),Fr=c(Xt);vt(Fr,{href:"/err/unknown",children:(Yt,pr)=>{var Zt=tr("Unknown");y(Yt,Zt)},$$slots:{default:!0}}),A((Yt,pr,Zt,Ht,Ir,kr,on,sn,kn,zn,Oo,Ne,et,ht,Nt,Gt,Ar,Wr,Hn,_r,Mr,Ha,Wa,Ga,Co,To,No,Ro,Wn,Ka)=>{b(w,Yt),b(P,pr),b(Y,Zt),b(L,Ht),b(te,Ir),b(ne,kr),b(W,on),b($e,sn),b(Q,kn),b(Re,zn),b(ie,Oo),b(we,Ne),b(j,et),b(z,ht),b(F,Nt),b(H,Gt),b(fe,Ar),b(B,Wr),b(ce,Hn),b(he,_r),b(ge,Mr),b(Fe,Ha),b(Ve,Wa),ze(ut,"href",d),b(lt,Ga),b(O,Co),b(We,To),b(De,No),ze(ft,"href",Ro),b(pt,Wn),b(_t,Ka)},[()=>t()("Quick search"),()=>t()("Pressing `shift+enter` will shift focus between chat input and search in sidebar."),()=>t()("Filter conversations with unread messages."),()=>t()("Filter private conversations with unread messages."),()=>t()("Filter channels with unread messages."),()=>t()("Any other combination"),()=>t()("Filter channels, private conversations or search for a string."),()=>t()("Autocomplete"),()=>t()("The following rules apply when typing a message:"),()=>t()('"@" followed by a character will show matching nicks in the current conversation.'),()=>t()('":" followed by a character will show matching emojis.'),()=>t()('"/" will show the available commands.'),()=>t()('"#" will show the matching conversation names.'),()=>t()("Text formatting"),()=>t()("Convos supports some special way of formatting text:"),()=>t()("Will be automatically converted into emojis."),()=>t()("> some text"),()=>t()('A line starting with ">" will be converted into a quote.'),()=>t()("*some text*, **some text**, ***some text***"),()=>t()("`some fragment`"),()=>t()("URLs will be converted to links, and might be embedded in the chat."),()=>t()("Available commands"),()=>t()("Other resources"),()=>t()("Changelog for v%1",it("version")),()=>t()("Project homepage"),()=>t()("Bug/issue tracker"),()=>t()("Source code"),()=>it("contact"),()=>t()("Contact admin"),()=>t()("Demo error pages")]),y(n,m),Nr(e,"title",i);var vn=xt(f);return s(),vn}var S_=S('<h2> </h2> <p> </p> <p> </p> <p><a class="btn"> </a> <!></p>',1),k_=S("<p> </p>"),A_=S('<span slot="label"> </span>'),O_=S('<p class="help" slot="help"> </p>'),C_=S('<span slot="label"> </span>'),T_=S('<p class="help" slot="help"> </p>'),N_=S("<span> </span>"),R_=S('<h2> </h2> <!> <input type="hidden" name="exp"/> <input type="hidden" name="token"/> <!> <!> <div class="form-actions"><!> <!></div> <!>',1),P_=S('<span slot="label"> </span>'),I_=S('<span slot="label"> </span>'),M_=S('<p class="help" slot="help"><!></p>'),L_=S("<span> </span>"),D_=S('<h2> </h2> <!> <!> <div class="form-actions"><!> <!></div> <!>',1),U_=S('<h2> </h2> <p> </p> <div class="form-actions"><a class="btn"><!> </a> <!></div>',1),F_=S("<a> </a>"),B_=S('<main class="cms-main"><form method="post"><input type="hidden" name="mode"/> <!></form></main> <div class="footer--wrapper is-small"><footer class="footer language-selector"><!> <!></footer></div>',1);function pc(n,e){wt(e,!1);const t=()=>Oe(x,"$user",d),r=()=>Oe(Ze,"$route",d),o=()=>Oe(zt,"$l",d),s=()=>Oe(Ur,"$lmd",d),i=()=>Oe(kt,"$i18n",d),[d,h]=Lt(),f=Ee();let m=Ye(e,"title",12,"Sign in");const x=rr("user"),$=Ct.op("loginUser"),g=Ct.op("registerUser");let p=Ee({});function u(q){if(q.is("loading")||!q.email)return;const W=q.conversations()[0],J=q.lastUrl?q.lastUrl:W?W.path:"/settings/connections";Ze.go(J,{replace:!0})}function _(q){const W=q.path.indexOf("register")!==-1,J=!a(p).mode&&it("status")>=400?"invalid_invitation":q.param("email")&&it("existing_user")?"recover":q.param("email")?"invitation":it("first_user")||W&&it("open_to_public")?"register":W?"invalid":"login";return K(p,{email:q.param("email")||a(p).email||"",exp:q.param("exp")||"",mode:J,password:"",token:q.param("token")||""}),m(J==="login"?"Sign in":"Sign up"),"ontouchstart"in window||setTimeout(()=>hr(document,".text-field input").reverse().map($e=>$e.readOnly||$e.focus()),1),J}async function w(q){const W=a(f)==="login"?$:g,J=q.target.closest("form");Me(p,a(p).email=J.email.value),Me(p,a(p).password=J.password.value),await W.perform(a(p)),a(f)!=="login"&&Ze.update({lastUrl:""}),W.error()||await x.load()}Be(()=>t(),()=>{u(t())}),Be(()=>r(),()=>{K(f,_(r()))}),Mt(),Et();var E=B_(),P=_e(E),I=c(P),k=c(I),Y=v(k,2);{var ue=q=>{var W=S_(),J=_e(W),$e=c(J),ye=v(J,2),Q=c(ye),le=v(ye,2),xe=c(le),Re=v(le,2),se=c(Re),ie=c(se),de=v(se,2);vt(de,{href:"/login",children:(we,Ce)=>{var j=tr();A(ee=>b(j,ee),[()=>(o(),l(()=>o()("Sign in")))]),y(we,j)},$$slots:{default:!0}}),A((we,Ce,j,ee,z)=>{b($e,we),b(Q,Ce),b(xe,j),ze(se,"href",ee),b(ie,z)},[()=>(o(),l(()=>o()("Invalid invite/recover URL"))),()=>(o(),Pe(it),l(()=>o()(it("status")==410?"The link has expired.":"The link is invalid."))),()=>(o(),l(()=>o()("Please ask your Convos admin for a new link."))),()=>(Pe(it),l(()=>it("contact"))),()=>(o(),l(()=>o()("Contact admin")))]),y(q,W)},L=q=>{var W=ct(),J=_e(W);{var $e=Q=>{var le=R_(),xe=_e(le),Re=c(xe),se=v(xe,2);{var ie=C=>{var V=k_(),D=c(V);A(H=>b(D,H),[()=>(o(),l(()=>o()('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')))]),y(C,V)};me(se,C=>{Pe(it),l(()=>it("first_user"))&&C(ie)})}var de=v(se,2),we=v(de,2),Ce=v(we,2);{let C=je(()=>(o(),l(()=>o()("Ex: john@doe.com")))),V=je(()=>a(f)!=="register");$t(Ce,{type:"email",name:"email",get placeholder(){return a(C)},get readonly(){return a(V)},get value(){return a(p).email},set value(D){Me(p,a(p).email=D)},$$slots:{label:(D,H)=>{var Z=A_(),fe=c(Z);A(R=>b(fe,R),[()=>(o(),l(()=>o()("Email")))]),y(D,Z)},help:(D,H)=>{var Z=O_(),fe=c(Z);A(R=>b(fe,R),[()=>(a(f),o(),l(()=>a(f)==="invitation"?o()("Your email is from the invite link."):o()("Your email will be used if you forget your password.")))]),y(D,Z)}},$$legacy:!0})}var j=v(Ce,2);$t(j,{type:"password",name:"password",get value(){return a(p).password},set value(C){Me(p,a(p).password=C)},$$slots:{label:(C,V)=>{var D=C_(),H=c(D);A(Z=>b(H,Z),[()=>(o(),l(()=>o()("Password")))]),y(C,D)},help:(C,V)=>{var D=T_(),H=c(D);A(Z=>b(H,Z),[()=>(o(),l(()=>o()("Hint: Use a phrase from a book.")))]),y(C,D)}},$$legacy:!0});var ee=v(j,2),z=c(ee);Vt(z,{icon:"save",get op(){return g},children:(C,V)=>{var D=N_(),H=c(D);A(Z=>b(H,Z),[()=>(a(f),o(),l(()=>a(f)==="recover"?o()("Set new password"):o()("Sign up")))]),y(C,D)},$$slots:{default:!0}});var M=v(z,2);{var F=C=>{vt(C,{href:"/login",children:(V,D)=>{var H=tr();A(Z=>b(H,Z),[()=>(o(),l(()=>o()("Sign in")))]),y(V,H)},$$slots:{default:!0}})};me(M,C=>{Pe(it),l(()=>!it("first_user"))&&C(F)})}var T=v(ee,2);Rr(T,{get op(){return g},success:"Loading Convos..."}),A(C=>b(Re,C),[()=>(a(f),o(),l(()=>a(f)==="recover"?o()("Recover account"):o()("Sign up")))]),Ln(de,()=>a(p).exp,C=>Me(p,a(p).exp=C)),Ln(we,()=>a(p).token,C=>Me(p,a(p).token=C)),y(Q,le)},ye=Q=>{var le=ct(),xe=_e(le);{var Re=ie=>{var de=D_(),we=_e(de),Ce=c(we),j=v(we,2);{let C=je(()=>(o(),l(()=>o()("Ex: john@doe.com"))));$t(j,{type:"email",name:"email",get placeholder(){return a(C)},get value(){return a(p).email},set value(V){Me(p,a(p).email=V)},$$slots:{label:(V,D)=>{var H=P_(),Z=c(H);A(fe=>b(Z,fe),[()=>(o(),l(()=>o()("Email")))]),y(V,H)}},$$legacy:!0})}var ee=v(j,2);$t(ee,{type:"password",name:"password",autocomplete:"current-password",get value(){return a(p).password},set value(C){Me(p,a(p).password=C)},$$slots:{label:(C,V)=>{var D=I_(),H=c(D);A(Z=>b(H,Z),[()=>(o(),l(()=>o()("Password")))]),y(C,D)},help:(C,V)=>{var D=M_(),H=c(D);Ot(H,()=>(s(),Pe(it),l(()=>s()("Contact your [Convos admin](%1) if you have forgotten your password.",it("contact"))))),y(C,D)}},$$legacy:!0});var z=v(ee,2),M=c(z);Vt(M,{icon:"sign-in-alt",get op(){return $},children:(C,V)=>{var D=L_(),H=c(D);A(Z=>b(H,Z),[()=>(o(),l(()=>o()("Sign in")))]),y(C,D)},$$slots:{default:!0}});var F=v(M,2);vt(F,{href:"/register",children:(C,V)=>{var D=tr();A(H=>b(D,H),[()=>(o(),l(()=>o()("Sign up")))]),y(C,D)},$$slots:{default:!0}});var T=v(z,2);Rr(T,{get op(){return $},success:"Loading Convos..."}),A(C=>b(Ce,C),[()=>(o(),l(()=>o()("Sign in")))]),y(ie,de)},se=ie=>{var de=U_(),we=_e(de),Ce=c(we),j=v(we,2),ee=c(j),z=v(j,2),M=c(z),F=c(M);Te(F,{name:"paper-plane"});var T=v(F),C=v(M,2);vt(C,{href:"/login",children:(V,D)=>{var H=tr();A(Z=>b(H,Z),[()=>(o(),l(()=>o()("Sign in")))]),y(V,H)},$$slots:{default:!0}}),A((V,D,H,Z)=>{b(Ce,V),b(ee,D),ze(M,"href",H),b(T,` ${Z??""}`)},[()=>(o(),l(()=>o()("Sign up"))),()=>(o(),l(()=>o()("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account."))),()=>(Pe(it),l(()=>it("contact"))),()=>(o(),l(()=>o()("Contact admin")))]),y(ie,de)};me(xe,ie=>{a(f)==="login"?ie(Re):ie(se,!1)},!0)}y(Q,le)};me(J,Q=>{a(f),l(()=>["recover","invitation","register"].indexOf(a(f))!==-1)?Q($e):Q(ye,!1)},!0)}y(q,W)};me(Y,q=>{a(f)==="invalid_invitation"?q(ue):q(L,!1)})}var X=v(P,2),te=c(X),ve=c(te);Te(ve,{name:"globe"});var ne=v(ve,2);fr(ne,1,()=>(i(),l(()=>i().languageOptions)),dr,(q,W)=>{var J=F_(),$e=c(J);A(()=>{ze(J,"href",`#${a(W),l(()=>a(W)[0])??""}`),b($e,(a(W),l(()=>a(W)[1])))}),Qe("click",J,()=>i().load(a(W)[0])),y(q,J)}),Ln(k,()=>a(p).mode,q=>Me(p,a(p).mode=q)),Qe("submit",I,qt(w)),y(n,E),xt(),h()}var q_=S("<h1> </h1> <!>",1),j_=S("<h2> </h2>"),z_=S('<div class="message__status-line for-day-changed"><span><!> <i> </i></span></div>'),H_=S('<!> <div><!> <span class="message__from" tabindex="-1"> </span> <a class="svelte-127lfma"><div class="message__ts has-tooltip"><span> </span> <span class="tooltip"> </span></div> <!></a></div>',1),W_=S('<div class="message__status-line for-loading"><span><!> <i> </i></span></div>'),G_=S("<!> <!> <!>",1),K_=S("<!> <!>",1);function V_(n,e){wt(e,!1);const t=()=>Oe($,"$notifications",i),r=()=>Oe(zt,"$l",i),o=()=>Oe(a(f),"$messages",i),s=()=>Oe(x,"$user",i),[i,d]=Lt(),h=Ee(),f=Ee(),m="Notifications",x=rr("user"),$=x.notifications;nn(async()=>{await $.load(),await $.markAsRead()}),Be(()=>t(),()=>{Jr(K(f,t().messages),"$messages",i)}),Be(()=>a(f),()=>{K(h,["main",a(f).length&&"has-results"].filter(E=>E))}),Mt();var g={title:m};Et();var p=K_(),u=_e(p);Dr(u,{children:(E,P)=>{var I=q_(),k=_e(I),Y=c(k),ue=v(k,2);vt(ue,{href:"/settings/account",class:"btn-hallow",children:(L,X)=>{Te(L,{name:"user-cog"})},$$slots:{default:!0}}),A(L=>b(Y,L),[()=>(r(),l(()=>r()("Notifications")))]),y(E,I)},$$slots:{default:!0}});var _=v(u,2);{let E=je(()=>(a(h),l(()=>a(h).join(" "))));Ki(_,{get class(){return a(E)},$$events:{rendered:P=>P.detail.scrollTo(-1)},children:(P,I)=>{var k=G_(),Y=_e(k);{var ue=ve=>{var ne=j_(),q=c(ne);A(W=>b(q,W),[()=>(r(),l(()=>r()("No notifications.")))]),y(ve,ne)};me(Y,ve=>{o(),l(()=>o().length===0&&!$.is("loading"))&&ve(ue)})}var L=v(Y,2);fr(L,1,()=>(o(),l(()=>o().render())),dr,(ve,ne,q)=>{var W=H_(),J=_e(W);{var $e=ee=>{var z=z_(),M=c(z),F=c(M);Te(F,{name:"calendar-alt"});var T=v(F,2),C=c(T);A(V=>b(C,V),[()=>(a(ne),l(()=>a(ne).ts.getHumanDate()))]),y(ee,z)};me(J,ee=>{a(ne),l(()=>!q||a(ne).dayChanged)&&ee($e)})}var ye=v(J,2),Q=c(ye);{let ee=je(()=>(a(ne),s(),l(()=>a(ne).yourself?s().avatarId:void 0)));Te(Q,{get name(){return`pick:${a(ne),l(()=>a(ne).from)??""}`},get color(){return a(ne),l(()=>a(ne).color)},get avatarId(){return a(ee)}})}var le=v(Q,2),xe=c(le),Re=v(le,2),se=c(Re),ie=c(se),de=c(ie),we=v(ie,2),Ce=c(we),j=v(se,2);Ot(j,()=>(a(ne),l(()=>a(ne).html))),A((ee,z,M)=>{Ut(ye,1,(a(ne),l(()=>a(ne).className)),"svelte-127lfma"),En(le,`color:${a(ne),l(()=>a(ne).color)??""}`),b(xe,(a(ne),l(()=>a(ne).from))),ze(Re,"href",ee),b(de,z),b(Ce,M)},[()=>(Pe(co),a(ne),l(()=>co(a(ne)))),()=>(a(ne),l(()=>a(ne).ts.format("%H:%M"))),()=>(Pe(Sr),a(ne),l(()=>Sr(a(ne).ts.toLocaleString())))]),y(ve,W)});var X=v(L,2);{var te=ve=>{var ne=W_(),q=c(ne),W=c(q);Te(W,{name:"spinner",animation:"spin"});var J=v(W,2),$e=c(J);A(ye=>b($e,ye),[()=>(r(),l(()=>r()("Loading...")))]),y(ve,ne)};me(X,ve=>{t(),l(()=>t().is("loading"))&&ve(te)})}y(P,k)},$$slots:{default:!0}})}y(n,p),Nr(e,"title",m);var w=xt(g);return d(),w}var Y_=S('<!><!> <span class="tooltip is-left"> </span>',1),Z_=S("<h1> </h1> <!>",1),J_=S("<p><!> </p>"),X_=S("<p><!> <!></p>"),Q_=S('<div class="message__status-line for-day-changed"><span><!> <i> </i></span></div>'),em=S('<!> <div><!> <span class="message__from" tabindex="-1"> </span> <a class="svelte-zsbl6a"><div class="message__ts has-tooltip"><span> </span> <span class="tooltip"> </span></div> <!></a></div>',1),tm=S('<div class="message__status-line for-loading"><span><!> <i> </i></span></div>'),rm=S("<!> <!> <!>",1),nm=S("<!> <!> <!>",1);function am(n,e){wt(e,!1);const t=()=>Oe(u,"$conversation",h),r=()=>Oe(Ze,"$route",h),o=()=>Oe(a(m),"$messages",h),s=()=>Oe(zt,"$l",h),i=()=>Oe(Ur,"$lmd",h),d=()=>Oe(p,"$user",h),[h,f]=Lt(),m=Ee(),x=Ee(),$=Ee(),g="Search",p=rr("user"),u=p.search;nn(()=>{p.search.on("send",w),Ze.param("q")&&w({message:Ze.param("q")})});function _(X){if(a($))return o().clear();X.preventDefault(),document.querySelector(".is-primary-input").focus()}function w(X){const te=X.message;return u.update({userInput:te}),Ze.go("/search?q="+encodeURIComponent(te),{replace:!0}),te?u.load({match:te}):a(m).clear()}Be(()=>t(),()=>{Jr(K(m,t().messages),"$messages",h)}),Be(()=>(a(m),t()),()=>{K(x,["main",a(m).length&&"has-results",t().is("search")&&"is-above-chat-input"].filter(X=>X))}),Be(()=>(r(),o()),()=>{K($,r().param("q")||o().length)}),Mt();var E={title:g};Et();var P=nm(),I=_e(P);Dr(I,{children:(X,te)=>{var ve=Z_(),ne=_e(ve),q=c(ne),W=v(ne,2);{let J=je(()=>a($)?"has-tooltip is-active":"");vt(W,{href:"/search",get class(){return`btn-hallow can-toggle ${a(J)??""}`},$$events:{click:_},children:($e,ye)=>{var Q=Y_(),le=_e(Q);Te(le,{name:"search"});var xe=v(le);Te(xe,{name:"times"});var Re=v(xe,2),se=c(Re);A(ie=>b(se,ie),[()=>(s(),l(()=>s()("Clear")))]),y($e,Q)},$$slots:{default:!0}})}A(J=>b(q,J),[()=>(s(),l(()=>s()(u.name)))]),y(X,ve)},$$slots:{default:!0}});var k=v(I,2);{let X=je(()=>(a(x),l(()=>a(x).join(" "))));Ki(k,{get class(){return a(X)},$$events:{rendered:te=>te.detail.scrollTo(-1)},children:(te,ve)=>{var ne=rm(),q=_e(ne);{var W=Q=>{var le=ct(),xe=_e(le);{var Re=ie=>{var de=J_(),we=c(de);Te(we,{name:"info-circle"});var Ce=v(we);A(j=>b(Ce,` ${j??""}`),[()=>(s(),r(),l(()=>s()('No search results for "%1".',r().param("q"))))]),y(ie,de)},se=ie=>{var de=X_(),we=c(de);Te(we,{name:"info-circle"});var Ce=v(we,2);Ot(Ce,()=>(i(),l(()=>i()("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")))),y(ie,de)};me(xe,ie=>{r(),l(()=>r().param("q"))?ie(Re):ie(se,!1)})}y(Q,le)};me(q,Q=>{o(),l(()=>o().length===0&&!u.is("loading"))&&Q(W)})}var J=v(q,2);fr(J,1,()=>(o(),l(()=>o().render())),dr,(Q,le,xe)=>{var Re=em(),se=_e(Re);{var ie=D=>{var H=Q_(),Z=c(H),fe=c(Z);Te(fe,{name:"calendar-alt"});var R=v(fe,2),B=c(R);A(pe=>b(B,pe),[()=>(a(le),l(()=>a(le).ts.getHumanDate()))]),y(D,H)};me(se,D=>{a(le),l(()=>!xe||a(le).dayChanged)&&D(ie)})}var de=v(se,2),we=c(de);{let D=je(()=>(a(le),d(),l(()=>a(le).yourself?d().avatarId:void 0)));Te(we,{get name(){return`pick:${a(le),l(()=>a(le).from)??""}`},get color(){return a(le),l(()=>a(le).color)},get avatarId(){return a(D)}})}var Ce=v(we,2),j=c(Ce),ee=v(Ce,2),z=c(ee),M=c(z),F=c(M),T=v(M,2),C=c(T),V=v(z,2);Ot(V,()=>(a(le),l(()=>a(le).html))),A((D,H,Z)=>{Ut(de,1,(a(le),l(()=>a(le).className)),"svelte-zsbl6a"),En(Ce,`color:${a(le),l(()=>a(le).color)??""}`),b(j,(a(le),l(()=>a(le).from))),ze(ee,"href",D),b(F,H),b(C,Z)},[()=>(Pe(co),a(le),l(()=>co(a(le)))),()=>(a(le),l(()=>a(le).ts.format("%H:%M"))),()=>(Pe(Sr),a(le),l(()=>Sr(a(le).ts.toLocaleString())))]),y(Q,Re)});var $e=v(J,2);{var ye=Q=>{var le=tm(),xe=c(le),Re=c(xe);Te(Re,{name:"spinner",animation:"spin"});var se=v(Re,2),ie=c(se);A(de=>b(ie,de),[()=>(s(),l(()=>s()("Loading...")))]),y(Q,le)};me($e,Q=>{t(),l(()=>t().is("loading"))&&Q(ye)})}y(te,ne)},$$slots:{default:!0}})}var Y=v(k,2);{var ue=X=>{Yu(X,{get conversation(){return u}})};me(Y,X=>{l(()=>u.is("search"))&&X(ue)})}y(n,P),Nr(e,"title",g);var L=xt(E);return f(),L}var om=S("<h1> </h1>"),sm=S('<span slot="label"> </span>'),im=S('<span slot="label"> </span>'),lm=S("<span> </span>"),cm=S('<button type="button"><!></button>'),um=S('<span slot="label"> </span>'),dm=S('<span slot="label"> </span>'),fm=S("<span> </span>"),pm=S('<span slot="label"> </span>'),vm=S('<span slot="label"> </span>'),hm=S('<span slot="label"> </span>'),gm=S('<span slot="label"> </span>'),_m=S('<span slot="label"> </span>'),mm=S('<span slot="label"> <!></span>'),bm=S('<span slot="label"> </span>'),ym=S('<span slot="label"> </span>'),$m=S("<span> </span>"),wm=S('<span slot="label"> </span>'),xm=S('<span slot="label"> </span>'),Em=S('<form><h2> </h2> <p> </p> <!> <p class="help"><!></p> <!> <p class="help"><!></p></form>'),Sm=S('<!> <main class="main"><form method="post"><!> <!> <fieldset class="avatar-picker svelte-pbyc7a"><legend class="svelte-pbyc7a"> </legend> <p class="help"> </p> <div class="avatar-preview svelte-pbyc7a"><!> <span> </span> <!></div> <div class="avatar-grid svelte-pbyc7a"></div></fieldset> <!> <p class="help"><!></p> <div class="inputs-side-by-side"><!> <div class="flex-basis-30"><!></div></div> <!> <!> <!> <!> <!> <!> <!> <!> <p> </p> <div class="form-actions"><!></div> <!></form> <!></main>',1);function km(n,e){wt(e,!1);const t=()=>Oe(x,"$themeManager",i),r=()=>Oe(zt,"$l",i),o=()=>Oe(Ur,"$lmd",i),s=()=>Oe(kt,"$i18n",i),[i,d]=Lt(),h=Ee(),f="Account",m="registerProtocolHandler"in navigator,x=rr("themeManager"),$=rr("user"),g=Ct.op("updateUser"),p=Wf();let u=Ee({});nn(()=>{K(u,{activeTheme:x.activeTheme,avatarId:$.avatarId,colorScheme:x.colorScheme,compactDisplay:x.compactDisplay,email:$.email,expandUrlToMedia:$.expandUrlToMedia,highlightKeywords:$.highlightKeywords.join(", "),ignoreStatuses:$.ignoreStatuses,lang:kt.lang,password:"",password_again:"",volume:nr.volume,wantNotifications:nr.wantNotifications})}),Ii(nr.on("update",(oe,he)=>{!he.wantNotifications&&!he.desktopAccess||oe.wantNotifications&&oe.show(r()("You have enabled notifications."))}));function _(oe){navigator.registerProtocolHandler(oe,Ze.urlFor("/register?uri=%s"),r()("Convos %1 handler",oe))}function w(oe){Me(u,a(u).avatarId=oe)}function E(){Me(u,a(u).avatarId=null)}function P(){const oe=[a(u).password,a(u).password_again];if(oe.join("").length&&oe[0]!==oe[1])return g.error("Passwords does not match.");a(u).wantNotifications||Me(u,a(u).wantNotifications=!1),a(u).wantNotifications&&nr.requestDesktopAccess(),nr.update(a(u)),a(h)&&Me(u,a(u).colorScheme="auto"),x.update(a(u));const he=Bi(a(u).highlightKeywords),G={email:$.email,highlight_keywords:he,avatar_id:a(u).avatarId};oe[0]&&(G.password=oe[0]),$.update(a(u)).update({highlightKeywords:he}),g.perform(G)}Be(()=>(t(),a(u)),()=>{K(h,!t().hasColorScheme(a(u).activeTheme))}),Be(()=>a(u),()=>{kt.load(a(u).lang)}),Be(()=>a(u),()=>{a(u).handle_protocol_irc&&_("irc")}),Be(()=>a(u),()=>{a(u).handle_protocol_ircs&&_("ircs")}),Mt();var I={title:f};Et();var k=Sm(),Y=_e(k);Dr(Y,{children:(oe,he)=>{var G=om(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Account")))]),y(oe,G)},$$slots:{default:!0}});var ue=v(Y,2),L=c(ue),X=c(L);$t(X,{type:"email",name:"email",readonly:!0,get value(){return a(u).email},set value(oe){Me(u,a(u).email=oe)},$$slots:{label:(oe,he)=>{var G=sm(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Email")))]),y(oe,G)}},$$legacy:!0});var te=v(X,2);{let oe=je(()=>(r(),l(()=>r()("whatever, keywords"))));$t(te,{name:"highlightKeywords",get placeholder(){return a(oe)},get value(){return a(u).highlightKeywords},set value(he){Me(u,a(u).highlightKeywords=he)},$$slots:{label:(he,G)=>{var Se=im(),be=c(Se);A(ge=>b(be,ge),[()=>(r(),l(()=>r()("Notification keywords")))]),y(he,Se)}},$$legacy:!0})}var ve=v(te,2),ne=c(ve),q=c(ne),W=v(ne,2),J=c(W),$e=v(W,2),ye=c($e);{let oe=je(()=>(a(u),l(()=>a(u).email||$.email)));Te(ye,{get name(){return`pick:${a(oe)??""}`},get avatarId(){return a(u),l(()=>a(u).avatarId)}})}var Q=v(ye,2),le=c(Q),xe=v(Q,2);{let oe=je(()=>(a(u),l(()=>a(u).avatarId===null)));Vt(xe,{type:"button",class:"is-secondary",get disabled(){return a(oe)},$$events:{click:E},children:(he,G)=>{var Se=lm(),be=c(Se);A(ge=>b(be,ge),[()=>(r(),l(()=>r()("Use automatic icon")))]),y(he,Se)},$$slots:{default:!0}})}var Re=v($e,2);fr(Re,5,()=>p,dr,(oe,he)=>{var G=cm();let Se;var be=c(G);{let ge=je(()=>(a(u),l(()=>a(u).email||$.email)));Te(be,{get name(){return`pick:${a(ge)??""}`},get avatarId(){return a(he),l(()=>a(he).id)}})}A(ge=>{ze(G,"aria-pressed",(a(u),a(he),l(()=>a(u).avatarId===a(he).id))),ze(G,"aria-label",ge),Se=Ut(G,1,"svelte-pbyc7a",null,Se,{selected:a(u).avatarId===a(he).id})},[()=>(r(),a(he),l(()=>r()("Select avatar %1",a(he).id+1)))]),Qe("click",G,()=>w(a(he).id)),y(oe,G)});var se=v(ve,2);It(se,{name:"wantNotifications",get value(){return a(u).wantNotifications},set value(oe){Me(u,a(u).wantNotifications=oe)},$$slots:{label:(oe,he)=>{var G=um(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Enable notifications")))]),y(oe,G)}},$$legacy:!0});var ie=v(se,2),de=c(ie);Ot(de,()=>(o(),l(()=>o()('Leave this unchecked, and hit "Save" to disable notifications.'))));var we=v(ie,2),Ce=c(we);Xn(Ce,{name:"volume",get options(){return Pe(nr),l(()=>nr.volumeOptions)},get value(){return a(u).volume},set value(oe){Me(u,a(u).volume=oe)},$$slots:{label:(oe,he)=>{var G=dm(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Notification sound volume")))]),y(oe,G)}},$$legacy:!0});var j=v(Ce,2),ee=c(j);{let oe=je(()=>(a(u),l(()=>!parseInt(a(u).volume,10))));Vt(ee,{icon:"play",get disabled(){return a(oe)},type:"button",$$events:{click:()=>nr.play({volume:a(u).volume})},children:(he,G)=>{var Se=fm(),be=c(Se);A(ge=>b(be,ge),[()=>(r(),l(()=>r()("Test")))]),y(he,Se)},$$slots:{default:!0}})}var z=v(we,2);It(z,{name:"ignoreStatuses",get value(){return a(u).ignoreStatuses},set value(oe){Me(u,a(u).ignoreStatuses=oe)},$$slots:{label:(oe,he)=>{var G=pm(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Ignore join/part messages")))]),y(oe,G)}},$$legacy:!0});var M=v(z,2);It(M,{name:"expandUrlToMedia",get value(){return a(u).expandUrlToMedia},set value(oe){Me(u,a(u).expandUrlToMedia=oe)},$$slots:{label:(oe,he)=>{var G=vm(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Expand URL to media")))]),y(oe,G)}},$$legacy:!0});var F=v(M,2);It(F,{name:"compactDisplay",get value(){return a(u).compactDisplay},set value(oe){Me(u,a(u).compactDisplay=oe)},$$slots:{label:(oe,he)=>{var G=hm(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Enable compact message display")))]),y(oe,G)}},$$legacy:!0});var T=v(F,2);Xn(T,{name:"activeTheme",get options(){return l(()=>x.themeOptions)},get value(){return a(u).activeTheme},set value(oe){Me(u,a(u).activeTheme=oe)},$$slots:{label:(oe,he)=>{var G=gm(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Theme")))]),y(oe,G)}},$$legacy:!0});var C=v(T,2);Xn(C,{name:"colorScheme",get readonly(){return a(h)},get options(){return l(()=>x.colorSchemeOptions)},get value(){return a(u).colorScheme},set value(oe){Me(u,a(u).colorScheme=oe)},$$slots:{label:(oe,he)=>{var G=_m(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Color scheme")))]),y(oe,G)}},$$legacy:!0});var V=v(C,2);Xn(V,{name:"lang",get options(){return s(),l(()=>s().languageOptions)},get value(){return a(u).lang},set value(oe){Me(u,a(u).lang=oe)},$$slots:{label:(oe,he)=>{var G=mm(),Se=c(G),be=v(Se);Te(be,{name:"globe"}),A(ge=>b(Se,`${ge??""} `),[()=>(r(),l(()=>r()("Language")))]),y(oe,G)}},$$legacy:!0});var D=v(V,2);$t(D,{type:"password",name:"password",autocomplete:"new-password",get value(){return a(u).password},set value(oe){Me(u,a(u).password=oe)},$$slots:{label:(oe,he)=>{var G=bm(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Password")))]),y(oe,G)}},$$legacy:!0});var H=v(D,2);$t(H,{type:"password",name:"password_again",autocomplete:"new-password",get value(){return a(u).password_again},set value(oe){Me(u,a(u).password_again=oe)},$$slots:{label:(oe,he)=>{var G=ym(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Repeat password")))]),y(oe,G)}},$$legacy:!0});var Z=v(H,2),fe=c(Z),R=v(Z,2),B=c(R);Vt(B,{icon:"save",get op(){return g},children:(oe,he)=>{var G=$m(),Se=c(G);A(be=>b(Se,be),[()=>(r(),l(()=>r()("Save settings")))]),y(oe,G)},$$slots:{default:!0}});var pe=v(R,2);Rr(pe,{get op(){return g}});var ce=v(L,2);{var Ae=oe=>{var he=Em(),G=c(he),Se=c(G),be=v(G,2),ge=c(be),ae=v(be,2);It(ae,{name:"handle_protocol_irc",get value(){return a(u).handle_protocol_irc},set value(Ve){Me(u,a(u).handle_protocol_irc=Ve)},$$slots:{label:(Ve,He)=>{var at=wm(),ut=c(at);A(lt=>b(ut,lt),[()=>(r(),l(()=>r()("irc://")))]),y(Ve,at)}},$$legacy:!0});var Fe=v(ae,2),N=c(Fe);Ot(N,()=>(o(),l(()=>o()("Test it by clicking on %1.","irc://localhost:6667"))));var U=v(Fe,2);It(U,{name:"handle_protocol_ircs",get value(){return a(u).handle_protocol_ircs},set value(Ve){Me(u,a(u).handle_protocol_ircs=Ve)},$$slots:{label:(Ve,He)=>{var at=xm(),ut=c(at);A(lt=>b(ut,lt),[()=>(r(),l(()=>r()("ircs://")))]),y(Ve,at)}},$$legacy:!0});var Ue=v(U,2),Ke=c(Ue);Ot(Ke,()=>(o(),l(()=>o()("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")))),A((Ve,He,at)=>{b(Se,Ve),b(ge,`${He??""}
        ${at??""}`)},[()=>(r(),l(()=>r()("Protocol handlers"))),()=>(r(),l(()=>r()("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",r()("Convos")))),()=>(r(),l(()=>r()("If you do not see any popup, then it probably means %1 already handles the protocol.",r()("Convos"))))]),Qe("submit",he,qt(function(Ve){ga.call(this,e,Ve)})),y(oe,he)};me(ce,oe=>{m&&oe(Ae)})}A((oe,he,G,Se)=>{b(q,oe),b(J,he),b(le,G),b(fe,Se)},[()=>(r(),l(()=>r()("Avatar"))),()=>(r(),l(()=>r()("Pick the icon you want to use. Leave it automatic to hash your nick like before."))),()=>(a(u),r(),l(()=>a(u).avatarId===null?r()("Automatic"):r()("Selected"))),()=>(r(),l(()=>r()("Leave the password fields empty to keep the current password.")))]),Qe("submit",L,qt(P)),y(n,k),Nr(e,"title",f);var Ie=xt(I);return d(),Ie}var Am=S("<h1> </h1>"),Om=S('<span slot="label"> </span>'),Cm=S('<p class="help" slot="help"> </p>'),Tm=S('<span slot="label"> </span>'),Nm=S('<p class="help" slot="help"> </p>'),Rm=S('<span slot="label"> </span>'),Pm=S('<p class="help" slot="help"> </p>'),Im=S('<span slot="label"> </span>'),Mm=S('<p class="help" slot="help"><!></p>'),Lm=S('<span slot="label"> </span>'),Dm=S("<span> </span>"),Um=S('<div class="error"> </div>'),Fm=S("<p> </p>"),Bm=S("<p> </p>"),qm=S("<span> </span>"),jm=S('<div id="disk-usage"><h2> </h2> <div class="progress"><div class="progress__bar"> </div></div> <p class="help"> </p> <div class="progress"><div class="progress__bar"> </div></div> <p class="help"> </p></div>'),zm=S('<!> <main class="main"><form id="convos-settings" method="post"><h2> </h2> <p><!></p> <!> <!> <!> <!> <!> <p class="help"> </p> <div class="form-actions"><!></div> <!></form> <h2> </h2> <form id="convos-updates" method="post"><!> <!></form> <!></main>',1);function Hm(n,e){wt(e,!1);const t=()=>Oe(m,"$checkForUpdatesOp",s),r=()=>Oe(zt,"$l",s),o=()=>Oe(Ur,"$lmd",s),[s,i]=Lt(),d=Ee(),h=Ee(),f="Global settings",m=Ct.op("checkForUpdates"),x=Ct.op("getSettings"),$=Ct.op("updateSettings");let g=Ee(null),p=Ee({});nn(async()=>{await x.perform();const M=x.res.body;K(g,u(M.disk_usage)),delete M.disk_usage,M.contact=M.contact.replace(/mailto:/,""),K(p,{...a(p),...M})});function u(M){if(!M)return null;const F=M.block_size||1024;return{blocks_pct:Math.ceil(M.blocks_used/M.blocks_total*100),blocks_total:Jn(F*M.blocks_total,"B"),blocks_used:Jn(F*M.blocks_used,"B"),inodes_pct:Math.ceil(M.inodes_used/M.inodes_total*100),inodes_total:Jn(M.inodes_total),inodes_used:Jn(M.inodes_used)}}function _(){a(p).contact&&a(p).contact.indexOf("@")>0&&Me(p,a(p).contact="mailto:"+a(p).contact),it("contact",a(p).contact),it("open_to_public",a(p).open_to_public),it("organization_name",a(p).organization_name),it("organization_url",a(p).organization_url),lo.fromString(a(p).video_service),$.perform(a(p)),Me(p,a(p).contact=a(p).contact.replace(/mailto:/,""))}Be(()=>t(),()=>{K(d,t().res.body.available)}),Be(()=>(a(d),it),()=>{K(h,a(d)==it("version"))}),Mt();var w={title:f};Et();var E=zm(),P=_e(E);Dr(P,{children:(M,F)=>{var T=Am(),C=c(T);A(V=>b(C,V),[()=>(r(),l(()=>r()("Global settings")))]),y(M,T)},$$slots:{default:!0}});var I=v(P,2),k=c(I),Y=c(k),ue=c(Y),L=v(Y,2),X=c(L);Ot(X,()=>(o(),Pe(it),l(()=>o()("These settings control what users experience when they visit [%1](%1).",it("base_url")))));var te=v(L,2);$t(te,{name:"organization_name",get value(){return a(p).organization_name},set value(M){Me(p,a(p).organization_name=M)},$$slots:{label:(M,F)=>{var T=Om(),C=c(T);A(V=>b(C,V),[()=>(r(),l(()=>r()("Organization name")))]),y(M,T)},help:(M,F)=>{var T=Cm(),C=c(T);A(V=>b(C,V),[()=>(r(),l(()=>r()("Can be changed if you want to add a touch of your organization.")))]),y(M,T)}},$$legacy:!0});var ve=v(te,2);{let M=je(()=>(r(),l(()=>r()("https://convos.chat"))));$t(ve,{name:"organization_url",get placeholder(){return a(M)},get value(){return a(p).organization_url},set value(F){Me(p,a(p).organization_url=F)},$$slots:{label:(F,T)=>{var C=Tm(),V=c(C);A(D=>b(V,D),[()=>(r(),l(()=>r()("Organization URL")))]),y(F,C)},help:(F,T)=>{var C=Nm(),V=c(C);A(D=>b(V,D),[()=>(r(),l(()=>r()('Used together with "Organization name" to add a link to your organization on the login screen.')))]),y(F,C)}},$$legacy:!0})}var ne=v(ve,2);{let M=je(()=>(r(),l(()=>r()("Ex: jhthorsen@cpan.org"))));$t(ne,{name:"contact",get placeholder(){return a(M)},get value(){return a(p).contact},set value(F){Me(p,a(p).contact=F)},$$slots:{label:(F,T)=>{var C=Rm(),V=c(C);A(D=>b(V,D),[()=>(r(),l(()=>r()("Admin email")))]),y(F,C)},help:(F,T)=>{var C=Pm(),V=c(C);A(D=>b(V,D),[()=>(r(),l(()=>r()("This email can be used by users to get in touch with the Convos admin.")))]),y(F,C)}},$$legacy:!0})}var q=v(ne,2);{let M=je(()=>(r(),l(()=>r()("Ex: https://meet.jit.si/"))));$t(q,{name:"video_service",get placeholder(){return a(M)},get value(){return a(p).video_service},set value(F){Me(p,a(p).video_service=F)},$$slots:{label:(F,T)=>{var C=Im(),V=c(C);A(D=>b(V,D),[()=>(r(),l(()=>r()("Video service")))]),y(F,C)},help:(F,T)=>{var C=Mm(),V=c(C);Ot(V,()=>(o(),l(()=>o()("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")))),y(F,C)}},$$legacy:!0})}var W=v(q,2);It(W,{name:"open_to_public",get value(){return a(p).open_to_public},set value(M){Me(p,a(p).open_to_public=M)},$$slots:{label:(M,F)=>{var T=Lm(),C=c(T);A(V=>b(C,V),[()=>(r(),l(()=>r()("Registration is open to public")))]),y(M,T)}},$$legacy:!0});var J=v(W,2),$e=c(J),ye=v(J,2),Q=c(ye);Vt(Q,{icon:"save",get op(){return $},children:(M,F)=>{var T=Dm(),C=c(T);A(V=>b(C,V),[()=>(r(),l(()=>r()("Save settings")))]),y(M,T)},$$slots:{default:!0}});var le=v(ye,2);Rr(le,{get op(){return $}});var xe=v(k,2),Re=c(xe),se=v(xe,2),ie=c(se);{var de=M=>{var F=Um(),T=c(F);A(C=>b(T,C),[()=>(r(),t(),l(()=>r()(t().error())))]),y(M,F)},we=M=>{var F=ct(),T=_e(F);{var C=D=>{var H=Fm(),Z=c(H);A(fe=>b(Z,fe),[()=>(o(),a(h),a(d),l(()=>o()(a(h)?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",a(d))))]),y(D,H)},V=D=>{var H=Bm(),Z=c(H);A(fe=>b(Z,fe),[()=>(o(),Pe(it),l(()=>o()("You currently have Convos v%1 installed.",it("version"))))]),y(D,H)};me(T,D=>{t(),l(()=>t().is("success"))?D(C):D(V,!1)},!0)}y(M,F)};me(ie,M=>{t(),l(()=>t().is("error"))?M(de):M(we,!1)})}var Ce=v(ie,2);Vt(Ce,{icon:"sync-alt",get op(){return m},children:(M,F)=>{var T=qm(),C=c(T);A(V=>b(C,V),[()=>(r(),l(()=>r()("Check for updates")))]),y(M,T)},$$slots:{default:!0}});var j=v(se,2);{var ee=M=>{var F=jm(),T=c(F),C=c(T),V=v(T,2),D=c(V),H=c(D),Z=v(V,2),fe=c(Z),R=v(Z,2),B=c(R),pe=c(B),ce=v(R,2),Ae=c(ce);A((Ie,oe,he)=>{b(C,Ie),En(D,`width:${a(g),l(()=>a(g).blocks_pct)??""}%;`),b(H,`${a(g),l(()=>a(g).blocks_pct)??""}%`),b(fe,`${oe??""}: ${a(g),l(()=>a(g).blocks_used)??""} / ${a(g),l(()=>a(g).blocks_total)??""}`),En(B,`width:${a(g),l(()=>a(g).inodes_pct)??""}%;`),b(pe,`${a(g),l(()=>a(g).inodes_pct)??""}%`),b(Ae,`${he??""}: ${a(g),l(()=>a(g).inodes_used)??""} / ${a(g),l(()=>a(g).inodes_total)??""}`)},[()=>(r(),l(()=>r()("Disk usage"))),()=>(r(),l(()=>r()("Disk usage"))),()=>(r(),l(()=>r()("Inode usage")))]),y(M,F)};me(j,M=>{a(g)&&M(ee)})}A((M,F,T)=>{b(ue,M),b($e,F),b(Re,T)},[()=>(r(),l(()=>r()("Convos settings"))),()=>(r(),l(()=>r()("Tick this box if you want users to be able to register without an invite URL."))),()=>(r(),l(()=>r()("Check for updates")))]),Qe("submit",k,qt(_)),Qe("submit",se,qt(()=>m.perform())),y(n,E),Nr(e,"title",f);var z=xt(w);return i(),z}var Wm=S('<!><!> <span class="tooltip is-left"> </span>',1),Gm=S("<h1> </h1> <!>",1),Km=S('<span slot="label"> </span>'),Vm=S('<span slot="label"> </span>'),Ym=S('<p class="help" slot="help"> </p>'),Zm=S("<span> </span>"),Jm=S('<span slot="label"> </span>'),Xm=S("<span> </span>"),Qm=S('<form id="edit" method="post"><input type="hidden" name="uid"/> <!> <!> <div class="form-actions"><!></div> <!></form> <h2>Delete account</h2> <form id="delete" method="post"><p> <!></p> <!> <div class="form-actions"><!></div> <!></form>',1),eb=S('<span slot="label"> </span>'),tb=S('<p class="help" slot="help"> </p>'),rb=S("<h3> </h3> <p><!> <!></p> <a> </a> <p><small> </small></p>",1),nb=S("<span> </span>"),ab=S("<tr><td><a> </a></td><td> </td><td> </td></tr>"),ob=S('<form id="invite" method="post"><h2> </h2> <!> <!> <div class="form-actions"><!></div> <!></form> <h2> <small> </small></h2> <table><thead><tr><th> </th><th> </th><th> </th></tr></thead><tbody><!><!></tbody></table>',1),sb=S('<!> <main class="main"><!></main>',1);function ib(n,e){wt(e,!1);const t=()=>Oe(Ze,"$route",d),r=()=>Oe(g,"$inviteLinkOp",d),o=()=>Oe(zt,"$l",d),s=()=>Oe(Ur,"$lmd",d),i=()=>Oe($,"$getUsersOp",d),[d,h]=Lt(),f=Ee();let m=Ye(e,"title",12,"Users");const x=Ct.op("deleteUser"),$=Ct.op("getUsers"),g=Ct.op("inviteUser"),p=Ct.op("updateUser");let u=Ee(""),_=Ee({email:""}),w=Ee([]);nn(Y);function E(W){const J=Fu(W.target);J&&nr.showInApp(J,{title:o()("Invite link copied")})}async function P(){x.reset(),p.reset(),a(u)===a(_).email&&(await x.perform(a(_)),x.is("success")&&(Y(),Ze.go("/settings/users",{replace:!0})))}function I(W,J){const $e=W.hash,ye=$e&&J.filter(Q=>Q.uid===$e)[0];K(_,ye?{...a(_),confirm_email:"",...ye}:{...a(_),confirm_email:"",uid:""})}function k(){g.perform({email:a(_).email})}async function Y(){await $.perform(),K(w,$.res.body.users||[]),$.reset()}function ue(){x.reset(),p.perform({email:a(_).email,roles:Bi(a(_).roles)})}Be(()=>(t(),a(w)),()=>{I(t(),a(w))}),Be(()=>r(),()=>{K(f,r().res.body||{})}),Be(()=>a(_),()=>{m(a(_).uid?a(_).email:"Users")}),Mt(),Et();var L=sb(),X=_e(L);Dr(X,{children:(W,J)=>{var $e=Gm(),ye=_e($e),Q=c(ye),le=v(ye,2);{let xe=je(()=>(a(_),l(()=>a(_).uid?"is-active":"")));vt(le,{href:"/settings/users",get class(){return`btn-hallow can-toggle has-tooltip ${a(xe)??""}`},children:(Re,se)=>{var ie=Wm(),de=_e(ie);Te(de,{name:"list"});var we=v(de);Te(we,{name:"times"});var Ce=v(we,2),j=c(Ce);A(ee=>b(j,ee),[()=>(Pe(Sr),o(),l(()=>Sr(o()("See all users"))))]),y(Re,ie)},$$slots:{default:!0}})}A(xe=>b(Q,xe),[()=>(o(),a(_),l(()=>o()(a(_).uid?"Account":"Users")))]),y(W,$e)},$$slots:{default:!0}});var te=v(X,2),ve=c(te);{var ne=W=>{var J=Qm(),$e=_e(J),ye=c($e),Q=v(ye,2);$t(Q,{name:"email",readonly:!0,get value(){return a(_).email},set value(F){Me(_,a(_).email=F)},$$slots:{label:(F,T)=>{var C=Km(),V=c(C);A(D=>b(V,D),[()=>(o(),l(()=>o()("Email")))]),y(F,C)}},$$legacy:!0});var le=v(Q,2);{let F=je(()=>(o(),l(()=>o()("admin, bot, ..."))));$t(le,{name:"roles",get placeholder(){return a(F)},get value(){return a(_).roles},set value(T){Me(_,a(_).roles=T)},$$slots:{label:(T,C)=>{var V=Vm(),D=c(V);A(H=>b(D,H),[()=>(o(),l(()=>o()("Roles")))]),y(T,V)},help:(T,C)=>{var V=Ym(),D=c(V);A(H=>b(D,H),[()=>(o(),l(()=>o()("Roles must be separated by comma.")))]),y(T,V)}},$$legacy:!0})}var xe=v(le,2),Re=c(xe);Vt(Re,{icon:"save",get op(){return p},children:(F,T)=>{var C=Zm(),V=c(C);A(D=>b(V,D),[()=>(o(),l(()=>o()("Save user")))]),y(F,C)},$$slots:{default:!0}});var se=v(xe,2);Rr(se,{get op(){return p}});var ie=v($e,4),de=c(ie),we=c(de),Ce=v(we);Ot(Ce,()=>(s(),a(_),o(),l(()=>s()('Please confirm by entering "**%1**" before hitting **%2**.',a(_).email,o()("Delete user")))));var j=v(de,2);$t(j,{name:"confirm_email",get value(){return a(u)},set value(F){K(u,F)},$$slots:{label:(F,T)=>{var C=Jm(),V=c(C);A(D=>b(V,D),[()=>(o(),l(()=>o()("Confirm email")))]),y(F,C)}},$$legacy:!0});var ee=v(j,2),z=c(ee);{let F=je(()=>(a(u),a(_),l(()=>a(u)!==a(_).email)));Vt(z,{icon:"trash",get op(){return x},get disabled(){return a(F)},children:(T,C)=>{var V=Xm(),D=c(V);A(H=>b(D,H),[()=>(o(),l(()=>o()("Delete user")))]),y(T,V)},$$slots:{default:!0}})}var M=v(ee,2);Rr(M,{get op(){return x},success:"Deleted."}),A(F=>b(we,`${F??""} `),[()=>(o(),l(()=>o()("This will permanently remove user settings, chat logs, uploaded files and other user related data.")))]),Ln(ye,()=>a(_).uid,F=>Me(_,a(_).uid=F)),Qe("submit",$e,qt(ue)),Qe("submit",ie,qt(P)),y(W,J)},q=W=>{var J=ob(),$e=_e(J),ye=c($e),Q=c(ye),le=v(ye,2);{let pe=je(()=>(o(),l(()=>o()("user@example.com"))));$t(le,{type:"email",name:"email",get placeholder(){return a(pe)},get value(){return a(_).email},set value(ce){Me(_,a(_).email=ce)},$$slots:{label:(ce,Ae)=>{var Ie=eb(),oe=c(Ie);A(he=>b(oe,he),[()=>(o(),l(()=>o()("User email")))]),y(ce,Ie)},help:(ce,Ae)=>{var Ie=tb(),oe=c(Ie);A(he=>b(oe,he),[()=>(o(),l(()=>o()("Using this form, you can generate a forgotten password or invite link for a user.")))]),y(ce,Ie)}},$$legacy:!0})}var xe=v(le,2);{var Re=pe=>{var ce=rb(),Ae=_e(ce),Ie=c(Ae),oe=v(Ae,2),he=c(oe);Ot(he,()=>(s(),a(f),l(()=>s()(a(f).existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user."))));var G=v(he,2);Ot(G,()=>(s(),a(f),l(()=>s()("The link is valid until **%1**.",new Date(a(f).expires).toLocaleString()))));var Se=v(oe,2),be=c(Se),ge=v(Se,2),ae=c(ge),Fe=c(ae);A((N,U)=>{b(Ie,N),ze(Se,"href",(a(f),l(()=>a(f).url))),b(be,(a(f),l(()=>a(f).url))),b(Fe,U)},[()=>(o(),l(()=>o()("A link was generated"))),()=>(o(),l(()=>o()("Tip: Clicking on the link will copy it to your clipboard.")))]),Qe("click",Se,qt(E)),y(pe,ce)};me(xe,pe=>{a(f),l(()=>a(f).url)&&pe(Re)})}var se=v(xe,2),ie=c(se);{let pe=je(()=>(a(_),l(()=>!a(_).email)));Vt(ie,{icon:"save",get op(){return g},get disabled(){return a(pe)},children:(ce,Ae)=>{var Ie=nb(),oe=c(Ie);A(he=>b(oe,he),[()=>(o(),l(()=>o()("Generate link")))]),y(ce,Ie)},$$slots:{default:!0}})}var de=v(se,2);Rr(de,{get op(){return g},success:"Link generated."});var we=v($e,2),Ce=c(we),j=v(Ce),ee=c(j),z=v(we,2),M=c(z),F=c(M),T=c(F),C=c(T),V=v(T),D=c(V),H=v(V),Z=c(H),fe=v(M),R=c(fe);uo(R,{colspan:"3",get op(){return i()}});var B=v(R);fr(B,1,()=>a(w),dr,(pe,ce)=>{var Ae=ab(),Ie=c(Ae),oe=c(Ie),he=c(oe),G=v(Ie),Se=c(G),be=v(G),ge=c(be);A((ae,Fe)=>{ze(oe,"href",`#${a(ce),l(()=>a(ce).uid)??""}`),b(he,(a(ce),l(()=>a(ce).email))),b(Se,ae),b(ge,Fe)},[()=>(a(ce),l(()=>a(ce).roles.join(", "))),()=>(Pe(ir),a(ce),l(()=>new ir(a(ce).registered).getHumanDate({year:!0})))]),y(pe,Ae)}),A((pe,ce,Ae,Ie,oe)=>{b(Q,pe),b(Ce,`${ce??""} `),b(ee,`(${a(w),l(()=>a(w).length)??""})`),b(C,Ae),b(D,Ie),b(Z,oe)},[()=>(o(),l(()=>o()("Invite or recover password"))),()=>(o(),l(()=>o()("Users"))),()=>(o(),l(()=>o()("Email"))),()=>(o(),l(()=>o()("Roles"))),()=>(o(),l(()=>o()("Registered")))]),Qe("submit",$e,qt(k)),y(W,J)};me(ve,W=>{a(_),l(()=>a(_).uid)?W(ne):W(q,!1)})}y(n,L),xt(),h()}var lb=S("<h1> </h1>"),cb=S('<tr><td> </td><td><a href="#copy"><!></a></td><td><a target="convos_files_file"> </a></td><td class="text-right"> </td><td class="text-right"><!></td></tr>'),ub=S('<tr><td colspan="5"> </td></tr>'),db=S("<div>&nbsp;</div>"),fb=S('<span class="disabled"> </span>'),pb=S('<span class="disabled"> </span>'),vb=S("<span> </span>"),hb=S("<p><!></p>"),gb=S('<!> <main class="main"><form method="post"><table><thead><tr><th> </th><th>&nbsp;</th><th> </th><th class="text-right"> </th><th class="text-right"><!></th></tr></thead><tbody><!><!><!><!></tbody></table> <div class="pagination"><!> <!></div> <div class="form-actions"><!></div> <!></form></main>',1);function _b(n,e){wt(e,!1);const t=()=>Oe(Ze,"$route",d),r=()=>Oe(zt,"$l",d),o=()=>Oe(m,"$getFilesOp",d),s=()=>Oe(f,"$deleteFilesOp",d),i=()=>Oe(Ur,"$lmd",d),[d,h]=Lt(),f=Ct.op("deleteFiles"),m=Ct.op("getFiles"),x=rr("user");let $=Ee(!1),g=Ee(!0),p=Ee([]),u=Ee(""),_=Ee("");function w(R){const B=R.target.closest("tr").querySelector('[target="convos_files_file"]'),pe=Fu({value:B.href});pe&&nr.showInApp(pe,{closeAfter:3e3,title:r()("File URL copied")})}async function E(){const R=a(p).filter(B=>B.selected);await f.perform({fid:R.map(B=>B.id).join(","),uid:x.id}),K(p,a(p).filter(B=>!B.selected)),K($,!1),I(),a(p).length===0&&P(Ze)}async function P(R){const B=R.query.after||"";await m.perform({after:B,limit:20}),K(p,m.res.body.files||[]),K($,!1),I(),(a(p).length||!B)&&(K(u,o().res.body.next&&a(p).slice(-1)[0].id||""),K(_,o().res.body.prev||""))}function I(){K(g,!a(p).find(R=>R.selected))}function k(R){K(p,a(p).map(B=>(B.selected=R,B)))}Be(()=>t(),()=>{P(t())}),Be(()=>a($),()=>{k(a($))}),Mt(),Et();var Y=gb(),ue=_e(Y);Dr(ue,{children:(R,B)=>{var pe=lb(),ce=c(pe);A(Ae=>b(ce,Ae),[()=>(r(),l(()=>r()("Files")))]),y(R,pe)},$$slots:{default:!0}});var L=v(ue,2),X=c(L),te=c(X),ve=c(te),ne=c(ve),q=c(ne),W=c(q),J=v(q,2),$e=c(J),ye=v(J),Q=c(ye),le=v(ye),xe=c(le);It(xe,{get value(){return a($)},set value(R){K($,R)},$$legacy:!0});var Re=v(ve),se=c(Re);fr(se,1,()=>a(p),dr,(R,B,pe)=>{var ce=cb(),Ae=c(ce),Ie=c(Ae),oe=v(Ae),he=c(oe),G=c(he);Te(G,{name:"copy"});var Se=v(oe),be=c(Se),ge=c(be),ae=v(Se),Fe=c(ae),N=v(ae),U=c(N);It(U,{get name(){return a(B),l(()=>a(B).id)},get value(){return a(B).selected},set value(Ue){a(B).selected=Ue,ff(()=>a(p))},$$legacy:!0}),A((Ue,Ke,Ve)=>{b(Ie,Ue),ze(be,"href",Ke),b(ge,(a(B),l(()=>a(B).name))),b(Fe,Ve)},[()=>(Pe(ir),a(B),l(()=>new ir(a(B).saved).getHumanDate({year:!0}))),()=>(Pe(Ze),a(B),l(()=>Ze.urlFor("/file/"+x.id+"/"+a(B).id))),()=>(Pe(Jn),a(B),l(()=>Jn(a(B).size,"B")))]),Qe("click",he,w),y(R,ce)});var ie=v(se);{var de=R=>{var B=ub(),pe=c(B),ce=c(pe);A(Ae=>b(ce,Ae),[()=>(r(),l(()=>r()("No files.")))]),y(R,B)};me(ie,R=>{a(p),l(()=>a(p).length===0)&&R(de)})}var we=v(ie);uo(we,{colspan:"5",get op(){return f}});var Ce=v(we);{var j=R=>{uo(R,{colspan:"5",get op(){return m},children:(B,pe)=>{var ce=db();y(B,ce)},$$slots:{default:!0}})};me(Ce,R=>{s(),l(()=>!s().is("loading"))&&R(j)})}var ee=v(te,2),z=c(ee);{var M=R=>{vt(R,{get href(){return`/settings/files?after=${a(_)??""}`},children:(B,pe)=>{var ce=tr();A(Ae=>b(ce,Ae),[()=>(r(),l(()=>r()("Previous")))]),y(B,ce)},$$slots:{default:!0}})},F=R=>{var B=fb(),pe=c(B);A(ce=>b(pe,ce),[()=>(r(),l(()=>r()("Previous")))]),y(R,B)};me(z,R=>{a(_),t(),l(()=>a(_)||t().query.after)?R(M):R(F,!1)})}var T=v(z,2);{var C=R=>{vt(R,{get href(){return`/settings/files?after=${a(u)??""}`},children:(B,pe)=>{var ce=tr();A(Ae=>b(ce,Ae),[()=>(r(),l(()=>r()("Next")))]),y(B,ce)},$$slots:{default:!0}})},V=R=>{var B=pb(),pe=c(B);A(ce=>b(pe,ce),[()=>(r(),l(()=>r()("Next")))]),y(R,B)};me(T,R=>{a(u)?R(C):R(V,!1)})}var D=v(ee,2),H=c(D);Vt(H,{icon:"trash",get op(){return f},get disabled(){return a(g)},$$events:{click:E},children:(R,B)=>{var pe=vb(),ce=c(pe);A(Ae=>b(ce,Ae),[()=>(r(),l(()=>r()("Delete selected files")))]),y(R,pe)},$$slots:{default:!0}});var Z=v(D,2);{var fe=R=>{var B=hb(),pe=c(B);Ot(pe,()=>(i(),l(()=>i()("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")))),y(R,B)};me(Z,R=>{a(p),t(),l(()=>a(p).length||t().query.after)&&R(fe)})}A((R,B,pe)=>{b(W,R),b($e,B),b(Q,pe)},[()=>(r(),l(()=>r()("Uploaded"))),()=>(r(),l(()=>r()("Name"))),()=>(r(),l(()=>r()("Size")))]),Qe("change",X,I),Qe("submit",X,qt(function(R){ga.call(this,e,R)})),y(n,Y),xt(),h()}var mb=S('<!> <small class="badge is-important"> </small>',1),bb=S('<div class="header-wrapper svelte-1kxrp39"><form><input type="text" id="search_input" class="is-primary-menu-item"/> <label for="search_input" class="btn-hallow"><!></label> <!></form></div>'),yb=S("<!> <span> </span>",1),$b=S('<!> <span class="name"> </span> <span class="tooltip svelte-1kxrp39"> </span> <span class="badge"> </span>',1),wb=S('<!> <span class="name"> </span> <span class="tooltip svelte-1kxrp39"> </span> <span> </span>',1),xb=S('<div class="collapsible svelte-1kxrp39"><!> <!></div>'),Eb=S('<a href="#toggle"><!> <span> </span></a> <!>',1),Sb=S('<!> <span class="name"> </span> <span class="badge"> </span>',1),kb=S('<!> <span class="name"> </span>',1),Ab=S('<!> <span class="name"> </span>',1),Ob=S('<!> <span class="name"> </span>',1),Cb=S('<!> <span class="name"> </span>',1),Tb=S('<!> <span class="name"> </span>',1),Nb=S('<!> <span class="name"> </span>',1),Rb=S('<!> <span class="name"> </span>',1),Pb=S("<!> <!>",1),Ib=S('<!> <span class="name"> </span>',1),Mb=S('<div class="collapsible svelte-1kxrp39"><!> <!> <!> <!> <!> <!> <!> <!> <a target="_self" class="svelte-1kxrp39"><!> <span class="name"> </span></a></div>'),Lb=S('<!> <span class="name"> </span>',1),Db=S('<div class="sidebar-left"><!> <nav><h3> </h3> <!> <!> <h3> </h3> <a href="#toggle"><!> <span> </span></a> <!> <!></nav></div>');function Ub(n,e){wt(e,!1);const t=()=>Oe($,"$user",i),r=()=>Oe(Ze,"$route",i),o=()=>Oe(zt,"$l",i),s=()=>Oe(g,"$notifications",i),[i,d]=Lt(),h=Ee(),f=Ee(),m=Ee();let x=Ye(e,"transition",8);const $=rr("user"),g=$.notifications;let p=Ee(0),u=Ee(""),_=Ee(),w=Ee(!1),E=Ee([]),P=Ee(JSON.parse(localStorage.getItem("convos:collapsedStates")||localStorage.getItem("collapsedStates")||"{}"));nn(()=>Ze.on("update",T=>T.path&&xr.set("")));function I(){hr(a(_),"a",T=>T.classList.remove("has-focus")),setTimeout(()=>{if(!a(_))return;K(u,"");const T=document.activeElement;T&&$i(T,a(_))&&hr(a(_),"a.has-path",C=>C.focus())},100)}function k(T,C){const V=[C.conversation_id?"for-conversation":"for-connection"];return(C.frozen||T.state!=="connected")&&V.push("is-frozen"),C.frozen&&V.push("has-tooltip"),V.join(" ")}function Y(){if(!a(_))return;K(p,0),K(E,[]);const T=[a(u).match(/^\W+/)?"":"\\b\\W*"];T[0]&&T.push("");for(let V=0;V<T.length;V++){const D=a(u)==="+"?new RegExp(/[1-9]\d*\+?\s*$/):a(u)==="+@"?new RegExp(/^\s*\w.*[1-9]\d*\+?\s*$/):a(u)==="+#"?new RegExp(/^\s*#.*[1-9]\d*\+?\s*$/):new RegExp(T[V]+ba(a(u)),"i"),H={};if(hr(a(_),"a",(Z,fe)=>{const R=Z.classList;!a(u).length&&R.contains("has-path")&&K(p,fe),R.remove("has-focus");const B=!a(u).length||!Z.href.match(/\/search$/)&&!H[Z.href]&&Z.textContent.match(D);B&&a(E).push(Z),Z.classList[B?"remove":"add"]("hidden"),H[Z.href]=!0}),a(E).length)break}const C=a(_).querySelector(".for-search");C.classList[a(u)?"remove":"add"]("hidden"),C.classList.contains("hidden")||a(E).push(C),hr(a(_),"h3",V=>{let D=V;for(;(D=D.nextElementSibling)&&!qi(D,"h3");)if(!D.classList.contains("hidden"))return V.classList.remove("hidden");V.classList.add("hidden")})}function ue(){K(w,!1),a(u).indexOf("+")!==0&&I()}function L(){K(w,!0)}function X(T){if(T.key=="Enter"){T.preventDefault(),I(),a(E)[a(p)]&&Ze.go(a(E)[a(p)].href);return}const C=T.key=="ArrowUp"?-1:T.key=="ArrowDown"?1:0;C&&(T.preventDefault(),a(E)[a(p)]&&a(E)[a(p)].classList.remove("has-focus"),K(p,a(p)+(T.ctrlKey?C*4:C))),a(p)<0&&K(p,a(E).length-1),a(p)>=a(E).length&&K(p,0)}function te(T,C=60){return T.unread>C?C+"+":T.unread||0}function ve(T){Me(P,a(P)[T]=!a(P)[T]),localStorage.setItem("convos:collapsedStates",JSON.stringify(a(P))),localStorage.removeItem("collapsedStates")}Be(()=>a(u),()=>{Y({filter:a(u)})}),Be(()=>t(),()=>{K(h,"/settings/conversation?connection_id="+(t().activeConversation.connection_id||""))}),Be(()=>a(w),()=>{K(f,a(w)?0:250)}),Be(()=>a(u),()=>{K(m,a(u).replace(/^\//,""))}),Be(()=>(a(_),r()),()=>{a(_)&&I(r())}),Be(()=>(a(E),a(p)),()=>{a(E)[a(p)]&&a(E)[a(p)].classList.add("has-focus")}),Mt(),Et();var ne=Db(),q=c(ne);{var W=T=>{var C=bb(),V=c(C);let D;var H=c(V),Z=v(H,2),fe=c(Z);Te(fe,{name:"search"});var R=v(Z,2);vt(R,{href:"/chat",class:"btn-hallow for-notifications",children:(B,pe)=>{var ce=mb(),Ae=_e(ce);Te(Ae,{family:"regular",name:"bell"});var Ie=v(Ae,2),oe=c(Ie);A(he=>{ze(Ie,"hidden",(s(),l(()=>!s().unread))),b(oe,he)},[()=>(s(),l(()=>te(s())))]),y(B,ce)},$$slots:{default:!0}}),A(B=>{D=Ut(V,1,"sidebar-header",null,D,{"has-focus":a(w)}),ze(H,"placeholder",B)},[()=>(a(w),o(),l(()=>a(w)?o()("Search..."):o()("Convos")))]),Ln(H,()=>a(u),B=>K(u,B)),Qe("blur",H,ue),Qe("focus",H,L),Qe("keydown",H,X),Qe("submit",V,B=>B.preventDefault()),y(T,C)};me(q,T=>{Pe(Sn),l(()=>!Sn.isSingleColumn)&&T(W)})}var J=v(q,2);let $e;var ye=c(J),Q=c(ye),le=v(ye,2);{var xe=T=>{vt(T,{href:"/settings/connections",children:(C,V)=>{var D=yb(),H=_e(D);Te(H,{name:"exclamation-circle"});var Z=v(H,2),fe=c(Z);A(R=>b(fe,R),[()=>(o(),l(()=>o()("No conversations")))]),y(C,D)},$$slots:{default:!0}})};me(le,T=>{t(),l(()=>!t().connections.size)&&T(xe)})}var Re=v(le,2);fr(Re,1,()=>(t(),l(()=>t().connections.toArray())),dr,(T,C)=>{var V=Eb(),D=_e(V);let H;var Z=c(D);Te(Z,{name:"chevron-up"});var fe=v(Z,2),R=c(fe),B=v(D,2);{var pe=ce=>{var Ae=xb(),Ie=c(Ae);{let he=je(()=>(a(C),l(()=>k(a(C),a(C)))));vt(Ie,{get href(){return a(C),l(()=>a(C).path)},get class(){return a(he)},children:(G,Se)=>{var be=$b(),ge=_e(be);Te(ge,{name:"network-wired"});var ae=v(ge,2),Fe=c(ae),N=v(ae,2),U=c(N),Ue=v(N,2),Ke=c(Ue);A((Ve,He,at)=>{b(Fe,Ve),b(U,He),ze(Ue,"hidden",(a(C),l(()=>!a(C).unread))),b(Ke,at)},[()=>(a(u),a(C),o(),l(()=>a(u).length>0?a(C).name:o()("Server"))),()=>(o(),a(C),l(()=>o()(a(C).frozen))),()=>(a(C),l(()=>te(a(C))))]),y(G,be)},$$slots:{default:!0}})}var oe=v(Ie,2);fr(oe,1,()=>(a(C),l(()=>a(C).conversations.toArray())),dr,(he,G)=>{{let Se=je(()=>(a(C),a(G),l(()=>k(a(C),a(G)))));vt(he,{get href(){return a(G),l(()=>a(G).path)},get class(){return a(Se)},children:(be,ge)=>{var ae=wb(),Fe=_e(ae);{var N=rt=>{Te(rt,{name:"exclamation-triangle"})},U=rt=>{{let mt=je(()=>(a(G),l(()=>a(G).is("private")?"user":"user-friends")));Te(rt,{get name(){return a(mt)}})}};me(Fe,rt=>{a(G),l(()=>a(G).frozen&&!a(G).is("private"))?rt(N):rt(U,!1)})}var Ue=v(Fe,2),Ke=c(Ue),Ve=v(Ue,2),He=c(Ve),at=v(Ve,2);let ut;var lt=c(at);A((rt,mt)=>{b(Ke,(a(G),l(()=>a(G).name))),b(He,rt),ut=Ut(at,1,"badge",null,ut,{"is-important":!!a(G).notifications}),ze(at,"hidden",(a(G),l(()=>!a(G).unread))),b(lt,mt)},[()=>(o(),a(G),l(()=>o()(a(G).frozen))),()=>(a(G),l(()=>te(a(G))))]),y(be,ae)},$$slots:{default:!0}})}}),gr(3,Ae,()=>Ra,()=>({duration:a(f)})),y(ce,Ae)};me(B,ce=>{a(P),a(C),a(u),l(()=>!a(P)[a(C).connection_id]||a(u).length)&&ce(pe)})}A(()=>{ze(D,"hidden",(a(u),l(()=>a(u).length>0))),H=Ut(D,1,"svelte-1kxrp39",null,H,{collapsed:a(P)[a(C).connection_id]}),b(R,(a(C),l(()=>a(C).name||a(C).connection_id)))}),Qe("click",D,qt(()=>ve(a(C).connection_id))),y(T,V)});var se=v(Re,2),ie=c(se),de=v(se,2);let we;var Ce=c(de);Te(Ce,{name:"chevron-up"});var j=v(Ce,2),ee=c(j),z=v(de,2);{var M=T=>{var C=Mb(),V=c(C);vt(V,{href:"/chat",children:(G,Se)=>{var be=Sb(),ge=_e(be);Te(ge,{name:"bell"});var ae=v(ge,2),Fe=c(ae),N=v(ae,2),U=c(N);A((Ue,Ke)=>{b(Fe,Ue),ze(N,"hidden",(s(),l(()=>!s().unread))),b(U,Ke)},[()=>(o(),l(()=>o()("Notifications"))),()=>(s(),l(()=>te(s())))]),y(G,be)},$$slots:{default:!0}});var D=v(V,2);vt(D,{href:"/search",children:(G,Se)=>{var be=kb(),ge=_e(be);Te(ge,{name:"search"});var ae=v(ge,2),Fe=c(ae);A(N=>b(Fe,N),[()=>(o(),l(()=>o()("Search")))]),y(G,be)},$$slots:{default:!0}});var H=v(D,2);vt(H,{get href(){return a(h)},children:(G,Se)=>{var be=Ab(),ge=_e(be);Te(ge,{name:"comment"});var ae=v(ge,2),Fe=c(ae);A(N=>b(Fe,N),[()=>(o(),l(()=>o()("Add conversation")))]),y(G,be)},$$slots:{default:!0}});var Z=v(H,2);vt(Z,{href:"/settings/connections",children:(G,Se)=>{var be=Ob(),ge=_e(be);Te(ge,{name:"network-wired"});var ae=v(ge,2),Fe=c(ae);A(N=>b(Fe,N),[()=>(o(),l(()=>o()("Connections")))]),y(G,be)},$$slots:{default:!0}});var fe=v(Z,2);vt(fe,{href:"/settings/account",children:(G,Se)=>{var be=Cb(),ge=_e(be);Te(ge,{name:"user-cog"});var ae=v(ge,2),Fe=c(ae);A(N=>b(Fe,N),[()=>(o(),l(()=>o()("Account")))]),y(G,be)},$$slots:{default:!0}});var R=v(fe,2);vt(R,{href:"/settings/files",children:(G,Se)=>{var be=Tb(),ge=_e(be);Te(ge,{name:"folder-open"});var ae=v(ge,2),Fe=c(ae);A(N=>b(Fe,N),[()=>(o(),l(()=>o()("Files")))]),y(G,be)},$$slots:{default:!0}});var B=v(R,2);{var pe=G=>{var Se=Pb(),be=_e(Se);vt(be,{href:"/settings",children:(ae,Fe)=>{var N=Nb(),U=_e(N);Te(U,{name:"tools"});var Ue=v(U,2),Ke=c(Ue);A(Ve=>b(Ke,Ve),[()=>(o(),l(()=>o()("Settings")))]),y(ae,N)},$$slots:{default:!0}});var ge=v(be,2);vt(ge,{href:"/settings/users",children:(ae,Fe)=>{var N=Rb(),U=_e(N);Te(U,{name:"users"});var Ue=v(U,2),Ke=c(Ue);A(Ve=>b(Ke,Ve),[()=>(o(),l(()=>o()("Users")))]),y(ae,N)},$$slots:{default:!0}}),y(G,Se)};me(B,G=>{t(),l(()=>t().is("admin"))&&G(pe)})}var ce=v(B,2);vt(ce,{href:"/help",children:(G,Se)=>{var be=Ib(),ge=_e(be);Te(ge,{name:"question-circle"});var ae=v(ge,2),Fe=c(ae);A(N=>b(Fe,N),[()=>(o(),l(()=>o()("Help")))]),y(G,be)},$$slots:{default:!0}});var Ae=v(ce,2),Ie=c(Ae);Te(Ie,{name:"power-off"});var oe=v(Ie,2),he=c(oe);A((G,Se,be)=>{ze(Ae,"href",`${G??""}?csrf=${Se??""}`),b(he,be)},[()=>(Pe(Ze),l(()=>Ze.urlFor("/logout"))),()=>(Pe(it),l(()=>it("csrf"))),()=>(o(),l(()=>o()("Log out")))]),gr(3,C,()=>Ra,()=>({duration:a(f)})),y(T,C)};me(z,T=>{a(P),a(u),l(()=>!a(P).settings&&!a(u).length)&&T(M)})}var F=v(z,2);{let T=je(()=>(a(m),l(()=>encodeURIComponent(a(m)))));vt(F,{get href(){return`/search?q=${a(T)??""}`},class:"for-search hidden",children:(C,V)=>{var D=Lb(),H=_e(D);Te(H,{name:"search"});var Z=v(H,2),fe=c(Z);A(R=>b(fe,R),[()=>(o(),a(m),l(()=>o()('Search for "%1"',a(m))))]),y(C,D)},$$slots:{default:!0}})}Eo(J,T=>K(_,T),()=>a(_)),A((T,C)=>{$e=Ut(J,1,"sidebar-left__nav svelte-1kxrp39",null,$e,{"is-filtering":a(u).length>0}),ze(ye,"hidden",(a(u),l(()=>a(u).length>0))),b(Q,T),ze(se,"hidden",(a(u),l(()=>a(u).length>0))),b(ie,C),ze(de,"hidden",(a(u),l(()=>a(u).length>0))),we=Ut(de,1,"svelte-1kxrp39",null,we,{collapsed:a(P).settings}),b(ee,(t(),l(()=>t().email)))},[()=>(o(),l(()=>o()("Conversations"))),()=>(o(),l(()=>o()("Settings")))]),Qe("click",de,qt(()=>ve("settings"))),gr(3,ne,()=>Na,x),y(n,ne),xt(),d()}class Fb extends Pr{constructor(){super(),this.prop("cookie","activeTheme","convos",{key:"theme"}),this.prop("cookie","colorScheme","auto"),this.prop("cookie","compactDisplay",!1),this.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map(e=>[e.toLowerCase(),e])),this.prop("ro","themeOptions",()=>Array.from(this._stylesheets.entries())),this.prop("rw","osColorScheme",""),this._stylesheets=new Map([])}hasColorScheme(e){return hr(document,'link[id$="-'+e+'"]').length>1}start(){hr(document,'link[rel="alternate stylesheet"][title]',t=>{const r=t.title.replace(/\s\([a-z]+\)$/,"");this._stylesheets.set(t.id.replace(/^theme_alt__[a-z]+-/,""),r)});let e=this.osColorScheme;return this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:()=>{}},this._matchMedia.addListener(t=>this.update({osColorScheme:t.matches?"dark":"light"})),e=this._matchMedia.matches?"dark":"light"),this.update({compactDisplay:this.compactDisplay,osColorScheme:e})}update(e){return(e.activeTheme||e.colorScheme||e.osColorScheme)&&this._activateTheme(e),super.update(e)}_activateTheme(e){const t=e.activeTheme||this.activeTheme,r=e.colorScheme||this.colorScheme,o=e.osColorScheme||this.osColorScheme,s=[r==="auto"?o:r,"normal","light"];let i;for(let d=0;d<s.length&&(i=document.getElementById("theme_alt__"+s[d]+"-"+t),!i);d++);hr(document,'link[rel*="style"][title]',d=>{i||(i=d),d.disabled=!0,d.disabled=d.href!==i.href,d.setAttribute("media",d===i?"":"none"),d.setAttribute("rel",d===i?"stylesheet":"alternate stylesheet")})}}var Fs,vc;function Bb(){if(vc)return Fs;vc=1;function n(O){return O instanceof Map?O.clear=O.delete=O.set=function(){throw new Error("map is read-only")}:O instanceof Set&&(O.add=O.clear=O.delete=function(){throw new Error("set is read-only")}),Object.freeze(O),Object.getOwnPropertyNames(O).forEach(re=>{const ke=O[re],We=typeof ke;(We==="object"||We==="function")&&!Object.isFrozen(ke)&&n(ke)}),O}class e{constructor(re){re.data===void 0&&(re.data={}),this.data=re.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(O){return O.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(O,...re){const ke=Object.create(null);for(const We in O)ke[We]=O[We];return re.forEach(function(We){for(const ot in We)ke[ot]=We[ot]}),ke}const o="</span>",s=O=>!!O.scope,i=(O,{prefix:re})=>{if(O.startsWith("language:"))return O.replace("language:","language-");if(O.includes(".")){const ke=O.split(".");return[`${re}${ke.shift()}`,...ke.map((We,ot)=>`${We}${"_".repeat(ot+1)}`)].join(" ")}return`${re}${O}`};class d{constructor(re,ke){this.buffer="",this.classPrefix=ke.classPrefix,re.walk(this)}addText(re){this.buffer+=t(re)}openNode(re){if(!s(re))return;const ke=i(re.scope,{prefix:this.classPrefix});this.span(ke)}closeNode(re){s(re)&&(this.buffer+=o)}value(){return this.buffer}span(re){this.buffer+=`<span class="${re}">`}}const h=(O={})=>{const re={children:[]};return Object.assign(re,O),re};class f{constructor(){this.rootNode=h(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(re){this.top.children.push(re)}openNode(re){const ke=h({scope:re});this.add(ke),this.stack.push(ke)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(re){return this.constructor._walk(re,this.rootNode)}static _walk(re,ke){return typeof ke=="string"?re.addText(ke):ke.children&&(re.openNode(ke),ke.children.forEach(We=>this._walk(re,We)),re.closeNode(ke)),re}static _collapse(re){typeof re!="string"&&re.children&&(re.children.every(ke=>typeof ke=="string")?re.children=[re.children.join("")]:re.children.forEach(ke=>{f._collapse(ke)}))}}class m extends f{constructor(re){super(),this.options=re}addText(re){re!==""&&this.add(re)}startScope(re){this.openNode(re)}endScope(){this.closeNode()}__addSublanguage(re,ke){const We=re.root;ke&&(We.scope=`language:${ke}`),this.add(We)}toHTML(){return new d(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function x(O){return O?typeof O=="string"?O:O.source:null}function $(O){return u("(?=",O,")")}function g(O){return u("(?:",O,")*")}function p(O){return u("(?:",O,")?")}function u(...O){return O.map(ke=>x(ke)).join("")}function _(O){const re=O[O.length-1];return typeof re=="object"&&re.constructor===Object?(O.splice(O.length-1,1),re):{}}function w(...O){return"("+(_(O).capture?"":"?:")+O.map(We=>x(We)).join("|")+")"}function E(O){return new RegExp(O.toString()+"|").exec("").length-1}function P(O,re){const ke=O&&O.exec(re);return ke&&ke.index===0}const I=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function k(O,{joinWith:re}){let ke=0;return O.map(We=>{ke+=1;const ot=ke;let nt=x(We),De="";for(;nt.length>0;){const Le=I.exec(nt);if(!Le){De+=nt;break}De+=nt.substring(0,Le.index),nt=nt.substring(Le.index+Le[0].length),Le[0][0]==="\\"&&Le[1]?De+="\\"+String(Number(Le[1])+ot):(De+=Le[0],Le[0]==="("&&ke++)}return De}).map(We=>`(${We})`).join(re)}const Y=/\b\B/,ue="[a-zA-Z]\\w*",L="[a-zA-Z_]\\w*",X="\\b\\d+(\\.\\d+)?",te="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",ve="\\b(0b[01]+)",ne="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",q=(O={})=>{const re=/^#![ ]*\//;return O.binary&&(O.begin=u(re,/.*\b/,O.binary,/\b.*/)),r({scope:"meta",begin:re,end:/$/,relevance:0,"on:begin":(ke,We)=>{ke.index!==0&&We.ignoreMatch()}},O)},W={begin:"\\\\[\\s\\S]",relevance:0},J={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[W]},$e={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[W]},ye={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Q=function(O,re,ke={}){const We=r({scope:"comment",begin:O,end:re,contains:[]},ke);We.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const ot=w("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return We.contains.push({begin:u(/[ ]+/,"(",ot,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),We},le=Q("//","$"),xe=Q("/\\*","\\*/"),Re=Q("#","$"),se={scope:"number",begin:X,relevance:0},ie={scope:"number",begin:te,relevance:0},de={scope:"number",begin:ve,relevance:0},we={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[W,{begin:/\[/,end:/\]/,relevance:0,contains:[W]}]},Ce={scope:"title",begin:ue,relevance:0},j={scope:"title",begin:L,relevance:0},ee={begin:"\\.\\s*"+L,relevance:0};var M=Object.freeze({__proto__:null,APOS_STRING_MODE:J,BACKSLASH_ESCAPE:W,BINARY_NUMBER_MODE:de,BINARY_NUMBER_RE:ve,COMMENT:Q,C_BLOCK_COMMENT_MODE:xe,C_LINE_COMMENT_MODE:le,C_NUMBER_MODE:ie,C_NUMBER_RE:te,END_SAME_AS_BEGIN:function(O){return Object.assign(O,{"on:begin":(re,ke)=>{ke.data._beginMatch=re[1]},"on:end":(re,ke)=>{ke.data._beginMatch!==re[1]&&ke.ignoreMatch()}})},HASH_COMMENT_MODE:Re,IDENT_RE:ue,MATCH_NOTHING_RE:Y,METHOD_GUARD:ee,NUMBER_MODE:se,NUMBER_RE:X,PHRASAL_WORDS_MODE:ye,QUOTE_STRING_MODE:$e,REGEXP_MODE:we,RE_STARTERS_RE:ne,SHEBANG:q,TITLE_MODE:Ce,UNDERSCORE_IDENT_RE:L,UNDERSCORE_TITLE_MODE:j});function F(O,re){O.input[O.index-1]==="."&&re.ignoreMatch()}function T(O,re){O.className!==void 0&&(O.scope=O.className,delete O.className)}function C(O,re){re&&O.beginKeywords&&(O.begin="\\b("+O.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",O.__beforeBegin=F,O.keywords=O.keywords||O.beginKeywords,delete O.beginKeywords,O.relevance===void 0&&(O.relevance=0))}function V(O,re){Array.isArray(O.illegal)&&(O.illegal=w(...O.illegal))}function D(O,re){if(O.match){if(O.begin||O.end)throw new Error("begin & end are not supported with match");O.begin=O.match,delete O.match}}function H(O,re){O.relevance===void 0&&(O.relevance=1)}const Z=(O,re)=>{if(!O.beforeMatch)return;if(O.starts)throw new Error("beforeMatch cannot be used with starts");const ke=Object.assign({},O);Object.keys(O).forEach(We=>{delete O[We]}),O.keywords=ke.keywords,O.begin=u(ke.beforeMatch,$(ke.begin)),O.starts={relevance:0,contains:[Object.assign(ke,{endsParent:!0})]},O.relevance=0,delete ke.beforeMatch},fe=["of","and","for","in","not","or","if","then","parent","list","value"],R="keyword";function B(O,re,ke=R){const We=Object.create(null);return typeof O=="string"?ot(ke,O.split(" ")):Array.isArray(O)?ot(ke,O):Object.keys(O).forEach(function(nt){Object.assign(We,B(O[nt],re,nt))}),We;function ot(nt,De){re&&(De=De.map(Le=>Le.toLowerCase())),De.forEach(function(Le){const Ge=Le.split("|");We[Ge[0]]=[nt,pe(Ge[0],Ge[1])]})}}function pe(O,re){return re?Number(re):ce(O)?0:1}function ce(O){return fe.includes(O.toLowerCase())}const Ae={},Ie=O=>{console.error(O)},oe=(O,...re)=>{console.log(`WARN: ${O}`,...re)},he=(O,re)=>{Ae[`${O}/${re}`]||(console.log(`Deprecated as of ${O}. ${re}`),Ae[`${O}/${re}`]=!0)},G=new Error;function Se(O,re,{key:ke}){let We=0;const ot=O[ke],nt={},De={};for(let Le=1;Le<=re.length;Le++)De[Le+We]=ot[Le],nt[Le+We]=!0,We+=E(re[Le-1]);O[ke]=De,O[ke]._emit=nt,O[ke]._multi=!0}function be(O){if(Array.isArray(O.begin)){if(O.skip||O.excludeBegin||O.returnBegin)throw Ie("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),G;if(typeof O.beginScope!="object"||O.beginScope===null)throw Ie("beginScope must be object"),G;Se(O,O.begin,{key:"beginScope"}),O.begin=k(O.begin,{joinWith:""})}}function ge(O){if(Array.isArray(O.end)){if(O.skip||O.excludeEnd||O.returnEnd)throw Ie("skip, excludeEnd, returnEnd not compatible with endScope: {}"),G;if(typeof O.endScope!="object"||O.endScope===null)throw Ie("endScope must be object"),G;Se(O,O.end,{key:"endScope"}),O.end=k(O.end,{joinWith:""})}}function ae(O){O.scope&&typeof O.scope=="object"&&O.scope!==null&&(O.beginScope=O.scope,delete O.scope)}function Fe(O){ae(O),typeof O.beginScope=="string"&&(O.beginScope={_wrap:O.beginScope}),typeof O.endScope=="string"&&(O.endScope={_wrap:O.endScope}),be(O),ge(O)}function N(O){function re(De,Le){return new RegExp(x(De),"m"+(O.case_insensitive?"i":"")+(O.unicodeRegex?"u":"")+(Le?"g":""))}class ke{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Le,Ge){Ge.position=this.position++,this.matchIndexes[this.matchAt]=Ge,this.regexes.push([Ge,Le]),this.matchAt+=E(Le)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Le=this.regexes.map(Ge=>Ge[1]);this.matcherRe=re(k(Le,{joinWith:"|"}),!0),this.lastIndex=0}exec(Le){this.matcherRe.lastIndex=this.lastIndex;const Ge=this.matcherRe.exec(Le);if(!Ge)return null;const bt=Ge.findIndex((pt,gt)=>gt>0&&pt!==void 0),ft=this.matchIndexes[bt];return Ge.splice(0,bt),Object.assign(Ge,ft)}}class We{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Le){if(this.multiRegexes[Le])return this.multiRegexes[Le];const Ge=new ke;return this.rules.slice(Le).forEach(([bt,ft])=>Ge.addRule(bt,ft)),Ge.compile(),this.multiRegexes[Le]=Ge,Ge}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Le,Ge){this.rules.push([Le,Ge]),Ge.type==="begin"&&this.count++}exec(Le){const Ge=this.getMatcher(this.regexIndex);Ge.lastIndex=this.lastIndex;let bt=Ge.exec(Le);if(this.resumingScanAtSamePosition()&&!(bt&&bt.index===this.lastIndex)){const ft=this.getMatcher(0);ft.lastIndex=this.lastIndex+1,bt=ft.exec(Le)}return bt&&(this.regexIndex+=bt.position+1,this.regexIndex===this.count&&this.considerAll()),bt}}function ot(De){const Le=new We;return De.contains.forEach(Ge=>Le.addRule(Ge.begin,{rule:Ge,type:"begin"})),De.terminatorEnd&&Le.addRule(De.terminatorEnd,{type:"end"}),De.illegal&&Le.addRule(De.illegal,{type:"illegal"}),Le}function nt(De,Le){const Ge=De;if(De.isCompiled)return Ge;[T,D,Fe,Z].forEach(ft=>ft(De,Le)),O.compilerExtensions.forEach(ft=>ft(De,Le)),De.__beforeBegin=null,[C,V,H].forEach(ft=>ft(De,Le)),De.isCompiled=!0;let bt=null;return typeof De.keywords=="object"&&De.keywords.$pattern&&(De.keywords=Object.assign({},De.keywords),bt=De.keywords.$pattern,delete De.keywords.$pattern),bt=bt||/\w+/,De.keywords&&(De.keywords=B(De.keywords,O.case_insensitive)),Ge.keywordPatternRe=re(bt,!0),Le&&(De.begin||(De.begin=/\B|\b/),Ge.beginRe=re(Ge.begin),!De.end&&!De.endsWithParent&&(De.end=/\B|\b/),De.end&&(Ge.endRe=re(Ge.end)),Ge.terminatorEnd=x(Ge.end)||"",De.endsWithParent&&Le.terminatorEnd&&(Ge.terminatorEnd+=(De.end?"|":"")+Le.terminatorEnd)),De.illegal&&(Ge.illegalRe=re(De.illegal)),De.contains||(De.contains=[]),De.contains=[].concat(...De.contains.map(function(ft){return Ue(ft==="self"?De:ft)})),De.contains.forEach(function(ft){nt(ft,Ge)}),De.starts&&nt(De.starts,Le),Ge.matcher=ot(Ge),Ge}if(O.compilerExtensions||(O.compilerExtensions=[]),O.contains&&O.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return O.classNameAliases=r(O.classNameAliases||{}),nt(O)}function U(O){return O?O.endsWithParent||U(O.starts):!1}function Ue(O){return O.variants&&!O.cachedVariants&&(O.cachedVariants=O.variants.map(function(re){return r(O,{variants:null},re)})),O.cachedVariants?O.cachedVariants:U(O)?r(O,{starts:O.starts?r(O.starts):null}):Object.isFrozen(O)?r(O):O}var Ke="11.9.0";class Ve extends Error{constructor(re,ke){super(re),this.name="HTMLInjectionError",this.html=ke}}const He=t,at=r,ut=Symbol("nomatch"),lt=7,rt=function(O){const re=Object.create(null),ke=Object.create(null),We=[];let ot=!0;const nt="Could not find the language '{}', did you forget to load/include a language module?",De={disableAutodetect:!0,name:"Plain text",contains:[]};let Le={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:m};function Ge(Ne){return Le.noHighlightRe.test(Ne)}function bt(Ne){let et=Ne.className+" ";et+=Ne.parentNode?Ne.parentNode.className:"";const ht=Le.languageDetectRe.exec(et);if(ht){const Nt=Ht(ht[1]);return Nt||(oe(nt.replace("{}",ht[1])),oe("Falling back to no-highlight mode for this block.",Ne)),Nt?ht[1]:"no-highlight"}return et.split(/\s+/).find(Nt=>Ge(Nt)||Ht(Nt))}function ft(Ne,et,ht){let Nt="",Gt="";typeof et=="object"?(Nt=Ne,ht=et.ignoreIllegals,Gt=et.language):(he("10.7.0","highlight(lang, code, ...args) has been deprecated."),he("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Gt=Ne,Nt=et),ht===void 0&&(ht=!0);const Ar={code:Nt,language:Gt};zn("before:highlight",Ar);const Wr=Ar.result?Ar.result:pt(Ar.language,Ar.code,ht);return Wr.code=Ar.code,zn("after:highlight",Wr),Wr}function pt(Ne,et,ht,Nt){const Gt=Object.create(null);function Ar(qe,Xe){return qe.keywords[Xe]}function Wr(){if(!st.keywords){or.addText(Dt);return}let qe=0;st.keywordPatternRe.lastIndex=0;let Xe=st.keywordPatternRe.exec(Dt),dt="";for(;Xe;){dt+=Dt.substring(qe,Xe.index);const At=Gr.case_insensitive?Xe[0].toLowerCase():Xe[0],vr=Ar(st,At);if(vr){const[ln,cd]=vr;if(or.addText(dt),dt="",Gt[At]=(Gt[At]||0)+1,Gt[At]<=lt&&(Va+=cd),ln.startsWith("_"))dt+=Xe[0];else{const ud=Gr.classNameAliases[ln]||ln;Mr(Xe[0],ud)}}else dt+=Xe[0];qe=st.keywordPatternRe.lastIndex,Xe=st.keywordPatternRe.exec(Dt)}dt+=Dt.substring(qe),or.addText(dt)}function Hn(){if(Dt==="")return;let qe=null;if(typeof st.subLanguage=="string"){if(!re[st.subLanguage]){or.addText(Dt);return}qe=pt(st.subLanguage,Dt,!0,Vi[st.subLanguage]),Vi[st.subLanguage]=qe._top}else qe=_t(Dt,st.subLanguage.length?st.subLanguage:null);st.relevance>0&&(Va+=qe.relevance),or.__addSublanguage(qe._emitter,qe.language)}function _r(){st.subLanguage!=null?Hn():Wr(),Dt=""}function Mr(qe,Xe){qe!==""&&(or.startScope(Xe),or.addText(qe),or.endScope())}function Ha(qe,Xe){let dt=1;const At=Xe.length-1;for(;dt<=At;){if(!qe._emit[dt]){dt++;continue}const vr=Gr.classNameAliases[qe[dt]]||qe[dt],ln=Xe[dt];vr?Mr(ln,vr):(Dt=ln,Wr(),Dt=""),dt++}}function Wa(qe,Xe){return qe.scope&&typeof qe.scope=="string"&&or.openNode(Gr.classNameAliases[qe.scope]||qe.scope),qe.beginScope&&(qe.beginScope._wrap?(Mr(Dt,Gr.classNameAliases[qe.beginScope._wrap]||qe.beginScope._wrap),Dt=""):qe.beginScope._multi&&(Ha(qe.beginScope,Xe),Dt="")),st=Object.create(qe,{parent:{value:st}}),st}function Ga(qe,Xe,dt){let At=P(qe.endRe,dt);if(At){if(qe["on:end"]){const vr=new e(qe);qe["on:end"](Xe,vr),vr.isMatchIgnored&&(At=!1)}if(At){for(;qe.endsParent&&qe.parent;)qe=qe.parent;return qe}}if(qe.endsWithParent)return Ga(qe.parent,Xe,dt)}function Co(qe){return st.matcher.regexIndex===0?(Dt+=qe[0],1):(Mo=!0,0)}function To(qe){const Xe=qe[0],dt=qe.rule,At=new e(dt),vr=[dt.__beforeBegin,dt["on:begin"]];for(const ln of vr)if(ln&&(ln(qe,At),At.isMatchIgnored))return Co(Xe);return dt.skip?Dt+=Xe:(dt.excludeBegin&&(Dt+=Xe),_r(),!dt.returnBegin&&!dt.excludeBegin&&(Dt=Xe)),Wa(dt,qe),dt.returnBegin?0:Xe.length}function No(qe){const Xe=qe[0],dt=et.substring(qe.index),At=Ga(st,qe,dt);if(!At)return ut;const vr=st;st.endScope&&st.endScope._wrap?(_r(),Mr(Xe,st.endScope._wrap)):st.endScope&&st.endScope._multi?(_r(),Ha(st.endScope,qe)):vr.skip?Dt+=Xe:(vr.returnEnd||vr.excludeEnd||(Dt+=Xe),_r(),vr.excludeEnd&&(Dt=Xe));do st.scope&&or.closeNode(),!st.skip&&!st.subLanguage&&(Va+=st.relevance),st=st.parent;while(st!==At.parent);return At.starts&&Wa(At.starts,qe),vr.returnEnd?0:Xe.length}function Ro(){const qe=[];for(let Xe=st;Xe!==Gr;Xe=Xe.parent)Xe.scope&&qe.unshift(Xe.scope);qe.forEach(Xe=>or.openNode(Xe))}let Wn={};function Ka(qe,Xe){const dt=Xe&&Xe[0];if(Dt+=qe,dt==null)return _r(),0;if(Wn.type==="begin"&&Xe.type==="end"&&Wn.index===Xe.index&&dt===""){if(Dt+=et.slice(Xe.index,Xe.index+1),!ot){const At=new Error(`0 width match regex (${Ne})`);throw At.languageName=Ne,At.badRule=Wn.rule,At}return 1}if(Wn=Xe,Xe.type==="begin")return To(Xe);if(Xe.type==="illegal"&&!ht){const At=new Error('Illegal lexeme "'+dt+'" for mode "'+(st.scope||"<unnamed>")+'"');throw At.mode=st,At}else if(Xe.type==="end"){const At=No(Xe);if(At!==ut)return At}if(Xe.type==="illegal"&&dt==="")return 1;if(Io>1e5&&Io>Xe.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Dt+=dt,dt.length}const Gr=Ht(Ne);if(!Gr)throw Ie(nt.replace("{}",Ne)),new Error('Unknown language: "'+Ne+'"');const ld=N(Gr);let Po="",st=Nt||ld;const Vi={},or=new Le.__emitter(Le);Ro();let Dt="",Va=0,An=0,Io=0,Mo=!1;try{if(Gr.__emitTokens)Gr.__emitTokens(et,or);else{for(st.matcher.considerAll();;){Io++,Mo?Mo=!1:st.matcher.considerAll(),st.matcher.lastIndex=An;const qe=st.matcher.exec(et);if(!qe)break;const Xe=et.substring(An,qe.index),dt=Ka(Xe,qe);An=qe.index+dt}Ka(et.substring(An))}return or.finalize(),Po=or.toHTML(),{language:Ne,value:Po,relevance:Va,illegal:!1,_emitter:or,_top:st}}catch(qe){if(qe.message&&qe.message.includes("Illegal"))return{language:Ne,value:He(et),illegal:!0,relevance:0,_illegalBy:{message:qe.message,index:An,context:et.slice(An-100,An+100),mode:qe.mode,resultSoFar:Po},_emitter:or};if(ot)return{language:Ne,value:He(et),illegal:!1,relevance:0,errorRaised:qe,_emitter:or,_top:st};throw qe}}function gt(Ne){const et={value:He(Ne),illegal:!1,relevance:0,_top:De,_emitter:new Le.__emitter(Le)};return et._emitter.addText(Ne),et}function _t(Ne,et){et=et||Le.languages||Object.keys(re);const ht=gt(Ne),Nt=et.filter(Ht).filter(kr).map(_r=>pt(_r,Ne,!1));Nt.unshift(ht);const Gt=Nt.sort((_r,Mr)=>{if(_r.relevance!==Mr.relevance)return Mr.relevance-_r.relevance;if(_r.language&&Mr.language){if(Ht(_r.language).supersetOf===Mr.language)return 1;if(Ht(Mr.language).supersetOf===_r.language)return-1}return 0}),[Ar,Wr]=Gt,Hn=Ar;return Hn.secondBest=Wr,Hn}function St(Ne,et,ht){const Nt=et&&ke[et]||ht;Ne.classList.add("hljs"),Ne.classList.add(`language-${Nt}`)}function Bt(Ne){let et=null;const ht=bt(Ne);if(Ge(ht))return;if(zn("before:highlightElement",{el:Ne,language:ht}),Ne.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",Ne);return}if(Ne.children.length>0&&(Le.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(Ne)),Le.throwUnescapedHTML))throw new Ve("One of your code blocks includes unescaped HTML.",Ne.innerHTML);et=Ne;const Nt=et.textContent,Gt=ht?ft(Nt,{language:ht,ignoreIllegals:!0}):_t(Nt);Ne.innerHTML=Gt.value,Ne.dataset.highlighted="yes",St(Ne,ht,Gt.language),Ne.result={language:Gt.language,re:Gt.relevance,relevance:Gt.relevance},Gt.secondBest&&(Ne.secondBest={language:Gt.secondBest.language,relevance:Gt.secondBest.relevance}),zn("after:highlightElement",{el:Ne,result:Gt,text:Nt})}function jt(Ne){Le=at(Le,Ne)}const Jt=()=>{Fr(),he("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Wt(){Fr(),he("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let Xt=!1;function Fr(){if(document.readyState==="loading"){Xt=!0;return}document.querySelectorAll(Le.cssSelector).forEach(Bt)}function vn(){Xt&&Fr()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",vn,!1);function Yt(Ne,et){let ht=null;try{ht=et(O)}catch(Nt){if(Ie("Language definition for '{}' could not be registered.".replace("{}",Ne)),ot)Ie(Nt);else throw Nt;ht=De}ht.name||(ht.name=Ne),re[Ne]=ht,ht.rawDefinition=et.bind(null,O),ht.aliases&&Ir(ht.aliases,{languageName:Ne})}function pr(Ne){delete re[Ne];for(const et of Object.keys(ke))ke[et]===Ne&&delete ke[et]}function Zt(){return Object.keys(re)}function Ht(Ne){return Ne=(Ne||"").toLowerCase(),re[Ne]||re[ke[Ne]]}function Ir(Ne,{languageName:et}){typeof Ne=="string"&&(Ne=[Ne]),Ne.forEach(ht=>{ke[ht.toLowerCase()]=et})}function kr(Ne){const et=Ht(Ne);return et&&!et.disableAutodetect}function on(Ne){Ne["before:highlightBlock"]&&!Ne["before:highlightElement"]&&(Ne["before:highlightElement"]=et=>{Ne["before:highlightBlock"](Object.assign({block:et.el},et))}),Ne["after:highlightBlock"]&&!Ne["after:highlightElement"]&&(Ne["after:highlightElement"]=et=>{Ne["after:highlightBlock"](Object.assign({block:et.el},et))})}function sn(Ne){on(Ne),We.push(Ne)}function kn(Ne){const et=We.indexOf(Ne);et!==-1&&We.splice(et,1)}function zn(Ne,et){const ht=Ne;We.forEach(function(Nt){Nt[ht]&&Nt[ht](et)})}function Oo(Ne){return he("10.7.0","highlightBlock will be removed entirely in v12.0"),he("10.7.0","Please use highlightElement now."),Bt(Ne)}Object.assign(O,{highlight:ft,highlightAuto:_t,highlightAll:Fr,highlightElement:Bt,highlightBlock:Oo,configure:jt,initHighlighting:Jt,initHighlightingOnLoad:Wt,registerLanguage:Yt,unregisterLanguage:pr,listLanguages:Zt,getLanguage:Ht,registerAliases:Ir,autoDetection:kr,inherit:at,addPlugin:sn,removePlugin:kn}),O.debugMode=function(){ot=!1},O.safeMode=function(){ot=!0},O.versionString=Ke,O.regex={concat:u,lookahead:$,either:w,optional:p,anyNumberOfTimes:g};for(const Ne in M)typeof M[Ne]=="object"&&n(M[Ne]);return Object.assign(O,M),O},mt=rt({});return mt.newInstance=()=>rt({}),Fs=mt,mt.HighlightJS=mt,mt.default=mt,Fs}var qb=Bb();const ar=ma(qb);function jb(n){n.lineNumbersBlock=function(e,t){n.highlightBlock(e,t),e.innerHTML=Yb(e,t)}}var zb="hljs-ln",hc="hljs-ln-line",Qu="hljs-ln-code",Hb="hljs-ln-numbers",Wb="hljs-ln-n",ro="data-line-number",ed=/\r\n|\r|\n/g;function Gb(n){for(var e=n;e;){if(e.className&&e.className.indexOf("hljs-ln-code")!==-1)return!0;e=e.parentNode}return!1}function Kb(n){for(var e=n;e.nodeName!=="TABLE";)e=e.parentNode;return e}function Vb(n){for(var e=n.toString(),t=n.anchorNode;t.nodeName!=="TD";)t=t.parentNode;for(var r=n.focusNode;r.nodeName!=="TD";)r=r.parentNode;var o=parseInt(t.dataset.lineNumber,10),s=parseInt(r.dataset.lineNumber,10);if(o!==s){var i=t.textContent,d=r.textContent;if(o>s){var h=o;o=s,s=h,h=i,i=d,d=h}for(;e.indexOf(i)!==0;)i=i.slice(1);for(;e.lastIndexOf(d)===-1;)d=d.slice(0,-1);for(var f=i,m=Kb(t),x=o+1;x<s;++x){var $=`.${Qu}[${ro}="${x}"]`,g=m.querySelector($);f+=`
`+g.textContent}return f+=`
`+d,f}else return e}document.addEventListener("copy",function(n){var e=window.getSelection();if(Gb(e.anchorNode)){var t;window.navigator.userAgent.indexOf("Edge")!==-1?t=Vb(e):t=e.toString(),n.clipboardData.setData("text/plain",t),n.preventDefault()}});function Yb(n,e){e=e||{singleLine:!1};var t=e.singleLine?0:1;return td(n),Zb(n.innerHTML,t)}function Zb(n,e){var t=rd(n);if(t[t.length-1].trim()===""&&t.pop(),t.length>e){for(var r="",o=0,s=t.length;o<s;o++){let i=o+1;r+=`<tr><td class="${hc} ${Hb}" ${ro}="${i}"><div class="${Wb}" ${ro}="${i}"></div></td><td class="${hc} ${Qu}" ${ro}="${i}">`+(t[o].length>0?t[o]:" ")+"</td></tr>"}return`<table class="${zb}">${r}</table>`}return n}function td(n){var e=n.childNodes;for(var t in e)if(Object.hasOwn(e,t)){var r=e[t];Xb(r.textContent)>0&&(r.childNodes.length>0?td(r):Jb(r.parentNode))}}function Jb(n){var e=n.className;if(/hljs-/.test(e)){for(var t=rd(n.innerHTML),r=0,o="";r<t.length;r++){var s=t[r].length>0?t[r]:" ";o+=`<span class="${e}">${s}</span>
`}n.innerHTML=o.trim()}}function rd(n){return n.length===0?[]:n.split(ed)}function Xb(n){return(n.trim().match(ed)||[]).length}function Qb(n){return{name:"Dockerfile",aliases:["docker"],case_insensitive:!0,keywords:["from","maintainer","expose","env","arg","user","onbuild","stopsignal"],contains:[n.HASH_COMMENT_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}}const gc="[A-Za-z$_][0-9A-Za-z$_]*",ey=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],ty=["true","false","null","undefined","NaN","Infinity"],nd=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],ad=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],od=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],ry=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],ny=[].concat(od,nd,ad);function ay(n){const e=n.regex,t=(Q,{after:le})=>{const xe="</"+Q[0].slice(1);return Q.input.indexOf(xe,le)!==-1},r=gc,o={begin:"<>",end:"</>"},s=/<[A-Za-z0-9\\._:-]+\s*\/>/,i={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(Q,le)=>{const xe=Q[0].length+Q.index,Re=Q.input[xe];if(Re==="<"||Re===","){le.ignoreMatch();return}Re===">"&&(t(Q,{after:xe})||le.ignoreMatch());let se;const ie=Q.input.substring(xe);if(se=ie.match(/^\s*=/)){le.ignoreMatch();return}if((se=ie.match(/^\s+extends\s+/))&&se.index===0){le.ignoreMatch();return}}},d={$pattern:gc,keyword:ey,literal:ty,built_in:ny,"variable.language":ry},h="[0-9](_?[0-9])*",f=`\\.(${h})`,m="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",x={className:"number",variants:[{begin:`(\\b(${m})((${f})|\\.)?|(${f}))[eE][+-]?(${h})\\b`},{begin:`\\b(${m})\\b((${f})\\b|\\.)?|(${f})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},$={className:"subst",begin:"\\$\\{",end:"\\}",keywords:d,contains:[]},g={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,$],subLanguage:"xml"}},p={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,$],subLanguage:"css"}},u={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,$],subLanguage:"graphql"}},_={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,$]},E={className:"comment",variants:[n.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]},P=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,g,p,u,_,{match:/\$\d+/},x];$.contains=P.concat({begin:/\{/,end:/\}/,keywords:d,contains:["self"].concat(P)});const I=[].concat(E,$.contains),k=I.concat([{begin:/\(/,end:/\)/,keywords:d,contains:["self"].concat(I)}]),Y={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:d,contains:k},ue={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,e.concat(r,"(",e.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},L={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...nd,...ad]}},X={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},te={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[Y],illegal:/%/},ve={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function ne(Q){return e.concat("(?!",Q.join("|"),")")}const q={match:e.concat(/\b/,ne([...od,"super","import"]),r,e.lookahead(/\(/)),className:"title.function",relevance:0},W={begin:e.concat(/\./,e.lookahead(e.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},J={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},Y]},$e="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+n.UNDERSCORE_IDENT_RE+")\\s*=>",ye={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead($e)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[Y]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:d,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:L},illegal:/#(?![$_A-z])/,contains:[n.SHEBANG({label:"shebang",binary:"node",relevance:5}),X,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,g,p,u,_,E,{match:/\$\d+/},x,L,{className:"attr",begin:r+e.lookahead(":"),relevance:0},ye,{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[E,n.REGEXP_MODE,{className:"function",begin:$e,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:n.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:d,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:s},{begin:i.begin,"on:begin":i.isTrulyOpeningTag,end:i.end}],subLanguage:"xml",contains:[{begin:i.begin,end:i.end,skip:!0,contains:["self"]}]}]},te,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+n.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[Y,n.inherit(n.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},W,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[Y]},q,ve,ue,J,{match:/\$[(.]/}]}}function oy(n){const e=n.regex,t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},s={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},i={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},d=/[A-Za-z][A-Za-z0-9+.-]*/,h={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,d,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},f={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},m={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},x=n.inherit(f,{contains:[]}),$=n.inherit(m,{contains:[]});f.contains.push($),m.contains.push(x);let g=[t,h];return[f,m,x,$].forEach(_=>{_.contains=_.contains.concat(g)}),g=g.concat(f,m),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:g},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:g}]}]},t,s,f,m,{className:"quote",begin:"^>\\s+",contains:g,end:"$"},o,r,h,i]}}function sy(n){return{name:"Mojolicious",subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}}function iy(n){const e=n.regex,t=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],r=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:t.join(" ")},s={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},i={begin:/->\{/,end:/\}/},d={variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},h=[n.BACKSLASH_ESCAPE,s,d],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],m=(g,p,u="\\1")=>{const _=u==="\\1"?u:e.concat(u,p);return e.concat(e.concat("(?:",g,")"),p,/(?:\\.|[^\\\/])*?/,_,/(?:\\.|[^\\\/])*?/,u,r)},x=(g,p,u)=>e.concat(e.concat("(?:",g,")"),p,/(?:\\.|[^\\\/])*?/,u,r),$=[d,n.HASH_COMMENT_MODE,n.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),i,{className:"string",contains:h,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:m("s|tr|y",e.either(...f,{capture:!0}))},{begin:m("s|tr|y","\\(","\\)")},{begin:m("s|tr|y","\\[","\\]")},{begin:m("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:x("(?:m|qr)?",/\//,/\//)},{begin:x("m|qr",e.either(...f,{capture:!0}),/\1/)},{begin:x("m|qr",/\(/,/\)/)},{begin:x("m|qr",/\[/,/\]/)},{begin:x("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return s.contains=$,i.contains=$,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:$}}const ly=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),cy=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],uy=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],dy=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],fy=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],py=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function vy(n){const e=ly(n),t=fy,r=dy,o="@[a-z-]+",s="and or not only",d={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+cy.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+t.join("|")+")"},d,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+py.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,d,e.HEXCOLOR,e.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:o,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:uy.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},d,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function hy(n){const e=n.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},s={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},i=n.inherit(s,{begin:/\(/,end:/\)/}),d=n.inherit(n.APOS_STRING_MODE,{className:"string"}),h=n.inherit(n.QUOTE_STRING_MODE,{className:"string"}),f={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[s,h,d,i,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[s,i,h,d]}]}]},n.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[h]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[f],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[f],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:f}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function gy(n){const s={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:s,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:n.C_NUMBER_RE+"[i]",relevance:1},n.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:s,illegal:/["']/}]}]}}function _y(n){const e=n.regex,t={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:e.concat(/[$@]/,n.UNDERSCORE_IDENT_RE)}]},o={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[n.HASH_COMMENT_MODE,{className:"string",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[t]},{className:"regexp",contains:[n.BACKSLASH_ESCAPE,t],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},t]};return{name:"Nginx config",aliases:["nginxconf"],contains:[n.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:o.contains,keywords:{section:"upstream location"}},{className:"section",begin:e.concat(n.UNDERSCORE_IDENT_RE+e.lookahead(/\s+\{/)),relevance:0},{begin:e.lookahead(n.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:n.UNDERSCORE_IDENT_RE,starts:o}],relevance:0}],illegal:"[^\\s\\}\\{]"}}function my(n){const e=n.regex,t=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],d={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},h={className:"meta",begin:/^(>>>|\.\.\.) /},f={className:"subst",begin:/\{/,end:/\}/,keywords:d,illegal:/#/},m={begin:/\{\{/,relevance:0},x={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,h],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,h],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,h,m,f]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,h,m,f]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,m,f]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,m,f]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},$="[0-9](_?[0-9])*",g=`(\\b(${$}))?\\.(${$})|\\b(${$})\\.`,p=`\\b|${r.join("|")}`,u={className:"number",relevance:0,variants:[{begin:`(\\b(${$})|(${g}))[eE][+-]?(${$})[jJ]?(?=${p})`},{begin:`(${g})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${p})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${p})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${p})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${p})`},{begin:`\\b(${$})[jJ](?=${p})`}]},_={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:d,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},w={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:d,contains:["self",h,u,x,n.HASH_COMMENT_MODE]}]};return f.contains=[x,u,h],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:d,illegal:/(<\/|\?)|=>/,contains:[h,u,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},x,_,n.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,t],scope:{1:"keyword",3:"title.function"},contains:[w]},{variants:[{match:[/\bclass/,/\s+/,t,/\s*/,/\(\s*/,t,/\s*\)/]},{match:[/\bclass/,/\s+/,t]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[u,w,x]}]}}function by(n){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}const yy=n=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:n.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),$y=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],wy=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],xy=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],Ey=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Sy=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function ky(n){const e=n.regex,t=yy(n),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},o="and or not only",s=/@-?\w[\w]*(-\w+)*/,i="[a-zA-Z-][a-zA-Z0-9_-]*",d=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,r,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+i,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+xy.join("|")+")"},{begin:":(:)?("+Ey.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Sy.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...d,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...d,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:s},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:wy.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...d,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+$y.join("|")+")\\b"}]}}function Ay(n){const e=n.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function Oy(n){const e=n.regex,t="HTTP/([32]|1\\.[01])",r=/[A-Za-z][A-Za-z0-9-]*/,o={className:"attribute",begin:e.concat("^",r,"(?=\\:\\s)"),starts:{contains:[{className:"punctuation",begin:/: /,relevance:0,starts:{end:"$",relevance:0}}]}},s=[o,{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}];return{name:"HTTP",aliases:["https"],illegal:/\S/,contains:[{begin:"^(?="+t+" \\d{3})",end:/$/,contains:[{className:"meta",begin:t},{className:"number",begin:"\\b\\d{3}\\b"}],starts:{end:/\b\B/,illegal:/\S/,contains:s}},{begin:"(?=^[A-Z]+ (.*?) "+t+"$)",end:/$/,contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{className:"meta",begin:t},{className:"keyword",begin:"[A-Z]+"}],starts:{end:/\b\B/,illegal:/\S/,contains:s}},n.inherit(o,{relevance:0})]}}function Cy(n){const e="true false yes no null",t="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},s={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,o]},i=n.inherit(s,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),x={className:"number",begin:"\\b"+"[0-9]{4}(-[0-9][0-9]){0,2}"+"([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?"+"(\\.[0-9]*)?"+"([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?"+"\\b"},$={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},g={begin:/\{/,end:/\}/,contains:[$],illegal:"\\n",relevance:0},p={begin:"\\[",end:"\\]",contains:[$],illegal:"\\n",relevance:0},u=[r,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+t},{className:"type",begin:"!<"+t+">"},{className:"type",begin:"!"+t},{className:"type",begin:"!!"+t},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},x,{className:"number",begin:n.C_NUMBER_RE+"\\b",relevance:0},g,p,s],_=[...u];return _.pop(),_.push(i),$.contains=_,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:u}}ar.registerLanguage("css",ky);ar.registerLanguage("diff",Ay);ar.registerLanguage("dockerfile",Qb);ar.registerLanguage("go",gy);ar.registerLanguage("http",Oy);ar.registerLanguage("javascript",ay);ar.registerLanguage("markdown",oy);ar.registerLanguage("mojolicious",sy);ar.registerLanguage("nginx",_y);ar.registerLanguage("perl",iy);ar.registerLanguage("python",my);ar.registerLanguage("scss",vy);ar.registerLanguage("shell",by);ar.registerLanguage("xml",hy);ar.registerLanguage("yaml",Cy);jb(ar);var Bs={exports:{}},_c;function Ty(){if(_c)return Bs.exports;_c=1;function n(e){let t=document.createElement("div");const r=[[e,t]],o=[];for(;r.length;){const[s,i]=r.shift();let d,h,f=typeof s;if(s===null||f=="undefined"?f="null":Array.isArray(s)&&(f="array"),f=="array")h=m=>m,h.len=s.length,d=document.createElement("div"),d.className="json-array "+(h.len?"has-items":"is-empty");else if(f=="object"){const m=Object.keys(s).sort();h=x=>m[x],h.len=m.length,d=document.createElement("div"),d.className="json-object "+(h.len?"has-items":"is-empty")}else d=document.createElement("span"),d.className="json-"+f,d.textContent=f=="null"?"null":f!="boolean"?s:s?"true":"false";if(h){const m=document.createElement("span");if(m.className="json-type",m.textContent=h.len?f+"["+h.len+"]":"{}",i.appendChild(m),o.indexOf(s)!=-1)t.classList.add("has-recursive-items"),d.classList.add("is-seen");else{for(let x=0;x<h.len;x++){const $=h(x),g=document.createElement("div"),p=document.createElement("span");p.className="json-key",p.textContent=$,g.appendChild(p),d.appendChild(g),r.push([s[$],g])}o.push(s)}}i.className="json-item "+d.className.replace(/^json-/,"contains-"),i.appendChild(d)}return t}try{Bs.exports={jsonhtmlify:n}}catch{window.jsonhtmlify=n}return Bs.exports}var Ny=Ty();function mc(n,e){const t=e.vars?kt.l(e.message,...e.vars):e.message;return n?kt.raw(t):kt.md(t)}const Ry={};let Py=0;class Iy extends Pr{constructor(e){super();let t=e.connection_id;e.conversation_id&&(t+=":"+e.conversation_id),this.prop("ro","length",()=>this.messages.length),this.prop("ro","messages",[]),this.prop("rw","expandUrlToMedia",!0),this.prop("persist","raw",!1,{key:t+":raw"}),this.embedCache=Ry}clear(){return this.messages.length=0,this.update({messages:!0})}get(e){return e<0?this.messages.slice(e)[0]:this.messages[e]}push(e){return[].push.apply(this.messages,this._fill(e)),this.update({messages:!0})}render(e=-1){if(e!==-1){const r=this.get(e);return r&&!r.hasBeenSeen&&(r.embeds=this._embeds(r),r.hasBeenSeen=!0,this.update({messages:!0})),this.messages}let t={};return this.messages.map((r,o)=>(r.index=o,r.embeds||(r.dayChanged=this._dayChanged(r,t),r.className=this._className(r,t),r.embeds=[],r.html=mc(this.raw,r)),t=r))}toArray(){return this.messages}update(e){const t=this._changed(e,"expandUrlToMedia")||this._changed(e,"raw");if(super.update(e),t)for(let r of this.messages)r.embeds=r.hasBeenSeen?this._embeds(r):[],r.html=mc(this.raw,r);return this}unshift(e){return[].unshift.apply(this.messages,this._fill(e)),this.update({messages:!0})}_changed(e,t){return Object.hasOwn(e,t)&&e[t]!==this[t]}_className(e,t){const r=["message"];e.type&&r.push("is-type-"+e.type),e.highlight&&r.push("is-highlighted");const o=e.from===t.from&&e.conversation_id===t.conversation_id&&e.connection_id===t.connection_id;return r.push(!e.dayChanged&&o?"has-same-from":"has-not-same-from"),r.join(" ")}_dayChanged(e,t){return!!(t.ts&&e.ts.getDate()!==t.ts.getDate())}_embeds(e){const t=[];return this._msgDetails(e)&&t.push(Promise.resolve({className:"le-details",details:!0,nodes:[Ny.jsonhtmlify(e.details).lastChild]})),!this.expandUrlToMedia||this.raw||e.type==="notice"?this._embedsPromises(t):((e.message.match(/https?:\/\/(\S+)/g)||[]).forEach(r=>{r=r.replace(/(\W)?$/,""),this.embedCache[r]||(this.embedCache[r]=this._loadEmbed(e,r)),t.push(this.embedCache[r])}),this._embedsPromises(t))}_embedsPromises(e){return e.map(t=>(t.finally(()=>this.update({messages:!0})),t.catch(r=>console.error("[Messages:embed]",r))))}_fill(e){for(let t=0;t<e.length;t++){const r=e[t];r.from||([r.internal,r.from]=[!0,"Convos"]),r.type||(r.type="notice"),r.color=r.from==="Convos"?"inherit":io(r.from.toLowerCase()),r.ts=new ir(r.ts),r.id=++Py}return e}_isProbablyConvosVideoLink(e){return!!e.match(/\/video\/[^/]+\/[^/]+($|\?)/)}async _loadEmbed(e,t){const o=(await Ct.op("embed",{url:t}).perform()).res.body;if(o.nodes=[],o.provider=(o.provider_name||"").toLowerCase(),!o.html)return o;let s=document.createRange().createContextualFragment(o.html).firstChild;return s&&(s=this._renderVideoChat(e,o,s)||this._renderPaste(e,o,s)||s,hr(s,"img",["error",i=>i.target.style.display="none"]),hr(s,".le-goto-link",i=>i.parentNode.children.length===1&&i.parentNode.remove()),delete o.html,o.className=s.className,o.nodes=s.tagName.toLowerCase()==="iframe"?[s]:[].slice.call(s.childNodes,0)),o}_msgDetails(e){if(Object.hasOwn(e,"details"))return e.details;if(e.type!=="error"&&e.type!=="notice")return e.details=null;const t={...e.sent||e};return["bubbles","className","command","connection_id","dispatchTo","color","dayChanged","hasBeenSeen","embeds","event","fresh","highlight","html","id","index","internal","method","silent","stopPropagation","ts"].forEach(r=>delete t[r]),Object.keys(t).sort().join(":")==="from:message:type"?e.details=null:e.details=t}_renderPaste(e,t,r){const o=r.querySelector("pre");if(!o)return;const s=r.querySelector(".le-meta");return s&&s.appendChild(Bu("a",{className:"prevent-default",href:"#action:expand:"+e.index,innerHTML:'<i class="fas fa-angle-down"/>'})),ar.lineNumbersBlock(o),r}_renderVideoChat(e,t,r){const o=new URL(t.url).pathname.replace(/\/+$/,"").split("/");if(!(o.length&&(r.classList.contains("le-video-chat")||this._isProbablyConvosVideoLink(t.url))))return;const d=decodeURIComponent(o.slice(-1)[0]).replace(/\s-\s[\w-]+$/,"").replace(/[_.-]+/g," ").replace(/([a-z ])([A-Z])/g,(f,m,x)=>m+" "+x.toUpperCase()).replace(/((?:^|[ ])\w)/g,f=>f.toUpperCase()),h=kt.l('Do you want to join the %1 video chat with "%2"?',t.provider_name,d);return r=document.createElement("div"),r.className="le-card le-rich le-join-request le-provider-"+t.provider,r.innerHTML='<a class="le-thumbnail" href="'+t.url+'" target="convos_video"><i class="fas fa-video"></i></a><h3>'+h+'</h3><p class="le-description"><a href="'+t.url+'" target="convos_video">'+kt.l("Yes, I want to join.")+"</a></p>",e.fresh&&this.emit("notify",{...e,message:h}),r}}class My extends Pr{constructor(){super(),this.prop("ro","length",()=>this._map.size),this.prop("ro","_map",new Map)}clear(){const e=this.me();return this._map.clear(),this.add(e),this}delete(e){return this._map.delete(this._id(e)),this.update({})}get(e){return this._map.get(this._id(e))}has(e){return this._map.has(this._id(e))}me(){return Array.from(this._map.values()).filter(e=>e.me)[0]||this._defaultParticipant()}nicks(){return Array.from(this._map.values()).map(e=>e.nick)}rename(e,t){const r=this.get(e)||{};return delete r.id,r.nick=t,this.delete(e),this.add(r)}add(e){if(Array.isArray(e))return e.forEach(r=>this.add(r)),this;e.id=this._id(e.nick),e.color=io(e.id),e.group=io(e.id),tt.string(e.mode)?(e.modes=yi(sh,e.mode),e.group=e.modes.founder?7:e.modes.admin?6:e.modes.operator?5:e.modes.half_operator?4:e.modes.voice?3:e.modes.bot?2:e.modes.service_bot?1:0):(e.modes={},e.group=0);const t=this._map.get(e.id);return t&&Object.keys(t).forEach(r=>e[r]||(e[r]=t[r])),e.nick||(e.nick=e.name),this._map.set(e.id,e),this.update({length:!0})}toArray(){return Array.from(this._map.values()).sort((e,t)=>t.group-e.group||e.nick.localeCompare(t.nick))}_defaultParticipant(){return{color:"#000000",id:"",modes:{},nick:""}}_id(e){return e.toLowerCase()}}const Vn=_a("socket"),ua=n=>ua.singletons[n]||(ua.singletons[n]=new Ly);ua.singletons={};const za=[];za[WebSocket.CONNECTING]="connecting";za[WebSocket.OPEN]="open";za[WebSocket.CLOSING]="closing";za[WebSocket.CLOSED]="closed";class Ly extends Pr{constructor(){super(),this.prop("ro","readyState",()=>this.ws.readyState),this.prop("ro","readyStateHuman",()=>za[this.ws.readyState]),this.prop("ro","waiting",new Map),this.prop("rw","closed",0),this.prop("rw","error",""),this.prop("rw","keepaliveInterval",1e4),this.prop("rw","url",""),this.id=0,this.queue=[],this.keepClosed=!0,this._resetWebSocket()}close(e,t){return typeof e!="number"&&([e,t]=[1e3,e]),this.ws.close&&this.ws.close(e,t),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}deflateMessage(e){return JSON.stringify(e)}deleteWaitingMessage(e){this.waiting.delete(e),this.update({waiting:!0})}getWaitingMessages(e){return arguments.length===0?Array.from(this.waiting.values()):e.map(t=>this.waiting.get(t))}inflateMessage(e){return JSON.parse(e)}is(e){return this.ws.readyState===WebSocket[e.toUpperCase()]}open(){if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=e=>this._onClose(e),this.ws.onerror=e=>this._onError(e),this.ws.onmessage=e=>this._onMessage(e),this.ws.onopen=e=>this._onOpen(e),this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(e){this._onError(e.message?e:{message:String(e)})}return this}reconnectIn(e){return e.code===1008||e.code===1011?!1:this.closed<=1?1e3:this.closed>5?1e4:1e3*(this.closed*2)}send(e,t){const r=e.id||String(++this.id);return this.queue.push({...e,id:r}),this.open(),this._dequeue(),t&&this.on("message_"+r,t),this}_dequeue(){const e=this.queue;for(e.length&&this.update({waiting:!0});e.length;){if(this.ws.readyState!==WebSocket.OPEN)return;const t=e.shift();Vn.trace("<<<",t),this.ws.send(this.deflateMessage(t)),t.waitingForResponse=!0,t.ts||(t.ts=new ir),this.waiting.set(t.id,t)}}_keepAliveStart(){this._keepAliveStop(),this.keepaliveTid=setInterval(()=>this.ws.readyState===WebSocket.OPEN&&this.ws.send("{}"),this.keepaliveInterval)}_keepAliveStop(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}_onClose(e){Vn.debug("close",e);for(let[t,r]of this.waiting)Object.keys(r).length<=1&&this.waiting.delete(t),r.waitingForResponse=!1;this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(e))}_onError(e){let t=String(e.message||e);(!t||t.indexOf("[")===0)&&(t="Could not connect."),Vn.error("error",t,e),this.update({error:t})}_onMessage(e){const t=this.inflateMessage(e.data);if(Vn.trace(">>>",t),t.bubbles=!0,t.stopPropagation=()=>{t.bubbles=!1},t.id&&(this.emit("message_"+t.id,t),this.waiting.delete(t.id)),t.bubbles&&this.emit("message",t),this.update({waiting:!0}),!(!t.errors||t.id)){for(let r of this.waiting.keys())this.emit("message_"+r,t);this.waiting.clear()}}_onOpen(e){Vn.info("open",e),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}_reconnectStart(e){if(this._reconnectStop(),Vn.info("reconnect in",e),e===!0)return this.open();if(typeof e!="number")return this.keepClosed=!0;this.reconnectTid=setTimeout(()=>this.open(),e)}_reconnectStop(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}_resetWebSocket(){this.ws={readyState:WebSocket.CLOSED}}}const Dy=new RegExp("^[#&]");class Pa extends Pr{constructor(e){super();const t=[e.connection_id,e.conversation_id,""].filter(tt.defined).join(":");this.prop("persist","userInput","",{key:t+"userInput"}),this.prop("ro","color",io(e.conversation_id||e.connection_id||"")),this.prop("ro","connection_id",e.connection_id||""),this.prop("ro","messages",new Iy(e)),this.prop("ro","participants",new My),this.prop("ro","path",Ze.conversationPath(e)),this.prop("rw","historyStartAt",null),this.prop("rw","historyStopAt",null),this.prop("rw","info",e.info||{}),this.prop("rw","modes",{}),this.prop("rw","name",e.name||e.conversation_id||e.connection_id||"ERR"),this.prop("rw","notifications",e.notifications||0),this.prop("rw","status","pending"),this.prop("rw","topic",e.topic||""),this.prop("rw","unread",e.unread||0),Object.hasOwn(e,"conversation_id")?(this.prop("ro","conversation_id",e.conversation_id),this.prop("ro","title",()=>[this.name,this.connection_id.replace(/^\w+-/,"")].join(" - ")),this.prop("rw","frozen",e.frozen||"")):(this.prop("ro","frozen",()=>this._calculateFrozen()),this.prop("ro","title",()=>this.name)),e.conversation_id&&this.prop("persist","wantNotifications",this.is("private"),{key:e.conversation_id+":wantNotifications"}),this.socket=e.socket||ua("/events"),this.messages.on("notify",r=>this.notify(r)),this._addOperations()}addMessages(e,t){if(!Array.isArray(e)){if(this._maybeIncreaseUnread(e),this._maybeNotify(e),!this.historyStopAt&&["action","private"].indexOf(e.type)!==-1)return;e.fresh=!0,e=[e]}return this.messages[t||"push"](e),this}is(e){return e==="connection"?!this.conversation_id:e==="conversation"?this.conversation_id&&!this.is("notifications"):e==="frozen"?this.frozen&&!0:e==="locked"?this.frozen==="Invalid password.":e==="not_found"?this.frozen==="Not found.":e==="notifications"?!1:e==="pending"?this.frozen.match(/pending invitation/i):e==="private"?this.conversation_id&&!Dy.test(this.conversation_id)||!1:e==="search"?!1:e==="unread"?this.unread&&!0:this.status===e}async load(e={}){if(this._skipLoad(e))return this;this.update({status:"loading"}),e.limit||(e.limit=40);const t={...e,connection_id:this.connection_id,conversation_id:this.conversation_id};await this.messagesOp.perform(t),this.update({status:this.messagesOp.status});const r=this.messagesOp.res.body;r.messages||(r.messages=[]);const o=[];return(e.around||!e.after&&!e.before)&&(o.push.apply(o,this.messages.toArray().filter(s=>s.internal)),this.messages.clear()),this.addMessages(r.messages,e.before?"unshift":"push"),this.addMessages(o,"push"),this._setEndOfStream(e,r),this}notify(e){if(nr.appHasFocus)return;const t=e.from===this.name?e.from:kt.l("%1 in %2",e.from,this.name);this.lastNotification=nr.show(e.message,{path:this.path,title:t})}send(e,t){return tt.string(e)&&(e={message:e}),this.socket.send({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||"",...e},t)}async markAsRead(){if(this.markAsReadOp)return this.update({notifications:0}),await this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id}),this}update(e){return this._loadInformation(),super.update(e),(Object.hasOwn(e,"notifications")||Object.hasOwn(e,"unread"))&&this.emit("unread",e),this}wsEventMode(e){const t=["banlist","exceptlist","invitelist","quietlist"].filter(r=>e[r])[0];if(t){const r=e[t].length,o=r===1?"entry":"entries";this.addMessages({...e,message:"%1 has %2 "+o+" in %3.",vars:[this.name,r,kt.l(t)]})}else e.nick?(this.participants.add({nick:e.nick,mode:e.mode}),this.addMessages({...e,message:"%1 got mode %2 from %3.",vars:[e.nick,e.mode,e.from]})):e.mode_changed?(this.addMessages({...e,message:"%1 received mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,yi(Qn,e.mode))})):(this.addMessages({...e,message:"%1 got mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,yi(Qn,e.mode))}))}wsEventNickChange(e){if(!this.participants.has(e.old_nick)||e.old_nick===e.new_nick)return;this.participants.rename(e.old_nick,e.new_nick);const t=e.type==="me"?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessages({message:t,vars:[e.old_nick,e.new_nick]})}wsEventPart(e){const t=this.participants.get(e.nick);!t||t.me||(this.participants.delete(e.nick),this.update({participants:!0}),e.silent||this.addMessages(this._partMessage(e)))}wsEventSentClear(e){e.errors||(this.messages.clear(),this.addMessages({message:"History was cleared for %1.",vars:[this.name]}))}wsEventSentNames(e){this.participants.add(e.participants);const t={...e,message:"Participants (%1): %2",vars:[]},r=this.participants.nicks();r.length>1&&(t.message+=" and %3.",t.vars[2]=r.pop()),t.vars[0]=r.length,t.vars[1]=r.join(", "),this.addMessages(t)}wsEventSentTopic(e){const t=e.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessages({message:t,vars:[this.name,e.topic]}),this.update({topic:e.topic})}_addOperations(){this.prop("ro","messagesOp",Ct.op("conversationMessages")),this.prop("ro","markAsReadOp",Ct.op("markConversationAsRead"))}_calculateFrozen(){return""}_loadInformation(){if(!(this.participantsLoaded||!this.conversation_id||!this.messagesOp)&&!(this.is("frozen")||!this.messagesOp.is("success")))if(this.participantsLoaded=!0,this.is("private")){if(this.info.ts&&this.info.ts>new ir().toEpoch()-300)return;this.send("/whois "+this.conversation_id,e=>{e.stopPropagation(),this.update({frozen:e.errors&&e.errors.length?e.errors[0].message:""})})}else this.send("/names "+this.conversation_id,e=>{e.stopPropagation(),this.participants.clear(),e.participants&&this.participants.add(e.participants)})}_maybeIncreaseUnread(e){if(!e.from||e.yourself)return this;if(["action","error","private"].indexOf(e.type)===-1)return this;this.update({unread:this.unread+1})}_maybeNotify(e){!e.from||e.yourself||["action","error","private"].indexOf(e.type)!==-1&&(!e.highlight&&!this.wantNotifications||this.notify(e))}_noop(){}_partMessage(e){const t={message:"%1 parted.",vars:[e.nick]};return e.kicker?(t.message="%1 was kicked by %2"+(e.message?": %3":""),t.vars.push(e.kicker),t.vars.push(e.message)):e.message&&(t.message+=" Reason: %2",t.vars.push(e.message)),t}_setEndOfStream(e,t){if(!e.before&&!t.after){const r=t.messages.slice(-1)[0];this.update({historyStopAt:new ir(r&&r.ts)})}if(!e.after&&!t.before){const r=t.messages[0];this.update({historyStartAt:new ir(r&&r.ts)})}t.after&&this.update({historyStopAt:null}),t.before&&this.update({historyStartAt:null}),t.messages&&t.messages.length<=1&&this.update({historyStartAt:new ir,historyStopAt:new ir})}_skipLoad(e){return!this.messagesOp||this.is("loading")?!0:this.messages.length?e.around?!!this.messages.toArray().find(t=>t.ts.toISOString()===e.around):!!(e.before&&this.historyStartAt||e.after&&this.historyStopAt):this.is("success")}}const Uy=(n,e)=>n.name.localeCompare(e.name);class sd extends Map{constructor(e=[],t={}){super(e),this.sorter=t.sorter||Uy,this._sort()}filter(e){return Array.from(this.values()).filter(e)}set(e,t){super.set.call(this,e,t),this._sort()}toArray(){return Array.from(this.values())}_sort(){const e=Array.from(this.entries()),t=this.sorter;return this.clear(),e.sort((r,o)=>t(r[1],o[1])).forEach(([r,o])=>super.set.call(this,r,o)),e}}const Fy=(n,e)=>n.is("private")-e.is("private")||n.name.localeCompare(e.name);class bc extends Pa{constructor(e){super(e),this.prop("rw","certificate",{}),this.prop("ro","conversations",new sd([],{sorter:Fy})),this.prop("rw","on_connect_commands",e.on_connect_commands||[]),this.prop("rw","state",e.state||"disconnected"),this.prop("rw","wanted_state",e.wanted_state||"connected"),this.prop("rw","url",tt.string(e.url)?new wn(e.url):e.url||new wn("irc://localhost"));const t=this.url.searchParams.get("nick")||"guest";this.prop("rw","nick",t),this.prop("rw","real_host",this.url.hostname),this.prop("rw","server_op",!1),e.info&&this.wsEventInfo(e.info)}ensureConversation(e){let t=this.conversations.get(e.conversation_id);return t?t.update(e):(!e.frozen&&this.frozen&&(e.frozen=this.frozen),t=new Pa({...e,connection_id:this.connection_id}),t.on("message",r=>this.emit("message",r)),t.on("update",()=>this.update({conversations:!0})),t.on("unread",()=>this.emit("unread")),e.frozen||this._addDefaultParticipants(t),this.conversations.set(t.conversation_id,t),this.update({conversations:!0}),this.emit("conversationadd",t),t)}findConversation(e){return this.conversations.get(e.conversation_id)||null}is(e){return this.state===e||super.is(e)}removeConversation(e){const t=this.findConversation(e)||e;return this.conversations.delete(t.conversation_id),this.emit("conversationremove",t),this.update({conversations:!0})}send(e){tt.string(e)&&(e={message:e});const t=new RegExp("^"+this.participants.toArray().map(r=>ba(r.id)).join("|")+":","i");return e.message.indexOf("/")!==0&&!e.message.match(t)&&(e.message="/quote "+e.message),super.send(e)}update(e){return e.url&&tt.string(e.url)&&(e.url=new wn(e.url)),super.update(e)}wsEventSentAway(e){(this.findConversation(e)||this).addMessages({message:e.reason,sent:e,type:"notice"})}wsEventConnection(e){this.update({state:e.state})}wsEventFrozen(e){const t=this.findConversation(e),r=t&&t.frozen,o=this.ensureConversation(e);!e.frozen&&r&&t.addMessages({message:"Connected.",vars:[]}),e.frozen||o.participants.add({nick:this.nick,me:!0}),e.frozen&&o.is("pending")&&nr.show(e.frozen,{title:e.name})}wsEventInfo(e){e.nick&&this.wsEventNickChange(e),e.server_op&&this.addMessages({message:"You are an IRC operator.",vars:[],highlight:!0}),e.real_host&&this.participants.add({nick:e.real_host}),this.update(e)}wsEventMessage(e){return e.yourself=e.from===this.nick,e.conversation_id?this.ensureConversation(e).addMessages(e):this.addMessages(e)}wsEventNickChange(e){const t={old_nick:e.old_nick||this.nick,new_nick:e.new_nick||e.nick,type:e.type};e.old_nick===this.nick&&(t.me=!0),super.wsEventNickChange(t),this.conversations.forEach(r=>r.wsEventNickChange(t))}wsEventError(e){const t={message:Fi(e)||e.frozen||"Unknown error from %1.",sent:e,type:"error",vars:e.command||[e.message]},r=(e.message||"").match(/^\/j(oin)? (\S+)/);if(r)return this.ensureConversation({...e,conversation_id:r[2]});const o=e.conversation_id&&e.frozen?this.ensureConversation(e):this.findConversation(e)||this;console.error(o.conversation_id,t),o.addMessages(t)}wsEventJoin(e){const t=this.ensureConversation({connection_id:e.connection_id,conversation_id:e.conversation_id}),r=e.nick||this.nick;r!==this.nick&&!e.silent&&t.addMessages({message:"%1 joined.",vars:[r]}),t.participants.add({nick:r})}wsEventPart(e){if(e.nick===this.nick)return this.removeConversation(e);e.conversation_id||this.conversations.forEach(t=>t.wsEventPart(e))}wsEventQuit(e){this.wsEventPart(e)}wsEventSentJoin(e){this.wsEventJoin(e)}wsEventSentList(e){const t=e.args||"/*/";this.addMessages(e.done?{message:"Found %1 of %2 conversations from %3.",vars:[e.conversations.length,e.n_conversations,t]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[e.conversations.length,e.n_conversations,t]})}wsEventSentMode(e){const t=this.findConversation(e);return t?t.wsEventMode(e):this.addMessages({message:"%1 received mode %2.",vars:[e.target,e.mode]})}wsEventSentQuery(e){this.ensureConversation(e)}wsEventSentWhois(e){const[t,...r]=wi(e);(this.findConversation(e)||this).addMessages({message:t,vars:r,sent:e})}wsEventSentNames(){}_addDefaultParticipants(e){const t=[{nick:this.nick,me:!0}];e.is("private")&&t.push({nick:e.name}),e.participants.add(t)}_addOperations(){this.prop("ro","markAsReadOp",Ct.op("markConnectionAsRead")),this.prop("ro","messagesOp",Ct.op("connectionMessages"))}_calculateFrozen(){switch(this.state){case"connected":return"";case"connecting":return"Connecting...";case"disconnected":return"Disconnected.";case"disconnecting":return"Disconnecting...";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}class By extends Pr{constructor(e){super(e),this.prop("ro","op",Ct.op("listConnectionProfiles")),this.prop("rw","profiles",[]),this.prop("rw","status","pending")}find(e){return this.search(t=>t.id===e)[0]}defaultProfile(){return{conversation_id:"",host:"",is_default:!1,is_forced:!0,max_bulk_message_size:3,max_message_length:512,service_accounts:"chanserv, nickserv",skip_queue:!1,tls:!0,tls_verify:!0,webirc_password:"",url:new wn("irc://0.0.0.0")}}is(e){return this.status===e}async load(e={}){return this.is("loading")?this:!e.force&&this.profiles.length?this:(this.update({status:"loading"}),await this.op.perform(),this.update({status:this.op.status}),this.is("success")&&this.update({profiles:this.op.res.body.profiles.map(t=>this._expand(t))}),this)}search(e=()=>!0){return this.profiles.filter(e)}_expand(e){e.url=new wn(e.url),e.service_accounts=e.service_accounts.join(", "),e.url.toFields(e);const t=this.defaultProfile();return Object.keys(t).forEach(r=>Object.hasOwn(e,r)||(e[r]=t[r])),e}}class qy extends Pa{constructor(e){super({...e,connection_id:"",conversation_id:"notifications",name:"Notifications"})}addMessages(e){return Array.isArray(e)||(e=[e]),this.messages.push(e),this}async markAsRead(){return await super.markAsRead(),this.emit("cleared"),this}is(e){return e==="notifications"?!0:super.is(e)}send(e={}){return Promise.resolve(e)}_addOperations(){this.prop("ro","markAsReadOp",Ct.op("markNotificationsAsRead")),this.prop("ro","messagesOp",Ct.op("notificationMessages"))}_skipLoad(){return!1}}class jy extends Pa{constructor(e){super({...e,connection_id:"",conversation_id:"search",name:"Search"}),this.prop("rw","query",""),this.update({status:"success"})}is(e){return e==="conversation"?!1:e==="search"?!0:super.is(e)}async load(e={}){if(this.is("loading"))return this;const t={...e};if(t.match=e.match||e.message,!(t.match||"").match(/\S/))return this.messages.clear().push([{message:'Search query "%1" does not contain anything to search for.',vars:[e.message]}]);this.update({query:t.match,status:"loading"}),this.messages.clear(),await this.messagesOp.perform(t);const r=this.messagesOp.res.body;return this.messages[t.before?"unshift":"push"](r.messages||[]),this.update({status:this.messagesOp.status})}send(e){return tt.string(e)&&(e={message:e}),this.emit("send",e),Promise.resolve(e)}_addOperations(){this.prop("ro","messagesOp",Ct.op("searchMessages")),this.prop("ro","markAsReadOp",null)}_loadInformation(){}}var qs,yc;function zy(){if(yc)return qs;yc=1;function n(e,t,r){var o=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++o<s;)i[o]=e[o+t];return i}return qs=n,qs}var js,$c;function Hy(){if($c)return js;$c=1;var n=zy();function e(t,r,o){var s=t.length;return o=o===void 0?s:o,!r&&o>=s?t:n(t,r,o)}return js=e,js}var zs,wc;function id(){if(wc)return zs;wc=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=e+t+r,s="\\ufe0e\\ufe0f",i="\\u200d",d=RegExp("["+i+n+o+s+"]");function h(f){return d.test(f)}return zs=h,zs}var Hs,xc;function Wy(){if(xc)return Hs;xc=1;function n(e){return e.split("")}return Hs=n,Hs}var Ws,Ec;function Gy(){if(Ec)return Ws;Ec=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=e+t+r,s="\\ufe0e\\ufe0f",i="["+n+"]",d="["+o+"]",h="\\ud83c[\\udffb-\\udfff]",f="(?:"+d+"|"+h+")",m="[^"+n+"]",x="(?:\\ud83c[\\udde6-\\uddff]){2}",$="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",p=f+"?",u="["+s+"]?",_="(?:"+g+"(?:"+[m,x,$].join("|")+")"+u+p+")*",w=u+p+_,E="(?:"+[m+d+"?",d,x,$,i].join("|")+")",P=RegExp(h+"(?="+h+")|"+E+w,"g");function I(k){return k.match(P)||[]}return Ws=I,Ws}var Gs,Sc;function Ky(){if(Sc)return Gs;Sc=1;var n=Wy(),e=id(),t=Gy();function r(o){return e(o)?t(o):n(o)}return Gs=r,Gs}var Ks,kc;function Vy(){if(kc)return Ks;kc=1;var n=Hy(),e=id(),t=Ky(),r=qa();function o(s){return function(i){i=r(i);var d=e(i)?t(i):void 0,h=d?d[0]:i.charAt(0),f=d?n(d,1).join(""):i.slice(1);return h[s]()+f}}return Ks=o,Ks}var Vs,Ac;function Yy(){if(Ac)return Vs;Ac=1;var n=Vy(),e=n("toUpperCase");return Vs=e,Vs}var Ys,Oc;function Zy(){if(Oc)return Ys;Oc=1;var n=qa(),e=Yy();function t(r){return e(n(r).toLowerCase())}return Ys=t,Ys}var Zs,Cc;function Jy(){if(Cc)return Zs;Cc=1;function n(e,t,r,o){var s=-1,i=e==null?0:e.length;for(o&&i&&(r=e[++s]);++s<i;)r=t(r,e[s],s,e);return r}return Zs=n,Zs}var Js,Tc;function Xy(){if(Tc)return Js;Tc=1;function n(e){return function(t){return e==null?void 0:e[t]}}return Js=n,Js}var Xs,Nc;function Qy(){if(Nc)return Xs;Nc=1;var n=Xy(),e={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},t=n(e);return Xs=t,Xs}var Qs,Rc;function e1(){if(Rc)return Qs;Rc=1;var n=Qy(),e=qa(),t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,r="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",i=r+o+s,d="["+i+"]",h=RegExp(d,"g");function f(m){return m=e(m),m&&m.replace(t,n).replace(h,"")}return Qs=f,Qs}var ei,Pc;function t1(){if(Pc)return ei;Pc=1;var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function e(t){return t.match(n)||[]}return ei=e,ei}var ti,Ic;function r1(){if(Ic)return ti;Ic=1;var n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function e(t){return n.test(t)}return ti=e,ti}var ri,Mc;function n1(){if(Mc)return ri;Mc=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",o=e+t+r,s="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",d="\\xac\\xb1\\xd7\\xf7",h="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",f="\\u2000-\\u206f",m=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",x="A-Z\\xc0-\\xd6\\xd8-\\xde",$="\\ufe0e\\ufe0f",g=d+h+f+m,p="['’]",u="["+g+"]",_="["+o+"]",w="\\d+",E="["+s+"]",P="["+i+"]",I="[^"+n+g+w+s+i+x+"]",k="\\ud83c[\\udffb-\\udfff]",Y="(?:"+_+"|"+k+")",ue="[^"+n+"]",L="(?:\\ud83c[\\udde6-\\uddff]){2}",X="[\\ud800-\\udbff][\\udc00-\\udfff]",te="["+x+"]",ve="\\u200d",ne="(?:"+P+"|"+I+")",q="(?:"+te+"|"+I+")",W="(?:"+p+"(?:d|ll|m|re|s|t|ve))?",J="(?:"+p+"(?:D|LL|M|RE|S|T|VE))?",$e=Y+"?",ye="["+$+"]?",Q="(?:"+ve+"(?:"+[ue,L,X].join("|")+")"+ye+$e+")*",le="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Re=ye+$e+Q,se="(?:"+[E,L,X].join("|")+")"+Re,ie=RegExp([te+"?"+P+"+"+W+"(?="+[u,te,"$"].join("|")+")",q+"+"+J+"(?="+[u,te+ne,"$"].join("|")+")",te+"?"+ne+"+"+W,te+"+"+J,xe,le,w,se].join("|"),"g");function de(we){return we.match(ie)||[]}return ri=de,ri}var ni,Lc;function a1(){if(Lc)return ni;Lc=1;var n=t1(),e=r1(),t=qa(),r=n1();function o(s,i,d){return s=t(s),i=d?void 0:i,i===void 0?e(s)?r(s):n(s):s.match(i)||[]}return ni=o,ni}var ai,Dc;function o1(){if(Dc)return ai;Dc=1;var n=Jy(),e=e1(),t=a1(),r="['’]",o=RegExp(r,"g");function s(i){return function(d){return n(t(e(d).replace(o,"")),i,"")}}return ai=s,ai}var oi,Uc;function s1(){if(Uc)return oi;Uc=1;var n=Zy(),e=o1(),t=e(function(r,o,s){return o=o.toLowerCase(),r+(s?n(o):o)});return oi=t,oi}var i1=s1();const l1=ma(i1);class c1 extends Pr{constructor(e){super(),this.prop("ro","connections",new sd),this.prop("ro","connectionProfiles",new By),this.prop("ro","notifications",new qy({})),this.prop("ro","search",new jy({})),this.prop("ro","roles",new Set),this.prop("persist","expandUrlToMedia",!0),this.prop("persist","ignoreStatuses",!1),this.prop("persist","lastUrl",""),this.prop("rw","activeConversation",this.notifications),this.prop("rw","avatarId",null),this.prop("rw","email",""),this.prop("rw","forced_connection",!1),this.prop("rw","default_connection","irc://irc.libera.chat:6697/%23convos"),this.prop("rw","highlightKeywords",[]),this.prop("rw","id",""),this.prop("rw","status","pending"),this.prop("rw","unreadIncludePrivateMessages",!1),this.socket=e.socket||ua("/events"),this.socket.on("message",t=>this._dispatchMessage(t)),this.socket.on("update",t=>this._onConnectionChange(t)),this.notifications.on("cleared",()=>this._calculateUnread("clear")),this._calculateUnreadDebounced=Gi(this._calculateUnread,25)}conversations(e){const t=[];return this.connections.toArray().forEach(r=>{r.conversations.toArray().forEach(o=>{(!e||e(o))&&t.push(o)})}),t}ensureConversation(e,t){if(e.conversation_id){const o=this.ensureConversation({connection_id:e.connection_id},!0);return this._maybeUpgradeActiveConversation(o.ensureConversation(e))}let r=this.findConversation(e);return r?r.update(e):(r=new bc({...e}),r.on("conversationadd",o=>this._maybeUpgradeActiveConversation(o)),r.on("conversationremove",o=>o===this.activeConversation&&this.setActiveConversation(o)),r.on("update",()=>this.update({connections:!0})),r.on("unread",()=>this._calculateUnreadDebounced()),this.connections.set(r.connection_id,r),this.update({connections:!0}),t?r:this._maybeUpgradeActiveConversation(r))}findConversation(e){const t=this.connections.get(e.connection_id);return e.conversation_id?t&&t.findConversation(e)||null:t}is(e){return Array.isArray(e)?!!e.filter(t=>this.is(t)).length:this.roles.has(e)?!0:this.status===e}async load(){if(this.is("loading"))return this;this.roles.clear(),this.update({status:"loading"});const t=await new Promise(o=>this.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}},o));if(t.errors)return this.update({email:"",roles:!0,status:t.errors?"error":"success"});const r=t.user||{};return this.connections.clear(),(r.connections||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(r.conversations||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(r.roles||[]).forEach(o=>this.roles.add(o)),this.notifications.update({unread:r.unread||0}),lo.fromString(r.video_service||""),this.update({avatarId:Object.hasOwn(r,"avatar_id")?r.avatar_id:null,email:r.email||"",default_connection:r.default_connection||"",forced_connection:r.forced_connection||!1,highlightKeywords:r.highlight_keywords||[],roles:!0,status:t.errors?"error":"success",id:r.uid||""})}removeConversation(e){const t=this.findConversation({connection_id:e.connection_id});if(e.conversation_id)return t&&t.removeConversation(e);this.connections.delete(e.connection_id),t===this.activeConversation&&this.setActiveConversation(t),this.update({connections:!0})}setActiveConversation(e){let t=!e.connection_id&&!e.conversation_id&&this.notifications;if(t)return this.update({activeConversation:t});if(t=this.findConversation(e),t)return this.update({activeConversation:t});const r={...e,connection_id:e.connection_id||"",frozen:"Not found."};return["conversation_id","name"].forEach(o=>Object.hasOwn(e,o)&&(r[o]=e[o])),this.update({activeConversation:r.conversation_id?new Pa(r):new bc(r)})}update(e){return super.update(e),Object.hasOwn(e,"unreadIncludePrivateMessages")&&this._calculateUnreadDebounced(),this}_calculateUnread(e){let[t,r]=[0,0];for(const o of this.connections.toArray())for(const s of o.conversations.toArray())e&&s.update({notifications:0}),t+=s.is("private")?this.unreadIncludePrivateMessages?s.unread:0:s.notifications,r+=s.is("private")?0:s.notifications;e||(this.notifications.update({notifications:t,unread:r}),this.update({notifications:!0}))}_dispatchMessage(e){e.dispatchTo=l1("wsEvent_"+this._getEventNameFromMessage(e)),e.silent=this.ignoreStatuses,this.emit(e.dispatchTo,e);const t=this.findConversation({connection_id:e.connection_id});if(!t||(t[e.dispatchTo]&&t[e.dispatchTo](e),!e.bubbles))return;const r=t.findConversation(e);r&&r[e.dispatchTo]&&r[e.dispatchTo](e),e.highlight&&!r.is("private")&&(this.notifications.addMessages(e),r===this.activeConversation&&nr.appHasFocus?r.markAsRead():r.update({notifications:r.notifications+1}))}_getEventNameFromMessage(e){return e.errors?"error":e.event==="state"?e.type:e.event==="sent"&&e.message.match(/\/\S+/)?(e.command=e.message.split(/\s+/).filter(t=>t.length),e.command[0]=e.command[0].substring(1),"sent_"+e.command[0].toLowerCase()):e.event}_maybeUpgradeActiveConversation(e){const t=this.activeConversation;return!e.conversation_id||e.connection_id&&e.connection_id!==t.connection_id||e.conversation_id&&e.conversation_id!==t.conversation_id||this.update({activeConversation:e}),e}_onConnectionChange(e){if(e.is("open")&&this.is("pending"))return this.load();e.is("closed")&&(this.connections.forEach(t=>t.update({state:"unreachable"})),this.is(["error","loading"])||this.update({status:"pending"}))}}var u1=S('<a href="#hide" class="overlay">&nbsp;</a>'),d1=S("<!> <!> <!>",1);function f1(n,e){wt(e,!1);const t=()=>Oe(m,"$themeManager",d),r=()=>Oe(Ze,"$route",d),o=()=>Oe(x,"$user",d),s=()=>Oe(Sn,"$viewport",d),i=()=>Oe(xr,"$activeMenu",d),[d,h]=Lt(),f=ua("/events"),m=new Fb().start(),x=new c1({});let $=Ze.path,g=Ee(0),p={closed:!0},u=Ee(kt.l("Chat"));f.update({debug:"WebSocket"}),window.convosWebSockeet=f,Ct.url(Ze.urlFor("/api")),Ze.update({baseUrl:it("base_url"),enabled:!0}),f.update({url:Ze.wsUrlFor("/events")}),x.on("wsEventSentJoin",L=>Ze.go(Ze.conversationPath(L))),w().catch(L=>console.error("[serviceWorker]",L)),Do("socket",f),Do("themeManager",m),Do("user",x),nr.on("click",L=>L.path&&Ze.go(L.path)),f.on("update",P),kt.load().then(()=>x.load());function _(L,X){if(!document)return;const te=it("organization_name"),ve=X.notifications.notifications?"("+X.notifications.notifications+") ":"";document.title=te==="Convos"?kt.l("%1 - Convos",ve+kt.l(L)):kt.l("%1 - Convos for %2",ve+kt.l(L),te)}async function w(){if(!navigator.serviceWorker)return{};const L=await navigator.serviceWorker.register(Ze.urlFor("/sw.js")),X=await fetch(Ze.urlFor("/sw/info")),te=X.status==200&&await X.json()||{mode:"",version:"0.00"};if(te.version==it("version"))return{};console.info("[serviceWorker.update]",it("version"),te),L.update()}async function E(L,X){X.email&&kt.emojis.load(),ea[X.email?"add":"remove"]("notify"),await Ca();const te=X.is(["loading","pending"])||document.querySelector(".cms-main")?"cms":"app";if(document.body.className=document.body.className.replace(/for-\w+/,"for-"+te),$!==L.path&&($=L.path,Du(xr,"")),L.pathParts.length===0){const ve=X.email?X.lastUrl||"/chat":"/login";L.go(ve,{replace:!0})}else X.email&&X.update({lastUrl:location.href})}function P(L){if(L.is("open"))return p.close&&p.close();const X=navigator.onLine===!1?kt.l("You seem to be offline."):L.error?kt.l(L.error):L.is("connecting")?kt.l("Connecting to Convos..."):kt.l("Connection to Convos is %1.",kt.l(L.readyStateHuman));p.body!==X&&(p.close&&p.close(),p=nr.showInApp(X,{closeAfter:-1,title:kt.l("Status")}))}Be(()=>t(),()=>{ea[t().compactDisplay?"add":"remove"]("compact-display")}),Be(()=>(r(),o()),()=>{E(r(),o())}),Be(()=>(a(u),o()),()=>{_(a(u),o())}),Be(()=>a(g),()=>{Sn.setWidth(a(g))}),Be(()=>s(),()=>{x.update({unreadIncludePrivateMessages:s().isSingleColumn})}),Mt(),Et();var I=ct();Qe("focus",Ci,()=>x.email&&f.open());var k=_e(I);{var Y=L=>{fc(L,{})},ue=L=>{var X=ct(),te=_e(X);{var ve=q=>{var W=d1(),J=_e(W);{var $e=se=>{{let ie=je(()=>(s(),a(g),l(()=>({duration:s().isSingleColumn?250:0,x:a(g)}))));Ub(se,{get transition(){return a(ie)}})}};me(J,se=>{i(),s(),l(()=>i()==="nav"||!s().isSingleColumn)&&se($e)})}var ye=v(J,2);{var Q=se=>{vg(se,{get connection_id(){return r(),l(()=>r().pathParts[1])},get conversation_id(){return r(),l(()=>r().pathParts[2])},get title(){return a(u)},set title(ie){K(u,ie)},$$legacy:!0})},le=se=>{var ie=ct(),de=_e(ie);{var we=j=>{V_(j,{get title(){return a(u)},set title(ee){K(u,ee)},$$legacy:!0})},Ce=j=>{var ee=ct(),z=_e(ee);{var M=T=>{E_(T,{get title(){return a(u)},set title(C){K(u,C)},$$legacy:!0})},F=T=>{var C=ct(),V=_e(C);{var D=Z=>{am(Z,{get title(){return a(u)},set title(fe){K(u,fe)},$$legacy:!0})},H=Z=>{var fe=ct(),R=_e(fe);{var B=ce=>{Hm(ce,{get title(){return a(u)},set title(Ae){K(u,Ae)},$$legacy:!0})},pe=ce=>{var Ae=ct(),Ie=_e(Ae);{var oe=G=>{km(G,{get title(){return a(u)},set title(Se){K(u,Se)},$$legacy:!0})},he=G=>{var Se=ct(),be=_e(Se);{var ge=Fe=>{Sg(Fe,{get title(){return a(u)},set title(N){K(u,N)},$$legacy:!0})},ae=Fe=>{var N=ct(),U=_e(N);{var Ue=Ve=>{_b(Ve,{get title(){return a(u)},set title(He){K(u,He)},$$legacy:!0})},Ke=Ve=>{var He=ct(),at=_e(He);{var ut=rt=>{r_(rt,{get connection_id(){return r(),l(()=>r().pathParts[2])},get title(){return a(u)},set title(mt){K(u,mt)},$$legacy:!0})},lt=rt=>{var mt=ct(),O=_e(mt);{var re=We=>{Xg(We,{get profile_id(){return r(),l(()=>r().pathParts[2])},get title(){return a(u)},set title(ot){K(u,ot)},$$legacy:!0})},ke=We=>{var ot=ct(),nt=_e(ot);{var De=Ge=>{f_(Ge,{get title(){return a(u)},set title(bt){K(u,bt)},$$legacy:!0})},Le=Ge=>{var bt=ct(),ft=_e(bt);{var pt=_t=>{ib(_t,{get title(){return a(u)},set title(St){K(u,St)},$$legacy:!0})},gt=_t=>{var St=ct(),Bt=_e(St);{var jt=Wt=>{pc(Wt,{get title(){return a(u)},set title(Xt){K(u,Xt)},$$legacy:!0})},Jt=Wt=>{fc(Wt,{get title(){return a(u)},set title(Xt){K(u,Xt)},$$legacy:!0})};me(Bt,Wt=>{r(),l(()=>r().path==="/login"||r().path==="/register")?Wt(jt):Wt(Jt,!1)},!0)}y(_t,St)};me(ft,_t=>{r(),l(()=>r().path==="/settings/users")?_t(pt):_t(gt,!1)},!0)}y(Ge,bt)};me(nt,Ge=>{r(),l(()=>r().path==="/settings/conversation")?Ge(De):Ge(Le,!1)},!0)}y(We,ot)};me(O,We=>{r(),l(()=>r().path.indexOf("/settings/connection-profile/")===0)?We(re):We(ke,!1)},!0)}y(rt,mt)};me(at,rt=>{r(),l(()=>r().path.indexOf("/settings/connection/")===0)?rt(ut):rt(lt,!1)},!0)}y(Ve,He)};me(U,Ve=>{r(),l(()=>r().path==="/settings/files")?Ve(Ue):Ve(Ke,!1)},!0)}y(Fe,N)};me(be,Fe=>{r(),l(()=>r().path==="/settings/connections")?Fe(ge):Fe(ae,!1)},!0)}y(G,Se)};me(Ie,G=>{r(),l(()=>r().path==="/settings/account")?G(oe):G(he,!1)},!0)}y(ce,Ae)};me(R,ce=>{r(),l(()=>r().path==="/settings")?ce(B):ce(pe,!1)},!0)}y(Z,fe)};me(V,Z=>{r(),l(()=>r().path==="/search")?Z(D):Z(H,!1)},!0)}y(T,C)};me(z,T=>{r(),l(()=>r().path==="/help")?T(M):T(F,!1)},!0)}y(j,ee)};me(de,j=>{r(),l(()=>r().path.indexOf("/chat")===0)?j(we):j(Ce,!1)},!0)}y(se,ie)};me(ye,se=>{r(),l(()=>r().path.match(/\/chat\/./))?se(Q):se(le,!1)})}var xe=v(ye,2);{var Re=se=>{var ie=u1();gr(3,ie,()=>ca,()=>({duration:200})),Qe("click",ie,()=>xr.set("")),y(se,ie)};me(xe,se=>{i(),s(),l(()=>i()&&s().haSingleColumn)&&se(Re)})}y(q,W)},ne=q=>{pc(q,{get title(){return a(u)},set title(W){K(u,W)},$$legacy:!0})};me(te,q=>{o(),l(()=>o().email)?q(ve):q(ne,!1)},!0)}y(L,X)};me(k,L=>{o(),l(()=>o().is(["loading","pending"]))?L(Y):L(ue,!1)})}Ff("innerWidth",L=>K(g,L)),y(n,I),xt(),h()}class p1 extends Pr{constructor(e){super(),this.prop("ro","domain",e.domain||"meet.jit.si"),this.prop("ro","email",e.email||""),this.prop("rw","nick",e.nick||""),this.prop("rw","roomName",e.roomName||"convos-default"),this.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),this.prop("persist","disableH264",!0,{key:"video:disableH264"}),this.prop("persist","resolution",720,{key:"video:resolution"})}async render(e){try{const t=[].slice.call(e.children,0);this.targetEl=e,this.jitsi=await this._load(),t.forEach(r=>r.remove()),e.className=e.className.replace(/cms-main/,"video-chat--wrapper"),document.querySelector(".cms-navbar").classList.add("is-full-width")}catch(t){console.error("[Jitsi]",{err:t});const r=document.querySelector(".video-error");r.querySelector("span").textContent=String(t).substring(0,350),r.classList.remove("hidden"),hr(document,".cms-main .fa-spin",o=>o.parentNode.classList.add("hidden"))}return this.jitsi?(document.addEventListener("keydown",t=>{t.code==="KeyC"&&this.jitsi.executeCommand("toggleChat"),t.code==="KeyD"&&this.jitsi.executeCommand("toggleShareScreen"),t.code==="KeyF"&&this.jitsi.executeCommand("toggleFilmStrip"),t.code==="KeyM"&&this.jitsi.executeCommand("toggleAudio"),t.code==="KeyR"&&this.jitsi.executeCommand("toggleRaiseHand"),t.code==="KeyV"&&this.jitsi.executeCommand("toggleVideo"),t.code==="KeyW"&&this.jitsi.executeCommand("toggleTileView"),t.code==="Space"&&this.jitsi.isAudioMuted().then(r=>r&&this.jitsi.executeCommand("toggleAudio"))}),document.addEventListener("keyup",t=>{t.code==="Space"&&this.jitsi.isAudioMuted().then(r=>r||this.jitsi.executeCommand("toggleAudio"))}),this):this}_configOverwrite(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}_interfaceConfigOverwrite(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar--wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}async _load(){return await ap("https://"+this.domain+"/external_api.js"),new JitsiMeetExternalAPI(this.domain,this._options())}_options(){const e={};return this.email&&(e.email=this.email),this.nick&&(e.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:e,height:"100%",width:"100%"}}}hr(document,"#hamburger_checkbox_toggle",n=>{n.checked=!1});hr(document,".js-close-window",n=>{n.addEventListener("click",e=>{window.opener&&(e.preventDefault(),setTimeout(()=>window.close(),1),window.opener.focus())})});if(document.querySelector('meta[name="convos:start_app"][content="chat"]'))document.querySelector(".footer--wrapper").remove(),document.querySelector(".cms-main").remove(),new f1({target:document.body});else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer--wrapper").remove();const n=document.querySelector(".cms-main");new p1(n.dataset).render(n)}else document.addEventListener("DOMContentLoaded",function(){hr(document,"pre",n=>ar.lineNumbersBlock(n))});document.addEventListener("keydown",function(n){n.keyCode==27&&(hr(document,".fullscreen",e=>e.click()),Fc()),n.keyCode==13&&n.shiftKey&&(n.preventDefault(),Fc("toggle"))});function Fc(n){if("ontouchstart"in window)return;const e=s=>{for(let i=0;i<s.length;i++){const d=document.querySelector(s[i]);if(d&&d.tabIndex!==-1)return d}return null},t=n&&e(["input.is-primary-menu-item","a.is-primary-menu-item"]),r=document.activeElement;if(qi(r,["a","input","textarea"])&&t&&r!==t)return t.focus();const o=e([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);if(o)return o.focus();if(t)return t.focus()}
